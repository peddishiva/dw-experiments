<!DOCTYPE html>
<html>
<head><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Exp - 2</title><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>




<style type="text/css">
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: var(--jp-cell-editor-active-background) }
.highlight { background: var(--jp-cell-editor-background); color: var(--jp-mirror-editor-variable-color) }
.highlight .c { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment */
.highlight .err { color: var(--jp-mirror-editor-error-color) } /* Error */
.highlight .k { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword */
.highlight .o { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator */
.highlight .p { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation */
.highlight .ch { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Multiline */
.highlight .cp { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Single */
.highlight .cs { color: var(--jp-mirror-editor-comment-color); font-style: italic } /* Comment.Special */
.highlight .kc { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: var(--jp-mirror-editor-keyword-color); font-weight: bold } /* Keyword.Type */
.highlight .m { color: var(--jp-mirror-editor-number-color) } /* Literal.Number */
.highlight .s { color: var(--jp-mirror-editor-string-color) } /* Literal.String */
.highlight .ow { color: var(--jp-mirror-editor-operator-color); font-weight: bold } /* Operator.Word */
.highlight .pm { color: var(--jp-mirror-editor-punctuation-color) } /* Punctuation.Marker */
.highlight .w { color: var(--jp-mirror-editor-variable-color) } /* Text.Whitespace */
.highlight .mb { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Bin */
.highlight .mf { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Float */
.highlight .mh { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Hex */
.highlight .mi { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer */
.highlight .mo { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Oct */
.highlight .sa { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Affix */
.highlight .sb { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Backtick */
.highlight .sc { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Char */
.highlight .dl { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Delimiter */
.highlight .sd { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Doc */
.highlight .s2 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Double */
.highlight .se { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Escape */
.highlight .sh { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Heredoc */
.highlight .si { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Interpol */
.highlight .sx { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Other */
.highlight .sr { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Regex */
.highlight .s1 { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Single */
.highlight .ss { color: var(--jp-mirror-editor-string-color) } /* Literal.String.Symbol */
.highlight .il { color: var(--jp-mirror-editor-number-color) } /* Literal.Number.Integer.Long */
  </style>



<style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
 * Mozilla scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */
[data-jp-theme-scrollbars='true'] {
  scrollbar-color: rgb(var(--jp-scrollbar-thumb-color))
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar. These selectors
 * will match lower in the tree, and so will override the above */
[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny {
  scrollbar-color: rgba(var(--jp-scrollbar-thumb-color), 0.5) transparent;
  scrollbar-width: thin;
}

/*
 * Webkit scrollbar styling
 */

/* use standard opaque scrollbars for most nodes */

[data-jp-theme-scrollbars='true'] ::-webkit-scrollbar,
[data-jp-theme-scrollbars='true'] ::-webkit-scrollbar-corner {
  background: var(--jp-scrollbar-background-color);
}

[data-jp-theme-scrollbars='true'] ::-webkit-scrollbar-thumb {
  background: rgb(var(--jp-scrollbar-thumb-color));
  border: var(--jp-scrollbar-thumb-margin) solid transparent;
  background-clip: content-box;
  border-radius: var(--jp-scrollbar-thumb-radius);
}

[data-jp-theme-scrollbars='true'] ::-webkit-scrollbar-track:horizontal {
  border-left: var(--jp-scrollbar-endpad) solid
    var(--jp-scrollbar-background-color);
  border-right: var(--jp-scrollbar-endpad) solid
    var(--jp-scrollbar-background-color);
}

[data-jp-theme-scrollbars='true'] ::-webkit-scrollbar-track:vertical {
  border-top: var(--jp-scrollbar-endpad) solid
    var(--jp-scrollbar-background-color);
  border-bottom: var(--jp-scrollbar-endpad) solid
    var(--jp-scrollbar-background-color);
}

/* for code nodes, use a transparent style of scrollbar */

[data-jp-theme-scrollbars='true'] .CodeMirror-hscrollbar::-webkit-scrollbar,
[data-jp-theme-scrollbars='true'] .CodeMirror-vscrollbar::-webkit-scrollbar,
[data-jp-theme-scrollbars='true']
  .CodeMirror-hscrollbar::-webkit-scrollbar-corner,
[data-jp-theme-scrollbars='true']
  .CodeMirror-vscrollbar::-webkit-scrollbar-corner {
  background-color: transparent;
}

[data-jp-theme-scrollbars='true']
  .CodeMirror-hscrollbar::-webkit-scrollbar-thumb,
[data-jp-theme-scrollbars='true']
  .CodeMirror-vscrollbar::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
  border: var(--jp-scrollbar-thumb-margin) solid transparent;
  background-clip: content-box;
  border-radius: var(--jp-scrollbar-thumb-radius);
}

[data-jp-theme-scrollbars='true']
  .CodeMirror-hscrollbar::-webkit-scrollbar-track:horizontal {
  border-left: var(--jp-scrollbar-endpad) solid transparent;
  border-right: var(--jp-scrollbar-endpad) solid transparent;
}

[data-jp-theme-scrollbars='true']
  .CodeMirror-vscrollbar::-webkit-scrollbar-track:vertical {
  border-top: var(--jp-scrollbar-endpad) solid transparent;
  border-bottom: var(--jp-scrollbar-endpad) solid transparent;
}

/* tiny scrollbar */

.jp-scrollbar-tiny::-webkit-scrollbar,
.jp-scrollbar-tiny::-webkit-scrollbar-corner {
  background-color: transparent;
  height: 4px;
  width: 4px;
}

.jp-scrollbar-tiny::-webkit-scrollbar-thumb {
  background: rgba(var(--jp-scrollbar-thumb-color), 0.5);
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:horizontal {
  border-left: 0px solid transparent;
  border-right: 0px solid transparent;
}

.jp-scrollbar-tiny::-webkit-scrollbar-track:vertical {
  border-top: 0px solid transparent;
  border-bottom: 0px solid transparent;
}

/*
 * Phosphor
 */

.lm-ScrollBar[data-orientation='horizontal'] {
  min-height: 16px;
  max-height: 16px;
  min-width: 45px;
  border-top: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] {
  min-width: 16px;
  max-width: 16px;
  min-height: 45px;
  border-left: 1px solid #a0a0a0;
}

.lm-ScrollBar-button {
  background-color: #f0f0f0;
  background-position: center center;
  min-height: 15px;
  max-height: 15px;
  min-width: 15px;
  max-width: 15px;
}

.lm-ScrollBar-button:hover {
  background-color: #dadada;
}

.lm-ScrollBar-button.lm-mod-active {
  background-color: #cdcdcd;
}

.lm-ScrollBar-track {
  background: #f0f0f0;
}

.lm-ScrollBar-thumb {
  background: #cdcdcd;
}

.lm-ScrollBar-thumb:hover {
  background: #bababa;
}

.lm-ScrollBar-thumb.lm-mod-active {
  background: #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal'] .lm-ScrollBar-thumb {
  height: 100%;
  min-width: 15px;
  border-left: 1px solid #a0a0a0;
  border-right: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='vertical'] .lm-ScrollBar-thumb {
  width: 100%;
  min-height: 15px;
  border-top: 1px solid #a0a0a0;
  border-bottom: 1px solid #a0a0a0;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-left);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='horizontal']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-right);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='decrement'] {
  background-image: var(--jp-icon-caret-up);
  background-size: 17px;
}

.lm-ScrollBar[data-orientation='vertical']
  .lm-ScrollBar-button[data-action='increment'] {
  background-image: var(--jp-icon-caret-down);
  background-size: 17px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-Widget, /* </DEPRECATED> */
.lm-Widget {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  cursor: default;
}


/* <DEPRECATED> */ .p-Widget.p-mod-hidden, /* </DEPRECATED> */
.lm-Widget.lm-mod-hidden {
  display: none !important;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-CommandPalette, /* </DEPRECATED> */
.lm-CommandPalette {
  display: flex;
  flex-direction: column;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


/* <DEPRECATED> */ .p-CommandPalette-search, /* </DEPRECATED> */
.lm-CommandPalette-search {
  flex: 0 0 auto;
}


/* <DEPRECATED> */ .p-CommandPalette-content, /* </DEPRECATED> */
.lm-CommandPalette-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  min-height: 0;
  overflow: auto;
  list-style-type: none;
}


/* <DEPRECATED> */ .p-CommandPalette-header, /* </DEPRECATED> */
.lm-CommandPalette-header {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}


/* <DEPRECATED> */ .p-CommandPalette-item, /* </DEPRECATED> */
.lm-CommandPalette-item {
  display: flex;
  flex-direction: row;
}


/* <DEPRECATED> */ .p-CommandPalette-itemIcon, /* </DEPRECATED> */
.lm-CommandPalette-itemIcon {
  flex: 0 0 auto;
}


/* <DEPRECATED> */ .p-CommandPalette-itemContent, /* </DEPRECATED> */
.lm-CommandPalette-itemContent {
  flex: 1 1 auto;
  overflow: hidden;
}


/* <DEPRECATED> */ .p-CommandPalette-itemShortcut, /* </DEPRECATED> */
.lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}


/* <DEPRECATED> */ .p-CommandPalette-itemLabel, /* </DEPRECATED> */
.lm-CommandPalette-itemLabel {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.lm-close-icon {
	border:1px solid transparent;
  background-color: transparent;
  position: absolute;
	z-index:1;
	right:3%;
	top: 0;
	bottom: 0;
	margin: auto;
	padding: 7px 0;
	display: none;
	vertical-align: middle;
  outline: 0;
  cursor: pointer;
}
.lm-close-icon:after {
	content: "X";
	display: block;
	width: 15px;
	height: 15px;
	text-align: center;
	color:#000;
	font-weight: normal;
	font-size: 12px;
	cursor: pointer;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-DockPanel, /* </DEPRECATED> */
.lm-DockPanel {
  z-index: 0;
}


/* <DEPRECATED> */ .p-DockPanel-widget, /* </DEPRECATED> */
.lm-DockPanel-widget {
  z-index: 0;
}


/* <DEPRECATED> */ .p-DockPanel-tabBar, /* </DEPRECATED> */
.lm-DockPanel-tabBar {
  z-index: 1;
}


/* <DEPRECATED> */ .p-DockPanel-handle, /* </DEPRECATED> */
.lm-DockPanel-handle {
  z-index: 2;
}


/* <DEPRECATED> */ .p-DockPanel-handle.p-mod-hidden, /* </DEPRECATED> */
.lm-DockPanel-handle.lm-mod-hidden {
  display: none !important;
}


/* <DEPRECATED> */ .p-DockPanel-handle:after, /* </DEPRECATED> */
.lm-DockPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}


/* <DEPRECATED> */
.p-DockPanel-handle[data-orientation='horizontal'],
/* </DEPRECATED> */
.lm-DockPanel-handle[data-orientation='horizontal'] {
  cursor: ew-resize;
}


/* <DEPRECATED> */
.p-DockPanel-handle[data-orientation='vertical'],
/* </DEPRECATED> */
.lm-DockPanel-handle[data-orientation='vertical'] {
  cursor: ns-resize;
}


/* <DEPRECATED> */
.p-DockPanel-handle[data-orientation='horizontal']:after,
/* </DEPRECATED> */
.lm-DockPanel-handle[data-orientation='horizontal']:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}


/* <DEPRECATED> */
.p-DockPanel-handle[data-orientation='vertical']:after,
/* </DEPRECATED> */
.lm-DockPanel-handle[data-orientation='vertical']:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}


/* <DEPRECATED> */ .p-DockPanel-overlay, /* </DEPRECATED> */
.lm-DockPanel-overlay {
  z-index: 3;
  box-sizing: border-box;
  pointer-events: none;
}


/* <DEPRECATED> */ .p-DockPanel-overlay.p-mod-hidden, /* </DEPRECATED> */
.lm-DockPanel-overlay.lm-mod-hidden {
  display: none !important;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-Menu, /* </DEPRECATED> */
.lm-Menu {
  z-index: 10000;
  position: absolute;
  white-space: nowrap;
  overflow-x: hidden;
  overflow-y: auto;
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


/* <DEPRECATED> */ .p-Menu-content, /* </DEPRECATED> */
.lm-Menu-content {
  margin: 0;
  padding: 0;
  display: table;
  list-style-type: none;
}


/* <DEPRECATED> */ .p-Menu-item, /* </DEPRECATED> */
.lm-Menu-item {
  display: table-row;
}


/* <DEPRECATED> */
.p-Menu-item.p-mod-hidden,
.p-Menu-item.p-mod-collapsed,
/* </DEPRECATED> */
.lm-Menu-item.lm-mod-hidden,
.lm-Menu-item.lm-mod-collapsed {
  display: none !important;
}


/* <DEPRECATED> */
.p-Menu-itemIcon,
.p-Menu-itemSubmenuIcon,
/* </DEPRECATED> */
.lm-Menu-itemIcon,
.lm-Menu-itemSubmenuIcon {
  display: table-cell;
  text-align: center;
}


/* <DEPRECATED> */ .p-Menu-itemLabel, /* </DEPRECATED> */
.lm-Menu-itemLabel {
  display: table-cell;
  text-align: left;
}


/* <DEPRECATED> */ .p-Menu-itemShortcut, /* </DEPRECATED> */
.lm-Menu-itemShortcut {
  display: table-cell;
  text-align: right;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-MenuBar, /* </DEPRECATED> */
.lm-MenuBar {
  outline: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


/* <DEPRECATED> */ .p-MenuBar-content, /* </DEPRECATED> */
.lm-MenuBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: row;
  list-style-type: none;
}


/* <DEPRECATED> */ .p--MenuBar-item, /* </DEPRECATED> */
.lm-MenuBar-item {
  box-sizing: border-box;
}


/* <DEPRECATED> */
.p-MenuBar-itemIcon,
.p-MenuBar-itemLabel,
/* </DEPRECATED> */
.lm-MenuBar-itemIcon,
.lm-MenuBar-itemLabel {
  display: inline-block;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-ScrollBar, /* </DEPRECATED> */
.lm-ScrollBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


/* <DEPRECATED> */
.p-ScrollBar[data-orientation='horizontal'],
/* </DEPRECATED> */
.lm-ScrollBar[data-orientation='horizontal'] {
  flex-direction: row;
}


/* <DEPRECATED> */
.p-ScrollBar[data-orientation='vertical'],
/* </DEPRECATED> */
.lm-ScrollBar[data-orientation='vertical'] {
  flex-direction: column;
}


/* <DEPRECATED> */ .p-ScrollBar-button, /* </DEPRECATED> */
.lm-ScrollBar-button {
  box-sizing: border-box;
  flex: 0 0 auto;
}


/* <DEPRECATED> */ .p-ScrollBar-track, /* </DEPRECATED> */
.lm-ScrollBar-track {
  box-sizing: border-box;
  position: relative;
  overflow: hidden;
  flex: 1 1 auto;
}


/* <DEPRECATED> */ .p-ScrollBar-thumb, /* </DEPRECATED> */
.lm-ScrollBar-thumb {
  box-sizing: border-box;
  position: absolute;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-SplitPanel-child, /* </DEPRECATED> */
.lm-SplitPanel-child {
  z-index: 0;
}


/* <DEPRECATED> */ .p-SplitPanel-handle, /* </DEPRECATED> */
.lm-SplitPanel-handle {
  z-index: 1;
}


/* <DEPRECATED> */ .p-SplitPanel-handle.p-mod-hidden, /* </DEPRECATED> */
.lm-SplitPanel-handle.lm-mod-hidden {
  display: none !important;
}


/* <DEPRECATED> */ .p-SplitPanel-handle:after, /* </DEPRECATED> */
.lm-SplitPanel-handle:after {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  content: '';
}


/* <DEPRECATED> */
.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle,
/* </DEPRECATED> */
.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle {
  cursor: ew-resize;
}


/* <DEPRECATED> */
.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle,
/* </DEPRECATED> */
.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle {
  cursor: ns-resize;
}


/* <DEPRECATED> */
.p-SplitPanel[data-orientation='horizontal'] > .p-SplitPanel-handle:after,
/* </DEPRECATED> */
.lm-SplitPanel[data-orientation='horizontal'] > .lm-SplitPanel-handle:after {
  left: 50%;
  min-width: 8px;
  transform: translateX(-50%);
}


/* <DEPRECATED> */
.p-SplitPanel[data-orientation='vertical'] > .p-SplitPanel-handle:after,
/* </DEPRECATED> */
.lm-SplitPanel[data-orientation='vertical'] > .lm-SplitPanel-handle:after {
  top: 50%;
  min-height: 8px;
  transform: translateY(-50%);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-TabBar, /* </DEPRECATED> */
.lm-TabBar {
  display: flex;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


/* <DEPRECATED> */ .p-TabBar[data-orientation='horizontal'], /* </DEPRECATED> */
.lm-TabBar[data-orientation='horizontal'] {
  flex-direction: row;
  align-items: flex-end;
}


/* <DEPRECATED> */ .p-TabBar[data-orientation='vertical'], /* </DEPRECATED> */
.lm-TabBar[data-orientation='vertical'] {
  flex-direction: column;
  align-items: flex-end;
}


/* <DEPRECATED> */ .p-TabBar-content, /* </DEPRECATED> */
.lm-TabBar-content {
  margin: 0;
  padding: 0;
  display: flex;
  flex: 1 1 auto;
  list-style-type: none;
}


/* <DEPRECATED> */
.p-TabBar[data-orientation='horizontal'] > .p-TabBar-content,
/* </DEPRECATED> */
.lm-TabBar[data-orientation='horizontal'] > .lm-TabBar-content {
  flex-direction: row;
}


/* <DEPRECATED> */
.p-TabBar[data-orientation='vertical'] > .p-TabBar-content,
/* </DEPRECATED> */
.lm-TabBar[data-orientation='vertical'] > .lm-TabBar-content {
  flex-direction: column;
}


/* <DEPRECATED> */ .p-TabBar-tab, /* </DEPRECATED> */
.lm-TabBar-tab {
  display: flex;
  flex-direction: row;
  box-sizing: border-box;
  overflow: hidden;
}


/* <DEPRECATED> */
.p-TabBar-tabIcon,
.p-TabBar-tabCloseIcon,
/* </DEPRECATED> */
.lm-TabBar-tabIcon,
.lm-TabBar-tabCloseIcon {
  flex: 0 0 auto;
}


/* <DEPRECATED> */ .p-TabBar-tabLabel, /* </DEPRECATED> */
.lm-TabBar-tabLabel {
  flex: 1 1 auto;
  overflow: hidden;
  white-space: nowrap;
}


.lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing : border-box;
}


/* <DEPRECATED> */ .p-TabBar-tab.p-mod-hidden, /* </DEPRECATED> */
.lm-TabBar-tab.lm-mod-hidden {
  display: none !important;
}


.lm-TabBar-addButton.lm-mod-hidden {
  display: none !important;
}


/* <DEPRECATED> */ .p-TabBar.p-mod-dragging .p-TabBar-tab, /* </DEPRECATED> */
.lm-TabBar.lm-mod-dragging .lm-TabBar-tab {
  position: relative;
}


/* <DEPRECATED> */
.p-TabBar.p-mod-dragging[data-orientation='horizontal'] .p-TabBar-tab,
/* </DEPRECATED> */
.lm-TabBar.lm-mod-dragging[data-orientation='horizontal'] .lm-TabBar-tab {
  left: 0;
  transition: left 150ms ease;
}


/* <DEPRECATED> */
.p-TabBar.p-mod-dragging[data-orientation='vertical'] .p-TabBar-tab,
/* </DEPRECATED> */
.lm-TabBar.lm-mod-dragging[data-orientation='vertical'] .lm-TabBar-tab {
  top: 0;
  transition: top 150ms ease;
}


/* <DEPRECATED> */
.p-TabBar.p-mod-dragging .p-TabBar-tab.p-mod-dragging,
/* </DEPRECATED> */
.lm-TabBar.lm-mod-dragging .lm-TabBar-tab.lm-mod-dragging {
  transition: none;
}

.lm-TabBar-tabLabel .lm-TabBar-tabInput {
  user-select: all;
  width: 100%;
  box-sizing : border-box;
  background: inherit;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ .p-TabPanel-tabBar, /* </DEPRECATED> */
.lm-TabPanel-tabBar {
  z-index: 1;
}


/* <DEPRECATED> */ .p-TabPanel-stackedPanel, /* </DEPRECATED> */
.lm-TabPanel-stackedPanel {
  z-index: 0;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/

@charset "UTF-8";
html{
  -webkit-box-sizing:border-box;
          box-sizing:border-box; }

*,
*::before,
*::after{
  -webkit-box-sizing:inherit;
          box-sizing:inherit; }

body{
  font-size:14px;
  font-weight:400;
  letter-spacing:0;
  line-height:1.28581;
  text-transform:none;
  color:#182026;
  font-family:-apple-system, "BlinkMacSystemFont", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Open Sans", "Helvetica Neue", "Icons16", sans-serif; }

p{
  margin-bottom:10px;
  margin-top:0; }

small{
  font-size:12px; }

strong{
  font-weight:600; }

::-moz-selection{
  background:rgba(125, 188, 255, 0.6); }

::selection{
  background:rgba(125, 188, 255, 0.6); }
.bp3-heading{
  color:#182026;
  font-weight:600;
  margin:0 0 10px;
  padding:0; }
  .bp3-dark .bp3-heading{
    color:#f5f8fa; }

h1.bp3-heading, .bp3-running-text h1{
  font-size:36px;
  line-height:40px; }

h2.bp3-heading, .bp3-running-text h2{
  font-size:28px;
  line-height:32px; }

h3.bp3-heading, .bp3-running-text h3{
  font-size:22px;
  line-height:25px; }

h4.bp3-heading, .bp3-running-text h4{
  font-size:18px;
  line-height:21px; }

h5.bp3-heading, .bp3-running-text h5{
  font-size:16px;
  line-height:19px; }

h6.bp3-heading, .bp3-running-text h6{
  font-size:14px;
  line-height:16px; }
.bp3-ui-text{
  font-size:14px;
  font-weight:400;
  letter-spacing:0;
  line-height:1.28581;
  text-transform:none; }

.bp3-monospace-text{
  font-family:monospace;
  text-transform:none; }

.bp3-text-muted{
  color:#5c7080; }
  .bp3-dark .bp3-text-muted{
    color:#a7b6c2; }

.bp3-text-disabled{
  color:rgba(92, 112, 128, 0.6); }
  .bp3-dark .bp3-text-disabled{
    color:rgba(167, 182, 194, 0.6); }

.bp3-text-overflow-ellipsis{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  word-wrap:normal; }
.bp3-running-text{
  font-size:14px;
  line-height:1.5; }
  .bp3-running-text h1{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h1{
      color:#f5f8fa; }
  .bp3-running-text h2{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h2{
      color:#f5f8fa; }
  .bp3-running-text h3{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h3{
      color:#f5f8fa; }
  .bp3-running-text h4{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h4{
      color:#f5f8fa; }
  .bp3-running-text h5{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h5{
      color:#f5f8fa; }
  .bp3-running-text h6{
    color:#182026;
    font-weight:600;
    margin-bottom:20px;
    margin-top:40px; }
    .bp3-dark .bp3-running-text h6{
      color:#f5f8fa; }
  .bp3-running-text hr{
    border:none;
    border-bottom:1px solid rgba(16, 22, 26, 0.15);
    margin:20px 0; }
    .bp3-dark .bp3-running-text hr{
      border-color:rgba(255, 255, 255, 0.15); }
  .bp3-running-text p{
    margin:0 0 10px;
    padding:0; }

.bp3-text-large{
  font-size:16px; }

.bp3-text-small{
  font-size:12px; }
a{
  color:#106ba3;
  text-decoration:none; }
  a:hover{
    color:#106ba3;
    cursor:pointer;
    text-decoration:underline; }
  a .bp3-icon, a .bp3-icon-standard, a .bp3-icon-large{
    color:inherit; }
  a code,
  .bp3-dark a code{
    color:inherit; }
  .bp3-dark a,
  .bp3-dark a:hover{
    color:#48aff0; }
    .bp3-dark a .bp3-icon, .bp3-dark a .bp3-icon-standard, .bp3-dark a .bp3-icon-large,
    .bp3-dark a:hover .bp3-icon,
    .bp3-dark a:hover .bp3-icon-standard,
    .bp3-dark a:hover .bp3-icon-large{
      color:inherit; }
.bp3-running-text code, .bp3-code{
  font-family:monospace;
  text-transform:none;
  background:rgba(255, 255, 255, 0.7);
  border-radius:3px;
  -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2);
          box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2);
  color:#5c7080;
  font-size:smaller;
  padding:2px 5px; }
  .bp3-dark .bp3-running-text code, .bp3-running-text .bp3-dark code, .bp3-dark .bp3-code{
    background:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
    color:#a7b6c2; }
  .bp3-running-text a > code, a > .bp3-code{
    color:#137cbd; }
    .bp3-dark .bp3-running-text a > code, .bp3-running-text .bp3-dark a > code, .bp3-dark a > .bp3-code{
      color:inherit; }

.bp3-running-text pre, .bp3-code-block{
  font-family:monospace;
  text-transform:none;
  background:rgba(255, 255, 255, 0.7);
  border-radius:3px;
  -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15);
          box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15);
  color:#182026;
  display:block;
  font-size:13px;
  line-height:1.4;
  margin:10px 0;
  padding:13px 15px 12px;
  word-break:break-all;
  word-wrap:break-word; }
  .bp3-dark .bp3-running-text pre, .bp3-running-text .bp3-dark pre, .bp3-dark .bp3-code-block{
    background:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }
  .bp3-running-text pre > code, .bp3-code-block > code{
    background:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    color:inherit;
    font-size:inherit;
    padding:0; }

.bp3-running-text kbd, .bp3-key{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  background:#ffffff;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
  color:#5c7080;
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex;
  font-family:inherit;
  font-size:12px;
  height:24px;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  line-height:24px;
  min-width:24px;
  padding:3px 6px;
  vertical-align:middle; }
  .bp3-running-text kbd .bp3-icon, .bp3-key .bp3-icon, .bp3-running-text kbd .bp3-icon-standard, .bp3-key .bp3-icon-standard, .bp3-running-text kbd .bp3-icon-large, .bp3-key .bp3-icon-large{
    margin-right:5px; }
  .bp3-dark .bp3-running-text kbd, .bp3-running-text .bp3-dark kbd, .bp3-dark .bp3-key{
    background:#394b59;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
    color:#a7b6c2; }
.bp3-running-text blockquote, .bp3-blockquote{
  border-left:solid 4px rgba(167, 182, 194, 0.5);
  margin:0 0 10px;
  padding:0 20px; }
  .bp3-dark .bp3-running-text blockquote, .bp3-running-text .bp3-dark blockquote, .bp3-dark .bp3-blockquote{
    border-color:rgba(115, 134, 148, 0.5); }
.bp3-running-text ul,
.bp3-running-text ol, .bp3-list{
  margin:10px 0;
  padding-left:30px; }
  .bp3-running-text ul li:not(:last-child), .bp3-running-text ol li:not(:last-child), .bp3-list li:not(:last-child){
    margin-bottom:5px; }
  .bp3-running-text ul ol, .bp3-running-text ol ol, .bp3-list ol,
  .bp3-running-text ul ul,
  .bp3-running-text ol ul,
  .bp3-list ul{
    margin-top:5px; }

.bp3-list-unstyled{
  list-style:none;
  margin:0;
  padding:0; }
  .bp3-list-unstyled li{
    padding:0; }
.bp3-rtl{
  text-align:right; }

.bp3-dark{
  color:#f5f8fa; }

:focus{
  outline:rgba(19, 124, 189, 0.6) auto 2px;
  outline-offset:2px;
  -moz-outline-radius:6px; }

.bp3-focus-disabled :focus{
  outline:none !important; }
  .bp3-focus-disabled :focus ~ .bp3-control-indicator{
    outline:none !important; }

.bp3-alert{
  max-width:400px;
  padding:20px; }

.bp3-alert-body{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex; }
  .bp3-alert-body .bp3-icon{
    font-size:40px;
    margin-right:20px;
    margin-top:0; }

.bp3-alert-contents{
  word-break:break-word; }

.bp3-alert-footer{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:reverse;
      -ms-flex-direction:row-reverse;
          flex-direction:row-reverse;
  margin-top:10px; }
  .bp3-alert-footer .bp3-button{
    margin-left:10px; }
.bp3-breadcrumbs{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  cursor:default;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -ms-flex-wrap:wrap;
      flex-wrap:wrap;
  height:30px;
  list-style:none;
  margin:0;
  padding:0; }
  .bp3-breadcrumbs > li{
    -webkit-box-align:center;
        -ms-flex-align:center;
            align-items:center;
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex; }
    .bp3-breadcrumbs > li::after{
      background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.71 7.29l-4-4a1.003 1.003 0 00-1.42 1.42L8.59 8 5.3 11.29c-.19.18-.3.43-.3.71a1.003 1.003 0 001.71.71l4-4c.18-.18.29-.43.29-.71 0-.28-.11-.53-.29-.71z' fill='%235C7080'/%3e%3c/svg%3e");
      content:"";
      display:block;
      height:16px;
      margin:0 5px;
      width:16px; }
    .bp3-breadcrumbs > li:last-of-type::after{
      display:none; }

.bp3-breadcrumb,
.bp3-breadcrumb-current,
.bp3-breadcrumbs-collapsed{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex;
  font-size:16px; }

.bp3-breadcrumb,
.bp3-breadcrumbs-collapsed{
  color:#5c7080; }

.bp3-breadcrumb:hover{
  text-decoration:none; }

.bp3-breadcrumb.bp3-disabled{
  color:rgba(92, 112, 128, 0.6);
  cursor:not-allowed; }

.bp3-breadcrumb .bp3-icon{
  margin-right:5px; }

.bp3-breadcrumb-current{
  color:inherit;
  font-weight:600; }
  .bp3-breadcrumb-current .bp3-input{
    font-size:inherit;
    font-weight:inherit;
    vertical-align:baseline; }

.bp3-breadcrumbs-collapsed{
  background:#ced9e0;
  border:none;
  border-radius:3px;
  cursor:pointer;
  margin-right:2px;
  padding:1px 5px;
  vertical-align:text-bottom; }
  .bp3-breadcrumbs-collapsed::before{
    background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cg fill='%235C7080'%3e%3ccircle cx='2' cy='8.03' r='2'/%3e%3ccircle cx='14' cy='8.03' r='2'/%3e%3ccircle cx='8' cy='8.03' r='2'/%3e%3c/g%3e%3c/svg%3e") center no-repeat;
    content:"";
    display:block;
    height:16px;
    width:16px; }
  .bp3-breadcrumbs-collapsed:hover{
    background:#bfccd6;
    color:#182026;
    text-decoration:none; }

.bp3-dark .bp3-breadcrumb,
.bp3-dark .bp3-breadcrumbs-collapsed{
  color:#a7b6c2; }

.bp3-dark .bp3-breadcrumbs > li::after{
  color:#a7b6c2; }

.bp3-dark .bp3-breadcrumb.bp3-disabled{
  color:rgba(167, 182, 194, 0.6); }

.bp3-dark .bp3-breadcrumb-current{
  color:#f5f8fa; }

.bp3-dark .bp3-breadcrumbs-collapsed{
  background:rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-breadcrumbs-collapsed:hover{
    background:rgba(16, 22, 26, 0.6);
    color:#f5f8fa; }
.bp3-button{
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  border:none;
  border-radius:3px;
  cursor:pointer;
  font-size:14px;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  padding:5px 10px;
  text-align:left;
  vertical-align:middle;
  min-height:30px;
  min-width:30px; }
  .bp3-button > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-button > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-button::before,
  .bp3-button > *{
    margin-right:7px; }
  .bp3-button:empty::before,
  .bp3-button > :last-child{
    margin-right:0; }
  .bp3-button:empty{
    padding:0 !important; }
  .bp3-button:disabled, .bp3-button.bp3-disabled{
    cursor:not-allowed; }
  .bp3-button.bp3-fill{
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    width:100%; }
  .bp3-button.bp3-align-right,
  .bp3-align-right .bp3-button{
    text-align:right; }
  .bp3-button.bp3-align-left,
  .bp3-align-left .bp3-button{
    text-align:left; }
  .bp3-button:not([class*="bp3-intent-"]){
    background-color:#f5f8fa;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
    color:#182026; }
    .bp3-button:not([class*="bp3-intent-"]):hover{
      background-clip:padding-box;
      background-color:#ebf1f5;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
    .bp3-button:not([class*="bp3-intent-"]):active, .bp3-button:not([class*="bp3-intent-"]).bp3-active{
      background-color:#d8e1e8;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-button:not([class*="bp3-intent-"]):disabled, .bp3-button:not([class*="bp3-intent-"]).bp3-disabled{
      background-color:rgba(206, 217, 224, 0.5);
      background-image:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed;
      outline:none; }
      .bp3-button:not([class*="bp3-intent-"]):disabled.bp3-active, .bp3-button:not([class*="bp3-intent-"]):disabled.bp3-active:hover, .bp3-button:not([class*="bp3-intent-"]).bp3-disabled.bp3-active, .bp3-button:not([class*="bp3-intent-"]).bp3-disabled.bp3-active:hover{
        background:rgba(206, 217, 224, 0.7); }
  .bp3-button.bp3-intent-primary{
    background-color:#137cbd;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
    .bp3-button.bp3-intent-primary:hover, .bp3-button.bp3-intent-primary:active, .bp3-button.bp3-intent-primary.bp3-active{
      color:#ffffff; }
    .bp3-button.bp3-intent-primary:hover{
      background-color:#106ba3;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-primary:active, .bp3-button.bp3-intent-primary.bp3-active{
      background-color:#0e5a8a;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-primary:disabled, .bp3-button.bp3-intent-primary.bp3-disabled{
      background-color:rgba(19, 124, 189, 0.5);
      background-image:none;
      border-color:transparent;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(255, 255, 255, 0.6); }
  .bp3-button.bp3-intent-success{
    background-color:#0f9960;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
    .bp3-button.bp3-intent-success:hover, .bp3-button.bp3-intent-success:active, .bp3-button.bp3-intent-success.bp3-active{
      color:#ffffff; }
    .bp3-button.bp3-intent-success:hover{
      background-color:#0d8050;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-success:active, .bp3-button.bp3-intent-success.bp3-active{
      background-color:#0a6640;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-success:disabled, .bp3-button.bp3-intent-success.bp3-disabled{
      background-color:rgba(15, 153, 96, 0.5);
      background-image:none;
      border-color:transparent;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(255, 255, 255, 0.6); }
  .bp3-button.bp3-intent-warning{
    background-color:#d9822b;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
    .bp3-button.bp3-intent-warning:hover, .bp3-button.bp3-intent-warning:active, .bp3-button.bp3-intent-warning.bp3-active{
      color:#ffffff; }
    .bp3-button.bp3-intent-warning:hover{
      background-color:#bf7326;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-warning:active, .bp3-button.bp3-intent-warning.bp3-active{
      background-color:#a66321;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-warning:disabled, .bp3-button.bp3-intent-warning.bp3-disabled{
      background-color:rgba(217, 130, 43, 0.5);
      background-image:none;
      border-color:transparent;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(255, 255, 255, 0.6); }
  .bp3-button.bp3-intent-danger{
    background-color:#db3737;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
    .bp3-button.bp3-intent-danger:hover, .bp3-button.bp3-intent-danger:active, .bp3-button.bp3-intent-danger.bp3-active{
      color:#ffffff; }
    .bp3-button.bp3-intent-danger:hover{
      background-color:#c23030;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-danger:active, .bp3-button.bp3-intent-danger.bp3-active{
      background-color:#a82a2a;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-button.bp3-intent-danger:disabled, .bp3-button.bp3-intent-danger.bp3-disabled{
      background-color:rgba(219, 55, 55, 0.5);
      background-image:none;
      border-color:transparent;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(255, 255, 255, 0.6); }
  .bp3-button[class*="bp3-intent-"] .bp3-button-spinner .bp3-spinner-head{
    stroke:#ffffff; }
  .bp3-button.bp3-large,
  .bp3-large .bp3-button{
    min-height:40px;
    min-width:40px;
    font-size:16px;
    padding:5px 15px; }
    .bp3-button.bp3-large::before,
    .bp3-button.bp3-large > *,
    .bp3-large .bp3-button::before,
    .bp3-large .bp3-button > *{
      margin-right:10px; }
    .bp3-button.bp3-large:empty::before,
    .bp3-button.bp3-large > :last-child,
    .bp3-large .bp3-button:empty::before,
    .bp3-large .bp3-button > :last-child{
      margin-right:0; }
  .bp3-button.bp3-small,
  .bp3-small .bp3-button{
    min-height:24px;
    min-width:24px;
    padding:0 7px; }
  .bp3-button.bp3-loading{
    position:relative; }
    .bp3-button.bp3-loading[class*="bp3-icon-"]::before{
      visibility:hidden; }
    .bp3-button.bp3-loading .bp3-button-spinner{
      margin:0;
      position:absolute; }
    .bp3-button.bp3-loading > :not(.bp3-button-spinner){
      visibility:hidden; }
  .bp3-button[class*="bp3-icon-"]::before{
    font-family:"Icons16", sans-serif;
    font-size:16px;
    font-style:normal;
    font-weight:400;
    line-height:1;
    -moz-osx-font-smoothing:grayscale;
    -webkit-font-smoothing:antialiased;
    color:#5c7080; }
  .bp3-button .bp3-icon, .bp3-button .bp3-icon-standard, .bp3-button .bp3-icon-large{
    color:#5c7080; }
    .bp3-button .bp3-icon.bp3-align-right, .bp3-button .bp3-icon-standard.bp3-align-right, .bp3-button .bp3-icon-large.bp3-align-right{
      margin-left:7px; }
  .bp3-button .bp3-icon:first-child:last-child,
  .bp3-button .bp3-spinner + .bp3-icon:last-child{
    margin:0 -7px; }
  .bp3-dark .bp3-button:not([class*="bp3-intent-"]){
    background-color:#394b59;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]):hover, .bp3-dark .bp3-button:not([class*="bp3-intent-"]):active, .bp3-dark .bp3-button:not([class*="bp3-intent-"]).bp3-active{
      color:#f5f8fa; }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]):hover{
      background-color:#30404d;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]):active, .bp3-dark .bp3-button:not([class*="bp3-intent-"]).bp3-active{
      background-color:#202b33;
      background-image:none;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]):disabled, .bp3-dark .bp3-button:not([class*="bp3-intent-"]).bp3-disabled{
      background-color:rgba(57, 75, 89, 0.5);
      background-image:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(167, 182, 194, 0.6); }
      .bp3-dark .bp3-button:not([class*="bp3-intent-"]):disabled.bp3-active, .bp3-dark .bp3-button:not([class*="bp3-intent-"]).bp3-disabled.bp3-active{
        background:rgba(57, 75, 89, 0.7); }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]) .bp3-button-spinner .bp3-spinner-head{
      background:rgba(16, 22, 26, 0.5);
      stroke:#8a9ba8; }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"])[class*="bp3-icon-"]::before{
      color:#a7b6c2; }
    .bp3-dark .bp3-button:not([class*="bp3-intent-"]) .bp3-icon, .bp3-dark .bp3-button:not([class*="bp3-intent-"]) .bp3-icon-standard, .bp3-dark .bp3-button:not([class*="bp3-intent-"]) .bp3-icon-large{
      color:#a7b6c2; }
  .bp3-dark .bp3-button[class*="bp3-intent-"]{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-button[class*="bp3-intent-"]:hover{
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-button[class*="bp3-intent-"]:active, .bp3-dark .bp3-button[class*="bp3-intent-"].bp3-active{
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-dark .bp3-button[class*="bp3-intent-"]:disabled, .bp3-dark .bp3-button[class*="bp3-intent-"].bp3-disabled{
      background-image:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(255, 255, 255, 0.3); }
    .bp3-dark .bp3-button[class*="bp3-intent-"] .bp3-button-spinner .bp3-spinner-head{
      stroke:#8a9ba8; }
  .bp3-button:disabled::before,
  .bp3-button:disabled .bp3-icon, .bp3-button:disabled .bp3-icon-standard, .bp3-button:disabled .bp3-icon-large, .bp3-button.bp3-disabled::before,
  .bp3-button.bp3-disabled .bp3-icon, .bp3-button.bp3-disabled .bp3-icon-standard, .bp3-button.bp3-disabled .bp3-icon-large, .bp3-button[class*="bp3-intent-"]::before,
  .bp3-button[class*="bp3-intent-"] .bp3-icon, .bp3-button[class*="bp3-intent-"] .bp3-icon-standard, .bp3-button[class*="bp3-intent-"] .bp3-icon-large{
    color:inherit !important; }
  .bp3-button.bp3-minimal{
    background:none;
    -webkit-box-shadow:none;
            box-shadow:none; }
    .bp3-button.bp3-minimal:hover{
      background:rgba(167, 182, 194, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026;
      text-decoration:none; }
    .bp3-button.bp3-minimal:active, .bp3-button.bp3-minimal.bp3-active{
      background:rgba(115, 134, 148, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026; }
    .bp3-button.bp3-minimal:disabled, .bp3-button.bp3-minimal:disabled:hover, .bp3-button.bp3-minimal.bp3-disabled, .bp3-button.bp3-minimal.bp3-disabled:hover{
      background:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed; }
      .bp3-button.bp3-minimal:disabled.bp3-active, .bp3-button.bp3-minimal:disabled:hover.bp3-active, .bp3-button.bp3-minimal.bp3-disabled.bp3-active, .bp3-button.bp3-minimal.bp3-disabled:hover.bp3-active{
        background:rgba(115, 134, 148, 0.3); }
    .bp3-dark .bp3-button.bp3-minimal{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:inherit; }
      .bp3-dark .bp3-button.bp3-minimal:hover, .bp3-dark .bp3-button.bp3-minimal:active, .bp3-dark .bp3-button.bp3-minimal.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none; }
      .bp3-dark .bp3-button.bp3-minimal:hover{
        background:rgba(138, 155, 168, 0.15); }
      .bp3-dark .bp3-button.bp3-minimal:active, .bp3-dark .bp3-button.bp3-minimal.bp3-active{
        background:rgba(138, 155, 168, 0.3);
        color:#f5f8fa; }
      .bp3-dark .bp3-button.bp3-minimal:disabled, .bp3-dark .bp3-button.bp3-minimal:disabled:hover, .bp3-dark .bp3-button.bp3-minimal.bp3-disabled, .bp3-dark .bp3-button.bp3-minimal.bp3-disabled:hover{
        background:none;
        color:rgba(167, 182, 194, 0.6);
        cursor:not-allowed; }
        .bp3-dark .bp3-button.bp3-minimal:disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal:disabled:hover.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-disabled:hover.bp3-active{
          background:rgba(138, 155, 168, 0.3); }
    .bp3-button.bp3-minimal.bp3-intent-primary{
      color:#106ba3; }
      .bp3-button.bp3-minimal.bp3-intent-primary:hover, .bp3-button.bp3-minimal.bp3-intent-primary:active, .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#106ba3; }
      .bp3-button.bp3-minimal.bp3-intent-primary:hover{
        background:rgba(19, 124, 189, 0.15);
        color:#106ba3; }
      .bp3-button.bp3-minimal.bp3-intent-primary:active, .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{
        background:rgba(19, 124, 189, 0.3);
        color:#106ba3; }
      .bp3-button.bp3-minimal.bp3-intent-primary:disabled, .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled{
        background:none;
        color:rgba(16, 107, 163, 0.5); }
        .bp3-button.bp3-minimal.bp3-intent-primary:disabled.bp3-active, .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled.bp3-active{
          background:rgba(19, 124, 189, 0.3); }
      .bp3-button.bp3-minimal.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{
        stroke:#106ba3; }
      .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary{
        color:#48aff0; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:hover{
          background:rgba(19, 124, 189, 0.2);
          color:#48aff0; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-active{
          background:rgba(19, 124, 189, 0.3);
          color:#48aff0; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:disabled, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled{
          background:none;
          color:rgba(72, 175, 240, 0.5); }
          .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary:disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-primary.bp3-disabled.bp3-active{
            background:rgba(19, 124, 189, 0.3); }
    .bp3-button.bp3-minimal.bp3-intent-success{
      color:#0d8050; }
      .bp3-button.bp3-minimal.bp3-intent-success:hover, .bp3-button.bp3-minimal.bp3-intent-success:active, .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#0d8050; }
      .bp3-button.bp3-minimal.bp3-intent-success:hover{
        background:rgba(15, 153, 96, 0.15);
        color:#0d8050; }
      .bp3-button.bp3-minimal.bp3-intent-success:active, .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{
        background:rgba(15, 153, 96, 0.3);
        color:#0d8050; }
      .bp3-button.bp3-minimal.bp3-intent-success:disabled, .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled{
        background:none;
        color:rgba(13, 128, 80, 0.5); }
        .bp3-button.bp3-minimal.bp3-intent-success:disabled.bp3-active, .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled.bp3-active{
          background:rgba(15, 153, 96, 0.3); }
      .bp3-button.bp3-minimal.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{
        stroke:#0d8050; }
      .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success{
        color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:hover{
          background:rgba(15, 153, 96, 0.2);
          color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-active{
          background:rgba(15, 153, 96, 0.3);
          color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:disabled, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled{
          background:none;
          color:rgba(61, 204, 145, 0.5); }
          .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success:disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-success.bp3-disabled.bp3-active{
            background:rgba(15, 153, 96, 0.3); }
    .bp3-button.bp3-minimal.bp3-intent-warning{
      color:#bf7326; }
      .bp3-button.bp3-minimal.bp3-intent-warning:hover, .bp3-button.bp3-minimal.bp3-intent-warning:active, .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#bf7326; }
      .bp3-button.bp3-minimal.bp3-intent-warning:hover{
        background:rgba(217, 130, 43, 0.15);
        color:#bf7326; }
      .bp3-button.bp3-minimal.bp3-intent-warning:active, .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{
        background:rgba(217, 130, 43, 0.3);
        color:#bf7326; }
      .bp3-button.bp3-minimal.bp3-intent-warning:disabled, .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled{
        background:none;
        color:rgba(191, 115, 38, 0.5); }
        .bp3-button.bp3-minimal.bp3-intent-warning:disabled.bp3-active, .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled.bp3-active{
          background:rgba(217, 130, 43, 0.3); }
      .bp3-button.bp3-minimal.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{
        stroke:#bf7326; }
      .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning{
        color:#ffb366; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:hover{
          background:rgba(217, 130, 43, 0.2);
          color:#ffb366; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-active{
          background:rgba(217, 130, 43, 0.3);
          color:#ffb366; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:disabled, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled{
          background:none;
          color:rgba(255, 179, 102, 0.5); }
          .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning:disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-warning.bp3-disabled.bp3-active{
            background:rgba(217, 130, 43, 0.3); }
    .bp3-button.bp3-minimal.bp3-intent-danger{
      color:#c23030; }
      .bp3-button.bp3-minimal.bp3-intent-danger:hover, .bp3-button.bp3-minimal.bp3-intent-danger:active, .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#c23030; }
      .bp3-button.bp3-minimal.bp3-intent-danger:hover{
        background:rgba(219, 55, 55, 0.15);
        color:#c23030; }
      .bp3-button.bp3-minimal.bp3-intent-danger:active, .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{
        background:rgba(219, 55, 55, 0.3);
        color:#c23030; }
      .bp3-button.bp3-minimal.bp3-intent-danger:disabled, .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled{
        background:none;
        color:rgba(194, 48, 48, 0.5); }
        .bp3-button.bp3-minimal.bp3-intent-danger:disabled.bp3-active, .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled.bp3-active{
          background:rgba(219, 55, 55, 0.3); }
      .bp3-button.bp3-minimal.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{
        stroke:#c23030; }
      .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger{
        color:#ff7373; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:hover{
          background:rgba(219, 55, 55, 0.2);
          color:#ff7373; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-active{
          background:rgba(219, 55, 55, 0.3);
          color:#ff7373; }
        .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:disabled, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled{
          background:none;
          color:rgba(255, 115, 115, 0.5); }
          .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger:disabled.bp3-active, .bp3-dark .bp3-button.bp3-minimal.bp3-intent-danger.bp3-disabled.bp3-active{
            background:rgba(219, 55, 55, 0.3); }
  .bp3-button.bp3-outlined{
    background:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    border:1px solid rgba(24, 32, 38, 0.2);
    -webkit-box-sizing:border-box;
            box-sizing:border-box; }
    .bp3-button.bp3-outlined:hover{
      background:rgba(167, 182, 194, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026;
      text-decoration:none; }
    .bp3-button.bp3-outlined:active, .bp3-button.bp3-outlined.bp3-active{
      background:rgba(115, 134, 148, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026; }
    .bp3-button.bp3-outlined:disabled, .bp3-button.bp3-outlined:disabled:hover, .bp3-button.bp3-outlined.bp3-disabled, .bp3-button.bp3-outlined.bp3-disabled:hover{
      background:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed; }
      .bp3-button.bp3-outlined:disabled.bp3-active, .bp3-button.bp3-outlined:disabled:hover.bp3-active, .bp3-button.bp3-outlined.bp3-disabled.bp3-active, .bp3-button.bp3-outlined.bp3-disabled:hover.bp3-active{
        background:rgba(115, 134, 148, 0.3); }
    .bp3-dark .bp3-button.bp3-outlined{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:inherit; }
      .bp3-dark .bp3-button.bp3-outlined:hover, .bp3-dark .bp3-button.bp3-outlined:active, .bp3-dark .bp3-button.bp3-outlined.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none; }
      .bp3-dark .bp3-button.bp3-outlined:hover{
        background:rgba(138, 155, 168, 0.15); }
      .bp3-dark .bp3-button.bp3-outlined:active, .bp3-dark .bp3-button.bp3-outlined.bp3-active{
        background:rgba(138, 155, 168, 0.3);
        color:#f5f8fa; }
      .bp3-dark .bp3-button.bp3-outlined:disabled, .bp3-dark .bp3-button.bp3-outlined:disabled:hover, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled:hover{
        background:none;
        color:rgba(167, 182, 194, 0.6);
        cursor:not-allowed; }
        .bp3-dark .bp3-button.bp3-outlined:disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined:disabled:hover.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled:hover.bp3-active{
          background:rgba(138, 155, 168, 0.3); }
    .bp3-button.bp3-outlined.bp3-intent-primary{
      color:#106ba3; }
      .bp3-button.bp3-outlined.bp3-intent-primary:hover, .bp3-button.bp3-outlined.bp3-intent-primary:active, .bp3-button.bp3-outlined.bp3-intent-primary.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#106ba3; }
      .bp3-button.bp3-outlined.bp3-intent-primary:hover{
        background:rgba(19, 124, 189, 0.15);
        color:#106ba3; }
      .bp3-button.bp3-outlined.bp3-intent-primary:active, .bp3-button.bp3-outlined.bp3-intent-primary.bp3-active{
        background:rgba(19, 124, 189, 0.3);
        color:#106ba3; }
      .bp3-button.bp3-outlined.bp3-intent-primary:disabled, .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled{
        background:none;
        color:rgba(16, 107, 163, 0.5); }
        .bp3-button.bp3-outlined.bp3-intent-primary:disabled.bp3-active, .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled.bp3-active{
          background:rgba(19, 124, 189, 0.3); }
      .bp3-button.bp3-outlined.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{
        stroke:#106ba3; }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary{
        color:#48aff0; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary:hover{
          background:rgba(19, 124, 189, 0.2);
          color:#48aff0; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary:active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary.bp3-active{
          background:rgba(19, 124, 189, 0.3);
          color:#48aff0; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled{
          background:none;
          color:rgba(72, 175, 240, 0.5); }
          .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary:disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled.bp3-active{
            background:rgba(19, 124, 189, 0.3); }
    .bp3-button.bp3-outlined.bp3-intent-success{
      color:#0d8050; }
      .bp3-button.bp3-outlined.bp3-intent-success:hover, .bp3-button.bp3-outlined.bp3-intent-success:active, .bp3-button.bp3-outlined.bp3-intent-success.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#0d8050; }
      .bp3-button.bp3-outlined.bp3-intent-success:hover{
        background:rgba(15, 153, 96, 0.15);
        color:#0d8050; }
      .bp3-button.bp3-outlined.bp3-intent-success:active, .bp3-button.bp3-outlined.bp3-intent-success.bp3-active{
        background:rgba(15, 153, 96, 0.3);
        color:#0d8050; }
      .bp3-button.bp3-outlined.bp3-intent-success:disabled, .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled{
        background:none;
        color:rgba(13, 128, 80, 0.5); }
        .bp3-button.bp3-outlined.bp3-intent-success:disabled.bp3-active, .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled.bp3-active{
          background:rgba(15, 153, 96, 0.3); }
      .bp3-button.bp3-outlined.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{
        stroke:#0d8050; }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success{
        color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success:hover{
          background:rgba(15, 153, 96, 0.2);
          color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success:active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success.bp3-active{
          background:rgba(15, 153, 96, 0.3);
          color:#3dcc91; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled{
          background:none;
          color:rgba(61, 204, 145, 0.5); }
          .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success:disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled.bp3-active{
            background:rgba(15, 153, 96, 0.3); }
    .bp3-button.bp3-outlined.bp3-intent-warning{
      color:#bf7326; }
      .bp3-button.bp3-outlined.bp3-intent-warning:hover, .bp3-button.bp3-outlined.bp3-intent-warning:active, .bp3-button.bp3-outlined.bp3-intent-warning.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#bf7326; }
      .bp3-button.bp3-outlined.bp3-intent-warning:hover{
        background:rgba(217, 130, 43, 0.15);
        color:#bf7326; }
      .bp3-button.bp3-outlined.bp3-intent-warning:active, .bp3-button.bp3-outlined.bp3-intent-warning.bp3-active{
        background:rgba(217, 130, 43, 0.3);
        color:#bf7326; }
      .bp3-button.bp3-outlined.bp3-intent-warning:disabled, .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled{
        background:none;
        color:rgba(191, 115, 38, 0.5); }
        .bp3-button.bp3-outlined.bp3-intent-warning:disabled.bp3-active, .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled.bp3-active{
          background:rgba(217, 130, 43, 0.3); }
      .bp3-button.bp3-outlined.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{
        stroke:#bf7326; }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning{
        color:#ffb366; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning:hover{
          background:rgba(217, 130, 43, 0.2);
          color:#ffb366; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning:active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning.bp3-active{
          background:rgba(217, 130, 43, 0.3);
          color:#ffb366; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled{
          background:none;
          color:rgba(255, 179, 102, 0.5); }
          .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning:disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled.bp3-active{
            background:rgba(217, 130, 43, 0.3); }
    .bp3-button.bp3-outlined.bp3-intent-danger{
      color:#c23030; }
      .bp3-button.bp3-outlined.bp3-intent-danger:hover, .bp3-button.bp3-outlined.bp3-intent-danger:active, .bp3-button.bp3-outlined.bp3-intent-danger.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#c23030; }
      .bp3-button.bp3-outlined.bp3-intent-danger:hover{
        background:rgba(219, 55, 55, 0.15);
        color:#c23030; }
      .bp3-button.bp3-outlined.bp3-intent-danger:active, .bp3-button.bp3-outlined.bp3-intent-danger.bp3-active{
        background:rgba(219, 55, 55, 0.3);
        color:#c23030; }
      .bp3-button.bp3-outlined.bp3-intent-danger:disabled, .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled{
        background:none;
        color:rgba(194, 48, 48, 0.5); }
        .bp3-button.bp3-outlined.bp3-intent-danger:disabled.bp3-active, .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled.bp3-active{
          background:rgba(219, 55, 55, 0.3); }
      .bp3-button.bp3-outlined.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{
        stroke:#c23030; }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger{
        color:#ff7373; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger:hover{
          background:rgba(219, 55, 55, 0.2);
          color:#ff7373; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger:active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger.bp3-active{
          background:rgba(219, 55, 55, 0.3);
          color:#ff7373; }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled{
          background:none;
          color:rgba(255, 115, 115, 0.5); }
          .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger:disabled.bp3-active, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled.bp3-active{
            background:rgba(219, 55, 55, 0.3); }
    .bp3-button.bp3-outlined:disabled, .bp3-button.bp3-outlined.bp3-disabled, .bp3-button.bp3-outlined:disabled:hover, .bp3-button.bp3-outlined.bp3-disabled:hover{
      border-color:rgba(92, 112, 128, 0.1); }
    .bp3-dark .bp3-button.bp3-outlined{
      border-color:rgba(255, 255, 255, 0.4); }
      .bp3-dark .bp3-button.bp3-outlined:disabled, .bp3-dark .bp3-button.bp3-outlined:disabled:hover, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-disabled:hover{
        border-color:rgba(255, 255, 255, 0.2); }
    .bp3-button.bp3-outlined.bp3-intent-primary{
      border-color:rgba(16, 107, 163, 0.6); }
      .bp3-button.bp3-outlined.bp3-intent-primary:disabled, .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled{
        border-color:rgba(16, 107, 163, 0.2); }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary{
        border-color:rgba(72, 175, 240, 0.6); }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-primary.bp3-disabled{
          border-color:rgba(72, 175, 240, 0.2); }
    .bp3-button.bp3-outlined.bp3-intent-success{
      border-color:rgba(13, 128, 80, 0.6); }
      .bp3-button.bp3-outlined.bp3-intent-success:disabled, .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled{
        border-color:rgba(13, 128, 80, 0.2); }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success{
        border-color:rgba(61, 204, 145, 0.6); }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-success.bp3-disabled{
          border-color:rgba(61, 204, 145, 0.2); }
    .bp3-button.bp3-outlined.bp3-intent-warning{
      border-color:rgba(191, 115, 38, 0.6); }
      .bp3-button.bp3-outlined.bp3-intent-warning:disabled, .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled{
        border-color:rgba(191, 115, 38, 0.2); }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning{
        border-color:rgba(255, 179, 102, 0.6); }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-warning.bp3-disabled{
          border-color:rgba(255, 179, 102, 0.2); }
    .bp3-button.bp3-outlined.bp3-intent-danger{
      border-color:rgba(194, 48, 48, 0.6); }
      .bp3-button.bp3-outlined.bp3-intent-danger:disabled, .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled{
        border-color:rgba(194, 48, 48, 0.2); }
      .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger{
        border-color:rgba(255, 115, 115, 0.6); }
        .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger:disabled, .bp3-dark .bp3-button.bp3-outlined.bp3-intent-danger.bp3-disabled{
          border-color:rgba(255, 115, 115, 0.2); }

a.bp3-button{
  text-align:center;
  text-decoration:none;
  -webkit-transition:none;
  transition:none; }
  a.bp3-button, a.bp3-button:hover, a.bp3-button:active{
    color:#182026; }
  a.bp3-button.bp3-disabled{
    color:rgba(92, 112, 128, 0.6); }

.bp3-button-text{
  -webkit-box-flex:0;
      -ms-flex:0 1 auto;
          flex:0 1 auto; }

.bp3-button.bp3-align-left .bp3-button-text, .bp3-button.bp3-align-right .bp3-button-text,
.bp3-button-group.bp3-align-left .bp3-button-text,
.bp3-button-group.bp3-align-right .bp3-button-text{
  -webkit-box-flex:1;
      -ms-flex:1 1 auto;
          flex:1 1 auto; }
.bp3-button-group{
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex; }
  .bp3-button-group .bp3-button{
    -webkit-box-flex:0;
        -ms-flex:0 0 auto;
            flex:0 0 auto;
    position:relative;
    z-index:4; }
    .bp3-button-group .bp3-button:focus{
      z-index:5; }
    .bp3-button-group .bp3-button:hover{
      z-index:6; }
    .bp3-button-group .bp3-button:active, .bp3-button-group .bp3-button.bp3-active{
      z-index:7; }
    .bp3-button-group .bp3-button:disabled, .bp3-button-group .bp3-button.bp3-disabled{
      z-index:3; }
    .bp3-button-group .bp3-button[class*="bp3-intent-"]{
      z-index:9; }
      .bp3-button-group .bp3-button[class*="bp3-intent-"]:focus{
        z-index:10; }
      .bp3-button-group .bp3-button[class*="bp3-intent-"]:hover{
        z-index:11; }
      .bp3-button-group .bp3-button[class*="bp3-intent-"]:active, .bp3-button-group .bp3-button[class*="bp3-intent-"].bp3-active{
        z-index:12; }
      .bp3-button-group .bp3-button[class*="bp3-intent-"]:disabled, .bp3-button-group .bp3-button[class*="bp3-intent-"].bp3-disabled{
        z-index:8; }
  .bp3-button-group:not(.bp3-minimal) > .bp3-popover-wrapper:not(:first-child) .bp3-button,
  .bp3-button-group:not(.bp3-minimal) > .bp3-button:not(:first-child){
    border-bottom-left-radius:0;
    border-top-left-radius:0; }
  .bp3-button-group:not(.bp3-minimal) > .bp3-popover-wrapper:not(:last-child) .bp3-button,
  .bp3-button-group:not(.bp3-minimal) > .bp3-button:not(:last-child){
    border-bottom-right-radius:0;
    border-top-right-radius:0;
    margin-right:-1px; }
  .bp3-button-group.bp3-minimal .bp3-button{
    background:none;
    -webkit-box-shadow:none;
            box-shadow:none; }
    .bp3-button-group.bp3-minimal .bp3-button:hover{
      background:rgba(167, 182, 194, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026;
      text-decoration:none; }
    .bp3-button-group.bp3-minimal .bp3-button:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-active{
      background:rgba(115, 134, 148, 0.3);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#182026; }
    .bp3-button-group.bp3-minimal .bp3-button:disabled, .bp3-button-group.bp3-minimal .bp3-button:disabled:hover, .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled, .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover{
      background:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed; }
      .bp3-button-group.bp3-minimal .bp3-button:disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button:disabled:hover.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover.bp3-active{
        background:rgba(115, 134, 148, 0.3); }
    .bp3-dark .bp3-button-group.bp3-minimal .bp3-button{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:inherit; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:hover, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:hover{
        background:rgba(138, 155, 168, 0.15); }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-active{
        background:rgba(138, 155, 168, 0.3);
        color:#f5f8fa; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled:hover, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover{
        background:none;
        color:rgba(167, 182, 194, 0.6);
        cursor:not-allowed; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button:disabled:hover.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-disabled:hover.bp3-active{
          background:rgba(138, 155, 168, 0.3); }
    .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary{
      color:#106ba3; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#106ba3; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover{
        background:rgba(19, 124, 189, 0.15);
        color:#106ba3; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{
        background:rgba(19, 124, 189, 0.3);
        color:#106ba3; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled{
        background:none;
        color:rgba(16, 107, 163, 0.5); }
        .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled.bp3-active{
          background:rgba(19, 124, 189, 0.3); }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{
        stroke:#106ba3; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary{
        color:#48aff0; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:hover{
          background:rgba(19, 124, 189, 0.2);
          color:#48aff0; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-active{
          background:rgba(19, 124, 189, 0.3);
          color:#48aff0; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled{
          background:none;
          color:rgba(72, 175, 240, 0.5); }
          .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary:disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-primary.bp3-disabled.bp3-active{
            background:rgba(19, 124, 189, 0.3); }
    .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success{
      color:#0d8050; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#0d8050; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover{
        background:rgba(15, 153, 96, 0.15);
        color:#0d8050; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{
        background:rgba(15, 153, 96, 0.3);
        color:#0d8050; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled{
        background:none;
        color:rgba(13, 128, 80, 0.5); }
        .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled.bp3-active{
          background:rgba(15, 153, 96, 0.3); }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{
        stroke:#0d8050; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success{
        color:#3dcc91; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:hover{
          background:rgba(15, 153, 96, 0.2);
          color:#3dcc91; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-active{
          background:rgba(15, 153, 96, 0.3);
          color:#3dcc91; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled{
          background:none;
          color:rgba(61, 204, 145, 0.5); }
          .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success:disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-success.bp3-disabled.bp3-active{
            background:rgba(15, 153, 96, 0.3); }
    .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning{
      color:#bf7326; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#bf7326; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover{
        background:rgba(217, 130, 43, 0.15);
        color:#bf7326; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{
        background:rgba(217, 130, 43, 0.3);
        color:#bf7326; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled{
        background:none;
        color:rgba(191, 115, 38, 0.5); }
        .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled.bp3-active{
          background:rgba(217, 130, 43, 0.3); }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{
        stroke:#bf7326; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning{
        color:#ffb366; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:hover{
          background:rgba(217, 130, 43, 0.2);
          color:#ffb366; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-active{
          background:rgba(217, 130, 43, 0.3);
          color:#ffb366; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled{
          background:none;
          color:rgba(255, 179, 102, 0.5); }
          .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning:disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-warning.bp3-disabled.bp3-active{
            background:rgba(217, 130, 43, 0.3); }
    .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger{
      color:#c23030; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{
        background:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:#c23030; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover{
        background:rgba(219, 55, 55, 0.15);
        color:#c23030; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{
        background:rgba(219, 55, 55, 0.3);
        color:#c23030; }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled{
        background:none;
        color:rgba(194, 48, 48, 0.5); }
        .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled.bp3-active, .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled.bp3-active{
          background:rgba(219, 55, 55, 0.3); }
      .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{
        stroke:#c23030; }
      .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger{
        color:#ff7373; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:hover{
          background:rgba(219, 55, 55, 0.2);
          color:#ff7373; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-active{
          background:rgba(219, 55, 55, 0.3);
          color:#ff7373; }
        .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled{
          background:none;
          color:rgba(255, 115, 115, 0.5); }
          .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger:disabled.bp3-active, .bp3-dark .bp3-button-group.bp3-minimal .bp3-button.bp3-intent-danger.bp3-disabled.bp3-active{
            background:rgba(219, 55, 55, 0.3); }
  .bp3-button-group .bp3-popover-wrapper,
  .bp3-button-group .bp3-popover-target{
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto; }
  .bp3-button-group.bp3-fill{
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    width:100%; }
  .bp3-button-group .bp3-button.bp3-fill,
  .bp3-button-group.bp3-fill .bp3-button:not(.bp3-fixed){
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto; }
  .bp3-button-group.bp3-vertical{
    -webkit-box-align:stretch;
        -ms-flex-align:stretch;
            align-items:stretch;
    -webkit-box-orient:vertical;
    -webkit-box-direction:normal;
        -ms-flex-direction:column;
            flex-direction:column;
    vertical-align:top; }
    .bp3-button-group.bp3-vertical.bp3-fill{
      height:100%;
      width:unset; }
    .bp3-button-group.bp3-vertical .bp3-button{
      margin-right:0 !important;
      width:100%; }
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-popover-wrapper:first-child .bp3-button,
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-button:first-child{
      border-radius:3px 3px 0 0; }
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-popover-wrapper:last-child .bp3-button,
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-button:last-child{
      border-radius:0 0 3px 3px; }
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-popover-wrapper:not(:last-child) .bp3-button,
    .bp3-button-group.bp3-vertical:not(.bp3-minimal) > .bp3-button:not(:last-child){
      margin-bottom:-1px; }
  .bp3-button-group.bp3-align-left .bp3-button{
    text-align:left; }
  .bp3-dark .bp3-button-group:not(.bp3-minimal) > .bp3-popover-wrapper:not(:last-child) .bp3-button,
  .bp3-dark .bp3-button-group:not(.bp3-minimal) > .bp3-button:not(:last-child){
    margin-right:1px; }
  .bp3-dark .bp3-button-group.bp3-vertical > .bp3-popover-wrapper:not(:last-child) .bp3-button,
  .bp3-dark .bp3-button-group.bp3-vertical > .bp3-button:not(:last-child){
    margin-bottom:1px; }
.bp3-callout{
  font-size:14px;
  line-height:1.5;
  background-color:rgba(138, 155, 168, 0.15);
  border-radius:3px;
  padding:10px 12px 9px;
  position:relative;
  width:100%; }
  .bp3-callout[class*="bp3-icon-"]{
    padding-left:40px; }
    .bp3-callout[class*="bp3-icon-"]::before{
      font-family:"Icons20", sans-serif;
      font-size:20px;
      font-style:normal;
      font-weight:400;
      line-height:1;
      -moz-osx-font-smoothing:grayscale;
      -webkit-font-smoothing:antialiased;
      color:#5c7080;
      left:10px;
      position:absolute;
      top:10px; }
  .bp3-callout.bp3-callout-icon{
    padding-left:40px; }
    .bp3-callout.bp3-callout-icon > .bp3-icon:first-child{
      color:#5c7080;
      left:10px;
      position:absolute;
      top:10px; }
  .bp3-callout .bp3-heading{
    line-height:20px;
    margin-bottom:5px;
    margin-top:0; }
    .bp3-callout .bp3-heading:last-child{
      margin-bottom:0; }
  .bp3-dark .bp3-callout{
    background-color:rgba(138, 155, 168, 0.2); }
    .bp3-dark .bp3-callout[class*="bp3-icon-"]::before{
      color:#a7b6c2; }
  .bp3-callout.bp3-intent-primary{
    background-color:rgba(19, 124, 189, 0.15); }
    .bp3-callout.bp3-intent-primary[class*="bp3-icon-"]::before,
    .bp3-callout.bp3-intent-primary > .bp3-icon:first-child,
    .bp3-callout.bp3-intent-primary .bp3-heading{
      color:#106ba3; }
    .bp3-dark .bp3-callout.bp3-intent-primary{
      background-color:rgba(19, 124, 189, 0.25); }
      .bp3-dark .bp3-callout.bp3-intent-primary[class*="bp3-icon-"]::before,
      .bp3-dark .bp3-callout.bp3-intent-primary > .bp3-icon:first-child,
      .bp3-dark .bp3-callout.bp3-intent-primary .bp3-heading{
        color:#48aff0; }
  .bp3-callout.bp3-intent-success{
    background-color:rgba(15, 153, 96, 0.15); }
    .bp3-callout.bp3-intent-success[class*="bp3-icon-"]::before,
    .bp3-callout.bp3-intent-success > .bp3-icon:first-child,
    .bp3-callout.bp3-intent-success .bp3-heading{
      color:#0d8050; }
    .bp3-dark .bp3-callout.bp3-intent-success{
      background-color:rgba(15, 153, 96, 0.25); }
      .bp3-dark .bp3-callout.bp3-intent-success[class*="bp3-icon-"]::before,
      .bp3-dark .bp3-callout.bp3-intent-success > .bp3-icon:first-child,
      .bp3-dark .bp3-callout.bp3-intent-success .bp3-heading{
        color:#3dcc91; }
  .bp3-callout.bp3-intent-warning{
    background-color:rgba(217, 130, 43, 0.15); }
    .bp3-callout.bp3-intent-warning[class*="bp3-icon-"]::before,
    .bp3-callout.bp3-intent-warning > .bp3-icon:first-child,
    .bp3-callout.bp3-intent-warning .bp3-heading{
      color:#bf7326; }
    .bp3-dark .bp3-callout.bp3-intent-warning{
      background-color:rgba(217, 130, 43, 0.25); }
      .bp3-dark .bp3-callout.bp3-intent-warning[class*="bp3-icon-"]::before,
      .bp3-dark .bp3-callout.bp3-intent-warning > .bp3-icon:first-child,
      .bp3-dark .bp3-callout.bp3-intent-warning .bp3-heading{
        color:#ffb366; }
  .bp3-callout.bp3-intent-danger{
    background-color:rgba(219, 55, 55, 0.15); }
    .bp3-callout.bp3-intent-danger[class*="bp3-icon-"]::before,
    .bp3-callout.bp3-intent-danger > .bp3-icon:first-child,
    .bp3-callout.bp3-intent-danger .bp3-heading{
      color:#c23030; }
    .bp3-dark .bp3-callout.bp3-intent-danger{
      background-color:rgba(219, 55, 55, 0.25); }
      .bp3-dark .bp3-callout.bp3-intent-danger[class*="bp3-icon-"]::before,
      .bp3-dark .bp3-callout.bp3-intent-danger > .bp3-icon:first-child,
      .bp3-dark .bp3-callout.bp3-intent-danger .bp3-heading{
        color:#ff7373; }
  .bp3-running-text .bp3-callout{
    margin:20px 0; }
.bp3-card{
  background-color:#ffffff;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);
  padding:20px;
  -webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 200ms cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-card.bp3-dark,
  .bp3-dark .bp3-card{
    background-color:#30404d;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0); }

.bp3-elevation-0{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.15), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0); }
  .bp3-elevation-0.bp3-dark,
  .bp3-dark .bp3-elevation-0{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), 0 0 0 rgba(16, 22, 26, 0), 0 0 0 rgba(16, 22, 26, 0); }

.bp3-elevation-1{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-elevation-1.bp3-dark,
  .bp3-dark .bp3-elevation-1{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4); }

.bp3-elevation-2{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 1px 1px rgba(16, 22, 26, 0.2), 0 2px 6px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 1px 1px rgba(16, 22, 26, 0.2), 0 2px 6px rgba(16, 22, 26, 0.2); }
  .bp3-elevation-2.bp3-dark,
  .bp3-dark .bp3-elevation-2{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.4), 0 2px 6px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.4), 0 2px 6px rgba(16, 22, 26, 0.4); }

.bp3-elevation-3{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2); }
  .bp3-elevation-3.bp3-dark,
  .bp3-dark .bp3-elevation-3{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }

.bp3-elevation-4{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2); }
  .bp3-elevation-4.bp3-dark,
  .bp3-dark .bp3-elevation-4{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4); }

.bp3-card.bp3-interactive:hover{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
  cursor:pointer; }
  .bp3-card.bp3-interactive:hover.bp3-dark,
  .bp3-dark .bp3-card.bp3-interactive:hover{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }

.bp3-card.bp3-interactive:active{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
  opacity:0.9;
  -webkit-transition-duration:0;
          transition-duration:0; }
  .bp3-card.bp3-interactive:active.bp3-dark,
  .bp3-dark .bp3-card.bp3-interactive:active{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4); }

.bp3-collapse{
  height:0;
  overflow-y:hidden;
  -webkit-transition:height 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:height 200ms cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-collapse .bp3-collapse-body{
    -webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-collapse .bp3-collapse-body[aria-hidden="true"]{
      display:none; }

.bp3-context-menu .bp3-popover-target{
  display:block; }

.bp3-context-menu-popover-target{
  position:fixed; }

.bp3-divider{
  border-bottom:1px solid rgba(16, 22, 26, 0.15);
  border-right:1px solid rgba(16, 22, 26, 0.15);
  margin:5px; }
  .bp3-dark .bp3-divider{
    border-color:rgba(16, 22, 26, 0.4); }
.bp3-dialog-container{
  opacity:1;
  -webkit-transform:scale(1);
          transform:scale(1);
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  min-height:100%;
  pointer-events:none;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none;
  width:100%; }
  .bp3-dialog-container.bp3-overlay-enter > .bp3-dialog, .bp3-dialog-container.bp3-overlay-appear > .bp3-dialog{
    opacity:0;
    -webkit-transform:scale(0.5);
            transform:scale(0.5); }
  .bp3-dialog-container.bp3-overlay-enter-active > .bp3-dialog, .bp3-dialog-container.bp3-overlay-appear-active > .bp3-dialog{
    opacity:1;
    -webkit-transform:scale(1);
            transform:scale(1);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:opacity, -webkit-transform;
    transition-property:opacity, -webkit-transform;
    transition-property:opacity, transform;
    transition-property:opacity, transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }
  .bp3-dialog-container.bp3-overlay-exit > .bp3-dialog{
    opacity:1;
    -webkit-transform:scale(1);
            transform:scale(1); }
  .bp3-dialog-container.bp3-overlay-exit-active > .bp3-dialog{
    opacity:0;
    -webkit-transform:scale(0.5);
            transform:scale(0.5);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:opacity, -webkit-transform;
    transition-property:opacity, -webkit-transform;
    transition-property:opacity, transform;
    transition-property:opacity, transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }

.bp3-dialog{
  background:#ebf1f5;
  border-radius:6px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  margin:30px 0;
  padding-bottom:20px;
  pointer-events:all;
  -webkit-user-select:text;
     -moz-user-select:text;
      -ms-user-select:text;
          user-select:text;
  width:500px; }
  .bp3-dialog:focus{
    outline:0; }
  .bp3-dialog.bp3-dark,
  .bp3-dark .bp3-dialog{
    background:#293742;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }

.bp3-dialog-header{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  background:#ffffff;
  border-radius:6px 6px 0 0;
  -webkit-box-shadow:0 1px 0 rgba(16, 22, 26, 0.15);
          box-shadow:0 1px 0 rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  min-height:40px;
  padding-left:20px;
  padding-right:5px;
  z-index:30; }
  .bp3-dialog-header .bp3-icon-large,
  .bp3-dialog-header .bp3-icon{
    color:#5c7080;
    -webkit-box-flex:0;
        -ms-flex:0 0 auto;
            flex:0 0 auto;
    margin-right:10px; }
  .bp3-dialog-header .bp3-heading{
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    word-wrap:normal;
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto;
    line-height:inherit;
    margin:0; }
    .bp3-dialog-header .bp3-heading:last-child{
      margin-right:20px; }
  .bp3-dark .bp3-dialog-header{
    background:#30404d;
    -webkit-box-shadow:0 1px 0 rgba(16, 22, 26, 0.4);
            box-shadow:0 1px 0 rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-dialog-header .bp3-icon-large,
    .bp3-dark .bp3-dialog-header .bp3-icon{
      color:#a7b6c2; }

.bp3-dialog-body{
  -webkit-box-flex:1;
      -ms-flex:1 1 auto;
          flex:1 1 auto;
  line-height:18px;
  margin:20px; }

.bp3-dialog-footer{
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  margin:0 20px; }

.bp3-dialog-footer-actions{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-pack:end;
      -ms-flex-pack:end;
          justify-content:flex-end; }
  .bp3-dialog-footer-actions .bp3-button{
    margin-left:10px; }
.bp3-multistep-dialog-panels{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex; }

.bp3-multistep-dialog-left-panel{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-flex:1;
      -ms-flex:1;
          flex:1;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column; }
  .bp3-dark .bp3-multistep-dialog-left-panel{
    background:#202b33; }

.bp3-multistep-dialog-right-panel{
  background-color:#f5f8fa;
  border-left:1px solid rgba(16, 22, 26, 0.15);
  border-radius:0 0 6px 0;
  -webkit-box-flex:3;
      -ms-flex:3;
          flex:3;
  min-width:0; }
  .bp3-dark .bp3-multistep-dialog-right-panel{
    background-color:#293742;
    border-left:1px solid rgba(16, 22, 26, 0.4); }

.bp3-multistep-dialog-footer{
  background-color:#ffffff;
  border-radius:0 0 6px 0;
  border-top:1px solid rgba(16, 22, 26, 0.15);
  padding:10px; }
  .bp3-dark .bp3-multistep-dialog-footer{
    background:#30404d;
    border-top:1px solid rgba(16, 22, 26, 0.4); }

.bp3-dialog-step-container{
  background-color:#f5f8fa;
  border-bottom:1px solid rgba(16, 22, 26, 0.15); }
  .bp3-dark .bp3-dialog-step-container{
    background:#293742;
    border-bottom:1px solid rgba(16, 22, 26, 0.4); }
  .bp3-dialog-step-container.bp3-dialog-step-viewed{
    background-color:#ffffff; }
    .bp3-dark .bp3-dialog-step-container.bp3-dialog-step-viewed{
      background:#30404d; }

.bp3-dialog-step{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  background-color:#f5f8fa;
  border-radius:6px;
  cursor:not-allowed;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  margin:4px;
  padding:6px 14px; }
  .bp3-dark .bp3-dialog-step{
    background:#293742; }
  .bp3-dialog-step-viewed .bp3-dialog-step{
    background-color:#ffffff;
    cursor:pointer; }
    .bp3-dark .bp3-dialog-step-viewed .bp3-dialog-step{
      background:#30404d; }
  .bp3-dialog-step:hover{
    background-color:#f5f8fa; }
    .bp3-dark .bp3-dialog-step:hover{
      background:#293742; }

.bp3-dialog-step-icon{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  background-color:rgba(92, 112, 128, 0.6);
  border-radius:50%;
  color:#ffffff;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  height:25px;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  width:25px; }
  .bp3-dark .bp3-dialog-step-icon{
    background-color:rgba(167, 182, 194, 0.6); }
  .bp3-active.bp3-dialog-step-viewed .bp3-dialog-step-icon{
    background-color:#2b95d6; }
  .bp3-dialog-step-viewed .bp3-dialog-step-icon{
    background-color:#8a9ba8; }

.bp3-dialog-step-title{
  color:rgba(92, 112, 128, 0.6);
  -webkit-box-flex:1;
      -ms-flex:1;
          flex:1;
  padding-left:10px; }
  .bp3-dark .bp3-dialog-step-title{
    color:rgba(167, 182, 194, 0.6); }
  .bp3-active.bp3-dialog-step-viewed .bp3-dialog-step-title{
    color:#2b95d6; }
  .bp3-dialog-step-viewed:not(.bp3-active) .bp3-dialog-step-title{
    color:#182026; }
    .bp3-dark .bp3-dialog-step-viewed:not(.bp3-active) .bp3-dialog-step-title{
      color:#f5f8fa; }
.bp3-drawer{
  background:#ffffff;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  margin:0;
  padding:0; }
  .bp3-drawer:focus{
    outline:0; }
  .bp3-drawer.bp3-position-top{
    height:50%;
    left:0;
    right:0;
    top:0; }
    .bp3-drawer.bp3-position-top.bp3-overlay-enter, .bp3-drawer.bp3-position-top.bp3-overlay-appear{
      -webkit-transform:translateY(-100%);
              transform:translateY(-100%); }
    .bp3-drawer.bp3-position-top.bp3-overlay-enter-active, .bp3-drawer.bp3-position-top.bp3-overlay-appear-active{
      -webkit-transform:translateY(0);
              transform:translateY(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer.bp3-position-top.bp3-overlay-exit{
      -webkit-transform:translateY(0);
              transform:translateY(0); }
    .bp3-drawer.bp3-position-top.bp3-overlay-exit-active{
      -webkit-transform:translateY(-100%);
              transform:translateY(-100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer.bp3-position-bottom{
    bottom:0;
    height:50%;
    left:0;
    right:0; }
    .bp3-drawer.bp3-position-bottom.bp3-overlay-enter, .bp3-drawer.bp3-position-bottom.bp3-overlay-appear{
      -webkit-transform:translateY(100%);
              transform:translateY(100%); }
    .bp3-drawer.bp3-position-bottom.bp3-overlay-enter-active, .bp3-drawer.bp3-position-bottom.bp3-overlay-appear-active{
      -webkit-transform:translateY(0);
              transform:translateY(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer.bp3-position-bottom.bp3-overlay-exit{
      -webkit-transform:translateY(0);
              transform:translateY(0); }
    .bp3-drawer.bp3-position-bottom.bp3-overlay-exit-active{
      -webkit-transform:translateY(100%);
              transform:translateY(100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer.bp3-position-left{
    bottom:0;
    left:0;
    top:0;
    width:50%; }
    .bp3-drawer.bp3-position-left.bp3-overlay-enter, .bp3-drawer.bp3-position-left.bp3-overlay-appear{
      -webkit-transform:translateX(-100%);
              transform:translateX(-100%); }
    .bp3-drawer.bp3-position-left.bp3-overlay-enter-active, .bp3-drawer.bp3-position-left.bp3-overlay-appear-active{
      -webkit-transform:translateX(0);
              transform:translateX(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer.bp3-position-left.bp3-overlay-exit{
      -webkit-transform:translateX(0);
              transform:translateX(0); }
    .bp3-drawer.bp3-position-left.bp3-overlay-exit-active{
      -webkit-transform:translateX(-100%);
              transform:translateX(-100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer.bp3-position-right{
    bottom:0;
    right:0;
    top:0;
    width:50%; }
    .bp3-drawer.bp3-position-right.bp3-overlay-enter, .bp3-drawer.bp3-position-right.bp3-overlay-appear{
      -webkit-transform:translateX(100%);
              transform:translateX(100%); }
    .bp3-drawer.bp3-position-right.bp3-overlay-enter-active, .bp3-drawer.bp3-position-right.bp3-overlay-appear-active{
      -webkit-transform:translateX(0);
              transform:translateX(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer.bp3-position-right.bp3-overlay-exit{
      -webkit-transform:translateX(0);
              transform:translateX(0); }
    .bp3-drawer.bp3-position-right.bp3-overlay-exit-active{
      -webkit-transform:translateX(100%);
              transform:translateX(100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
  .bp3-position-right):not(.bp3-vertical){
    bottom:0;
    right:0;
    top:0;
    width:50%; }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-enter, .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-appear{
      -webkit-transform:translateX(100%);
              transform:translateX(100%); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-enter-active, .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-appear-active{
      -webkit-transform:translateX(0);
              transform:translateX(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-exit{
      -webkit-transform:translateX(0);
              transform:translateX(0); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right):not(.bp3-vertical).bp3-overlay-exit-active{
      -webkit-transform:translateX(100%);
              transform:translateX(100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
  .bp3-position-right).bp3-vertical{
    bottom:0;
    height:50%;
    left:0;
    right:0; }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-enter, .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-appear{
      -webkit-transform:translateY(100%);
              transform:translateY(100%); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-enter-active, .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-appear-active{
      -webkit-transform:translateY(0);
              transform:translateY(0);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:200ms;
              transition-duration:200ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-exit{
      -webkit-transform:translateY(0);
              transform:translateY(0); }
    .bp3-drawer:not(.bp3-position-top):not(.bp3-position-bottom):not(.bp3-position-left):not(
    .bp3-position-right).bp3-vertical.bp3-overlay-exit-active{
      -webkit-transform:translateY(100%);
              transform:translateY(100%);
      -webkit-transition-delay:0;
              transition-delay:0;
      -webkit-transition-duration:100ms;
              transition-duration:100ms;
      -webkit-transition-property:-webkit-transform;
      transition-property:-webkit-transform;
      transition-property:transform;
      transition-property:transform, -webkit-transform;
      -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
              transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-drawer.bp3-dark,
  .bp3-dark .bp3-drawer{
    background:#30404d;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }

.bp3-drawer-header{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  border-radius:0;
  -webkit-box-shadow:0 1px 0 rgba(16, 22, 26, 0.15);
          box-shadow:0 1px 0 rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  min-height:40px;
  padding:5px;
  padding-left:20px;
  position:relative; }
  .bp3-drawer-header .bp3-icon-large,
  .bp3-drawer-header .bp3-icon{
    color:#5c7080;
    -webkit-box-flex:0;
        -ms-flex:0 0 auto;
            flex:0 0 auto;
    margin-right:10px; }
  .bp3-drawer-header .bp3-heading{
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    word-wrap:normal;
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto;
    line-height:inherit;
    margin:0; }
    .bp3-drawer-header .bp3-heading:last-child{
      margin-right:20px; }
  .bp3-dark .bp3-drawer-header{
    -webkit-box-shadow:0 1px 0 rgba(16, 22, 26, 0.4);
            box-shadow:0 1px 0 rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-drawer-header .bp3-icon-large,
    .bp3-dark .bp3-drawer-header .bp3-icon{
      color:#a7b6c2; }

.bp3-drawer-body{
  -webkit-box-flex:1;
      -ms-flex:1 1 auto;
          flex:1 1 auto;
  line-height:18px;
  overflow:auto; }

.bp3-drawer-footer{
  -webkit-box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.15);
          box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.15);
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  padding:10px 20px;
  position:relative; }
  .bp3-dark .bp3-drawer-footer{
    -webkit-box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.4);
            box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.4); }
.bp3-editable-text{
  cursor:text;
  display:inline-block;
  max-width:100%;
  position:relative;
  vertical-align:top;
  white-space:nowrap; }
  .bp3-editable-text::before{
    bottom:-3px;
    left:-3px;
    position:absolute;
    right:-3px;
    top:-3px;
    border-radius:3px;
    content:"";
    -webkit-transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9), box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9), box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-editable-text:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15); }
  .bp3-editable-text.bp3-editable-text-editing::before{
    background-color:#ffffff;
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-editable-text.bp3-disabled::before{
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-editable-text.bp3-intent-primary .bp3-editable-text-input,
  .bp3-editable-text.bp3-intent-primary .bp3-editable-text-content{
    color:#137cbd; }
  .bp3-editable-text.bp3-intent-primary:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(19, 124, 189, 0.4);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(19, 124, 189, 0.4); }
  .bp3-editable-text.bp3-intent-primary.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-editable-text.bp3-intent-success .bp3-editable-text-input,
  .bp3-editable-text.bp3-intent-success .bp3-editable-text-content{
    color:#0f9960; }
  .bp3-editable-text.bp3-intent-success:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px rgba(15, 153, 96, 0.4);
            box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px rgba(15, 153, 96, 0.4); }
  .bp3-editable-text.bp3-intent-success.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-editable-text.bp3-intent-warning .bp3-editable-text-input,
  .bp3-editable-text.bp3-intent-warning .bp3-editable-text-content{
    color:#d9822b; }
  .bp3-editable-text.bp3-intent-warning:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px rgba(217, 130, 43, 0.4);
            box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px rgba(217, 130, 43, 0.4); }
  .bp3-editable-text.bp3-intent-warning.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-editable-text.bp3-intent-danger .bp3-editable-text-input,
  .bp3-editable-text.bp3-intent-danger .bp3-editable-text-content{
    color:#db3737; }
  .bp3-editable-text.bp3-intent-danger:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px rgba(219, 55, 55, 0.4);
            box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px rgba(219, 55, 55, 0.4); }
  .bp3-editable-text.bp3-intent-danger.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-editable-text:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(255, 255, 255, 0.15);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(255, 255, 255, 0.15); }
  .bp3-dark .bp3-editable-text.bp3-editable-text-editing::before{
    background-color:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-disabled::before{
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-dark .bp3-editable-text.bp3-intent-primary .bp3-editable-text-content{
    color:#48aff0; }
  .bp3-dark .bp3-editable-text.bp3-intent-primary:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(72, 175, 240, 0), 0 0 0 0 rgba(72, 175, 240, 0), inset 0 0 0 1px rgba(72, 175, 240, 0.4);
            box-shadow:0 0 0 0 rgba(72, 175, 240, 0), 0 0 0 0 rgba(72, 175, 240, 0), inset 0 0 0 1px rgba(72, 175, 240, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-primary.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #48aff0, 0 0 0 3px rgba(72, 175, 240, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #48aff0, 0 0 0 3px rgba(72, 175, 240, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-success .bp3-editable-text-content{
    color:#3dcc91; }
  .bp3-dark .bp3-editable-text.bp3-intent-success:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(61, 204, 145, 0), 0 0 0 0 rgba(61, 204, 145, 0), inset 0 0 0 1px rgba(61, 204, 145, 0.4);
            box-shadow:0 0 0 0 rgba(61, 204, 145, 0), 0 0 0 0 rgba(61, 204, 145, 0), inset 0 0 0 1px rgba(61, 204, 145, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-success.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #3dcc91, 0 0 0 3px rgba(61, 204, 145, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #3dcc91, 0 0 0 3px rgba(61, 204, 145, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-warning .bp3-editable-text-content{
    color:#ffb366; }
  .bp3-dark .bp3-editable-text.bp3-intent-warning:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(255, 179, 102, 0), 0 0 0 0 rgba(255, 179, 102, 0), inset 0 0 0 1px rgba(255, 179, 102, 0.4);
            box-shadow:0 0 0 0 rgba(255, 179, 102, 0), 0 0 0 0 rgba(255, 179, 102, 0), inset 0 0 0 1px rgba(255, 179, 102, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-warning.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #ffb366, 0 0 0 3px rgba(255, 179, 102, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #ffb366, 0 0 0 3px rgba(255, 179, 102, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-danger .bp3-editable-text-content{
    color:#ff7373; }
  .bp3-dark .bp3-editable-text.bp3-intent-danger:hover::before{
    -webkit-box-shadow:0 0 0 0 rgba(255, 115, 115, 0), 0 0 0 0 rgba(255, 115, 115, 0), inset 0 0 0 1px rgba(255, 115, 115, 0.4);
            box-shadow:0 0 0 0 rgba(255, 115, 115, 0), 0 0 0 0 rgba(255, 115, 115, 0), inset 0 0 0 1px rgba(255, 115, 115, 0.4); }
  .bp3-dark .bp3-editable-text.bp3-intent-danger.bp3-editable-text-editing::before{
    -webkit-box-shadow:0 0 0 1px #ff7373, 0 0 0 3px rgba(255, 115, 115, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #ff7373, 0 0 0 3px rgba(255, 115, 115, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }

.bp3-editable-text-input,
.bp3-editable-text-content{
  color:inherit;
  display:inherit;
  font:inherit;
  letter-spacing:inherit;
  max-width:inherit;
  min-width:inherit;
  position:relative;
  resize:none;
  text-transform:inherit;
  vertical-align:top; }

.bp3-editable-text-input{
  background:none;
  border:none;
  -webkit-box-shadow:none;
          box-shadow:none;
  padding:0;
  white-space:pre-wrap;
  width:100%; }
  .bp3-editable-text-input::-webkit-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-editable-text-input::-moz-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-editable-text-input:-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-editable-text-input::-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-editable-text-input::placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-editable-text-input:focus{
    outline:none; }
  .bp3-editable-text-input::-ms-clear{
    display:none; }

.bp3-editable-text-content{
  overflow:hidden;
  padding-right:2px;
  text-overflow:ellipsis;
  white-space:pre; }
  .bp3-editable-text-editing > .bp3-editable-text-content{
    left:0;
    position:absolute;
    visibility:hidden; }
  .bp3-editable-text-placeholder > .bp3-editable-text-content{
    color:rgba(92, 112, 128, 0.6); }
    .bp3-dark .bp3-editable-text-placeholder > .bp3-editable-text-content{
      color:rgba(167, 182, 194, 0.6); }

.bp3-editable-text.bp3-multiline{
  display:block; }
  .bp3-editable-text.bp3-multiline .bp3-editable-text-content{
    overflow:auto;
    white-space:pre-wrap;
    word-wrap:break-word; }
.bp3-divider{
  border-bottom:1px solid rgba(16, 22, 26, 0.15);
  border-right:1px solid rgba(16, 22, 26, 0.15);
  margin:5px; }
  .bp3-dark .bp3-divider{
    border-color:rgba(16, 22, 26, 0.4); }
.bp3-control-group{
  -webkit-transform:translateZ(0);
          transform:translateZ(0);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:stretch;
      -ms-flex-align:stretch;
          align-items:stretch; }
  .bp3-control-group > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-control-group > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-control-group .bp3-button,
  .bp3-control-group .bp3-html-select,
  .bp3-control-group .bp3-input,
  .bp3-control-group .bp3-select{
    position:relative; }
  .bp3-control-group .bp3-input{
    border-radius:inherit;
    z-index:2; }
    .bp3-control-group .bp3-input:focus{
      border-radius:3px;
      z-index:14; }
    .bp3-control-group .bp3-input[class*="bp3-intent"]{
      z-index:13; }
      .bp3-control-group .bp3-input[class*="bp3-intent"]:focus{
        z-index:15; }
    .bp3-control-group .bp3-input[readonly], .bp3-control-group .bp3-input:disabled, .bp3-control-group .bp3-input.bp3-disabled{
      z-index:1; }
  .bp3-control-group .bp3-input-group[class*="bp3-intent"] .bp3-input{
    z-index:13; }
    .bp3-control-group .bp3-input-group[class*="bp3-intent"] .bp3-input:focus{
      z-index:15; }
  .bp3-control-group .bp3-button,
  .bp3-control-group .bp3-html-select select,
  .bp3-control-group .bp3-select select{
    -webkit-transform:translateZ(0);
            transform:translateZ(0);
    border-radius:inherit;
    z-index:4; }
    .bp3-control-group .bp3-button:focus,
    .bp3-control-group .bp3-html-select select:focus,
    .bp3-control-group .bp3-select select:focus{
      z-index:5; }
    .bp3-control-group .bp3-button:hover,
    .bp3-control-group .bp3-html-select select:hover,
    .bp3-control-group .bp3-select select:hover{
      z-index:6; }
    .bp3-control-group .bp3-button:active,
    .bp3-control-group .bp3-html-select select:active,
    .bp3-control-group .bp3-select select:active{
      z-index:7; }
    .bp3-control-group .bp3-button[readonly], .bp3-control-group .bp3-button:disabled, .bp3-control-group .bp3-button.bp3-disabled,
    .bp3-control-group .bp3-html-select select[readonly],
    .bp3-control-group .bp3-html-select select:disabled,
    .bp3-control-group .bp3-html-select select.bp3-disabled,
    .bp3-control-group .bp3-select select[readonly],
    .bp3-control-group .bp3-select select:disabled,
    .bp3-control-group .bp3-select select.bp3-disabled{
      z-index:3; }
    .bp3-control-group .bp3-button[class*="bp3-intent"],
    .bp3-control-group .bp3-html-select select[class*="bp3-intent"],
    .bp3-control-group .bp3-select select[class*="bp3-intent"]{
      z-index:9; }
      .bp3-control-group .bp3-button[class*="bp3-intent"]:focus,
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"]:focus,
      .bp3-control-group .bp3-select select[class*="bp3-intent"]:focus{
        z-index:10; }
      .bp3-control-group .bp3-button[class*="bp3-intent"]:hover,
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"]:hover,
      .bp3-control-group .bp3-select select[class*="bp3-intent"]:hover{
        z-index:11; }
      .bp3-control-group .bp3-button[class*="bp3-intent"]:active,
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"]:active,
      .bp3-control-group .bp3-select select[class*="bp3-intent"]:active{
        z-index:12; }
      .bp3-control-group .bp3-button[class*="bp3-intent"][readonly], .bp3-control-group .bp3-button[class*="bp3-intent"]:disabled, .bp3-control-group .bp3-button[class*="bp3-intent"].bp3-disabled,
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"][readonly],
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"]:disabled,
      .bp3-control-group .bp3-html-select select[class*="bp3-intent"].bp3-disabled,
      .bp3-control-group .bp3-select select[class*="bp3-intent"][readonly],
      .bp3-control-group .bp3-select select[class*="bp3-intent"]:disabled,
      .bp3-control-group .bp3-select select[class*="bp3-intent"].bp3-disabled{
        z-index:8; }
  .bp3-control-group .bp3-input-group > .bp3-icon,
  .bp3-control-group .bp3-input-group > .bp3-button,
  .bp3-control-group .bp3-input-group > .bp3-input-left-container,
  .bp3-control-group .bp3-input-group > .bp3-input-action{
    z-index:16; }
  .bp3-control-group .bp3-select::after,
  .bp3-control-group .bp3-html-select::after,
  .bp3-control-group .bp3-select > .bp3-icon,
  .bp3-control-group .bp3-html-select > .bp3-icon{
    z-index:17; }
  .bp3-control-group .bp3-select:focus-within{
    z-index:5; }
  .bp3-control-group:not(.bp3-vertical) > *:not(.bp3-divider){
    margin-right:-1px; }
  .bp3-control-group:not(.bp3-vertical) > .bp3-divider:not(:first-child){
    margin-left:6px; }
  .bp3-dark .bp3-control-group:not(.bp3-vertical) > *:not(.bp3-divider){
    margin-right:0; }
  .bp3-dark .bp3-control-group:not(.bp3-vertical) > .bp3-button + .bp3-button{
    margin-left:1px; }
  .bp3-control-group .bp3-popover-wrapper,
  .bp3-control-group .bp3-popover-target{
    border-radius:inherit; }
  .bp3-control-group > :first-child{
    border-radius:3px 0 0 3px; }
  .bp3-control-group > :last-child{
    border-radius:0 3px 3px 0;
    margin-right:0; }
  .bp3-control-group > :only-child{
    border-radius:3px;
    margin-right:0; }
  .bp3-control-group .bp3-input-group .bp3-button{
    border-radius:3px; }
  .bp3-control-group .bp3-numeric-input:not(:first-child) .bp3-input-group{
    border-bottom-left-radius:0;
    border-top-left-radius:0; }
  .bp3-control-group.bp3-fill{
    width:100%; }
  .bp3-control-group > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto; }
  .bp3-control-group.bp3-fill > *:not(.bp3-fixed){
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto; }
  .bp3-control-group.bp3-vertical{
    -webkit-box-orient:vertical;
    -webkit-box-direction:normal;
        -ms-flex-direction:column;
            flex-direction:column; }
    .bp3-control-group.bp3-vertical > *{
      margin-top:-1px; }
    .bp3-control-group.bp3-vertical > :first-child{
      border-radius:3px 3px 0 0;
      margin-top:0; }
    .bp3-control-group.bp3-vertical > :last-child{
      border-radius:0 0 3px 3px; }
.bp3-control{
  cursor:pointer;
  display:block;
  margin-bottom:10px;
  position:relative;
  text-transform:none; }
  .bp3-control input:checked ~ .bp3-control-indicator{
    background-color:#137cbd;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
  .bp3-control:hover input:checked ~ .bp3-control-indicator{
    background-color:#106ba3;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
  .bp3-control input:not(:disabled):active:checked ~ .bp3-control-indicator{
    background:#0e5a8a;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-control input:disabled:checked ~ .bp3-control-indicator{
    background:rgba(19, 124, 189, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-dark .bp3-control input:checked ~ .bp3-control-indicator{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control:hover input:checked ~ .bp3-control-indicator{
    background-color:#106ba3;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control input:not(:disabled):active:checked ~ .bp3-control-indicator{
    background-color:#0e5a8a;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-control input:disabled:checked ~ .bp3-control-indicator{
    background:rgba(14, 90, 138, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-control:not(.bp3-align-right){
    padding-left:26px; }
    .bp3-control:not(.bp3-align-right) .bp3-control-indicator{
      margin-left:-26px; }
  .bp3-control.bp3-align-right{
    padding-right:26px; }
    .bp3-control.bp3-align-right .bp3-control-indicator{
      margin-right:-26px; }
  .bp3-control.bp3-disabled{
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed; }
  .bp3-control.bp3-inline{
    display:inline-block;
    margin-right:20px; }
  .bp3-control input{
    left:0;
    opacity:0;
    position:absolute;
    top:0;
    z-index:-1; }
  .bp3-control .bp3-control-indicator{
    background-clip:padding-box;
    background-color:#f5f8fa;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
    border:none;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
    cursor:pointer;
    display:inline-block;
    font-size:16px;
    height:1em;
    margin-right:10px;
    margin-top:-3px;
    position:relative;
    -webkit-user-select:none;
       -moz-user-select:none;
        -ms-user-select:none;
            user-select:none;
    vertical-align:middle;
    width:1em; }
    .bp3-control .bp3-control-indicator::before{
      content:"";
      display:block;
      height:1em;
      width:1em; }
  .bp3-control:hover .bp3-control-indicator{
    background-color:#ebf1f5; }
  .bp3-control input:not(:disabled):active ~ .bp3-control-indicator{
    background:#d8e1e8;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-control input:disabled ~ .bp3-control-indicator{
    background:rgba(206, 217, 224, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none;
    cursor:not-allowed; }
  .bp3-control input:focus ~ .bp3-control-indicator{
    outline:rgba(19, 124, 189, 0.6) auto 2px;
    outline-offset:2px;
    -moz-outline-radius:6px; }
  .bp3-control.bp3-align-right .bp3-control-indicator{
    float:right;
    margin-left:10px;
    margin-top:1px; }
  .bp3-control.bp3-large{
    font-size:16px; }
    .bp3-control.bp3-large:not(.bp3-align-right){
      padding-left:30px; }
      .bp3-control.bp3-large:not(.bp3-align-right) .bp3-control-indicator{
        margin-left:-30px; }
    .bp3-control.bp3-large.bp3-align-right{
      padding-right:30px; }
      .bp3-control.bp3-large.bp3-align-right .bp3-control-indicator{
        margin-right:-30px; }
    .bp3-control.bp3-large .bp3-control-indicator{
      font-size:20px; }
    .bp3-control.bp3-large.bp3-align-right .bp3-control-indicator{
      margin-top:0; }
  .bp3-control.bp3-checkbox input:indeterminate ~ .bp3-control-indicator{
    background-color:#137cbd;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.1)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
    color:#ffffff; }
  .bp3-control.bp3-checkbox:hover input:indeterminate ~ .bp3-control-indicator{
    background-color:#106ba3;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 -1px 0 rgba(16, 22, 26, 0.2); }
  .bp3-control.bp3-checkbox input:not(:disabled):active:indeterminate ~ .bp3-control-indicator{
    background:#0e5a8a;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-control.bp3-checkbox input:disabled:indeterminate ~ .bp3-control-indicator{
    background:rgba(19, 124, 189, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-dark .bp3-control.bp3-checkbox input:indeterminate ~ .bp3-control-indicator{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control.bp3-checkbox:hover input:indeterminate ~ .bp3-control-indicator{
    background-color:#106ba3;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control.bp3-checkbox input:not(:disabled):active:indeterminate ~ .bp3-control-indicator{
    background-color:#0e5a8a;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-control.bp3-checkbox input:disabled:indeterminate ~ .bp3-control-indicator{
    background:rgba(14, 90, 138, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-control.bp3-checkbox .bp3-control-indicator{
    border-radius:3px; }
  .bp3-control.bp3-checkbox input:checked ~ .bp3-control-indicator::before{
    background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 5c-.28 0-.53.11-.71.29L7 9.59l-2.29-2.3a1.003 1.003 0 00-1.42 1.42l3 3c.18.18.43.29.71.29s.53-.11.71-.29l5-5A1.003 1.003 0 0012 5z' fill='white'/%3e%3c/svg%3e"); }
  .bp3-control.bp3-checkbox input:indeterminate ~ .bp3-control-indicator::before{
    background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill-rule='evenodd' clip-rule='evenodd' d='M11 7H5c-.55 0-1 .45-1 1s.45 1 1 1h6c.55 0 1-.45 1-1s-.45-1-1-1z' fill='white'/%3e%3c/svg%3e"); }
  .bp3-control.bp3-radio .bp3-control-indicator{
    border-radius:50%; }
  .bp3-control.bp3-radio input:checked ~ .bp3-control-indicator::before{
    background-image:radial-gradient(#ffffff, #ffffff 28%, transparent 32%); }
  .bp3-control.bp3-radio input:checked:disabled ~ .bp3-control-indicator::before{
    opacity:0.5; }
  .bp3-control.bp3-radio input:focus ~ .bp3-control-indicator{
    -moz-outline-radius:16px; }
  .bp3-control.bp3-switch input ~ .bp3-control-indicator{
    background:rgba(167, 182, 194, 0.5); }
  .bp3-control.bp3-switch:hover input ~ .bp3-control-indicator{
    background:rgba(115, 134, 148, 0.5); }
  .bp3-control.bp3-switch input:not(:disabled):active ~ .bp3-control-indicator{
    background:rgba(92, 112, 128, 0.5); }
  .bp3-control.bp3-switch input:disabled ~ .bp3-control-indicator{
    background:rgba(206, 217, 224, 0.5); }
    .bp3-control.bp3-switch input:disabled ~ .bp3-control-indicator::before{
      background:rgba(255, 255, 255, 0.8); }
  .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator{
    background:#137cbd; }
  .bp3-control.bp3-switch:hover input:checked ~ .bp3-control-indicator{
    background:#106ba3; }
  .bp3-control.bp3-switch input:checked:not(:disabled):active ~ .bp3-control-indicator{
    background:#0e5a8a; }
  .bp3-control.bp3-switch input:checked:disabled ~ .bp3-control-indicator{
    background:rgba(19, 124, 189, 0.5); }
    .bp3-control.bp3-switch input:checked:disabled ~ .bp3-control-indicator::before{
      background:rgba(255, 255, 255, 0.8); }
  .bp3-control.bp3-switch:not(.bp3-align-right){
    padding-left:38px; }
    .bp3-control.bp3-switch:not(.bp3-align-right) .bp3-control-indicator{
      margin-left:-38px; }
  .bp3-control.bp3-switch.bp3-align-right{
    padding-right:38px; }
    .bp3-control.bp3-switch.bp3-align-right .bp3-control-indicator{
      margin-right:-38px; }
  .bp3-control.bp3-switch .bp3-control-indicator{
    border:none;
    border-radius:1.75em;
    -webkit-box-shadow:none !important;
            box-shadow:none !important;
    min-width:1.75em;
    -webkit-transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:background-color 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
    width:auto; }
    .bp3-control.bp3-switch .bp3-control-indicator::before{
      background:#ffffff;
      border-radius:50%;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
      height:calc(1em - 4px);
      left:0;
      margin:2px;
      position:absolute;
      -webkit-transition:left 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
      transition:left 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
      width:calc(1em - 4px); }
  .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator::before{
    left:calc(100% - 1em); }
  .bp3-control.bp3-switch.bp3-large:not(.bp3-align-right){
    padding-left:45px; }
    .bp3-control.bp3-switch.bp3-large:not(.bp3-align-right) .bp3-control-indicator{
      margin-left:-45px; }
  .bp3-control.bp3-switch.bp3-large.bp3-align-right{
    padding-right:45px; }
    .bp3-control.bp3-switch.bp3-large.bp3-align-right .bp3-control-indicator{
      margin-right:-45px; }
  .bp3-dark .bp3-control.bp3-switch input ~ .bp3-control-indicator{
    background:rgba(16, 22, 26, 0.5); }
  .bp3-dark .bp3-control.bp3-switch:hover input ~ .bp3-control-indicator{
    background:rgba(16, 22, 26, 0.7); }
  .bp3-dark .bp3-control.bp3-switch input:not(:disabled):active ~ .bp3-control-indicator{
    background:rgba(16, 22, 26, 0.9); }
  .bp3-dark .bp3-control.bp3-switch input:disabled ~ .bp3-control-indicator{
    background:rgba(57, 75, 89, 0.5); }
    .bp3-dark .bp3-control.bp3-switch input:disabled ~ .bp3-control-indicator::before{
      background:rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator{
    background:#137cbd; }
  .bp3-dark .bp3-control.bp3-switch:hover input:checked ~ .bp3-control-indicator{
    background:#106ba3; }
  .bp3-dark .bp3-control.bp3-switch input:checked:not(:disabled):active ~ .bp3-control-indicator{
    background:#0e5a8a; }
  .bp3-dark .bp3-control.bp3-switch input:checked:disabled ~ .bp3-control-indicator{
    background:rgba(14, 90, 138, 0.5); }
    .bp3-dark .bp3-control.bp3-switch input:checked:disabled ~ .bp3-control-indicator::before{
      background:rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control.bp3-switch .bp3-control-indicator::before{
    background:#394b59;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator::before{
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-control.bp3-switch .bp3-switch-inner-text{
    font-size:0.7em;
    text-align:center; }
  .bp3-control.bp3-switch .bp3-control-indicator-child:first-child{
    line-height:0;
    margin-left:0.5em;
    margin-right:1.2em;
    visibility:hidden; }
  .bp3-control.bp3-switch .bp3-control-indicator-child:last-child{
    line-height:1em;
    margin-left:1.2em;
    margin-right:0.5em;
    visibility:visible; }
  .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator .bp3-control-indicator-child:first-child{
    line-height:1em;
    visibility:visible; }
  .bp3-control.bp3-switch input:checked ~ .bp3-control-indicator .bp3-control-indicator-child:last-child{
    line-height:0;
    visibility:hidden; }
  .bp3-dark .bp3-control{
    color:#f5f8fa; }
    .bp3-dark .bp3-control.bp3-disabled{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-control .bp3-control-indicator{
      background-color:#394b59;
      background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
      background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-control:hover .bp3-control-indicator{
      background-color:#30404d; }
    .bp3-dark .bp3-control input:not(:disabled):active ~ .bp3-control-indicator{
      background:#202b33;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-dark .bp3-control input:disabled ~ .bp3-control-indicator{
      background:rgba(57, 75, 89, 0.5);
      -webkit-box-shadow:none;
              box-shadow:none;
      cursor:not-allowed; }
    .bp3-dark .bp3-control.bp3-checkbox input:disabled:checked ~ .bp3-control-indicator, .bp3-dark .bp3-control.bp3-checkbox input:disabled:indeterminate ~ .bp3-control-indicator{
      color:rgba(167, 182, 194, 0.6); }
.bp3-file-input{
  cursor:pointer;
  display:inline-block;
  height:30px;
  position:relative; }
  .bp3-file-input input{
    margin:0;
    min-width:200px;
    opacity:0; }
    .bp3-file-input input:disabled + .bp3-file-upload-input,
    .bp3-file-input input.bp3-disabled + .bp3-file-upload-input{
      background:rgba(206, 217, 224, 0.5);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed;
      resize:none; }
      .bp3-file-input input:disabled + .bp3-file-upload-input::after,
      .bp3-file-input input.bp3-disabled + .bp3-file-upload-input::after{
        background-color:rgba(206, 217, 224, 0.5);
        background-image:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:rgba(92, 112, 128, 0.6);
        cursor:not-allowed;
        outline:none; }
        .bp3-file-input input:disabled + .bp3-file-upload-input::after.bp3-active, .bp3-file-input input:disabled + .bp3-file-upload-input::after.bp3-active:hover,
        .bp3-file-input input.bp3-disabled + .bp3-file-upload-input::after.bp3-active,
        .bp3-file-input input.bp3-disabled + .bp3-file-upload-input::after.bp3-active:hover{
          background:rgba(206, 217, 224, 0.7); }
      .bp3-dark .bp3-file-input input:disabled + .bp3-file-upload-input, .bp3-dark
      .bp3-file-input input.bp3-disabled + .bp3-file-upload-input{
        background:rgba(57, 75, 89, 0.5);
        -webkit-box-shadow:none;
                box-shadow:none;
        color:rgba(167, 182, 194, 0.6); }
        .bp3-dark .bp3-file-input input:disabled + .bp3-file-upload-input::after, .bp3-dark
        .bp3-file-input input.bp3-disabled + .bp3-file-upload-input::after{
          background-color:rgba(57, 75, 89, 0.5);
          background-image:none;
          -webkit-box-shadow:none;
                  box-shadow:none;
          color:rgba(167, 182, 194, 0.6); }
          .bp3-dark .bp3-file-input input:disabled + .bp3-file-upload-input::after.bp3-active, .bp3-dark
          .bp3-file-input input.bp3-disabled + .bp3-file-upload-input::after.bp3-active{
            background:rgba(57, 75, 89, 0.7); }
  .bp3-file-input.bp3-file-input-has-selection .bp3-file-upload-input{
    color:#182026; }
  .bp3-dark .bp3-file-input.bp3-file-input-has-selection .bp3-file-upload-input{
    color:#f5f8fa; }
  .bp3-file-input.bp3-fill{
    width:100%; }
  .bp3-file-input.bp3-large,
  .bp3-large .bp3-file-input{
    height:40px; }
  .bp3-file-input .bp3-file-upload-input-custom-text::after{
    content:attr(bp3-button-text); }

.bp3-file-upload-input{
  -webkit-appearance:none;
     -moz-appearance:none;
          appearance:none;
  background:#ffffff;
  border:none;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
  color:#182026;
  font-size:14px;
  font-weight:400;
  height:30px;
  line-height:30px;
  outline:none;
  padding:0 10px;
  -webkit-transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  vertical-align:middle;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  word-wrap:normal;
  color:rgba(92, 112, 128, 0.6);
  left:0;
  padding-right:80px;
  position:absolute;
  right:0;
  top:0;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-file-upload-input::-webkit-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-file-upload-input::-moz-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-file-upload-input:-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-file-upload-input::-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-file-upload-input::placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-file-upload-input:focus, .bp3-file-upload-input.bp3-active{
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-file-upload-input[type="search"], .bp3-file-upload-input.bp3-round{
    border-radius:30px;
    -webkit-box-sizing:border-box;
            box-sizing:border-box;
    padding-left:10px; }
  .bp3-file-upload-input[readonly]{
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15); }
  .bp3-file-upload-input:disabled, .bp3-file-upload-input.bp3-disabled{
    background:rgba(206, 217, 224, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed;
    resize:none; }
  .bp3-file-upload-input::after{
    background-color:#f5f8fa;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
    color:#182026;
    min-height:24px;
    min-width:24px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    word-wrap:normal;
    border-radius:3px;
    content:"Browse";
    line-height:24px;
    margin:3px;
    position:absolute;
    right:0;
    text-align:center;
    top:0;
    width:70px; }
    .bp3-file-upload-input::after:hover{
      background-clip:padding-box;
      background-color:#ebf1f5;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
    .bp3-file-upload-input::after:active, .bp3-file-upload-input::after.bp3-active{
      background-color:#d8e1e8;
      background-image:none;
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-file-upload-input::after:disabled, .bp3-file-upload-input::after.bp3-disabled{
      background-color:rgba(206, 217, 224, 0.5);
      background-image:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(92, 112, 128, 0.6);
      cursor:not-allowed;
      outline:none; }
      .bp3-file-upload-input::after:disabled.bp3-active, .bp3-file-upload-input::after:disabled.bp3-active:hover, .bp3-file-upload-input::after.bp3-disabled.bp3-active, .bp3-file-upload-input::after.bp3-disabled.bp3-active:hover{
        background:rgba(206, 217, 224, 0.7); }
  .bp3-file-upload-input:hover::after{
    background-clip:padding-box;
    background-color:#ebf1f5;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
  .bp3-file-upload-input:active::after{
    background-color:#d8e1e8;
    background-image:none;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-large .bp3-file-upload-input{
    font-size:16px;
    height:40px;
    line-height:40px;
    padding-right:95px; }
    .bp3-large .bp3-file-upload-input[type="search"], .bp3-large .bp3-file-upload-input.bp3-round{
      padding:0 15px; }
    .bp3-large .bp3-file-upload-input::after{
      min-height:30px;
      min-width:30px;
      line-height:30px;
      margin:5px;
      width:85px; }
  .bp3-dark .bp3-file-upload-input{
    background:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa;
    color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input::-webkit-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input::-moz-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input:-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input::-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input::placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input:focus{
      -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-file-upload-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-file-upload-input:disabled, .bp3-dark .bp3-file-upload-input.bp3-disabled{
      background:rgba(57, 75, 89, 0.5);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-file-upload-input::after{
      background-color:#394b59;
      background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
      background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
      color:#f5f8fa; }
      .bp3-dark .bp3-file-upload-input::after:hover, .bp3-dark .bp3-file-upload-input::after:active, .bp3-dark .bp3-file-upload-input::after.bp3-active{
        color:#f5f8fa; }
      .bp3-dark .bp3-file-upload-input::after:hover{
        background-color:#30404d;
        -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
                box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-file-upload-input::after:active, .bp3-dark .bp3-file-upload-input::after.bp3-active{
        background-color:#202b33;
        background-image:none;
        -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
                box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
      .bp3-dark .bp3-file-upload-input::after:disabled, .bp3-dark .bp3-file-upload-input::after.bp3-disabled{
        background-color:rgba(57, 75, 89, 0.5);
        background-image:none;
        -webkit-box-shadow:none;
                box-shadow:none;
        color:rgba(167, 182, 194, 0.6); }
        .bp3-dark .bp3-file-upload-input::after:disabled.bp3-active, .bp3-dark .bp3-file-upload-input::after.bp3-disabled.bp3-active{
          background:rgba(57, 75, 89, 0.7); }
      .bp3-dark .bp3-file-upload-input::after .bp3-button-spinner .bp3-spinner-head{
        background:rgba(16, 22, 26, 0.5);
        stroke:#8a9ba8; }
    .bp3-dark .bp3-file-upload-input:hover::after{
      background-color:#30404d;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-file-upload-input:active::after{
      background-color:#202b33;
      background-image:none;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
.bp3-file-upload-input::after{
  -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
          box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
.bp3-form-group{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  margin:0 0 15px; }
  .bp3-form-group label.bp3-label{
    margin-bottom:5px; }
  .bp3-form-group .bp3-control{
    margin-top:7px; }
  .bp3-form-group .bp3-form-helper-text{
    color:#5c7080;
    font-size:12px;
    margin-top:5px; }
  .bp3-form-group.bp3-intent-primary .bp3-form-helper-text{
    color:#106ba3; }
  .bp3-form-group.bp3-intent-success .bp3-form-helper-text{
    color:#0d8050; }
  .bp3-form-group.bp3-intent-warning .bp3-form-helper-text{
    color:#bf7326; }
  .bp3-form-group.bp3-intent-danger .bp3-form-helper-text{
    color:#c23030; }
  .bp3-form-group.bp3-inline{
    -webkit-box-align:start;
        -ms-flex-align:start;
            align-items:flex-start;
    -webkit-box-orient:horizontal;
    -webkit-box-direction:normal;
        -ms-flex-direction:row;
            flex-direction:row; }
    .bp3-form-group.bp3-inline.bp3-large label.bp3-label{
      line-height:40px;
      margin:0 10px 0 0; }
    .bp3-form-group.bp3-inline label.bp3-label{
      line-height:30px;
      margin:0 10px 0 0; }
  .bp3-form-group.bp3-disabled .bp3-label,
  .bp3-form-group.bp3-disabled .bp3-text-muted,
  .bp3-form-group.bp3-disabled .bp3-form-helper-text{
    color:rgba(92, 112, 128, 0.6) !important; }
  .bp3-dark .bp3-form-group.bp3-intent-primary .bp3-form-helper-text{
    color:#48aff0; }
  .bp3-dark .bp3-form-group.bp3-intent-success .bp3-form-helper-text{
    color:#3dcc91; }
  .bp3-dark .bp3-form-group.bp3-intent-warning .bp3-form-helper-text{
    color:#ffb366; }
  .bp3-dark .bp3-form-group.bp3-intent-danger .bp3-form-helper-text{
    color:#ff7373; }
  .bp3-dark .bp3-form-group .bp3-form-helper-text{
    color:#a7b6c2; }
  .bp3-dark .bp3-form-group.bp3-disabled .bp3-label,
  .bp3-dark .bp3-form-group.bp3-disabled .bp3-text-muted,
  .bp3-dark .bp3-form-group.bp3-disabled .bp3-form-helper-text{
    color:rgba(167, 182, 194, 0.6) !important; }
.bp3-input-group{
  display:block;
  position:relative; }
  .bp3-input-group .bp3-input{
    position:relative;
    width:100%; }
    .bp3-input-group .bp3-input:not(:first-child){
      padding-left:30px; }
    .bp3-input-group .bp3-input:not(:last-child){
      padding-right:30px; }
  .bp3-input-group .bp3-input-action,
  .bp3-input-group > .bp3-input-left-container,
  .bp3-input-group > .bp3-button,
  .bp3-input-group > .bp3-icon{
    position:absolute;
    top:0; }
    .bp3-input-group .bp3-input-action:first-child,
    .bp3-input-group > .bp3-input-left-container:first-child,
    .bp3-input-group > .bp3-button:first-child,
    .bp3-input-group > .bp3-icon:first-child{
      left:0; }
    .bp3-input-group .bp3-input-action:last-child,
    .bp3-input-group > .bp3-input-left-container:last-child,
    .bp3-input-group > .bp3-button:last-child,
    .bp3-input-group > .bp3-icon:last-child{
      right:0; }
  .bp3-input-group .bp3-button{
    min-height:24px;
    min-width:24px;
    margin:3px;
    padding:0 7px; }
    .bp3-input-group .bp3-button:empty{
      padding:0; }
  .bp3-input-group > .bp3-input-left-container,
  .bp3-input-group > .bp3-icon{
    z-index:1; }
  .bp3-input-group > .bp3-input-left-container > .bp3-icon,
  .bp3-input-group > .bp3-icon{
    color:#5c7080; }
    .bp3-input-group > .bp3-input-left-container > .bp3-icon:empty,
    .bp3-input-group > .bp3-icon:empty{
      font-family:"Icons16", sans-serif;
      font-size:16px;
      font-style:normal;
      font-weight:400;
      line-height:1;
      -moz-osx-font-smoothing:grayscale;
      -webkit-font-smoothing:antialiased; }
  .bp3-input-group > .bp3-input-left-container > .bp3-icon,
  .bp3-input-group > .bp3-icon,
  .bp3-input-group .bp3-input-action > .bp3-spinner{
    margin:7px; }
  .bp3-input-group .bp3-tag{
    margin:5px; }
  .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:not(:hover):not(:focus),
  .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus){
    color:#5c7080; }
    .bp3-dark .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:not(:hover):not(:focus), .bp3-dark
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus){
      color:#a7b6c2; }
    .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon, .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-standard, .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-large,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-standard,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:not(:hover):not(:focus) .bp3-icon-large{
      color:#5c7080; }
  .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:disabled,
  .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:disabled{
    color:rgba(92, 112, 128, 0.6) !important; }
    .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:disabled .bp3-icon, .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:disabled .bp3-icon-standard, .bp3-input-group .bp3-input:not(:focus) + .bp3-button.bp3-minimal:disabled .bp3-icon-large,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon-standard,
    .bp3-input-group .bp3-input:not(:focus) + .bp3-input-action .bp3-button.bp3-minimal:disabled .bp3-icon-large{
      color:rgba(92, 112, 128, 0.6) !important; }
  .bp3-input-group.bp3-disabled{
    cursor:not-allowed; }
    .bp3-input-group.bp3-disabled .bp3-icon{
      color:rgba(92, 112, 128, 0.6); }
  .bp3-input-group.bp3-large .bp3-button{
    min-height:30px;
    min-width:30px;
    margin:5px; }
  .bp3-input-group.bp3-large > .bp3-input-left-container > .bp3-icon,
  .bp3-input-group.bp3-large > .bp3-icon,
  .bp3-input-group.bp3-large .bp3-input-action > .bp3-spinner{
    margin:12px; }
  .bp3-input-group.bp3-large .bp3-input{
    font-size:16px;
    height:40px;
    line-height:40px; }
    .bp3-input-group.bp3-large .bp3-input[type="search"], .bp3-input-group.bp3-large .bp3-input.bp3-round{
      padding:0 15px; }
    .bp3-input-group.bp3-large .bp3-input:not(:first-child){
      padding-left:40px; }
    .bp3-input-group.bp3-large .bp3-input:not(:last-child){
      padding-right:40px; }
  .bp3-input-group.bp3-small .bp3-button{
    min-height:20px;
    min-width:20px;
    margin:2px; }
  .bp3-input-group.bp3-small .bp3-tag{
    min-height:20px;
    min-width:20px;
    margin:2px; }
  .bp3-input-group.bp3-small > .bp3-input-left-container > .bp3-icon,
  .bp3-input-group.bp3-small > .bp3-icon,
  .bp3-input-group.bp3-small .bp3-input-action > .bp3-spinner{
    margin:4px; }
  .bp3-input-group.bp3-small .bp3-input{
    font-size:12px;
    height:24px;
    line-height:24px;
    padding-left:8px;
    padding-right:8px; }
    .bp3-input-group.bp3-small .bp3-input[type="search"], .bp3-input-group.bp3-small .bp3-input.bp3-round{
      padding:0 12px; }
    .bp3-input-group.bp3-small .bp3-input:not(:first-child){
      padding-left:24px; }
    .bp3-input-group.bp3-small .bp3-input:not(:last-child){
      padding-right:24px; }
  .bp3-input-group.bp3-fill{
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto;
    width:100%; }
  .bp3-input-group.bp3-round .bp3-button,
  .bp3-input-group.bp3-round .bp3-input,
  .bp3-input-group.bp3-round .bp3-tag{
    border-radius:30px; }
  .bp3-dark .bp3-input-group .bp3-icon{
    color:#a7b6c2; }
  .bp3-dark .bp3-input-group.bp3-disabled .bp3-icon{
    color:rgba(167, 182, 194, 0.6); }
  .bp3-input-group.bp3-intent-primary .bp3-input{
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-primary .bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-primary .bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #137cbd;
              box-shadow:inset 0 0 0 1px #137cbd; }
    .bp3-input-group.bp3-intent-primary .bp3-input:disabled, .bp3-input-group.bp3-intent-primary .bp3-input.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-input-group.bp3-intent-primary > .bp3-icon{
    color:#106ba3; }
    .bp3-dark .bp3-input-group.bp3-intent-primary > .bp3-icon{
      color:#48aff0; }
  .bp3-input-group.bp3-intent-success .bp3-input{
    -webkit-box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-success .bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-success .bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #0f9960;
              box-shadow:inset 0 0 0 1px #0f9960; }
    .bp3-input-group.bp3-intent-success .bp3-input:disabled, .bp3-input-group.bp3-intent-success .bp3-input.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-input-group.bp3-intent-success > .bp3-icon{
    color:#0d8050; }
    .bp3-dark .bp3-input-group.bp3-intent-success > .bp3-icon{
      color:#3dcc91; }
  .bp3-input-group.bp3-intent-warning .bp3-input{
    -webkit-box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-warning .bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-warning .bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #d9822b;
              box-shadow:inset 0 0 0 1px #d9822b; }
    .bp3-input-group.bp3-intent-warning .bp3-input:disabled, .bp3-input-group.bp3-intent-warning .bp3-input.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-input-group.bp3-intent-warning > .bp3-icon{
    color:#bf7326; }
    .bp3-dark .bp3-input-group.bp3-intent-warning > .bp3-icon{
      color:#ffb366; }
  .bp3-input-group.bp3-intent-danger .bp3-input{
    -webkit-box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-danger .bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input-group.bp3-intent-danger .bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #db3737;
              box-shadow:inset 0 0 0 1px #db3737; }
    .bp3-input-group.bp3-intent-danger .bp3-input:disabled, .bp3-input-group.bp3-intent-danger .bp3-input.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-input-group.bp3-intent-danger > .bp3-icon{
    color:#c23030; }
    .bp3-dark .bp3-input-group.bp3-intent-danger > .bp3-icon{
      color:#ff7373; }
.bp3-input{
  -webkit-appearance:none;
     -moz-appearance:none;
          appearance:none;
  background:#ffffff;
  border:none;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
  color:#182026;
  font-size:14px;
  font-weight:400;
  height:30px;
  line-height:30px;
  outline:none;
  padding:0 10px;
  -webkit-transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:-webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-box-shadow 100ms cubic-bezier(0.4, 1, 0.75, 0.9);
  vertical-align:middle; }
  .bp3-input::-webkit-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input::-moz-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input:-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input::-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input::placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input:focus, .bp3-input.bp3-active{
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-input[type="search"], .bp3-input.bp3-round{
    border-radius:30px;
    -webkit-box-sizing:border-box;
            box-sizing:border-box;
    padding-left:10px; }
  .bp3-input[readonly]{
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.15); }
  .bp3-input:disabled, .bp3-input.bp3-disabled{
    background:rgba(206, 217, 224, 0.5);
    -webkit-box-shadow:none;
            box-shadow:none;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed;
    resize:none; }
  .bp3-input.bp3-large{
    font-size:16px;
    height:40px;
    line-height:40px; }
    .bp3-input.bp3-large[type="search"], .bp3-input.bp3-large.bp3-round{
      padding:0 15px; }
  .bp3-input.bp3-small{
    font-size:12px;
    height:24px;
    line-height:24px;
    padding-left:8px;
    padding-right:8px; }
    .bp3-input.bp3-small[type="search"], .bp3-input.bp3-small.bp3-round{
      padding:0 12px; }
  .bp3-input.bp3-fill{
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto;
    width:100%; }
  .bp3-dark .bp3-input{
    background:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }
    .bp3-dark .bp3-input::-webkit-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-input::-moz-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-input:-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-input::-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-input::placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-input:disabled, .bp3-dark .bp3-input.bp3-disabled{
      background:rgba(57, 75, 89, 0.5);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(167, 182, 194, 0.6); }
  .bp3-input.bp3-intent-primary{
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-primary:focus{
      -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-primary[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #137cbd;
              box-shadow:inset 0 0 0 1px #137cbd; }
    .bp3-input.bp3-intent-primary:disabled, .bp3-input.bp3-intent-primary.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
    .bp3-dark .bp3-input.bp3-intent-primary{
      -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px #137cbd, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-primary:focus{
        -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
                box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-primary[readonly]{
        -webkit-box-shadow:inset 0 0 0 1px #137cbd;
                box-shadow:inset 0 0 0 1px #137cbd; }
      .bp3-dark .bp3-input.bp3-intent-primary:disabled, .bp3-dark .bp3-input.bp3-intent-primary.bp3-disabled{
        -webkit-box-shadow:none;
                box-shadow:none; }
  .bp3-input.bp3-intent-success{
    -webkit-box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-success:focus{
      -webkit-box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-success[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #0f9960;
              box-shadow:inset 0 0 0 1px #0f9960; }
    .bp3-input.bp3-intent-success:disabled, .bp3-input.bp3-intent-success.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
    .bp3-dark .bp3-input.bp3-intent-success{
      -webkit-box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), 0 0 0 0 rgba(15, 153, 96, 0), inset 0 0 0 1px #0f9960, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-success:focus{
        -webkit-box-shadow:0 0 0 1px #0f9960, 0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
                box-shadow:0 0 0 1px #0f9960, 0 0 0 1px #0f9960, 0 0 0 3px rgba(15, 153, 96, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-success[readonly]{
        -webkit-box-shadow:inset 0 0 0 1px #0f9960;
                box-shadow:inset 0 0 0 1px #0f9960; }
      .bp3-dark .bp3-input.bp3-intent-success:disabled, .bp3-dark .bp3-input.bp3-intent-success.bp3-disabled{
        -webkit-box-shadow:none;
                box-shadow:none; }
  .bp3-input.bp3-intent-warning{
    -webkit-box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-warning:focus{
      -webkit-box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-warning[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #d9822b;
              box-shadow:inset 0 0 0 1px #d9822b; }
    .bp3-input.bp3-intent-warning:disabled, .bp3-input.bp3-intent-warning.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
    .bp3-dark .bp3-input.bp3-intent-warning{
      -webkit-box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), 0 0 0 0 rgba(217, 130, 43, 0), inset 0 0 0 1px #d9822b, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-warning:focus{
        -webkit-box-shadow:0 0 0 1px #d9822b, 0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
                box-shadow:0 0 0 1px #d9822b, 0 0 0 1px #d9822b, 0 0 0 3px rgba(217, 130, 43, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-warning[readonly]{
        -webkit-box-shadow:inset 0 0 0 1px #d9822b;
                box-shadow:inset 0 0 0 1px #d9822b; }
      .bp3-dark .bp3-input.bp3-intent-warning:disabled, .bp3-dark .bp3-input.bp3-intent-warning.bp3-disabled{
        -webkit-box-shadow:none;
                box-shadow:none; }
  .bp3-input.bp3-intent-danger{
    -webkit-box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.15), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-danger:focus{
      -webkit-box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-input.bp3-intent-danger[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px #db3737;
              box-shadow:inset 0 0 0 1px #db3737; }
    .bp3-input.bp3-intent-danger:disabled, .bp3-input.bp3-intent-danger.bp3-disabled{
      -webkit-box-shadow:none;
              box-shadow:none; }
    .bp3-dark .bp3-input.bp3-intent-danger{
      -webkit-box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), 0 0 0 0 rgba(219, 55, 55, 0), inset 0 0 0 1px #db3737, inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-danger:focus{
        -webkit-box-shadow:0 0 0 1px #db3737, 0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
                box-shadow:0 0 0 1px #db3737, 0 0 0 1px #db3737, 0 0 0 3px rgba(219, 55, 55, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
      .bp3-dark .bp3-input.bp3-intent-danger[readonly]{
        -webkit-box-shadow:inset 0 0 0 1px #db3737;
                box-shadow:inset 0 0 0 1px #db3737; }
      .bp3-dark .bp3-input.bp3-intent-danger:disabled, .bp3-dark .bp3-input.bp3-intent-danger.bp3-disabled{
        -webkit-box-shadow:none;
                box-shadow:none; }
  .bp3-input::-ms-clear{
    display:none; }
textarea.bp3-input{
  max-width:100%;
  padding:10px; }
  textarea.bp3-input, textarea.bp3-input.bp3-large, textarea.bp3-input.bp3-small{
    height:auto;
    line-height:inherit; }
  textarea.bp3-input.bp3-small{
    padding:8px; }
  .bp3-dark textarea.bp3-input{
    background:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), 0 0 0 0 rgba(19, 124, 189, 0), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }
    .bp3-dark textarea.bp3-input::-webkit-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark textarea.bp3-input::-moz-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark textarea.bp3-input:-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark textarea.bp3-input::-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark textarea.bp3-input::placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark textarea.bp3-input:focus{
      -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark textarea.bp3-input[readonly]{
      -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark textarea.bp3-input:disabled, .bp3-dark textarea.bp3-input.bp3-disabled{
      background:rgba(57, 75, 89, 0.5);
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(167, 182, 194, 0.6); }
label.bp3-label{
  display:block;
  margin-bottom:15px;
  margin-top:0; }
  label.bp3-label .bp3-html-select,
  label.bp3-label .bp3-input,
  label.bp3-label .bp3-select,
  label.bp3-label .bp3-slider,
  label.bp3-label .bp3-popover-wrapper{
    display:block;
    margin-top:5px;
    text-transform:none; }
  label.bp3-label .bp3-button-group{
    margin-top:5px; }
  label.bp3-label .bp3-select select,
  label.bp3-label .bp3-html-select select{
    font-weight:400;
    vertical-align:top;
    width:100%; }
  label.bp3-label.bp3-disabled,
  label.bp3-label.bp3-disabled .bp3-text-muted{
    color:rgba(92, 112, 128, 0.6); }
  label.bp3-label.bp3-inline{
    line-height:30px; }
    label.bp3-label.bp3-inline .bp3-html-select,
    label.bp3-label.bp3-inline .bp3-input,
    label.bp3-label.bp3-inline .bp3-input-group,
    label.bp3-label.bp3-inline .bp3-select,
    label.bp3-label.bp3-inline .bp3-popover-wrapper{
      display:inline-block;
      margin:0 0 0 5px;
      vertical-align:top; }
    label.bp3-label.bp3-inline .bp3-button-group{
      margin:0 0 0 5px; }
    label.bp3-label.bp3-inline .bp3-input-group .bp3-input{
      margin-left:0; }
    label.bp3-label.bp3-inline.bp3-large{
      line-height:40px; }
  label.bp3-label:not(.bp3-inline) .bp3-popover-target{
    display:block; }
  .bp3-dark label.bp3-label{
    color:#f5f8fa; }
    .bp3-dark label.bp3-label.bp3-disabled,
    .bp3-dark label.bp3-label.bp3-disabled .bp3-text-muted{
      color:rgba(167, 182, 194, 0.6); }
.bp3-numeric-input .bp3-button-group.bp3-vertical > .bp3-button{
  -webkit-box-flex:1;
      -ms-flex:1 1 14px;
          flex:1 1 14px;
  min-height:0;
  padding:0;
  width:30px; }
  .bp3-numeric-input .bp3-button-group.bp3-vertical > .bp3-button:first-child{
    border-radius:0 3px 0 0; }
  .bp3-numeric-input .bp3-button-group.bp3-vertical > .bp3-button:last-child{
    border-radius:0 0 3px 0; }

.bp3-numeric-input .bp3-button-group.bp3-vertical:first-child > .bp3-button:first-child{
  border-radius:3px 0 0 0; }

.bp3-numeric-input .bp3-button-group.bp3-vertical:first-child > .bp3-button:last-child{
  border-radius:0 0 0 3px; }

.bp3-numeric-input.bp3-large .bp3-button-group.bp3-vertical > .bp3-button{
  width:40px; }

form{
  display:block; }
.bp3-html-select select,
.bp3-select select{
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  border:none;
  border-radius:3px;
  cursor:pointer;
  font-size:14px;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  padding:5px 10px;
  text-align:left;
  vertical-align:middle;
  background-color:#f5f8fa;
  background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));
  background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
  -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
          box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
  color:#182026;
  -moz-appearance:none;
  -webkit-appearance:none;
  border-radius:3px;
  height:30px;
  padding:0 25px 0 10px;
  width:100%; }
  .bp3-html-select select > *, .bp3-select select > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-html-select select > .bp3-fill, .bp3-select select > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-html-select select::before,
  .bp3-select select::before, .bp3-html-select select > *, .bp3-select select > *{
    margin-right:7px; }
  .bp3-html-select select:empty::before,
  .bp3-select select:empty::before,
  .bp3-html-select select > :last-child,
  .bp3-select select > :last-child{
    margin-right:0; }
  .bp3-html-select select:hover,
  .bp3-select select:hover{
    background-clip:padding-box;
    background-color:#ebf1f5;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
  .bp3-html-select select:active,
  .bp3-select select:active, .bp3-html-select select.bp3-active,
  .bp3-select select.bp3-active{
    background-color:#d8e1e8;
    background-image:none;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-html-select select:disabled,
  .bp3-select select:disabled, .bp3-html-select select.bp3-disabled,
  .bp3-select select.bp3-disabled{
    background-color:rgba(206, 217, 224, 0.5);
    background-image:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed;
    outline:none; }
    .bp3-html-select select:disabled.bp3-active,
    .bp3-select select:disabled.bp3-active, .bp3-html-select select:disabled.bp3-active:hover,
    .bp3-select select:disabled.bp3-active:hover, .bp3-html-select select.bp3-disabled.bp3-active,
    .bp3-select select.bp3-disabled.bp3-active, .bp3-html-select select.bp3-disabled.bp3-active:hover,
    .bp3-select select.bp3-disabled.bp3-active:hover{
      background:rgba(206, 217, 224, 0.7); }

.bp3-html-select.bp3-minimal select,
.bp3-select.bp3-minimal select{
  background:none;
  -webkit-box-shadow:none;
          box-shadow:none; }
  .bp3-html-select.bp3-minimal select:hover,
  .bp3-select.bp3-minimal select:hover{
    background:rgba(167, 182, 194, 0.3);
    -webkit-box-shadow:none;
            box-shadow:none;
    color:#182026;
    text-decoration:none; }
  .bp3-html-select.bp3-minimal select:active,
  .bp3-select.bp3-minimal select:active, .bp3-html-select.bp3-minimal select.bp3-active,
  .bp3-select.bp3-minimal select.bp3-active{
    background:rgba(115, 134, 148, 0.3);
    -webkit-box-shadow:none;
            box-shadow:none;
    color:#182026; }
  .bp3-html-select.bp3-minimal select:disabled,
  .bp3-select.bp3-minimal select:disabled, .bp3-html-select.bp3-minimal select:disabled:hover,
  .bp3-select.bp3-minimal select:disabled:hover, .bp3-html-select.bp3-minimal select.bp3-disabled,
  .bp3-select.bp3-minimal select.bp3-disabled, .bp3-html-select.bp3-minimal select.bp3-disabled:hover,
  .bp3-select.bp3-minimal select.bp3-disabled:hover{
    background:none;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed; }
    .bp3-html-select.bp3-minimal select:disabled.bp3-active,
    .bp3-select.bp3-minimal select:disabled.bp3-active, .bp3-html-select.bp3-minimal select:disabled:hover.bp3-active,
    .bp3-select.bp3-minimal select:disabled:hover.bp3-active, .bp3-html-select.bp3-minimal select.bp3-disabled.bp3-active,
    .bp3-select.bp3-minimal select.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal select.bp3-disabled:hover.bp3-active,
    .bp3-select.bp3-minimal select.bp3-disabled:hover.bp3-active{
      background:rgba(115, 134, 148, 0.3); }
  .bp3-dark .bp3-html-select.bp3-minimal select, .bp3-html-select.bp3-minimal .bp3-dark select,
  .bp3-dark .bp3-select.bp3-minimal select, .bp3-select.bp3-minimal .bp3-dark select{
    background:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    color:inherit; }
    .bp3-dark .bp3-html-select.bp3-minimal select:hover, .bp3-html-select.bp3-minimal .bp3-dark select:hover,
    .bp3-dark .bp3-select.bp3-minimal select:hover, .bp3-select.bp3-minimal .bp3-dark select:hover, .bp3-dark .bp3-html-select.bp3-minimal select:active, .bp3-html-select.bp3-minimal .bp3-dark select:active,
    .bp3-dark .bp3-select.bp3-minimal select:active, .bp3-select.bp3-minimal .bp3-dark select:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-active,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-active{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none; }
    .bp3-dark .bp3-html-select.bp3-minimal select:hover, .bp3-html-select.bp3-minimal .bp3-dark select:hover,
    .bp3-dark .bp3-select.bp3-minimal select:hover, .bp3-select.bp3-minimal .bp3-dark select:hover{
      background:rgba(138, 155, 168, 0.15); }
    .bp3-dark .bp3-html-select.bp3-minimal select:active, .bp3-html-select.bp3-minimal .bp3-dark select:active,
    .bp3-dark .bp3-select.bp3-minimal select:active, .bp3-select.bp3-minimal .bp3-dark select:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-active,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-active{
      background:rgba(138, 155, 168, 0.3);
      color:#f5f8fa; }
    .bp3-dark .bp3-html-select.bp3-minimal select:disabled, .bp3-html-select.bp3-minimal .bp3-dark select:disabled,
    .bp3-dark .bp3-select.bp3-minimal select:disabled, .bp3-select.bp3-minimal .bp3-dark select:disabled, .bp3-dark .bp3-html-select.bp3-minimal select:disabled:hover, .bp3-html-select.bp3-minimal .bp3-dark select:disabled:hover,
    .bp3-dark .bp3-select.bp3-minimal select:disabled:hover, .bp3-select.bp3-minimal .bp3-dark select:disabled:hover, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled:hover, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled:hover,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled:hover, .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled:hover{
      background:none;
      color:rgba(167, 182, 194, 0.6);
      cursor:not-allowed; }
      .bp3-dark .bp3-html-select.bp3-minimal select:disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select:disabled.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select:disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select:disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select:disabled:hover.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select:disabled:hover.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select:disabled:hover.bp3-active, .bp3-select.bp3-minimal .bp3-dark select:disabled:hover.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-disabled:hover.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-disabled:hover.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-disabled:hover.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-disabled:hover.bp3-active{
        background:rgba(138, 155, 168, 0.3); }
  .bp3-html-select.bp3-minimal select.bp3-intent-primary,
  .bp3-select.bp3-minimal select.bp3-intent-primary{
    color:#106ba3; }
    .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover,
    .bp3-select.bp3-minimal select.bp3-intent-primary:hover, .bp3-html-select.bp3-minimal select.bp3-intent-primary:active,
    .bp3-select.bp3-minimal select.bp3-intent-primary:active, .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#106ba3; }
    .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover,
    .bp3-select.bp3-minimal select.bp3-intent-primary:hover{
      background:rgba(19, 124, 189, 0.15);
      color:#106ba3; }
    .bp3-html-select.bp3-minimal select.bp3-intent-primary:active,
    .bp3-select.bp3-minimal select.bp3-intent-primary:active, .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active{
      background:rgba(19, 124, 189, 0.3);
      color:#106ba3; }
    .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled,
    .bp3-select.bp3-minimal select.bp3-intent-primary:disabled, .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled,
    .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled{
      background:none;
      color:rgba(16, 107, 163, 0.5); }
      .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active, .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active{
        background:rgba(19, 124, 189, 0.3); }
    .bp3-html-select.bp3-minimal select.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head, .bp3-select.bp3-minimal select.bp3-intent-primary .bp3-button-spinner .bp3-spinner-head{
      stroke:#106ba3; }
    .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary{
      color:#48aff0; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:hover, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:hover,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:hover, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:hover{
        background:rgba(19, 124, 189, 0.2);
        color:#48aff0; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-active{
        background:rgba(19, 124, 189, 0.3);
        color:#48aff0; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled{
        background:none;
        color:rgba(72, 175, 240, 0.5); }
        .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary:disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary:disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-primary.bp3-disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-primary.bp3-disabled.bp3-active{
          background:rgba(19, 124, 189, 0.3); }
  .bp3-html-select.bp3-minimal select.bp3-intent-success,
  .bp3-select.bp3-minimal select.bp3-intent-success{
    color:#0d8050; }
    .bp3-html-select.bp3-minimal select.bp3-intent-success:hover,
    .bp3-select.bp3-minimal select.bp3-intent-success:hover, .bp3-html-select.bp3-minimal select.bp3-intent-success:active,
    .bp3-select.bp3-minimal select.bp3-intent-success:active, .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#0d8050; }
    .bp3-html-select.bp3-minimal select.bp3-intent-success:hover,
    .bp3-select.bp3-minimal select.bp3-intent-success:hover{
      background:rgba(15, 153, 96, 0.15);
      color:#0d8050; }
    .bp3-html-select.bp3-minimal select.bp3-intent-success:active,
    .bp3-select.bp3-minimal select.bp3-intent-success:active, .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active{
      background:rgba(15, 153, 96, 0.3);
      color:#0d8050; }
    .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled,
    .bp3-select.bp3-minimal select.bp3-intent-success:disabled, .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled,
    .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled{
      background:none;
      color:rgba(13, 128, 80, 0.5); }
      .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active, .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active{
        background:rgba(15, 153, 96, 0.3); }
    .bp3-html-select.bp3-minimal select.bp3-intent-success .bp3-button-spinner .bp3-spinner-head, .bp3-select.bp3-minimal select.bp3-intent-success .bp3-button-spinner .bp3-spinner-head{
      stroke:#0d8050; }
    .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success{
      color:#3dcc91; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:hover, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:hover,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:hover, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:hover{
        background:rgba(15, 153, 96, 0.2);
        color:#3dcc91; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-active{
        background:rgba(15, 153, 96, 0.3);
        color:#3dcc91; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled{
        background:none;
        color:rgba(61, 204, 145, 0.5); }
        .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success:disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success:disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-success.bp3-disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-success.bp3-disabled.bp3-active{
          background:rgba(15, 153, 96, 0.3); }
  .bp3-html-select.bp3-minimal select.bp3-intent-warning,
  .bp3-select.bp3-minimal select.bp3-intent-warning{
    color:#bf7326; }
    .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover,
    .bp3-select.bp3-minimal select.bp3-intent-warning:hover, .bp3-html-select.bp3-minimal select.bp3-intent-warning:active,
    .bp3-select.bp3-minimal select.bp3-intent-warning:active, .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#bf7326; }
    .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover,
    .bp3-select.bp3-minimal select.bp3-intent-warning:hover{
      background:rgba(217, 130, 43, 0.15);
      color:#bf7326; }
    .bp3-html-select.bp3-minimal select.bp3-intent-warning:active,
    .bp3-select.bp3-minimal select.bp3-intent-warning:active, .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active{
      background:rgba(217, 130, 43, 0.3);
      color:#bf7326; }
    .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled,
    .bp3-select.bp3-minimal select.bp3-intent-warning:disabled, .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled,
    .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled{
      background:none;
      color:rgba(191, 115, 38, 0.5); }
      .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active, .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active{
        background:rgba(217, 130, 43, 0.3); }
    .bp3-html-select.bp3-minimal select.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head, .bp3-select.bp3-minimal select.bp3-intent-warning .bp3-button-spinner .bp3-spinner-head{
      stroke:#bf7326; }
    .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning{
      color:#ffb366; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:hover, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:hover,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:hover, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:hover{
        background:rgba(217, 130, 43, 0.2);
        color:#ffb366; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-active{
        background:rgba(217, 130, 43, 0.3);
        color:#ffb366; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled{
        background:none;
        color:rgba(255, 179, 102, 0.5); }
        .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning:disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning:disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-warning.bp3-disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-warning.bp3-disabled.bp3-active{
          background:rgba(217, 130, 43, 0.3); }
  .bp3-html-select.bp3-minimal select.bp3-intent-danger,
  .bp3-select.bp3-minimal select.bp3-intent-danger{
    color:#c23030; }
    .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover,
    .bp3-select.bp3-minimal select.bp3-intent-danger:hover, .bp3-html-select.bp3-minimal select.bp3-intent-danger:active,
    .bp3-select.bp3-minimal select.bp3-intent-danger:active, .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active{
      background:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:#c23030; }
    .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover,
    .bp3-select.bp3-minimal select.bp3-intent-danger:hover{
      background:rgba(219, 55, 55, 0.15);
      color:#c23030; }
    .bp3-html-select.bp3-minimal select.bp3-intent-danger:active,
    .bp3-select.bp3-minimal select.bp3-intent-danger:active, .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active,
    .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active{
      background:rgba(219, 55, 55, 0.3);
      color:#c23030; }
    .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled,
    .bp3-select.bp3-minimal select.bp3-intent-danger:disabled, .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled,
    .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled{
      background:none;
      color:rgba(194, 48, 48, 0.5); }
      .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active, .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active,
      .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active{
        background:rgba(219, 55, 55, 0.3); }
    .bp3-html-select.bp3-minimal select.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head, .bp3-select.bp3-minimal select.bp3-intent-danger .bp3-button-spinner .bp3-spinner-head{
      stroke:#c23030; }
    .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger,
    .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger{
      color:#ff7373; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:hover, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:hover,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:hover, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:hover{
        background:rgba(219, 55, 55, 0.2);
        color:#ff7373; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-active,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-active{
        background:rgba(219, 55, 55, 0.3);
        color:#ff7373; }
      .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled,
      .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled{
        background:none;
        color:rgba(255, 115, 115, 0.5); }
        .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger:disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger:disabled.bp3-active, .bp3-dark .bp3-html-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active, .bp3-html-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled.bp3-active,
        .bp3-dark .bp3-select.bp3-minimal select.bp3-intent-danger.bp3-disabled.bp3-active, .bp3-select.bp3-minimal .bp3-dark select.bp3-intent-danger.bp3-disabled.bp3-active{
          background:rgba(219, 55, 55, 0.3); }

.bp3-html-select.bp3-large select,
.bp3-select.bp3-large select{
  font-size:16px;
  height:40px;
  padding-right:35px; }

.bp3-dark .bp3-html-select select, .bp3-dark .bp3-select select{
  background-color:#394b59;
  background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
  background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
  color:#f5f8fa; }
  .bp3-dark .bp3-html-select select:hover, .bp3-dark .bp3-select select:hover, .bp3-dark .bp3-html-select select:active, .bp3-dark .bp3-select select:active, .bp3-dark .bp3-html-select select.bp3-active, .bp3-dark .bp3-select select.bp3-active{
    color:#f5f8fa; }
  .bp3-dark .bp3-html-select select:hover, .bp3-dark .bp3-select select:hover{
    background-color:#30404d;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-html-select select:active, .bp3-dark .bp3-select select:active, .bp3-dark .bp3-html-select select.bp3-active, .bp3-dark .bp3-select select.bp3-active{
    background-color:#202b33;
    background-image:none;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-html-select select:disabled, .bp3-dark .bp3-select select:disabled, .bp3-dark .bp3-html-select select.bp3-disabled, .bp3-dark .bp3-select select.bp3-disabled{
    background-color:rgba(57, 75, 89, 0.5);
    background-image:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-html-select select:disabled.bp3-active, .bp3-dark .bp3-select select:disabled.bp3-active, .bp3-dark .bp3-html-select select.bp3-disabled.bp3-active, .bp3-dark .bp3-select select.bp3-disabled.bp3-active{
      background:rgba(57, 75, 89, 0.7); }
  .bp3-dark .bp3-html-select select .bp3-button-spinner .bp3-spinner-head, .bp3-dark .bp3-select select .bp3-button-spinner .bp3-spinner-head{
    background:rgba(16, 22, 26, 0.5);
    stroke:#8a9ba8; }

.bp3-html-select select:disabled,
.bp3-select select:disabled{
  background-color:rgba(206, 217, 224, 0.5);
  -webkit-box-shadow:none;
          box-shadow:none;
  color:rgba(92, 112, 128, 0.6);
  cursor:not-allowed; }

.bp3-html-select .bp3-icon,
.bp3-select .bp3-icon, .bp3-select::after{
  color:#5c7080;
  pointer-events:none;
  position:absolute;
  right:7px;
  top:7px; }
  .bp3-html-select .bp3-disabled.bp3-icon,
  .bp3-select .bp3-disabled.bp3-icon, .bp3-disabled.bp3-select::after{
    color:rgba(92, 112, 128, 0.6); }
.bp3-html-select,
.bp3-select{
  display:inline-block;
  letter-spacing:normal;
  position:relative;
  vertical-align:middle; }
  .bp3-html-select select::-ms-expand,
  .bp3-select select::-ms-expand{
    display:none; }
  .bp3-html-select .bp3-icon,
  .bp3-select .bp3-icon{
    color:#5c7080; }
    .bp3-html-select .bp3-icon:hover,
    .bp3-select .bp3-icon:hover{
      color:#182026; }
    .bp3-dark .bp3-html-select .bp3-icon, .bp3-dark
    .bp3-select .bp3-icon{
      color:#a7b6c2; }
      .bp3-dark .bp3-html-select .bp3-icon:hover, .bp3-dark
      .bp3-select .bp3-icon:hover{
        color:#f5f8fa; }
  .bp3-html-select.bp3-large::after,
  .bp3-html-select.bp3-large .bp3-icon,
  .bp3-select.bp3-large::after,
  .bp3-select.bp3-large .bp3-icon{
    right:12px;
    top:12px; }
  .bp3-html-select.bp3-fill,
  .bp3-html-select.bp3-fill select,
  .bp3-select.bp3-fill,
  .bp3-select.bp3-fill select{
    width:100%; }
  .bp3-dark .bp3-html-select option, .bp3-dark
  .bp3-select option{
    background-color:#30404d;
    color:#f5f8fa; }
  .bp3-dark .bp3-html-select option:disabled, .bp3-dark
  .bp3-select option:disabled{
    color:rgba(167, 182, 194, 0.6); }
  .bp3-dark .bp3-html-select::after, .bp3-dark
  .bp3-select::after{
    color:#a7b6c2; }

.bp3-select::after{
  font-family:"Icons16", sans-serif;
  font-size:16px;
  font-style:normal;
  font-weight:400;
  line-height:1;
  -moz-osx-font-smoothing:grayscale;
  -webkit-font-smoothing:antialiased;
  content:""; }
.bp3-running-text table, table.bp3-html-table{
  border-spacing:0;
  font-size:14px; }
  .bp3-running-text table th, table.bp3-html-table th,
  .bp3-running-text table td,
  table.bp3-html-table td{
    padding:11px;
    text-align:left;
    vertical-align:top; }
  .bp3-running-text table th, table.bp3-html-table th{
    color:#182026;
    font-weight:600; }
  
  .bp3-running-text table td,
  table.bp3-html-table td{
    color:#182026; }
  .bp3-running-text table tbody tr:first-child th, table.bp3-html-table tbody tr:first-child th,
  .bp3-running-text table tbody tr:first-child td,
  table.bp3-html-table tbody tr:first-child td,
  .bp3-running-text table tfoot tr:first-child th,
  table.bp3-html-table tfoot tr:first-child th,
  .bp3-running-text table tfoot tr:first-child td,
  table.bp3-html-table tfoot tr:first-child td{
    -webkit-box-shadow:inset 0 1px 0 0 rgba(16, 22, 26, 0.15);
            box-shadow:inset 0 1px 0 0 rgba(16, 22, 26, 0.15); }
  .bp3-dark .bp3-running-text table th, .bp3-running-text .bp3-dark table th, .bp3-dark table.bp3-html-table th{
    color:#f5f8fa; }
  .bp3-dark .bp3-running-text table td, .bp3-running-text .bp3-dark table td, .bp3-dark table.bp3-html-table td{
    color:#f5f8fa; }
  .bp3-dark .bp3-running-text table tbody tr:first-child th, .bp3-running-text .bp3-dark table tbody tr:first-child th, .bp3-dark table.bp3-html-table tbody tr:first-child th,
  .bp3-dark .bp3-running-text table tbody tr:first-child td,
  .bp3-running-text .bp3-dark table tbody tr:first-child td,
  .bp3-dark table.bp3-html-table tbody tr:first-child td,
  .bp3-dark .bp3-running-text table tfoot tr:first-child th,
  .bp3-running-text .bp3-dark table tfoot tr:first-child th,
  .bp3-dark table.bp3-html-table tfoot tr:first-child th,
  .bp3-dark .bp3-running-text table tfoot tr:first-child td,
  .bp3-running-text .bp3-dark table tfoot tr:first-child td,
  .bp3-dark table.bp3-html-table tfoot tr:first-child td{
    -webkit-box-shadow:inset 0 1px 0 0 rgba(255, 255, 255, 0.15);
            box-shadow:inset 0 1px 0 0 rgba(255, 255, 255, 0.15); }

table.bp3-html-table.bp3-html-table-condensed th,
table.bp3-html-table.bp3-html-table-condensed td, table.bp3-html-table.bp3-small th,
table.bp3-html-table.bp3-small td{
  padding-bottom:6px;
  padding-top:6px; }

table.bp3-html-table.bp3-html-table-striped tbody tr:nth-child(odd) td{
  background:rgba(191, 204, 214, 0.15); }

table.bp3-html-table.bp3-html-table-bordered th:not(:first-child){
  -webkit-box-shadow:inset 1px 0 0 0 rgba(16, 22, 26, 0.15);
          box-shadow:inset 1px 0 0 0 rgba(16, 22, 26, 0.15); }

table.bp3-html-table.bp3-html-table-bordered tbody tr td,
table.bp3-html-table.bp3-html-table-bordered tfoot tr td{
  -webkit-box-shadow:inset 0 1px 0 0 rgba(16, 22, 26, 0.15);
          box-shadow:inset 0 1px 0 0 rgba(16, 22, 26, 0.15); }
  table.bp3-html-table.bp3-html-table-bordered tbody tr td:not(:first-child),
  table.bp3-html-table.bp3-html-table-bordered tfoot tr td:not(:first-child){
    -webkit-box-shadow:inset 1px 1px 0 0 rgba(16, 22, 26, 0.15);
            box-shadow:inset 1px 1px 0 0 rgba(16, 22, 26, 0.15); }

table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td{
  -webkit-box-shadow:none;
          box-shadow:none; }
  table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td:not(:first-child){
    -webkit-box-shadow:inset 1px 0 0 0 rgba(16, 22, 26, 0.15);
            box-shadow:inset 1px 0 0 0 rgba(16, 22, 26, 0.15); }

table.bp3-html-table.bp3-interactive tbody tr:hover td{
  background-color:rgba(191, 204, 214, 0.3);
  cursor:pointer; }

table.bp3-html-table.bp3-interactive tbody tr:active td{
  background-color:rgba(191, 204, 214, 0.4); }

.bp3-dark table.bp3-html-table{ }
  .bp3-dark table.bp3-html-table.bp3-html-table-striped tbody tr:nth-child(odd) td{
    background:rgba(92, 112, 128, 0.15); }
  .bp3-dark table.bp3-html-table.bp3-html-table-bordered th:not(:first-child){
    -webkit-box-shadow:inset 1px 0 0 0 rgba(255, 255, 255, 0.15);
            box-shadow:inset 1px 0 0 0 rgba(255, 255, 255, 0.15); }
  .bp3-dark table.bp3-html-table.bp3-html-table-bordered tbody tr td,
  .bp3-dark table.bp3-html-table.bp3-html-table-bordered tfoot tr td{
    -webkit-box-shadow:inset 0 1px 0 0 rgba(255, 255, 255, 0.15);
            box-shadow:inset 0 1px 0 0 rgba(255, 255, 255, 0.15); }
    .bp3-dark table.bp3-html-table.bp3-html-table-bordered tbody tr td:not(:first-child),
    .bp3-dark table.bp3-html-table.bp3-html-table-bordered tfoot tr td:not(:first-child){
      -webkit-box-shadow:inset 1px 1px 0 0 rgba(255, 255, 255, 0.15);
              box-shadow:inset 1px 1px 0 0 rgba(255, 255, 255, 0.15); }
  .bp3-dark table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td{
    -webkit-box-shadow:inset 1px 0 0 0 rgba(255, 255, 255, 0.15);
            box-shadow:inset 1px 0 0 0 rgba(255, 255, 255, 0.15); }
    .bp3-dark table.bp3-html-table.bp3-html-table-bordered.bp3-html-table-striped tbody tr:not(:first-child) td:first-child{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-dark table.bp3-html-table.bp3-interactive tbody tr:hover td{
    background-color:rgba(92, 112, 128, 0.3);
    cursor:pointer; }
  .bp3-dark table.bp3-html-table.bp3-interactive tbody tr:active td{
    background-color:rgba(92, 112, 128, 0.4); }

.bp3-key-combo{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center; }
  .bp3-key-combo > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-key-combo > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-key-combo::before,
  .bp3-key-combo > *{
    margin-right:5px; }
  .bp3-key-combo:empty::before,
  .bp3-key-combo > :last-child{
    margin-right:0; }

.bp3-hotkey-dialog{
  padding-bottom:0;
  top:40px; }
  .bp3-hotkey-dialog .bp3-dialog-body{
    margin:0;
    padding:0; }
  .bp3-hotkey-dialog .bp3-hotkey-label{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1; }

.bp3-hotkey-column{
  margin:auto;
  max-height:80vh;
  overflow-y:auto;
  padding:30px; }
  .bp3-hotkey-column .bp3-heading{
    margin-bottom:20px; }
    .bp3-hotkey-column .bp3-heading:not(:first-child){
      margin-top:40px; }

.bp3-hotkey{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-pack:justify;
      -ms-flex-pack:justify;
          justify-content:space-between;
  margin-left:0;
  margin-right:0; }
  .bp3-hotkey:not(:last-child){
    margin-bottom:10px; }
.bp3-icon{
  display:inline-block;
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  vertical-align:text-bottom; }
  .bp3-icon:not(:empty)::before{
    content:"" !important;
    content:unset !important; }
  .bp3-icon > svg{
    display:block; }
    .bp3-icon > svg:not([fill]){
      fill:currentColor; }

.bp3-icon.bp3-intent-primary, .bp3-icon-standard.bp3-intent-primary, .bp3-icon-large.bp3-intent-primary{
  color:#106ba3; }
  .bp3-dark .bp3-icon.bp3-intent-primary, .bp3-dark .bp3-icon-standard.bp3-intent-primary, .bp3-dark .bp3-icon-large.bp3-intent-primary{
    color:#48aff0; }

.bp3-icon.bp3-intent-success, .bp3-icon-standard.bp3-intent-success, .bp3-icon-large.bp3-intent-success{
  color:#0d8050; }
  .bp3-dark .bp3-icon.bp3-intent-success, .bp3-dark .bp3-icon-standard.bp3-intent-success, .bp3-dark .bp3-icon-large.bp3-intent-success{
    color:#3dcc91; }

.bp3-icon.bp3-intent-warning, .bp3-icon-standard.bp3-intent-warning, .bp3-icon-large.bp3-intent-warning{
  color:#bf7326; }
  .bp3-dark .bp3-icon.bp3-intent-warning, .bp3-dark .bp3-icon-standard.bp3-intent-warning, .bp3-dark .bp3-icon-large.bp3-intent-warning{
    color:#ffb366; }

.bp3-icon.bp3-intent-danger, .bp3-icon-standard.bp3-intent-danger, .bp3-icon-large.bp3-intent-danger{
  color:#c23030; }
  .bp3-dark .bp3-icon.bp3-intent-danger, .bp3-dark .bp3-icon-standard.bp3-intent-danger, .bp3-dark .bp3-icon-large.bp3-intent-danger{
    color:#ff7373; }

span.bp3-icon-standard{
  font-family:"Icons16", sans-serif;
  font-size:16px;
  font-style:normal;
  font-weight:400;
  line-height:1;
  -moz-osx-font-smoothing:grayscale;
  -webkit-font-smoothing:antialiased;
  display:inline-block; }

span.bp3-icon-large{
  font-family:"Icons20", sans-serif;
  font-size:20px;
  font-style:normal;
  font-weight:400;
  line-height:1;
  -moz-osx-font-smoothing:grayscale;
  -webkit-font-smoothing:antialiased;
  display:inline-block; }

span.bp3-icon:empty{
  font-family:"Icons20";
  font-size:inherit;
  font-style:normal;
  font-weight:400;
  line-height:1; }
  span.bp3-icon:empty::before{
    -moz-osx-font-smoothing:grayscale;
    -webkit-font-smoothing:antialiased; }

.bp3-icon-add::before{
  content:""; }

.bp3-icon-add-column-left::before{
  content:""; }

.bp3-icon-add-column-right::before{
  content:""; }

.bp3-icon-add-row-bottom::before{
  content:""; }

.bp3-icon-add-row-top::before{
  content:""; }

.bp3-icon-add-to-artifact::before{
  content:""; }

.bp3-icon-add-to-folder::before{
  content:""; }

.bp3-icon-airplane::before{
  content:""; }

.bp3-icon-align-center::before{
  content:""; }

.bp3-icon-align-justify::before{
  content:""; }

.bp3-icon-align-left::before{
  content:""; }

.bp3-icon-align-right::before{
  content:""; }

.bp3-icon-alignment-bottom::before{
  content:""; }

.bp3-icon-alignment-horizontal-center::before{
  content:""; }

.bp3-icon-alignment-left::before{
  content:""; }

.bp3-icon-alignment-right::before{
  content:""; }

.bp3-icon-alignment-top::before{
  content:""; }

.bp3-icon-alignment-vertical-center::before{
  content:""; }

.bp3-icon-annotation::before{
  content:""; }

.bp3-icon-application::before{
  content:""; }

.bp3-icon-applications::before{
  content:""; }

.bp3-icon-archive::before{
  content:""; }

.bp3-icon-arrow-bottom-left::before{
  content:""; }

.bp3-icon-arrow-bottom-right::before{
  content:""; }

.bp3-icon-arrow-down::before{
  content:""; }

.bp3-icon-arrow-left::before{
  content:""; }

.bp3-icon-arrow-right::before{
  content:""; }

.bp3-icon-arrow-top-left::before{
  content:""; }

.bp3-icon-arrow-top-right::before{
  content:""; }

.bp3-icon-arrow-up::before{
  content:""; }

.bp3-icon-arrows-horizontal::before{
  content:""; }

.bp3-icon-arrows-vertical::before{
  content:""; }

.bp3-icon-asterisk::before{
  content:"*"; }

.bp3-icon-automatic-updates::before{
  content:""; }

.bp3-icon-badge::before{
  content:""; }

.bp3-icon-ban-circle::before{
  content:""; }

.bp3-icon-bank-account::before{
  content:""; }

.bp3-icon-barcode::before{
  content:""; }

.bp3-icon-blank::before{
  content:""; }

.bp3-icon-blocked-person::before{
  content:""; }

.bp3-icon-bold::before{
  content:""; }

.bp3-icon-book::before{
  content:""; }

.bp3-icon-bookmark::before{
  content:""; }

.bp3-icon-box::before{
  content:""; }

.bp3-icon-briefcase::before{
  content:""; }

.bp3-icon-bring-data::before{
  content:""; }

.bp3-icon-build::before{
  content:""; }

.bp3-icon-calculator::before{
  content:""; }

.bp3-icon-calendar::before{
  content:""; }

.bp3-icon-camera::before{
  content:""; }

.bp3-icon-caret-down::before{
  content:""; }

.bp3-icon-caret-left::before{
  content:""; }

.bp3-icon-caret-right::before{
  content:""; }

.bp3-icon-caret-up::before{
  content:""; }

.bp3-icon-cell-tower::before{
  content:""; }

.bp3-icon-changes::before{
  content:""; }

.bp3-icon-chart::before{
  content:""; }

.bp3-icon-chat::before{
  content:""; }

.bp3-icon-chevron-backward::before{
  content:""; }

.bp3-icon-chevron-down::before{
  content:""; }

.bp3-icon-chevron-forward::before{
  content:""; }

.bp3-icon-chevron-left::before{
  content:""; }

.bp3-icon-chevron-right::before{
  content:""; }

.bp3-icon-chevron-up::before{
  content:""; }

.bp3-icon-circle::before{
  content:""; }

.bp3-icon-circle-arrow-down::before{
  content:""; }

.bp3-icon-circle-arrow-left::before{
  content:""; }

.bp3-icon-circle-arrow-right::before{
  content:""; }

.bp3-icon-circle-arrow-up::before{
  content:""; }

.bp3-icon-citation::before{
  content:""; }

.bp3-icon-clean::before{
  content:""; }

.bp3-icon-clipboard::before{
  content:""; }

.bp3-icon-cloud::before{
  content:""; }

.bp3-icon-cloud-download::before{
  content:""; }

.bp3-icon-cloud-upload::before{
  content:""; }

.bp3-icon-code::before{
  content:""; }

.bp3-icon-code-block::before{
  content:""; }

.bp3-icon-cog::before{
  content:""; }

.bp3-icon-collapse-all::before{
  content:""; }

.bp3-icon-column-layout::before{
  content:""; }

.bp3-icon-comment::before{
  content:""; }

.bp3-icon-comparison::before{
  content:""; }

.bp3-icon-compass::before{
  content:""; }

.bp3-icon-compressed::before{
  content:""; }

.bp3-icon-confirm::before{
  content:""; }

.bp3-icon-console::before{
  content:""; }

.bp3-icon-contrast::before{
  content:""; }

.bp3-icon-control::before{
  content:""; }

.bp3-icon-credit-card::before{
  content:""; }

.bp3-icon-cross::before{
  content:""; }

.bp3-icon-crown::before{
  content:""; }

.bp3-icon-cube::before{
  content:""; }

.bp3-icon-cube-add::before{
  content:""; }

.bp3-icon-cube-remove::before{
  content:""; }

.bp3-icon-curved-range-chart::before{
  content:""; }

.bp3-icon-cut::before{
  content:""; }

.bp3-icon-dashboard::before{
  content:""; }

.bp3-icon-data-lineage::before{
  content:""; }

.bp3-icon-database::before{
  content:""; }

.bp3-icon-delete::before{
  content:""; }

.bp3-icon-delta::before{
  content:""; }

.bp3-icon-derive-column::before{
  content:""; }

.bp3-icon-desktop::before{
  content:""; }

.bp3-icon-diagnosis::before{
  content:""; }

.bp3-icon-diagram-tree::before{
  content:""; }

.bp3-icon-direction-left::before{
  content:""; }

.bp3-icon-direction-right::before{
  content:""; }

.bp3-icon-disable::before{
  content:""; }

.bp3-icon-document::before{
  content:""; }

.bp3-icon-document-open::before{
  content:""; }

.bp3-icon-document-share::before{
  content:""; }

.bp3-icon-dollar::before{
  content:"$"; }

.bp3-icon-dot::before{
  content:""; }

.bp3-icon-double-caret-horizontal::before{
  content:""; }

.bp3-icon-double-caret-vertical::before{
  content:""; }

.bp3-icon-double-chevron-down::before{
  content:""; }

.bp3-icon-double-chevron-left::before{
  content:""; }

.bp3-icon-double-chevron-right::before{
  content:""; }

.bp3-icon-double-chevron-up::before{
  content:""; }

.bp3-icon-doughnut-chart::before{
  content:""; }

.bp3-icon-download::before{
  content:""; }

.bp3-icon-drag-handle-horizontal::before{
  content:""; }

.bp3-icon-drag-handle-vertical::before{
  content:""; }

.bp3-icon-draw::before{
  content:""; }

.bp3-icon-drive-time::before{
  content:""; }

.bp3-icon-duplicate::before{
  content:""; }

.bp3-icon-edit::before{
  content:""; }

.bp3-icon-eject::before{
  content:""; }

.bp3-icon-endorsed::before{
  content:""; }

.bp3-icon-envelope::before{
  content:""; }

.bp3-icon-equals::before{
  content:""; }

.bp3-icon-eraser::before{
  content:""; }

.bp3-icon-error::before{
  content:""; }

.bp3-icon-euro::before{
  content:""; }

.bp3-icon-exchange::before{
  content:""; }

.bp3-icon-exclude-row::before{
  content:""; }

.bp3-icon-expand-all::before{
  content:""; }

.bp3-icon-export::before{
  content:""; }

.bp3-icon-eye-off::before{
  content:""; }

.bp3-icon-eye-on::before{
  content:""; }

.bp3-icon-eye-open::before{
  content:""; }

.bp3-icon-fast-backward::before{
  content:""; }

.bp3-icon-fast-forward::before{
  content:""; }

.bp3-icon-feed::before{
  content:""; }

.bp3-icon-feed-subscribed::before{
  content:""; }

.bp3-icon-film::before{
  content:""; }

.bp3-icon-filter::before{
  content:""; }

.bp3-icon-filter-keep::before{
  content:""; }

.bp3-icon-filter-list::before{
  content:""; }

.bp3-icon-filter-open::before{
  content:""; }

.bp3-icon-filter-remove::before{
  content:""; }

.bp3-icon-flag::before{
  content:""; }

.bp3-icon-flame::before{
  content:""; }

.bp3-icon-flash::before{
  content:""; }

.bp3-icon-floppy-disk::before{
  content:""; }

.bp3-icon-flow-branch::before{
  content:""; }

.bp3-icon-flow-end::before{
  content:""; }

.bp3-icon-flow-linear::before{
  content:""; }

.bp3-icon-flow-review::before{
  content:""; }

.bp3-icon-flow-review-branch::before{
  content:""; }

.bp3-icon-flows::before{
  content:""; }

.bp3-icon-folder-close::before{
  content:""; }

.bp3-icon-folder-new::before{
  content:""; }

.bp3-icon-folder-open::before{
  content:""; }

.bp3-icon-folder-shared::before{
  content:""; }

.bp3-icon-folder-shared-open::before{
  content:""; }

.bp3-icon-follower::before{
  content:""; }

.bp3-icon-following::before{
  content:""; }

.bp3-icon-font::before{
  content:""; }

.bp3-icon-fork::before{
  content:""; }

.bp3-icon-form::before{
  content:""; }

.bp3-icon-full-circle::before{
  content:""; }

.bp3-icon-full-stacked-chart::before{
  content:""; }

.bp3-icon-fullscreen::before{
  content:""; }

.bp3-icon-function::before{
  content:""; }

.bp3-icon-gantt-chart::before{
  content:""; }

.bp3-icon-geolocation::before{
  content:""; }

.bp3-icon-geosearch::before{
  content:""; }

.bp3-icon-git-branch::before{
  content:""; }

.bp3-icon-git-commit::before{
  content:""; }

.bp3-icon-git-merge::before{
  content:""; }

.bp3-icon-git-new-branch::before{
  content:""; }

.bp3-icon-git-pull::before{
  content:""; }

.bp3-icon-git-push::before{
  content:""; }

.bp3-icon-git-repo::before{
  content:""; }

.bp3-icon-glass::before{
  content:""; }

.bp3-icon-globe::before{
  content:""; }

.bp3-icon-globe-network::before{
  content:""; }

.bp3-icon-graph::before{
  content:""; }

.bp3-icon-graph-remove::before{
  content:""; }

.bp3-icon-greater-than::before{
  content:""; }

.bp3-icon-greater-than-or-equal-to::before{
  content:""; }

.bp3-icon-grid::before{
  content:""; }

.bp3-icon-grid-view::before{
  content:""; }

.bp3-icon-group-objects::before{
  content:""; }

.bp3-icon-grouped-bar-chart::before{
  content:""; }

.bp3-icon-hand::before{
  content:""; }

.bp3-icon-hand-down::before{
  content:""; }

.bp3-icon-hand-left::before{
  content:""; }

.bp3-icon-hand-right::before{
  content:""; }

.bp3-icon-hand-up::before{
  content:""; }

.bp3-icon-header::before{
  content:""; }

.bp3-icon-header-one::before{
  content:""; }

.bp3-icon-header-two::before{
  content:""; }

.bp3-icon-headset::before{
  content:""; }

.bp3-icon-heart::before{
  content:""; }

.bp3-icon-heart-broken::before{
  content:""; }

.bp3-icon-heat-grid::before{
  content:""; }

.bp3-icon-heatmap::before{
  content:""; }

.bp3-icon-help::before{
  content:"?"; }

.bp3-icon-helper-management::before{
  content:""; }

.bp3-icon-highlight::before{
  content:""; }

.bp3-icon-history::before{
  content:""; }

.bp3-icon-home::before{
  content:""; }

.bp3-icon-horizontal-bar-chart::before{
  content:""; }

.bp3-icon-horizontal-bar-chart-asc::before{
  content:""; }

.bp3-icon-horizontal-bar-chart-desc::before{
  content:""; }

.bp3-icon-horizontal-distribution::before{
  content:""; }

.bp3-icon-id-number::before{
  content:""; }

.bp3-icon-image-rotate-left::before{
  content:""; }

.bp3-icon-image-rotate-right::before{
  content:""; }

.bp3-icon-import::before{
  content:""; }

.bp3-icon-inbox::before{
  content:""; }

.bp3-icon-inbox-filtered::before{
  content:""; }

.bp3-icon-inbox-geo::before{
  content:""; }

.bp3-icon-inbox-search::before{
  content:""; }

.bp3-icon-inbox-update::before{
  content:""; }

.bp3-icon-info-sign::before{
  content:""; }

.bp3-icon-inheritance::before{
  content:""; }

.bp3-icon-inner-join::before{
  content:""; }

.bp3-icon-insert::before{
  content:""; }

.bp3-icon-intersection::before{
  content:""; }

.bp3-icon-ip-address::before{
  content:""; }

.bp3-icon-issue::before{
  content:""; }

.bp3-icon-issue-closed::before{
  content:""; }

.bp3-icon-issue-new::before{
  content:""; }

.bp3-icon-italic::before{
  content:""; }

.bp3-icon-join-table::before{
  content:""; }

.bp3-icon-key::before{
  content:""; }

.bp3-icon-key-backspace::before{
  content:""; }

.bp3-icon-key-command::before{
  content:""; }

.bp3-icon-key-control::before{
  content:""; }

.bp3-icon-key-delete::before{
  content:""; }

.bp3-icon-key-enter::before{
  content:""; }

.bp3-icon-key-escape::before{
  content:""; }

.bp3-icon-key-option::before{
  content:""; }

.bp3-icon-key-shift::before{
  content:""; }

.bp3-icon-key-tab::before{
  content:""; }

.bp3-icon-known-vehicle::before{
  content:""; }

.bp3-icon-lab-test::before{
  content:""; }

.bp3-icon-label::before{
  content:""; }

.bp3-icon-layer::before{
  content:""; }

.bp3-icon-layers::before{
  content:""; }

.bp3-icon-layout::before{
  content:""; }

.bp3-icon-layout-auto::before{
  content:""; }

.bp3-icon-layout-balloon::before{
  content:""; }

.bp3-icon-layout-circle::before{
  content:""; }

.bp3-icon-layout-grid::before{
  content:""; }

.bp3-icon-layout-group-by::before{
  content:""; }

.bp3-icon-layout-hierarchy::before{
  content:""; }

.bp3-icon-layout-linear::before{
  content:""; }

.bp3-icon-layout-skew-grid::before{
  content:""; }

.bp3-icon-layout-sorted-clusters::before{
  content:""; }

.bp3-icon-learning::before{
  content:""; }

.bp3-icon-left-join::before{
  content:""; }

.bp3-icon-less-than::before{
  content:""; }

.bp3-icon-less-than-or-equal-to::before{
  content:""; }

.bp3-icon-lifesaver::before{
  content:""; }

.bp3-icon-lightbulb::before{
  content:""; }

.bp3-icon-link::before{
  content:""; }

.bp3-icon-list::before{
  content:""; }

.bp3-icon-list-columns::before{
  content:""; }

.bp3-icon-list-detail-view::before{
  content:""; }

.bp3-icon-locate::before{
  content:""; }

.bp3-icon-lock::before{
  content:""; }

.bp3-icon-log-in::before{
  content:""; }

.bp3-icon-log-out::before{
  content:""; }

.bp3-icon-manual::before{
  content:""; }

.bp3-icon-manually-entered-data::before{
  content:""; }

.bp3-icon-map::before{
  content:""; }

.bp3-icon-map-create::before{
  content:""; }

.bp3-icon-map-marker::before{
  content:""; }

.bp3-icon-maximize::before{
  content:""; }

.bp3-icon-media::before{
  content:""; }

.bp3-icon-menu::before{
  content:""; }

.bp3-icon-menu-closed::before{
  content:""; }

.bp3-icon-menu-open::before{
  content:""; }

.bp3-icon-merge-columns::before{
  content:""; }

.bp3-icon-merge-links::before{
  content:""; }

.bp3-icon-minimize::before{
  content:""; }

.bp3-icon-minus::before{
  content:""; }

.bp3-icon-mobile-phone::before{
  content:""; }

.bp3-icon-mobile-video::before{
  content:""; }

.bp3-icon-moon::before{
  content:""; }

.bp3-icon-more::before{
  content:""; }

.bp3-icon-mountain::before{
  content:""; }

.bp3-icon-move::before{
  content:""; }

.bp3-icon-mugshot::before{
  content:""; }

.bp3-icon-multi-select::before{
  content:""; }

.bp3-icon-music::before{
  content:""; }

.bp3-icon-new-drawing::before{
  content:""; }

.bp3-icon-new-grid-item::before{
  content:""; }

.bp3-icon-new-layer::before{
  content:""; }

.bp3-icon-new-layers::before{
  content:""; }

.bp3-icon-new-link::before{
  content:""; }

.bp3-icon-new-object::before{
  content:""; }

.bp3-icon-new-person::before{
  content:""; }

.bp3-icon-new-prescription::before{
  content:""; }

.bp3-icon-new-text-box::before{
  content:""; }

.bp3-icon-ninja::before{
  content:""; }

.bp3-icon-not-equal-to::before{
  content:""; }

.bp3-icon-notifications::before{
  content:""; }

.bp3-icon-notifications-updated::before{
  content:""; }

.bp3-icon-numbered-list::before{
  content:""; }

.bp3-icon-numerical::before{
  content:""; }

.bp3-icon-office::before{
  content:""; }

.bp3-icon-offline::before{
  content:""; }

.bp3-icon-oil-field::before{
  content:""; }

.bp3-icon-one-column::before{
  content:""; }

.bp3-icon-outdated::before{
  content:""; }

.bp3-icon-page-layout::before{
  content:""; }

.bp3-icon-panel-stats::before{
  content:""; }

.bp3-icon-panel-table::before{
  content:""; }

.bp3-icon-paperclip::before{
  content:""; }

.bp3-icon-paragraph::before{
  content:""; }

.bp3-icon-path::before{
  content:""; }

.bp3-icon-path-search::before{
  content:""; }

.bp3-icon-pause::before{
  content:""; }

.bp3-icon-people::before{
  content:""; }

.bp3-icon-percentage::before{
  content:""; }

.bp3-icon-person::before{
  content:""; }

.bp3-icon-phone::before{
  content:""; }

.bp3-icon-pie-chart::before{
  content:""; }

.bp3-icon-pin::before{
  content:""; }

.bp3-icon-pivot::before{
  content:""; }

.bp3-icon-pivot-table::before{
  content:""; }

.bp3-icon-play::before{
  content:""; }

.bp3-icon-plus::before{
  content:"+"; }

.bp3-icon-polygon-filter::before{
  content:""; }

.bp3-icon-power::before{
  content:""; }

.bp3-icon-predictive-analysis::before{
  content:""; }

.bp3-icon-prescription::before{
  content:""; }

.bp3-icon-presentation::before{
  content:""; }

.bp3-icon-print::before{
  content:""; }

.bp3-icon-projects::before{
  content:""; }

.bp3-icon-properties::before{
  content:""; }

.bp3-icon-property::before{
  content:""; }

.bp3-icon-publish-function::before{
  content:""; }

.bp3-icon-pulse::before{
  content:""; }

.bp3-icon-random::before{
  content:""; }

.bp3-icon-record::before{
  content:""; }

.bp3-icon-redo::before{
  content:""; }

.bp3-icon-refresh::before{
  content:""; }

.bp3-icon-regression-chart::before{
  content:""; }

.bp3-icon-remove::before{
  content:""; }

.bp3-icon-remove-column::before{
  content:""; }

.bp3-icon-remove-column-left::before{
  content:""; }

.bp3-icon-remove-column-right::before{
  content:""; }

.bp3-icon-remove-row-bottom::before{
  content:""; }

.bp3-icon-remove-row-top::before{
  content:""; }

.bp3-icon-repeat::before{
  content:""; }

.bp3-icon-reset::before{
  content:""; }

.bp3-icon-resolve::before{
  content:""; }

.bp3-icon-rig::before{
  content:""; }

.bp3-icon-right-join::before{
  content:""; }

.bp3-icon-ring::before{
  content:""; }

.bp3-icon-rotate-document::before{
  content:""; }

.bp3-icon-rotate-page::before{
  content:""; }

.bp3-icon-satellite::before{
  content:""; }

.bp3-icon-saved::before{
  content:""; }

.bp3-icon-scatter-plot::before{
  content:""; }

.bp3-icon-search::before{
  content:""; }

.bp3-icon-search-around::before{
  content:""; }

.bp3-icon-search-template::before{
  content:""; }

.bp3-icon-search-text::before{
  content:""; }

.bp3-icon-segmented-control::before{
  content:""; }

.bp3-icon-select::before{
  content:""; }

.bp3-icon-selection::before{
  content:""; }

.bp3-icon-send-to::before{
  content:""; }

.bp3-icon-send-to-graph::before{
  content:""; }

.bp3-icon-send-to-map::before{
  content:""; }

.bp3-icon-series-add::before{
  content:""; }

.bp3-icon-series-configuration::before{
  content:""; }

.bp3-icon-series-derived::before{
  content:""; }

.bp3-icon-series-filtered::before{
  content:""; }

.bp3-icon-series-search::before{
  content:""; }

.bp3-icon-settings::before{
  content:""; }

.bp3-icon-share::before{
  content:""; }

.bp3-icon-shield::before{
  content:""; }

.bp3-icon-shop::before{
  content:""; }

.bp3-icon-shopping-cart::before{
  content:""; }

.bp3-icon-signal-search::before{
  content:""; }

.bp3-icon-sim-card::before{
  content:""; }

.bp3-icon-slash::before{
  content:""; }

.bp3-icon-small-cross::before{
  content:""; }

.bp3-icon-small-minus::before{
  content:""; }

.bp3-icon-small-plus::before{
  content:""; }

.bp3-icon-small-tick::before{
  content:""; }

.bp3-icon-snowflake::before{
  content:""; }

.bp3-icon-social-media::before{
  content:""; }

.bp3-icon-sort::before{
  content:""; }

.bp3-icon-sort-alphabetical::before{
  content:""; }

.bp3-icon-sort-alphabetical-desc::before{
  content:""; }

.bp3-icon-sort-asc::before{
  content:""; }

.bp3-icon-sort-desc::before{
  content:""; }

.bp3-icon-sort-numerical::before{
  content:""; }

.bp3-icon-sort-numerical-desc::before{
  content:""; }

.bp3-icon-split-columns::before{
  content:""; }

.bp3-icon-square::before{
  content:""; }

.bp3-icon-stacked-chart::before{
  content:""; }

.bp3-icon-star::before{
  content:""; }

.bp3-icon-star-empty::before{
  content:""; }

.bp3-icon-step-backward::before{
  content:""; }

.bp3-icon-step-chart::before{
  content:""; }

.bp3-icon-step-forward::before{
  content:""; }

.bp3-icon-stop::before{
  content:""; }

.bp3-icon-stopwatch::before{
  content:""; }

.bp3-icon-strikethrough::before{
  content:""; }

.bp3-icon-style::before{
  content:""; }

.bp3-icon-swap-horizontal::before{
  content:""; }

.bp3-icon-swap-vertical::before{
  content:""; }

.bp3-icon-symbol-circle::before{
  content:""; }

.bp3-icon-symbol-cross::before{
  content:""; }

.bp3-icon-symbol-diamond::before{
  content:""; }

.bp3-icon-symbol-square::before{
  content:""; }

.bp3-icon-symbol-triangle-down::before{
  content:""; }

.bp3-icon-symbol-triangle-up::before{
  content:""; }

.bp3-icon-tag::before{
  content:""; }

.bp3-icon-take-action::before{
  content:""; }

.bp3-icon-taxi::before{
  content:""; }

.bp3-icon-text-highlight::before{
  content:""; }

.bp3-icon-th::before{
  content:""; }

.bp3-icon-th-derived::before{
  content:""; }

.bp3-icon-th-disconnect::before{
  content:""; }

.bp3-icon-th-filtered::before{
  content:""; }

.bp3-icon-th-list::before{
  content:""; }

.bp3-icon-thumbs-down::before{
  content:""; }

.bp3-icon-thumbs-up::before{
  content:""; }

.bp3-icon-tick::before{
  content:""; }

.bp3-icon-tick-circle::before{
  content:""; }

.bp3-icon-time::before{
  content:""; }

.bp3-icon-timeline-area-chart::before{
  content:""; }

.bp3-icon-timeline-bar-chart::before{
  content:""; }

.bp3-icon-timeline-events::before{
  content:""; }

.bp3-icon-timeline-line-chart::before{
  content:""; }

.bp3-icon-tint::before{
  content:""; }

.bp3-icon-torch::before{
  content:""; }

.bp3-icon-tractor::before{
  content:""; }

.bp3-icon-train::before{
  content:""; }

.bp3-icon-translate::before{
  content:""; }

.bp3-icon-trash::before{
  content:""; }

.bp3-icon-tree::before{
  content:""; }

.bp3-icon-trending-down::before{
  content:""; }

.bp3-icon-trending-up::before{
  content:""; }

.bp3-icon-truck::before{
  content:""; }

.bp3-icon-two-columns::before{
  content:""; }

.bp3-icon-unarchive::before{
  content:""; }

.bp3-icon-underline::before{
  content:""; }

.bp3-icon-undo::before{
  content:""; }

.bp3-icon-ungroup-objects::before{
  content:""; }

.bp3-icon-unknown-vehicle::before{
  content:""; }

.bp3-icon-unlock::before{
  content:""; }

.bp3-icon-unpin::before{
  content:""; }

.bp3-icon-unresolve::before{
  content:""; }

.bp3-icon-updated::before{
  content:""; }

.bp3-icon-upload::before{
  content:""; }

.bp3-icon-user::before{
  content:""; }

.bp3-icon-variable::before{
  content:""; }

.bp3-icon-vertical-bar-chart-asc::before{
  content:""; }

.bp3-icon-vertical-bar-chart-desc::before{
  content:""; }

.bp3-icon-vertical-distribution::before{
  content:""; }

.bp3-icon-video::before{
  content:""; }

.bp3-icon-volume-down::before{
  content:""; }

.bp3-icon-volume-off::before{
  content:""; }

.bp3-icon-volume-up::before{
  content:""; }

.bp3-icon-walk::before{
  content:""; }

.bp3-icon-warning-sign::before{
  content:""; }

.bp3-icon-waterfall-chart::before{
  content:""; }

.bp3-icon-widget::before{
  content:""; }

.bp3-icon-widget-button::before{
  content:""; }

.bp3-icon-widget-footer::before{
  content:""; }

.bp3-icon-widget-header::before{
  content:""; }

.bp3-icon-wrench::before{
  content:""; }

.bp3-icon-zoom-in::before{
  content:""; }

.bp3-icon-zoom-out::before{
  content:""; }

.bp3-icon-zoom-to-fit::before{
  content:""; }
.bp3-submenu > .bp3-popover-wrapper{
  display:block; }

.bp3-submenu .bp3-popover-target{
  display:block; }
  .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-menu-item{ }

.bp3-submenu.bp3-popover{
  -webkit-box-shadow:none;
          box-shadow:none;
  padding:0 5px; }
  .bp3-submenu.bp3-popover > .bp3-popover-content{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-submenu.bp3-popover, .bp3-submenu.bp3-popover.bp3-dark{
    -webkit-box-shadow:none;
            box-shadow:none; }
    .bp3-dark .bp3-submenu.bp3-popover > .bp3-popover-content, .bp3-submenu.bp3-popover.bp3-dark > .bp3-popover-content{
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }
.bp3-menu{
  background:#ffffff;
  border-radius:3px;
  color:#182026;
  list-style:none;
  margin:0;
  min-width:180px;
  padding:5px;
  text-align:left; }

.bp3-menu-divider{
  border-top:1px solid rgba(16, 22, 26, 0.15);
  display:block;
  margin:5px; }
  .bp3-dark .bp3-menu-divider{
    border-top-color:rgba(255, 255, 255, 0.15); }

.bp3-menu-item{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:start;
      -ms-flex-align:start;
          align-items:flex-start;
  border-radius:2px;
  color:inherit;
  line-height:20px;
  padding:5px 7px;
  text-decoration:none;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-menu-item > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-menu-item > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-menu-item::before,
  .bp3-menu-item > *{
    margin-right:7px; }
  .bp3-menu-item:empty::before,
  .bp3-menu-item > :last-child{
    margin-right:0; }
  .bp3-menu-item > .bp3-fill{
    word-break:break-word; }
  .bp3-menu-item:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-menu-item{
    background-color:rgba(167, 182, 194, 0.3);
    cursor:pointer;
    text-decoration:none; }
  .bp3-menu-item.bp3-disabled{
    background-color:inherit;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed; }
  .bp3-dark .bp3-menu-item{
    color:inherit; }
    .bp3-dark .bp3-menu-item:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-menu-item{
      background-color:rgba(138, 155, 168, 0.15);
      color:inherit; }
    .bp3-dark .bp3-menu-item.bp3-disabled{
      background-color:inherit;
      color:rgba(167, 182, 194, 0.6); }
  .bp3-menu-item.bp3-intent-primary{
    color:#106ba3; }
    .bp3-menu-item.bp3-intent-primary .bp3-icon{
      color:inherit; }
    .bp3-menu-item.bp3-intent-primary::before, .bp3-menu-item.bp3-intent-primary::after,
    .bp3-menu-item.bp3-intent-primary .bp3-menu-item-label{
      color:#106ba3; }
    .bp3-menu-item.bp3-intent-primary:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-menu-item.bp3-intent-primary.bp3-active{
      background-color:#137cbd; }
    .bp3-menu-item.bp3-intent-primary:active{
      background-color:#106ba3; }
    .bp3-menu-item.bp3-intent-primary:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-menu-item.bp3-intent-primary:hover::before, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::before, .bp3-menu-item.bp3-intent-primary:hover::after, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::after,
    .bp3-menu-item.bp3-intent-primary:hover .bp3-menu-item-label,
    .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item .bp3-menu-item-label, .bp3-menu-item.bp3-intent-primary:active, .bp3-menu-item.bp3-intent-primary:active::before, .bp3-menu-item.bp3-intent-primary:active::after,
    .bp3-menu-item.bp3-intent-primary:active .bp3-menu-item-label, .bp3-menu-item.bp3-intent-primary.bp3-active, .bp3-menu-item.bp3-intent-primary.bp3-active::before, .bp3-menu-item.bp3-intent-primary.bp3-active::after,
    .bp3-menu-item.bp3-intent-primary.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-menu-item.bp3-intent-success{
    color:#0d8050; }
    .bp3-menu-item.bp3-intent-success .bp3-icon{
      color:inherit; }
    .bp3-menu-item.bp3-intent-success::before, .bp3-menu-item.bp3-intent-success::after,
    .bp3-menu-item.bp3-intent-success .bp3-menu-item-label{
      color:#0d8050; }
    .bp3-menu-item.bp3-intent-success:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-menu-item.bp3-intent-success.bp3-active{
      background-color:#0f9960; }
    .bp3-menu-item.bp3-intent-success:active{
      background-color:#0d8050; }
    .bp3-menu-item.bp3-intent-success:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-menu-item.bp3-intent-success:hover::before, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::before, .bp3-menu-item.bp3-intent-success:hover::after, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::after,
    .bp3-menu-item.bp3-intent-success:hover .bp3-menu-item-label,
    .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item .bp3-menu-item-label, .bp3-menu-item.bp3-intent-success:active, .bp3-menu-item.bp3-intent-success:active::before, .bp3-menu-item.bp3-intent-success:active::after,
    .bp3-menu-item.bp3-intent-success:active .bp3-menu-item-label, .bp3-menu-item.bp3-intent-success.bp3-active, .bp3-menu-item.bp3-intent-success.bp3-active::before, .bp3-menu-item.bp3-intent-success.bp3-active::after,
    .bp3-menu-item.bp3-intent-success.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-menu-item.bp3-intent-warning{
    color:#bf7326; }
    .bp3-menu-item.bp3-intent-warning .bp3-icon{
      color:inherit; }
    .bp3-menu-item.bp3-intent-warning::before, .bp3-menu-item.bp3-intent-warning::after,
    .bp3-menu-item.bp3-intent-warning .bp3-menu-item-label{
      color:#bf7326; }
    .bp3-menu-item.bp3-intent-warning:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-menu-item.bp3-intent-warning.bp3-active{
      background-color:#d9822b; }
    .bp3-menu-item.bp3-intent-warning:active{
      background-color:#bf7326; }
    .bp3-menu-item.bp3-intent-warning:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-menu-item.bp3-intent-warning:hover::before, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::before, .bp3-menu-item.bp3-intent-warning:hover::after, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::after,
    .bp3-menu-item.bp3-intent-warning:hover .bp3-menu-item-label,
    .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item .bp3-menu-item-label, .bp3-menu-item.bp3-intent-warning:active, .bp3-menu-item.bp3-intent-warning:active::before, .bp3-menu-item.bp3-intent-warning:active::after,
    .bp3-menu-item.bp3-intent-warning:active .bp3-menu-item-label, .bp3-menu-item.bp3-intent-warning.bp3-active, .bp3-menu-item.bp3-intent-warning.bp3-active::before, .bp3-menu-item.bp3-intent-warning.bp3-active::after,
    .bp3-menu-item.bp3-intent-warning.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-menu-item.bp3-intent-danger{
    color:#c23030; }
    .bp3-menu-item.bp3-intent-danger .bp3-icon{
      color:inherit; }
    .bp3-menu-item.bp3-intent-danger::before, .bp3-menu-item.bp3-intent-danger::after,
    .bp3-menu-item.bp3-intent-danger .bp3-menu-item-label{
      color:#c23030; }
    .bp3-menu-item.bp3-intent-danger:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-menu-item.bp3-intent-danger.bp3-active{
      background-color:#db3737; }
    .bp3-menu-item.bp3-intent-danger:active{
      background-color:#c23030; }
    .bp3-menu-item.bp3-intent-danger:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-menu-item.bp3-intent-danger:hover::before, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::before, .bp3-menu-item.bp3-intent-danger:hover::after, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::after,
    .bp3-menu-item.bp3-intent-danger:hover .bp3-menu-item-label,
    .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item .bp3-menu-item-label, .bp3-menu-item.bp3-intent-danger:active, .bp3-menu-item.bp3-intent-danger:active::before, .bp3-menu-item.bp3-intent-danger:active::after,
    .bp3-menu-item.bp3-intent-danger:active .bp3-menu-item-label, .bp3-menu-item.bp3-intent-danger.bp3-active, .bp3-menu-item.bp3-intent-danger.bp3-active::before, .bp3-menu-item.bp3-intent-danger.bp3-active::after,
    .bp3-menu-item.bp3-intent-danger.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-menu-item::before{
    font-family:"Icons16", sans-serif;
    font-size:16px;
    font-style:normal;
    font-weight:400;
    line-height:1;
    -moz-osx-font-smoothing:grayscale;
    -webkit-font-smoothing:antialiased;
    margin-right:7px; }
  .bp3-menu-item::before,
  .bp3-menu-item > .bp3-icon{
    color:#5c7080;
    margin-top:2px; }
  .bp3-menu-item .bp3-menu-item-label{
    color:#5c7080; }
  .bp3-menu-item:hover, .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-menu-item{
    color:inherit; }
  .bp3-menu-item.bp3-active, .bp3-menu-item:active{
    background-color:rgba(115, 134, 148, 0.3); }
  .bp3-menu-item.bp3-disabled{
    background-color:inherit !important;
    color:rgba(92, 112, 128, 0.6) !important;
    cursor:not-allowed !important;
    outline:none !important; }
    .bp3-menu-item.bp3-disabled::before,
    .bp3-menu-item.bp3-disabled > .bp3-icon,
    .bp3-menu-item.bp3-disabled .bp3-menu-item-label{
      color:rgba(92, 112, 128, 0.6) !important; }
  .bp3-large .bp3-menu-item{
    font-size:16px;
    line-height:22px;
    padding:9px 7px; }
    .bp3-large .bp3-menu-item .bp3-icon{
      margin-top:3px; }
    .bp3-large .bp3-menu-item::before{
      font-family:"Icons20", sans-serif;
      font-size:20px;
      font-style:normal;
      font-weight:400;
      line-height:1;
      -moz-osx-font-smoothing:grayscale;
      -webkit-font-smoothing:antialiased;
      margin-right:10px;
      margin-top:1px; }

button.bp3-menu-item{
  background:none;
  border:none;
  text-align:left;
  width:100%; }
.bp3-menu-header{
  border-top:1px solid rgba(16, 22, 26, 0.15);
  display:block;
  margin:5px;
  cursor:default;
  padding-left:2px; }
  .bp3-dark .bp3-menu-header{
    border-top-color:rgba(255, 255, 255, 0.15); }
  .bp3-menu-header:first-of-type{
    border-top:none; }
  .bp3-menu-header > h6{
    color:#182026;
    font-weight:600;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space:nowrap;
    word-wrap:normal;
    line-height:17px;
    margin:0;
    padding:10px 7px 0 1px; }
    .bp3-dark .bp3-menu-header > h6{
      color:#f5f8fa; }
  .bp3-menu-header:first-of-type > h6{
    padding-top:0; }
  .bp3-large .bp3-menu-header > h6{
    font-size:18px;
    padding-bottom:5px;
    padding-top:15px; }
  .bp3-large .bp3-menu-header:first-of-type > h6{
    padding-top:0; }

.bp3-dark .bp3-menu{
  background:#30404d;
  color:#f5f8fa; }

.bp3-dark .bp3-menu-item{ }
  .bp3-dark .bp3-menu-item.bp3-intent-primary{
    color:#48aff0; }
    .bp3-dark .bp3-menu-item.bp3-intent-primary .bp3-icon{
      color:inherit; }
    .bp3-dark .bp3-menu-item.bp3-intent-primary::before, .bp3-dark .bp3-menu-item.bp3-intent-primary::after,
    .bp3-dark .bp3-menu-item.bp3-intent-primary .bp3-menu-item-label{
      color:#48aff0; }
    .bp3-dark .bp3-menu-item.bp3-intent-primary:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active{
      background-color:#137cbd; }
    .bp3-dark .bp3-menu-item.bp3-intent-primary:active{
      background-color:#106ba3; }
    .bp3-dark .bp3-menu-item.bp3-intent-primary:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-primary:hover::before, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::before, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::before, .bp3-dark .bp3-menu-item.bp3-intent-primary:hover::after, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::after, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item::after,
    .bp3-dark .bp3-menu-item.bp3-intent-primary:hover .bp3-menu-item-label,
    .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item .bp3-menu-item-label,
    .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-primary.bp3-menu-item .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-primary:active, .bp3-dark .bp3-menu-item.bp3-intent-primary:active::before, .bp3-dark .bp3-menu-item.bp3-intent-primary:active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-primary:active .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active, .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active::before, .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-primary.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-dark .bp3-menu-item.bp3-intent-success{
    color:#3dcc91; }
    .bp3-dark .bp3-menu-item.bp3-intent-success .bp3-icon{
      color:inherit; }
    .bp3-dark .bp3-menu-item.bp3-intent-success::before, .bp3-dark .bp3-menu-item.bp3-intent-success::after,
    .bp3-dark .bp3-menu-item.bp3-intent-success .bp3-menu-item-label{
      color:#3dcc91; }
    .bp3-dark .bp3-menu-item.bp3-intent-success:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active{
      background-color:#0f9960; }
    .bp3-dark .bp3-menu-item.bp3-intent-success:active{
      background-color:#0d8050; }
    .bp3-dark .bp3-menu-item.bp3-intent-success:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-success:hover::before, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::before, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::before, .bp3-dark .bp3-menu-item.bp3-intent-success:hover::after, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::after, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item::after,
    .bp3-dark .bp3-menu-item.bp3-intent-success:hover .bp3-menu-item-label,
    .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item .bp3-menu-item-label,
    .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-success.bp3-menu-item .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-success:active, .bp3-dark .bp3-menu-item.bp3-intent-success:active::before, .bp3-dark .bp3-menu-item.bp3-intent-success:active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-success:active .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active, .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active::before, .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-success.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-dark .bp3-menu-item.bp3-intent-warning{
    color:#ffb366; }
    .bp3-dark .bp3-menu-item.bp3-intent-warning .bp3-icon{
      color:inherit; }
    .bp3-dark .bp3-menu-item.bp3-intent-warning::before, .bp3-dark .bp3-menu-item.bp3-intent-warning::after,
    .bp3-dark .bp3-menu-item.bp3-intent-warning .bp3-menu-item-label{
      color:#ffb366; }
    .bp3-dark .bp3-menu-item.bp3-intent-warning:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active{
      background-color:#d9822b; }
    .bp3-dark .bp3-menu-item.bp3-intent-warning:active{
      background-color:#bf7326; }
    .bp3-dark .bp3-menu-item.bp3-intent-warning:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-warning:hover::before, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::before, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::before, .bp3-dark .bp3-menu-item.bp3-intent-warning:hover::after, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::after, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item::after,
    .bp3-dark .bp3-menu-item.bp3-intent-warning:hover .bp3-menu-item-label,
    .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item .bp3-menu-item-label,
    .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-warning.bp3-menu-item .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-warning:active, .bp3-dark .bp3-menu-item.bp3-intent-warning:active::before, .bp3-dark .bp3-menu-item.bp3-intent-warning:active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-warning:active .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active, .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active::before, .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-warning.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-dark .bp3-menu-item.bp3-intent-danger{
    color:#ff7373; }
    .bp3-dark .bp3-menu-item.bp3-intent-danger .bp3-icon{
      color:inherit; }
    .bp3-dark .bp3-menu-item.bp3-intent-danger::before, .bp3-dark .bp3-menu-item.bp3-intent-danger::after,
    .bp3-dark .bp3-menu-item.bp3-intent-danger .bp3-menu-item-label{
      color:#ff7373; }
    .bp3-dark .bp3-menu-item.bp3-intent-danger:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active{
      background-color:#db3737; }
    .bp3-dark .bp3-menu-item.bp3-intent-danger:active{
      background-color:#c23030; }
    .bp3-dark .bp3-menu-item.bp3-intent-danger:hover, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item, .bp3-dark .bp3-menu-item.bp3-intent-danger:hover::before, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::before, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::before, .bp3-dark .bp3-menu-item.bp3-intent-danger:hover::after, .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::after, .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item::after,
    .bp3-dark .bp3-menu-item.bp3-intent-danger:hover .bp3-menu-item-label,
    .bp3-dark .bp3-submenu .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item .bp3-menu-item-label,
    .bp3-submenu .bp3-dark .bp3-popover-target.bp3-popover-open > .bp3-intent-danger.bp3-menu-item .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-danger:active, .bp3-dark .bp3-menu-item.bp3-intent-danger:active::before, .bp3-dark .bp3-menu-item.bp3-intent-danger:active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-danger:active .bp3-menu-item-label, .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active, .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active::before, .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active::after,
    .bp3-dark .bp3-menu-item.bp3-intent-danger.bp3-active .bp3-menu-item-label{
      color:#ffffff; }
  .bp3-dark .bp3-menu-item::before,
  .bp3-dark .bp3-menu-item > .bp3-icon{
    color:#a7b6c2; }
  .bp3-dark .bp3-menu-item .bp3-menu-item-label{
    color:#a7b6c2; }
  .bp3-dark .bp3-menu-item.bp3-active, .bp3-dark .bp3-menu-item:active{
    background-color:rgba(138, 155, 168, 0.3); }
  .bp3-dark .bp3-menu-item.bp3-disabled{
    color:rgba(167, 182, 194, 0.6) !important; }
    .bp3-dark .bp3-menu-item.bp3-disabled::before,
    .bp3-dark .bp3-menu-item.bp3-disabled > .bp3-icon,
    .bp3-dark .bp3-menu-item.bp3-disabled .bp3-menu-item-label{
      color:rgba(167, 182, 194, 0.6) !important; }

.bp3-dark .bp3-menu-divider,
.bp3-dark .bp3-menu-header{
  border-color:rgba(255, 255, 255, 0.15); }

.bp3-dark .bp3-menu-header > h6{
  color:#f5f8fa; }

.bp3-label .bp3-menu{
  margin-top:5px; }
.bp3-navbar{
  background-color:#ffffff;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.2);
  height:50px;
  padding:0 15px;
  position:relative;
  width:100%;
  z-index:10; }
  .bp3-navbar.bp3-dark,
  .bp3-dark .bp3-navbar{
    background-color:#394b59; }
  .bp3-navbar.bp3-dark{
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-dark .bp3-navbar{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 0 0 rgba(16, 22, 26, 0), 0 1px 1px rgba(16, 22, 26, 0.4); }
  .bp3-navbar.bp3-fixed-top{
    left:0;
    position:fixed;
    right:0;
    top:0; }

.bp3-navbar-heading{
  font-size:16px;
  margin-right:15px; }

.bp3-navbar-group{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  height:50px; }
  .bp3-navbar-group.bp3-align-left{
    float:left; }
  .bp3-navbar-group.bp3-align-right{
    float:right; }

.bp3-navbar-divider{
  border-left:1px solid rgba(16, 22, 26, 0.15);
  height:20px;
  margin:0 10px; }
  .bp3-dark .bp3-navbar-divider{
    border-left-color:rgba(255, 255, 255, 0.15); }
.bp3-non-ideal-state{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  height:100%;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  text-align:center;
  width:100%; }
  .bp3-non-ideal-state > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-non-ideal-state > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-non-ideal-state::before,
  .bp3-non-ideal-state > *{
    margin-bottom:20px; }
  .bp3-non-ideal-state:empty::before,
  .bp3-non-ideal-state > :last-child{
    margin-bottom:0; }
  .bp3-non-ideal-state > *{
    max-width:400px; }

.bp3-non-ideal-state-visual{
  color:rgba(92, 112, 128, 0.6);
  font-size:60px; }
  .bp3-dark .bp3-non-ideal-state-visual{
    color:rgba(167, 182, 194, 0.6); }

.bp3-overflow-list{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -ms-flex-wrap:nowrap;
      flex-wrap:nowrap;
  min-width:0; }

.bp3-overflow-list-spacer{
  -ms-flex-negative:1;
      flex-shrink:1;
  width:1px; }

body.bp3-overlay-open{
  overflow:hidden; }

.bp3-overlay{
  bottom:0;
  left:0;
  position:static;
  right:0;
  top:0;
  z-index:20; }
  .bp3-overlay:not(.bp3-overlay-open){
    pointer-events:none; }
  .bp3-overlay.bp3-overlay-container{
    overflow:hidden;
    position:fixed; }
    .bp3-overlay.bp3-overlay-container.bp3-overlay-inline{
      position:absolute; }
  .bp3-overlay.bp3-overlay-scroll-container{
    overflow:auto;
    position:fixed; }
    .bp3-overlay.bp3-overlay-scroll-container.bp3-overlay-inline{
      position:absolute; }
  .bp3-overlay.bp3-overlay-inline{
    display:inline;
    overflow:visible; }

.bp3-overlay-content{
  position:fixed;
  z-index:20; }
  .bp3-overlay-inline .bp3-overlay-content,
  .bp3-overlay-scroll-container .bp3-overlay-content{
    position:absolute; }

.bp3-overlay-backdrop{
  bottom:0;
  left:0;
  position:fixed;
  right:0;
  top:0;
  opacity:1;
  background-color:rgba(16, 22, 26, 0.7);
  overflow:auto;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none;
  z-index:20; }
  .bp3-overlay-backdrop.bp3-overlay-enter, .bp3-overlay-backdrop.bp3-overlay-appear{
    opacity:0; }
  .bp3-overlay-backdrop.bp3-overlay-enter-active, .bp3-overlay-backdrop.bp3-overlay-appear-active{
    opacity:1;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:200ms;
            transition-duration:200ms;
    -webkit-transition-property:opacity;
    transition-property:opacity;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-overlay-backdrop.bp3-overlay-exit{
    opacity:1; }
  .bp3-overlay-backdrop.bp3-overlay-exit-active{
    opacity:0;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:200ms;
            transition-duration:200ms;
    -webkit-transition-property:opacity;
    transition-property:opacity;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-overlay-backdrop:focus{
    outline:none; }
  .bp3-overlay-inline .bp3-overlay-backdrop{
    position:absolute; }
.bp3-panel-stack{
  overflow:hidden;
  position:relative; }

.bp3-panel-stack-header{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  -webkit-box-shadow:0 1px rgba(16, 22, 26, 0.15);
          box-shadow:0 1px rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -ms-flex-negative:0;
      flex-shrink:0;
  height:30px;
  z-index:1; }
  .bp3-dark .bp3-panel-stack-header{
    -webkit-box-shadow:0 1px rgba(255, 255, 255, 0.15);
            box-shadow:0 1px rgba(255, 255, 255, 0.15); }
  .bp3-panel-stack-header > span{
    -webkit-box-align:stretch;
        -ms-flex-align:stretch;
            align-items:stretch;
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    -webkit-box-flex:1;
        -ms-flex:1;
            flex:1; }
  .bp3-panel-stack-header .bp3-heading{
    margin:0 5px; }

.bp3-button.bp3-panel-stack-header-back{
  margin-left:5px;
  padding-left:0;
  white-space:nowrap; }
  .bp3-button.bp3-panel-stack-header-back .bp3-icon{
    margin:0 2px; }

.bp3-panel-stack-view{
  bottom:0;
  left:0;
  position:absolute;
  right:0;
  top:0;
  background-color:#ffffff;
  border-right:1px solid rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  margin-right:-1px;
  overflow-y:auto;
  z-index:1; }
  .bp3-dark .bp3-panel-stack-view{
    background-color:#30404d; }
  .bp3-panel-stack-view:nth-last-child(n + 4){
    display:none; }

.bp3-panel-stack-push .bp3-panel-stack-enter, .bp3-panel-stack-push .bp3-panel-stack-appear{
  -webkit-transform:translateX(100%);
          transform:translateX(100%);
  opacity:0; }

.bp3-panel-stack-push .bp3-panel-stack-enter-active, .bp3-panel-stack-push .bp3-panel-stack-appear-active{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack-push .bp3-panel-stack-exit{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1; }

.bp3-panel-stack-push .bp3-panel-stack-exit-active{
  -webkit-transform:translateX(-50%);
          transform:translateX(-50%);
  opacity:0;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack-pop .bp3-panel-stack-enter, .bp3-panel-stack-pop .bp3-panel-stack-appear{
  -webkit-transform:translateX(-50%);
          transform:translateX(-50%);
  opacity:0; }

.bp3-panel-stack-pop .bp3-panel-stack-enter-active, .bp3-panel-stack-pop .bp3-panel-stack-appear-active{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack-pop .bp3-panel-stack-exit{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1; }

.bp3-panel-stack-pop .bp3-panel-stack-exit-active{
  -webkit-transform:translateX(100%);
          transform:translateX(100%);
  opacity:0;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }
.bp3-panel-stack2{
  overflow:hidden;
  position:relative; }

.bp3-panel-stack2-header{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  -webkit-box-shadow:0 1px rgba(16, 22, 26, 0.15);
          box-shadow:0 1px rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -ms-flex-negative:0;
      flex-shrink:0;
  height:30px;
  z-index:1; }
  .bp3-dark .bp3-panel-stack2-header{
    -webkit-box-shadow:0 1px rgba(255, 255, 255, 0.15);
            box-shadow:0 1px rgba(255, 255, 255, 0.15); }
  .bp3-panel-stack2-header > span{
    -webkit-box-align:stretch;
        -ms-flex-align:stretch;
            align-items:stretch;
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    -webkit-box-flex:1;
        -ms-flex:1;
            flex:1; }
  .bp3-panel-stack2-header .bp3-heading{
    margin:0 5px; }

.bp3-button.bp3-panel-stack2-header-back{
  margin-left:5px;
  padding-left:0;
  white-space:nowrap; }
  .bp3-button.bp3-panel-stack2-header-back .bp3-icon{
    margin:0 2px; }

.bp3-panel-stack2-view{
  bottom:0;
  left:0;
  position:absolute;
  right:0;
  top:0;
  background-color:#ffffff;
  border-right:1px solid rgba(16, 22, 26, 0.15);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  margin-right:-1px;
  overflow-y:auto;
  z-index:1; }
  .bp3-dark .bp3-panel-stack2-view{
    background-color:#30404d; }
  .bp3-panel-stack2-view:nth-last-child(n + 4){
    display:none; }

.bp3-panel-stack2-push .bp3-panel-stack2-enter, .bp3-panel-stack2-push .bp3-panel-stack2-appear{
  -webkit-transform:translateX(100%);
          transform:translateX(100%);
  opacity:0; }

.bp3-panel-stack2-push .bp3-panel-stack2-enter-active, .bp3-panel-stack2-push .bp3-panel-stack2-appear-active{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack2-push .bp3-panel-stack2-exit{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1; }

.bp3-panel-stack2-push .bp3-panel-stack2-exit-active{
  -webkit-transform:translateX(-50%);
          transform:translateX(-50%);
  opacity:0;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack2-pop .bp3-panel-stack2-enter, .bp3-panel-stack2-pop .bp3-panel-stack2-appear{
  -webkit-transform:translateX(-50%);
          transform:translateX(-50%);
  opacity:0; }

.bp3-panel-stack2-pop .bp3-panel-stack2-enter-active, .bp3-panel-stack2-pop .bp3-panel-stack2-appear-active{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }

.bp3-panel-stack2-pop .bp3-panel-stack2-exit{
  -webkit-transform:translate(0%);
          transform:translate(0%);
  opacity:1; }

.bp3-panel-stack2-pop .bp3-panel-stack2-exit-active{
  -webkit-transform:translateX(100%);
          transform:translateX(100%);
  opacity:0;
  -webkit-transition-delay:0;
          transition-delay:0;
  -webkit-transition-duration:400ms;
          transition-duration:400ms;
  -webkit-transition-property:opacity, -webkit-transform;
  transition-property:opacity, -webkit-transform;
  transition-property:transform, opacity;
  transition-property:transform, opacity, -webkit-transform;
  -webkit-transition-timing-function:ease;
          transition-timing-function:ease; }
.bp3-popover{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
  -webkit-transform:scale(1);
          transform:scale(1);
  border-radius:3px;
  display:inline-block;
  z-index:20; }
  .bp3-popover .bp3-popover-arrow{
    height:30px;
    position:absolute;
    width:30px; }
    .bp3-popover .bp3-popover-arrow::before{
      height:20px;
      margin:5px;
      width:20px; }
  .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-popover{
    margin-bottom:17px;
    margin-top:-17px; }
    .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-popover > .bp3-popover-arrow{
      bottom:-11px; }
      .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-popover > .bp3-popover-arrow svg{
        -webkit-transform:rotate(-90deg);
                transform:rotate(-90deg); }
  .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-popover{
    margin-left:17px; }
    .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-popover > .bp3-popover-arrow{
      left:-11px; }
      .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-popover > .bp3-popover-arrow svg{
        -webkit-transform:rotate(0);
                transform:rotate(0); }
  .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-popover{
    margin-top:17px; }
    .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-popover > .bp3-popover-arrow{
      top:-11px; }
      .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-popover > .bp3-popover-arrow svg{
        -webkit-transform:rotate(90deg);
                transform:rotate(90deg); }
  .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-popover{
    margin-left:-17px;
    margin-right:17px; }
    .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-popover > .bp3-popover-arrow{
      right:-11px; }
      .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-popover > .bp3-popover-arrow svg{
        -webkit-transform:rotate(180deg);
                transform:rotate(180deg); }
  .bp3-tether-element-attached-middle > .bp3-popover > .bp3-popover-arrow{
    top:50%;
    -webkit-transform:translateY(-50%);
            transform:translateY(-50%); }
  .bp3-tether-element-attached-center > .bp3-popover > .bp3-popover-arrow{
    right:50%;
    -webkit-transform:translateX(50%);
            transform:translateX(50%); }
  .bp3-tether-element-attached-top.bp3-tether-target-attached-top > .bp3-popover > .bp3-popover-arrow{
    top:-0.3934px; }
  .bp3-tether-element-attached-right.bp3-tether-target-attached-right > .bp3-popover > .bp3-popover-arrow{
    right:-0.3934px; }
  .bp3-tether-element-attached-left.bp3-tether-target-attached-left > .bp3-popover > .bp3-popover-arrow{
    left:-0.3934px; }
  .bp3-tether-element-attached-bottom.bp3-tether-target-attached-bottom > .bp3-popover > .bp3-popover-arrow{
    bottom:-0.3934px; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-left > .bp3-popover{
    -webkit-transform-origin:top left;
            transform-origin:top left; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-center > .bp3-popover{
    -webkit-transform-origin:top center;
            transform-origin:top center; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-right > .bp3-popover{
    -webkit-transform-origin:top right;
            transform-origin:top right; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-left > .bp3-popover{
    -webkit-transform-origin:center left;
            transform-origin:center left; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-center > .bp3-popover{
    -webkit-transform-origin:center center;
            transform-origin:center center; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-right > .bp3-popover{
    -webkit-transform-origin:center right;
            transform-origin:center right; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-left > .bp3-popover{
    -webkit-transform-origin:bottom left;
            transform-origin:bottom left; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-center > .bp3-popover{
    -webkit-transform-origin:bottom center;
            transform-origin:bottom center; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-right > .bp3-popover{
    -webkit-transform-origin:bottom right;
            transform-origin:bottom right; }
  .bp3-popover .bp3-popover-content{
    background:#ffffff;
    color:inherit; }
  .bp3-popover .bp3-popover-arrow::before{
    -webkit-box-shadow:1px 1px 6px rgba(16, 22, 26, 0.2);
            box-shadow:1px 1px 6px rgba(16, 22, 26, 0.2); }
  .bp3-popover .bp3-popover-arrow-border{
    fill:#10161a;
    fill-opacity:0.1; }
  .bp3-popover .bp3-popover-arrow-fill{
    fill:#ffffff; }
  .bp3-popover-enter > .bp3-popover, .bp3-popover-appear > .bp3-popover{
    -webkit-transform:scale(0.3);
            transform:scale(0.3); }
  .bp3-popover-enter-active > .bp3-popover, .bp3-popover-appear-active > .bp3-popover{
    -webkit-transform:scale(1);
            transform:scale(1);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }
  .bp3-popover-exit > .bp3-popover{
    -webkit-transform:scale(1);
            transform:scale(1); }
  .bp3-popover-exit-active > .bp3-popover{
    -webkit-transform:scale(0.3);
            transform:scale(0.3);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }
  .bp3-popover .bp3-popover-content{
    border-radius:3px;
    position:relative; }
  .bp3-popover.bp3-popover-content-sizing .bp3-popover-content{
    max-width:350px;
    padding:20px; }
  .bp3-popover-target + .bp3-overlay .bp3-popover.bp3-popover-content-sizing{
    width:350px; }
  .bp3-popover.bp3-minimal{
    margin:0 !important; }
    .bp3-popover.bp3-minimal .bp3-popover-arrow{
      display:none; }
    .bp3-popover.bp3-minimal.bp3-popover{
      -webkit-transform:scale(1);
              transform:scale(1); }
      .bp3-popover-enter > .bp3-popover.bp3-minimal.bp3-popover, .bp3-popover-appear > .bp3-popover.bp3-minimal.bp3-popover{
        -webkit-transform:scale(1);
                transform:scale(1); }
      .bp3-popover-enter-active > .bp3-popover.bp3-minimal.bp3-popover, .bp3-popover-appear-active > .bp3-popover.bp3-minimal.bp3-popover{
        -webkit-transform:scale(1);
                transform:scale(1);
        -webkit-transition-delay:0;
                transition-delay:0;
        -webkit-transition-duration:100ms;
                transition-duration:100ms;
        -webkit-transition-property:-webkit-transform;
        transition-property:-webkit-transform;
        transition-property:transform;
        transition-property:transform, -webkit-transform;
        -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
                transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
      .bp3-popover-exit > .bp3-popover.bp3-minimal.bp3-popover{
        -webkit-transform:scale(1);
                transform:scale(1); }
      .bp3-popover-exit-active > .bp3-popover.bp3-minimal.bp3-popover{
        -webkit-transform:scale(1);
                transform:scale(1);
        -webkit-transition-delay:0;
                transition-delay:0;
        -webkit-transition-duration:100ms;
                transition-duration:100ms;
        -webkit-transition-property:-webkit-transform;
        transition-property:-webkit-transform;
        transition-property:transform;
        transition-property:transform, -webkit-transform;
        -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
                transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-popover.bp3-dark,
  .bp3-dark .bp3-popover{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }
    .bp3-popover.bp3-dark .bp3-popover-content,
    .bp3-dark .bp3-popover .bp3-popover-content{
      background:#30404d;
      color:inherit; }
    .bp3-popover.bp3-dark .bp3-popover-arrow::before,
    .bp3-dark .bp3-popover .bp3-popover-arrow::before{
      -webkit-box-shadow:1px 1px 6px rgba(16, 22, 26, 0.4);
              box-shadow:1px 1px 6px rgba(16, 22, 26, 0.4); }
    .bp3-popover.bp3-dark .bp3-popover-arrow-border,
    .bp3-dark .bp3-popover .bp3-popover-arrow-border{
      fill:#10161a;
      fill-opacity:0.2; }
    .bp3-popover.bp3-dark .bp3-popover-arrow-fill,
    .bp3-dark .bp3-popover .bp3-popover-arrow-fill{
      fill:#30404d; }

.bp3-popover-arrow::before{
  border-radius:2px;
  content:"";
  display:block;
  position:absolute;
  -webkit-transform:rotate(45deg);
          transform:rotate(45deg); }

.bp3-tether-pinned .bp3-popover-arrow{
  display:none; }

.bp3-popover-backdrop{
  background:rgba(255, 255, 255, 0); }

.bp3-transition-container{
  opacity:1;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  z-index:20; }
  .bp3-transition-container.bp3-popover-enter, .bp3-transition-container.bp3-popover-appear{
    opacity:0; }
  .bp3-transition-container.bp3-popover-enter-active, .bp3-transition-container.bp3-popover-appear-active{
    opacity:1;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:100ms;
            transition-duration:100ms;
    -webkit-transition-property:opacity;
    transition-property:opacity;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-transition-container.bp3-popover-exit{
    opacity:1; }
  .bp3-transition-container.bp3-popover-exit-active{
    opacity:0;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:100ms;
            transition-duration:100ms;
    -webkit-transition-property:opacity;
    transition-property:opacity;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-transition-container:focus{
    outline:none; }
  .bp3-transition-container.bp3-popover-leave .bp3-popover-content{
    pointer-events:none; }
  .bp3-transition-container[data-x-out-of-boundaries]{
    display:none; }

span.bp3-popover-target{
  display:inline-block; }

.bp3-popover-wrapper.bp3-fill{
  width:100%; }

.bp3-portal{
  left:0;
  position:absolute;
  right:0;
  top:0; }
@-webkit-keyframes linear-progress-bar-stripes{
  from{
    background-position:0 0; }
  to{
    background-position:30px 0; } }
@keyframes linear-progress-bar-stripes{
  from{
    background-position:0 0; }
  to{
    background-position:30px 0; } }

.bp3-progress-bar{
  background:rgba(92, 112, 128, 0.2);
  border-radius:40px;
  display:block;
  height:8px;
  overflow:hidden;
  position:relative;
  width:100%; }
  .bp3-progress-bar .bp3-progress-meter{
    background:linear-gradient(-45deg, rgba(255, 255, 255, 0.2) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.2) 75%, transparent 75%);
    background-color:rgba(92, 112, 128, 0.8);
    background-size:30px 30px;
    border-radius:40px;
    height:100%;
    position:absolute;
    -webkit-transition:width 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:width 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    width:100%; }
  .bp3-progress-bar:not(.bp3-no-animation):not(.bp3-no-stripes) .bp3-progress-meter{
    animation:linear-progress-bar-stripes 300ms linear infinite reverse; }
  .bp3-progress-bar.bp3-no-stripes .bp3-progress-meter{
    background-image:none; }

.bp3-dark .bp3-progress-bar{
  background:rgba(16, 22, 26, 0.5); }
  .bp3-dark .bp3-progress-bar .bp3-progress-meter{
    background-color:#8a9ba8; }

.bp3-progress-bar.bp3-intent-primary .bp3-progress-meter{
  background-color:#137cbd; }

.bp3-progress-bar.bp3-intent-success .bp3-progress-meter{
  background-color:#0f9960; }

.bp3-progress-bar.bp3-intent-warning .bp3-progress-meter{
  background-color:#d9822b; }

.bp3-progress-bar.bp3-intent-danger .bp3-progress-meter{
  background-color:#db3737; }
@-webkit-keyframes skeleton-glow{
  from{
    background:rgba(206, 217, 224, 0.2);
    border-color:rgba(206, 217, 224, 0.2); }
  to{
    background:rgba(92, 112, 128, 0.2);
    border-color:rgba(92, 112, 128, 0.2); } }
@keyframes skeleton-glow{
  from{
    background:rgba(206, 217, 224, 0.2);
    border-color:rgba(206, 217, 224, 0.2); }
  to{
    background:rgba(92, 112, 128, 0.2);
    border-color:rgba(92, 112, 128, 0.2); } }
.bp3-skeleton{
  -webkit-animation:1000ms linear infinite alternate skeleton-glow;
          animation:1000ms linear infinite alternate skeleton-glow;
  background:rgba(206, 217, 224, 0.2);
  background-clip:padding-box !important;
  border-color:rgba(206, 217, 224, 0.2) !important;
  border-radius:2px;
  -webkit-box-shadow:none !important;
          box-shadow:none !important;
  color:transparent !important;
  cursor:default;
  pointer-events:none;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-skeleton::before, .bp3-skeleton::after,
  .bp3-skeleton *{
    visibility:hidden !important; }
.bp3-slider{
  height:40px;
  min-width:150px;
  width:100%;
  cursor:default;
  outline:none;
  position:relative;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-slider:hover{
    cursor:pointer; }
  .bp3-slider:active{
    cursor:-webkit-grabbing;
    cursor:grabbing; }
  .bp3-slider.bp3-disabled{
    cursor:not-allowed;
    opacity:0.5; }
  .bp3-slider.bp3-slider-unlabeled{
    height:16px; }

.bp3-slider-track,
.bp3-slider-progress{
  height:6px;
  left:0;
  right:0;
  top:5px;
  position:absolute; }

.bp3-slider-track{
  border-radius:3px;
  overflow:hidden; }

.bp3-slider-progress{
  background:rgba(92, 112, 128, 0.2); }
  .bp3-dark .bp3-slider-progress{
    background:rgba(16, 22, 26, 0.5); }
  .bp3-slider-progress.bp3-intent-primary{
    background-color:#137cbd; }
  .bp3-slider-progress.bp3-intent-success{
    background-color:#0f9960; }
  .bp3-slider-progress.bp3-intent-warning{
    background-color:#d9822b; }
  .bp3-slider-progress.bp3-intent-danger{
    background-color:#db3737; }

.bp3-slider-handle{
  background-color:#f5f8fa;
  background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.8)), to(rgba(255, 255, 255, 0)));
  background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0));
  -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
          box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
  color:#182026;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
  cursor:pointer;
  height:16px;
  left:0;
  position:absolute;
  top:0;
  width:16px; }
  .bp3-slider-handle:hover{
    background-clip:padding-box;
    background-color:#ebf1f5;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1); }
  .bp3-slider-handle:active, .bp3-slider-handle.bp3-active{
    background-color:#d8e1e8;
    background-image:none;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
  .bp3-slider-handle:disabled, .bp3-slider-handle.bp3-disabled{
    background-color:rgba(206, 217, 224, 0.5);
    background-image:none;
    -webkit-box-shadow:none;
            box-shadow:none;
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed;
    outline:none; }
    .bp3-slider-handle:disabled.bp3-active, .bp3-slider-handle:disabled.bp3-active:hover, .bp3-slider-handle.bp3-disabled.bp3-active, .bp3-slider-handle.bp3-disabled.bp3-active:hover{
      background:rgba(206, 217, 224, 0.7); }
  .bp3-slider-handle:focus{
    z-index:1; }
  .bp3-slider-handle:hover{
    background-clip:padding-box;
    background-color:#ebf1f5;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 -1px 0 rgba(16, 22, 26, 0.1);
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 1px 1px rgba(16, 22, 26, 0.2);
    cursor:-webkit-grab;
    cursor:grab;
    z-index:2; }
  .bp3-slider-handle.bp3-active{
    background-color:#d8e1e8;
    background-image:none;
    -webkit-box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
            box-shadow:inset 0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 2px rgba(16, 22, 26, 0.2);
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 1px rgba(16, 22, 26, 0.1);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), inset 0 1px 1px rgba(16, 22, 26, 0.1);
    cursor:-webkit-grabbing;
    cursor:grabbing; }
  .bp3-disabled .bp3-slider-handle{
    background:#bfccd6;
    -webkit-box-shadow:none;
            box-shadow:none;
    pointer-events:none; }
  .bp3-dark .bp3-slider-handle{
    background-color:#394b59;
    background-image:-webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 0.05)), to(rgba(255, 255, 255, 0)));
    background-image:linear-gradient(to bottom, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0));
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
    color:#f5f8fa; }
    .bp3-dark .bp3-slider-handle:hover, .bp3-dark .bp3-slider-handle:active, .bp3-dark .bp3-slider-handle.bp3-active{
      color:#f5f8fa; }
    .bp3-dark .bp3-slider-handle:hover{
      background-color:#30404d;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-slider-handle:active, .bp3-dark .bp3-slider-handle.bp3-active{
      background-color:#202b33;
      background-image:none;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.6), inset 0 1px 2px rgba(16, 22, 26, 0.2); }
    .bp3-dark .bp3-slider-handle:disabled, .bp3-dark .bp3-slider-handle.bp3-disabled{
      background-color:rgba(57, 75, 89, 0.5);
      background-image:none;
      -webkit-box-shadow:none;
              box-shadow:none;
      color:rgba(167, 182, 194, 0.6); }
      .bp3-dark .bp3-slider-handle:disabled.bp3-active, .bp3-dark .bp3-slider-handle.bp3-disabled.bp3-active{
        background:rgba(57, 75, 89, 0.7); }
    .bp3-dark .bp3-slider-handle .bp3-button-spinner .bp3-spinner-head{
      background:rgba(16, 22, 26, 0.5);
      stroke:#8a9ba8; }
    .bp3-dark .bp3-slider-handle, .bp3-dark .bp3-slider-handle:hover{
      background-color:#394b59; }
    .bp3-dark .bp3-slider-handle.bp3-active{
      background-color:#293742; }
  .bp3-dark .bp3-disabled .bp3-slider-handle{
    background:#5c7080;
    border-color:#5c7080;
    -webkit-box-shadow:none;
            box-shadow:none; }
  .bp3-slider-handle .bp3-slider-label{
    background:#394b59;
    border-radius:3px;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
    color:#f5f8fa;
    margin-left:8px; }
    .bp3-dark .bp3-slider-handle .bp3-slider-label{
      background:#e1e8ed;
      -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
      color:#394b59; }
    .bp3-disabled .bp3-slider-handle .bp3-slider-label{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-slider-handle.bp3-start, .bp3-slider-handle.bp3-end{
    width:8px; }
  .bp3-slider-handle.bp3-start{
    border-bottom-right-radius:0;
    border-top-right-radius:0; }
  .bp3-slider-handle.bp3-end{
    border-bottom-left-radius:0;
    border-top-left-radius:0;
    margin-left:8px; }
    .bp3-slider-handle.bp3-end .bp3-slider-label{
      margin-left:0; }

.bp3-slider-label{
  -webkit-transform:translate(-50%, 20px);
          transform:translate(-50%, 20px);
  display:inline-block;
  font-size:12px;
  line-height:1;
  padding:2px 5px;
  position:absolute;
  vertical-align:top; }

.bp3-slider.bp3-vertical{
  height:150px;
  min-width:40px;
  width:40px; }
  .bp3-slider.bp3-vertical .bp3-slider-track,
  .bp3-slider.bp3-vertical .bp3-slider-progress{
    bottom:0;
    height:auto;
    left:5px;
    top:0;
    width:6px; }
  .bp3-slider.bp3-vertical .bp3-slider-progress{
    top:auto; }
  .bp3-slider.bp3-vertical .bp3-slider-label{
    -webkit-transform:translate(20px, 50%);
            transform:translate(20px, 50%); }
  .bp3-slider.bp3-vertical .bp3-slider-handle{
    top:auto; }
    .bp3-slider.bp3-vertical .bp3-slider-handle .bp3-slider-label{
      margin-left:0;
      margin-top:-8px; }
    .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-end, .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start{
      height:8px;
      margin-left:0;
      width:16px; }
    .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start{
      border-bottom-right-radius:3px;
      border-top-left-radius:0; }
      .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-start .bp3-slider-label{
        -webkit-transform:translate(20px);
                transform:translate(20px); }
    .bp3-slider.bp3-vertical .bp3-slider-handle.bp3-end{
      border-bottom-left-radius:0;
      border-bottom-right-radius:0;
      border-top-left-radius:3px;
      margin-bottom:8px; }

@-webkit-keyframes pt-spinner-animation{
  from{
    -webkit-transform:rotate(0deg);
            transform:rotate(0deg); }
  to{
    -webkit-transform:rotate(360deg);
            transform:rotate(360deg); } }

@keyframes pt-spinner-animation{
  from{
    -webkit-transform:rotate(0deg);
            transform:rotate(0deg); }
  to{
    -webkit-transform:rotate(360deg);
            transform:rotate(360deg); } }

.bp3-spinner{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-pack:center;
      -ms-flex-pack:center;
          justify-content:center;
  overflow:visible;
  vertical-align:middle; }
  .bp3-spinner svg{
    display:block; }
  .bp3-spinner path{
    fill-opacity:0; }
  .bp3-spinner .bp3-spinner-head{
    stroke:rgba(92, 112, 128, 0.8);
    stroke-linecap:round;
    -webkit-transform-origin:center;
            transform-origin:center;
    -webkit-transition:stroke-dashoffset 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
    transition:stroke-dashoffset 200ms cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-spinner .bp3-spinner-track{
    stroke:rgba(92, 112, 128, 0.2); }

.bp3-spinner-animation{
  -webkit-animation:pt-spinner-animation 500ms linear infinite;
          animation:pt-spinner-animation 500ms linear infinite; }
  .bp3-no-spin > .bp3-spinner-animation{
    -webkit-animation:none;
            animation:none; }

.bp3-dark .bp3-spinner .bp3-spinner-head{
  stroke:#8a9ba8; }

.bp3-dark .bp3-spinner .bp3-spinner-track{
  stroke:rgba(16, 22, 26, 0.5); }

.bp3-spinner.bp3-intent-primary .bp3-spinner-head{
  stroke:#137cbd; }

.bp3-spinner.bp3-intent-success .bp3-spinner-head{
  stroke:#0f9960; }

.bp3-spinner.bp3-intent-warning .bp3-spinner-head{
  stroke:#d9822b; }

.bp3-spinner.bp3-intent-danger .bp3-spinner-head{
  stroke:#db3737; }
.bp3-tabs.bp3-vertical{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex; }
  .bp3-tabs.bp3-vertical > .bp3-tab-list{
    -webkit-box-align:start;
        -ms-flex-align:start;
            align-items:flex-start;
    -webkit-box-orient:vertical;
    -webkit-box-direction:normal;
        -ms-flex-direction:column;
            flex-direction:column; }
    .bp3-tabs.bp3-vertical > .bp3-tab-list .bp3-tab{
      border-radius:3px;
      padding:0 10px;
      width:100%; }
      .bp3-tabs.bp3-vertical > .bp3-tab-list .bp3-tab[aria-selected="true"]{
        background-color:rgba(19, 124, 189, 0.2);
        -webkit-box-shadow:none;
                box-shadow:none; }
    .bp3-tabs.bp3-vertical > .bp3-tab-list .bp3-tab-indicator-wrapper .bp3-tab-indicator{
      background-color:rgba(19, 124, 189, 0.2);
      border-radius:3px;
      bottom:0;
      height:auto;
      left:0;
      right:0;
      top:0; }
  .bp3-tabs.bp3-vertical > .bp3-tab-panel{
    margin-top:0;
    padding-left:20px; }

.bp3-tab-list{
  -webkit-box-align:end;
      -ms-flex-align:end;
          align-items:flex-end;
  border:none;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  list-style:none;
  margin:0;
  padding:0;
  position:relative; }
  .bp3-tab-list > *:not(:last-child){
    margin-right:20px; }

.bp3-tab{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  word-wrap:normal;
  color:#182026;
  cursor:pointer;
  -webkit-box-flex:0;
      -ms-flex:0 0 auto;
          flex:0 0 auto;
  font-size:14px;
  line-height:30px;
  max-width:100%;
  position:relative;
  vertical-align:top; }
  .bp3-tab a{
    color:inherit;
    display:block;
    text-decoration:none; }
  .bp3-tab-indicator-wrapper ~ .bp3-tab{
    background-color:transparent !important;
    -webkit-box-shadow:none !important;
            box-shadow:none !important; }
  .bp3-tab[aria-disabled="true"]{
    color:rgba(92, 112, 128, 0.6);
    cursor:not-allowed; }
  .bp3-tab[aria-selected="true"]{
    border-radius:0;
    -webkit-box-shadow:inset 0 -3px 0 #106ba3;
            box-shadow:inset 0 -3px 0 #106ba3; }
  .bp3-tab[aria-selected="true"], .bp3-tab:not([aria-disabled="true"]):hover{
    color:#106ba3; }
  .bp3-tab:focus{
    -moz-outline-radius:0; }
  .bp3-large > .bp3-tab{
    font-size:16px;
    line-height:40px; }

.bp3-tab-panel{
  margin-top:20px; }
  .bp3-tab-panel[aria-hidden="true"]{
    display:none; }

.bp3-tab-indicator-wrapper{
  left:0;
  pointer-events:none;
  position:absolute;
  top:0;
  -webkit-transform:translateX(0), translateY(0);
          transform:translateX(0), translateY(0);
  -webkit-transition:height, width, -webkit-transform;
  transition:height, width, -webkit-transform;
  transition:height, transform, width;
  transition:height, transform, width, -webkit-transform;
  -webkit-transition-duration:200ms;
          transition-duration:200ms;
  -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
          transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-tab-indicator-wrapper .bp3-tab-indicator{
    background-color:#106ba3;
    bottom:0;
    height:3px;
    left:0;
    position:absolute;
    right:0; }
  .bp3-tab-indicator-wrapper.bp3-no-animation{
    -webkit-transition:none;
    transition:none; }

.bp3-dark .bp3-tab{
  color:#f5f8fa; }
  .bp3-dark .bp3-tab[aria-disabled="true"]{
    color:rgba(167, 182, 194, 0.6); }
  .bp3-dark .bp3-tab[aria-selected="true"]{
    -webkit-box-shadow:inset 0 -3px 0 #48aff0;
            box-shadow:inset 0 -3px 0 #48aff0; }
  .bp3-dark .bp3-tab[aria-selected="true"], .bp3-dark .bp3-tab:not([aria-disabled="true"]):hover{
    color:#48aff0; }

.bp3-dark .bp3-tab-indicator{
  background-color:#48aff0; }

.bp3-flex-expander{
  -webkit-box-flex:1;
      -ms-flex:1 1;
          flex:1 1; }
.bp3-tag{
  display:-webkit-inline-box;
  display:-ms-inline-flexbox;
  display:inline-flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  background-color:#5c7080;
  border:none;
  border-radius:3px;
  -webkit-box-shadow:none;
          box-shadow:none;
  color:#f5f8fa;
  font-size:12px;
  line-height:16px;
  max-width:100%;
  min-height:20px;
  min-width:20px;
  padding:2px 6px;
  position:relative; }
  .bp3-tag.bp3-interactive{
    cursor:pointer; }
    .bp3-tag.bp3-interactive:hover{
      background-color:rgba(92, 112, 128, 0.85); }
    .bp3-tag.bp3-interactive.bp3-active, .bp3-tag.bp3-interactive:active{
      background-color:rgba(92, 112, 128, 0.7); }
  .bp3-tag > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-tag > .bp3-fill{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-tag::before,
  .bp3-tag > *{
    margin-right:4px; }
  .bp3-tag:empty::before,
  .bp3-tag > :last-child{
    margin-right:0; }
  .bp3-tag:focus{
    outline:rgba(19, 124, 189, 0.6) auto 2px;
    outline-offset:0;
    -moz-outline-radius:6px; }
  .bp3-tag.bp3-round{
    border-radius:30px;
    padding-left:8px;
    padding-right:8px; }
  .bp3-dark .bp3-tag{
    background-color:#bfccd6;
    color:#182026; }
    .bp3-dark .bp3-tag.bp3-interactive{
      cursor:pointer; }
      .bp3-dark .bp3-tag.bp3-interactive:hover{
        background-color:rgba(191, 204, 214, 0.85); }
      .bp3-dark .bp3-tag.bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-interactive:active{
        background-color:rgba(191, 204, 214, 0.7); }
    .bp3-dark .bp3-tag > .bp3-icon, .bp3-dark .bp3-tag .bp3-icon-standard, .bp3-dark .bp3-tag .bp3-icon-large{
      fill:currentColor; }
  .bp3-tag > .bp3-icon, .bp3-tag .bp3-icon-standard, .bp3-tag .bp3-icon-large{
    fill:#ffffff; }
  .bp3-tag.bp3-large,
  .bp3-large .bp3-tag{
    font-size:14px;
    line-height:20px;
    min-height:30px;
    min-width:30px;
    padding:5px 10px; }
    .bp3-tag.bp3-large::before,
    .bp3-tag.bp3-large > *,
    .bp3-large .bp3-tag::before,
    .bp3-large .bp3-tag > *{
      margin-right:7px; }
    .bp3-tag.bp3-large:empty::before,
    .bp3-tag.bp3-large > :last-child,
    .bp3-large .bp3-tag:empty::before,
    .bp3-large .bp3-tag > :last-child{
      margin-right:0; }
    .bp3-tag.bp3-large.bp3-round,
    .bp3-large .bp3-tag.bp3-round{
      padding-left:12px;
      padding-right:12px; }
  .bp3-tag.bp3-intent-primary{
    background:#137cbd;
    color:#ffffff; }
    .bp3-tag.bp3-intent-primary.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-intent-primary.bp3-interactive:hover{
        background-color:rgba(19, 124, 189, 0.85); }
      .bp3-tag.bp3-intent-primary.bp3-interactive.bp3-active, .bp3-tag.bp3-intent-primary.bp3-interactive:active{
        background-color:rgba(19, 124, 189, 0.7); }
  .bp3-tag.bp3-intent-success{
    background:#0f9960;
    color:#ffffff; }
    .bp3-tag.bp3-intent-success.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-intent-success.bp3-interactive:hover{
        background-color:rgba(15, 153, 96, 0.85); }
      .bp3-tag.bp3-intent-success.bp3-interactive.bp3-active, .bp3-tag.bp3-intent-success.bp3-interactive:active{
        background-color:rgba(15, 153, 96, 0.7); }
  .bp3-tag.bp3-intent-warning{
    background:#d9822b;
    color:#ffffff; }
    .bp3-tag.bp3-intent-warning.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-intent-warning.bp3-interactive:hover{
        background-color:rgba(217, 130, 43, 0.85); }
      .bp3-tag.bp3-intent-warning.bp3-interactive.bp3-active, .bp3-tag.bp3-intent-warning.bp3-interactive:active{
        background-color:rgba(217, 130, 43, 0.7); }
  .bp3-tag.bp3-intent-danger{
    background:#db3737;
    color:#ffffff; }
    .bp3-tag.bp3-intent-danger.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-intent-danger.bp3-interactive:hover{
        background-color:rgba(219, 55, 55, 0.85); }
      .bp3-tag.bp3-intent-danger.bp3-interactive.bp3-active, .bp3-tag.bp3-intent-danger.bp3-interactive:active{
        background-color:rgba(219, 55, 55, 0.7); }
  .bp3-tag.bp3-fill{
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    width:100%; }
  .bp3-tag.bp3-minimal > .bp3-icon, .bp3-tag.bp3-minimal .bp3-icon-standard, .bp3-tag.bp3-minimal .bp3-icon-large{
    fill:#5c7080; }
  .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]){
    background-color:rgba(138, 155, 168, 0.2);
    color:#182026; }
    .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive:hover{
        background-color:rgba(92, 112, 128, 0.3); }
      .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive.bp3-active, .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive:active{
        background-color:rgba(92, 112, 128, 0.4); }
    .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]){
      color:#f5f8fa; }
      .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive{
        cursor:pointer; }
        .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive:hover{
          background-color:rgba(191, 204, 214, 0.3); }
        .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]).bp3-interactive:active{
          background-color:rgba(191, 204, 214, 0.4); }
      .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]) > .bp3-icon, .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]) .bp3-icon-standard, .bp3-dark .bp3-tag.bp3-minimal:not([class*="bp3-intent-"]) .bp3-icon-large{
        fill:#a7b6c2; }
  .bp3-tag.bp3-minimal.bp3-intent-primary{
    background-color:rgba(19, 124, 189, 0.15);
    color:#106ba3; }
    .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:hover{
        background-color:rgba(19, 124, 189, 0.25); }
      .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive.bp3-active, .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:active{
        background-color:rgba(19, 124, 189, 0.35); }
    .bp3-tag.bp3-minimal.bp3-intent-primary > .bp3-icon, .bp3-tag.bp3-minimal.bp3-intent-primary .bp3-icon-standard, .bp3-tag.bp3-minimal.bp3-intent-primary .bp3-icon-large{
      fill:#137cbd; }
    .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary{
      background-color:rgba(19, 124, 189, 0.25);
      color:#48aff0; }
      .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive{
        cursor:pointer; }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:hover{
          background-color:rgba(19, 124, 189, 0.35); }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-primary.bp3-interactive:active{
          background-color:rgba(19, 124, 189, 0.45); }
  .bp3-tag.bp3-minimal.bp3-intent-success{
    background-color:rgba(15, 153, 96, 0.15);
    color:#0d8050; }
    .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:hover{
        background-color:rgba(15, 153, 96, 0.25); }
      .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive.bp3-active, .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:active{
        background-color:rgba(15, 153, 96, 0.35); }
    .bp3-tag.bp3-minimal.bp3-intent-success > .bp3-icon, .bp3-tag.bp3-minimal.bp3-intent-success .bp3-icon-standard, .bp3-tag.bp3-minimal.bp3-intent-success .bp3-icon-large{
      fill:#0f9960; }
    .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success{
      background-color:rgba(15, 153, 96, 0.25);
      color:#3dcc91; }
      .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive{
        cursor:pointer; }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:hover{
          background-color:rgba(15, 153, 96, 0.35); }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-success.bp3-interactive:active{
          background-color:rgba(15, 153, 96, 0.45); }
  .bp3-tag.bp3-minimal.bp3-intent-warning{
    background-color:rgba(217, 130, 43, 0.15);
    color:#bf7326; }
    .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:hover{
        background-color:rgba(217, 130, 43, 0.25); }
      .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive.bp3-active, .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:active{
        background-color:rgba(217, 130, 43, 0.35); }
    .bp3-tag.bp3-minimal.bp3-intent-warning > .bp3-icon, .bp3-tag.bp3-minimal.bp3-intent-warning .bp3-icon-standard, .bp3-tag.bp3-minimal.bp3-intent-warning .bp3-icon-large{
      fill:#d9822b; }
    .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning{
      background-color:rgba(217, 130, 43, 0.25);
      color:#ffb366; }
      .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive{
        cursor:pointer; }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:hover{
          background-color:rgba(217, 130, 43, 0.35); }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-warning.bp3-interactive:active{
          background-color:rgba(217, 130, 43, 0.45); }
  .bp3-tag.bp3-minimal.bp3-intent-danger{
    background-color:rgba(219, 55, 55, 0.15);
    color:#c23030; }
    .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive{
      cursor:pointer; }
      .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:hover{
        background-color:rgba(219, 55, 55, 0.25); }
      .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive.bp3-active, .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:active{
        background-color:rgba(219, 55, 55, 0.35); }
    .bp3-tag.bp3-minimal.bp3-intent-danger > .bp3-icon, .bp3-tag.bp3-minimal.bp3-intent-danger .bp3-icon-standard, .bp3-tag.bp3-minimal.bp3-intent-danger .bp3-icon-large{
      fill:#db3737; }
    .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger{
      background-color:rgba(219, 55, 55, 0.25);
      color:#ff7373; }
      .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive{
        cursor:pointer; }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:hover{
          background-color:rgba(219, 55, 55, 0.35); }
        .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive.bp3-active, .bp3-dark .bp3-tag.bp3-minimal.bp3-intent-danger.bp3-interactive:active{
          background-color:rgba(219, 55, 55, 0.45); }

.bp3-tag-remove{
  background:none;
  border:none;
  color:inherit;
  cursor:pointer;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  margin-bottom:-2px;
  margin-right:-6px !important;
  margin-top:-2px;
  opacity:0.5;
  padding:2px;
  padding-left:0; }
  .bp3-tag-remove:hover{
    background:none;
    opacity:0.8;
    text-decoration:none; }
  .bp3-tag-remove:active{
    opacity:1; }
  .bp3-tag-remove:empty::before{
    font-family:"Icons16", sans-serif;
    font-size:16px;
    font-style:normal;
    font-weight:400;
    line-height:1;
    -moz-osx-font-smoothing:grayscale;
    -webkit-font-smoothing:antialiased;
    content:""; }
  .bp3-large .bp3-tag-remove{
    margin-right:-10px !important;
    padding:0 5px 0 0; }
    .bp3-large .bp3-tag-remove:empty::before{
      font-family:"Icons20", sans-serif;
      font-size:20px;
      font-style:normal;
      font-weight:400;
      line-height:1; }
.bp3-tag-input{
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  -webkit-box-orient:horizontal;
  -webkit-box-direction:normal;
      -ms-flex-direction:row;
          flex-direction:row;
  -webkit-box-align:start;
      -ms-flex-align:start;
          align-items:flex-start;
  cursor:text;
  height:auto;
  line-height:inherit;
  min-height:30px;
  padding-left:5px;
  padding-right:0; }
  .bp3-tag-input > *{
    -webkit-box-flex:0;
        -ms-flex-positive:0;
            flex-grow:0;
    -ms-flex-negative:0;
        flex-shrink:0; }
  .bp3-tag-input > .bp3-tag-input-values{
    -webkit-box-flex:1;
        -ms-flex-positive:1;
            flex-grow:1;
    -ms-flex-negative:1;
        flex-shrink:1; }
  .bp3-tag-input .bp3-tag-input-icon{
    color:#5c7080;
    margin-left:2px;
    margin-right:7px;
    margin-top:7px; }
  .bp3-tag-input .bp3-tag-input-values{
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex;
    -webkit-box-orient:horizontal;
    -webkit-box-direction:normal;
        -ms-flex-direction:row;
            flex-direction:row;
    -webkit-box-align:center;
        -ms-flex-align:center;
            align-items:center;
    -ms-flex-item-align:stretch;
        align-self:stretch;
    -ms-flex-wrap:wrap;
        flex-wrap:wrap;
    margin-right:7px;
    margin-top:5px;
    min-width:0; }
    .bp3-tag-input .bp3-tag-input-values > *{
      -webkit-box-flex:0;
          -ms-flex-positive:0;
              flex-grow:0;
      -ms-flex-negative:0;
          flex-shrink:0; }
    .bp3-tag-input .bp3-tag-input-values > .bp3-fill{
      -webkit-box-flex:1;
          -ms-flex-positive:1;
              flex-grow:1;
      -ms-flex-negative:1;
          flex-shrink:1; }
    .bp3-tag-input .bp3-tag-input-values::before,
    .bp3-tag-input .bp3-tag-input-values > *{
      margin-right:5px; }
    .bp3-tag-input .bp3-tag-input-values:empty::before,
    .bp3-tag-input .bp3-tag-input-values > :last-child{
      margin-right:0; }
    .bp3-tag-input .bp3-tag-input-values:first-child .bp3-input-ghost:first-child{
      padding-left:5px; }
    .bp3-tag-input .bp3-tag-input-values > *{
      margin-bottom:5px; }
  .bp3-tag-input .bp3-tag{
    overflow-wrap:break-word; }
    .bp3-tag-input .bp3-tag.bp3-active{
      outline:rgba(19, 124, 189, 0.6) auto 2px;
      outline-offset:0;
      -moz-outline-radius:6px; }
  .bp3-tag-input .bp3-input-ghost{
    -webkit-box-flex:1;
        -ms-flex:1 1 auto;
            flex:1 1 auto;
    line-height:20px;
    width:80px; }
    .bp3-tag-input .bp3-input-ghost:disabled, .bp3-tag-input .bp3-input-ghost.bp3-disabled{
      cursor:not-allowed; }
  .bp3-tag-input .bp3-button,
  .bp3-tag-input .bp3-spinner{
    margin:3px;
    margin-left:0; }
  .bp3-tag-input .bp3-button{
    min-height:24px;
    min-width:24px;
    padding:0 7px; }
  .bp3-tag-input.bp3-large{
    height:auto;
    min-height:40px; }
    .bp3-tag-input.bp3-large::before,
    .bp3-tag-input.bp3-large > *{
      margin-right:10px; }
    .bp3-tag-input.bp3-large:empty::before,
    .bp3-tag-input.bp3-large > :last-child{
      margin-right:0; }
    .bp3-tag-input.bp3-large .bp3-tag-input-icon{
      margin-left:5px;
      margin-top:10px; }
    .bp3-tag-input.bp3-large .bp3-input-ghost{
      line-height:30px; }
    .bp3-tag-input.bp3-large .bp3-button{
      min-height:30px;
      min-width:30px;
      padding:5px 10px;
      margin:5px;
      margin-left:0; }
    .bp3-tag-input.bp3-large .bp3-spinner{
      margin:8px;
      margin-left:0; }
  .bp3-tag-input.bp3-active{
    background-color:#ffffff;
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-tag-input.bp3-active.bp3-intent-primary{
      -webkit-box-shadow:0 0 0 1px #106ba3, 0 0 0 3px rgba(16, 107, 163, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #106ba3, 0 0 0 3px rgba(16, 107, 163, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-tag-input.bp3-active.bp3-intent-success{
      -webkit-box-shadow:0 0 0 1px #0d8050, 0 0 0 3px rgba(13, 128, 80, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #0d8050, 0 0 0 3px rgba(13, 128, 80, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-tag-input.bp3-active.bp3-intent-warning{
      -webkit-box-shadow:0 0 0 1px #bf7326, 0 0 0 3px rgba(191, 115, 38, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #bf7326, 0 0 0 3px rgba(191, 115, 38, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
    .bp3-tag-input.bp3-active.bp3-intent-danger{
      -webkit-box-shadow:0 0 0 1px #c23030, 0 0 0 3px rgba(194, 48, 48, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2);
              box-shadow:0 0 0 1px #c23030, 0 0 0 3px rgba(194, 48, 48, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.2); }
  .bp3-dark .bp3-tag-input .bp3-tag-input-icon, .bp3-tag-input.bp3-dark .bp3-tag-input-icon{
    color:#a7b6c2; }
  .bp3-dark .bp3-tag-input .bp3-input-ghost, .bp3-tag-input.bp3-dark .bp3-input-ghost{
    color:#f5f8fa; }
    .bp3-dark .bp3-tag-input .bp3-input-ghost::-webkit-input-placeholder, .bp3-tag-input.bp3-dark .bp3-input-ghost::-webkit-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-tag-input .bp3-input-ghost::-moz-placeholder, .bp3-tag-input.bp3-dark .bp3-input-ghost::-moz-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-tag-input .bp3-input-ghost:-ms-input-placeholder, .bp3-tag-input.bp3-dark .bp3-input-ghost:-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-tag-input .bp3-input-ghost::-ms-input-placeholder, .bp3-tag-input.bp3-dark .bp3-input-ghost::-ms-input-placeholder{
      color:rgba(167, 182, 194, 0.6); }
    .bp3-dark .bp3-tag-input .bp3-input-ghost::placeholder, .bp3-tag-input.bp3-dark .bp3-input-ghost::placeholder{
      color:rgba(167, 182, 194, 0.6); }
  .bp3-dark .bp3-tag-input.bp3-active, .bp3-tag-input.bp3-dark.bp3-active{
    background-color:rgba(16, 22, 26, 0.3);
    -webkit-box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px #137cbd, 0 0 0 1px #137cbd, 0 0 0 3px rgba(19, 124, 189, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-primary, .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-primary{
      -webkit-box-shadow:0 0 0 1px #106ba3, 0 0 0 3px rgba(16, 107, 163, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #106ba3, 0 0 0 3px rgba(16, 107, 163, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-success, .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-success{
      -webkit-box-shadow:0 0 0 1px #0d8050, 0 0 0 3px rgba(13, 128, 80, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #0d8050, 0 0 0 3px rgba(13, 128, 80, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-warning, .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-warning{
      -webkit-box-shadow:0 0 0 1px #bf7326, 0 0 0 3px rgba(191, 115, 38, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #bf7326, 0 0 0 3px rgba(191, 115, 38, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }
    .bp3-dark .bp3-tag-input.bp3-active.bp3-intent-danger, .bp3-tag-input.bp3-dark.bp3-active.bp3-intent-danger{
      -webkit-box-shadow:0 0 0 1px #c23030, 0 0 0 3px rgba(194, 48, 48, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4);
              box-shadow:0 0 0 1px #c23030, 0 0 0 3px rgba(194, 48, 48, 0.3), inset 0 0 0 1px rgba(16, 22, 26, 0.3), inset 0 1px 1px rgba(16, 22, 26, 0.4); }

.bp3-input-ghost{
  background:none;
  border:none;
  -webkit-box-shadow:none;
          box-shadow:none;
  padding:0; }
  .bp3-input-ghost::-webkit-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input-ghost::-moz-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input-ghost:-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input-ghost::-ms-input-placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input-ghost::placeholder{
    color:rgba(92, 112, 128, 0.6);
    opacity:1; }
  .bp3-input-ghost:focus{
    outline:none !important; }
.bp3-toast{
  -webkit-box-align:start;
      -ms-flex-align:start;
          align-items:flex-start;
  background-color:#ffffff;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  margin:20px 0 0;
  max-width:500px;
  min-width:300px;
  pointer-events:all;
  position:relative !important; }
  .bp3-toast.bp3-toast-enter, .bp3-toast.bp3-toast-appear{
    -webkit-transform:translateY(-40px);
            transform:translateY(-40px); }
  .bp3-toast.bp3-toast-enter-active, .bp3-toast.bp3-toast-appear-active{
    -webkit-transform:translateY(0);
            transform:translateY(0);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }
  .bp3-toast.bp3-toast-enter ~ .bp3-toast, .bp3-toast.bp3-toast-appear ~ .bp3-toast{
    -webkit-transform:translateY(-40px);
            transform:translateY(-40px); }
  .bp3-toast.bp3-toast-enter-active ~ .bp3-toast, .bp3-toast.bp3-toast-appear-active ~ .bp3-toast{
    -webkit-transform:translateY(0);
            transform:translateY(0);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11);
            transition-timing-function:cubic-bezier(0.54, 1.12, 0.38, 1.11); }
  .bp3-toast.bp3-toast-exit{
    opacity:1;
    -webkit-filter:blur(0);
            filter:blur(0); }
  .bp3-toast.bp3-toast-exit-active{
    opacity:0;
    -webkit-filter:blur(10px);
            filter:blur(10px);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:300ms;
            transition-duration:300ms;
    -webkit-transition-property:opacity, -webkit-filter;
    transition-property:opacity, -webkit-filter;
    transition-property:opacity, filter;
    transition-property:opacity, filter, -webkit-filter;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-toast.bp3-toast-exit ~ .bp3-toast{
    -webkit-transform:translateY(0);
            transform:translateY(0); }
  .bp3-toast.bp3-toast-exit-active ~ .bp3-toast{
    -webkit-transform:translateY(-40px);
            transform:translateY(-40px);
    -webkit-transition-delay:50ms;
            transition-delay:50ms;
    -webkit-transition-duration:100ms;
            transition-duration:100ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-toast .bp3-button-group{
    -webkit-box-flex:0;
        -ms-flex:0 0 auto;
            flex:0 0 auto;
    padding:5px;
    padding-left:0; }
  .bp3-toast > .bp3-icon{
    color:#5c7080;
    margin:12px;
    margin-right:0; }
  .bp3-toast.bp3-dark,
  .bp3-dark .bp3-toast{
    background-color:#394b59;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }
    .bp3-toast.bp3-dark > .bp3-icon,
    .bp3-dark .bp3-toast > .bp3-icon{
      color:#a7b6c2; }
  .bp3-toast[class*="bp3-intent-"] a{
    color:rgba(255, 255, 255, 0.7); }
    .bp3-toast[class*="bp3-intent-"] a:hover{
      color:#ffffff; }
  .bp3-toast[class*="bp3-intent-"] > .bp3-icon{
    color:#ffffff; }
  .bp3-toast[class*="bp3-intent-"] .bp3-button, .bp3-toast[class*="bp3-intent-"] .bp3-button::before,
  .bp3-toast[class*="bp3-intent-"] .bp3-button .bp3-icon, .bp3-toast[class*="bp3-intent-"] .bp3-button:active{
    color:rgba(255, 255, 255, 0.7) !important; }
  .bp3-toast[class*="bp3-intent-"] .bp3-button:focus{
    outline-color:rgba(255, 255, 255, 0.5); }
  .bp3-toast[class*="bp3-intent-"] .bp3-button:hover{
    background-color:rgba(255, 255, 255, 0.15) !important;
    color:#ffffff !important; }
  .bp3-toast[class*="bp3-intent-"] .bp3-button:active{
    background-color:rgba(255, 255, 255, 0.3) !important;
    color:#ffffff !important; }
  .bp3-toast[class*="bp3-intent-"] .bp3-button::after{
    background:rgba(255, 255, 255, 0.3) !important; }
  .bp3-toast.bp3-intent-primary{
    background-color:#137cbd;
    color:#ffffff; }
  .bp3-toast.bp3-intent-success{
    background-color:#0f9960;
    color:#ffffff; }
  .bp3-toast.bp3-intent-warning{
    background-color:#d9822b;
    color:#ffffff; }
  .bp3-toast.bp3-intent-danger{
    background-color:#db3737;
    color:#ffffff; }

.bp3-toast-message{
  -webkit-box-flex:1;
      -ms-flex:1 1 auto;
          flex:1 1 auto;
  padding:11px;
  word-break:break-word; }

.bp3-toast-container{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box !important;
  display:-ms-flexbox !important;
  display:flex !important;
  -webkit-box-orient:vertical;
  -webkit-box-direction:normal;
      -ms-flex-direction:column;
          flex-direction:column;
  left:0;
  overflow:hidden;
  padding:0 20px 20px;
  pointer-events:none;
  right:0;
  z-index:40; }
  .bp3-toast-container.bp3-toast-container-in-portal{
    position:fixed; }
  .bp3-toast-container.bp3-toast-container-inline{
    position:absolute; }
  .bp3-toast-container.bp3-toast-container-top{
    top:0; }
  .bp3-toast-container.bp3-toast-container-bottom{
    bottom:0;
    -webkit-box-orient:vertical;
    -webkit-box-direction:reverse;
        -ms-flex-direction:column-reverse;
            flex-direction:column-reverse;
    top:auto; }
  .bp3-toast-container.bp3-toast-container-left{
    -webkit-box-align:start;
        -ms-flex-align:start;
            align-items:flex-start; }
  .bp3-toast-container.bp3-toast-container-right{
    -webkit-box-align:end;
        -ms-flex-align:end;
            align-items:flex-end; }

.bp3-toast-container-bottom .bp3-toast.bp3-toast-enter:not(.bp3-toast-enter-active),
.bp3-toast-container-bottom .bp3-toast.bp3-toast-enter:not(.bp3-toast-enter-active) ~ .bp3-toast, .bp3-toast-container-bottom .bp3-toast.bp3-toast-appear:not(.bp3-toast-appear-active),
.bp3-toast-container-bottom .bp3-toast.bp3-toast-appear:not(.bp3-toast-appear-active) ~ .bp3-toast,
.bp3-toast-container-bottom .bp3-toast.bp3-toast-exit-active ~ .bp3-toast,
.bp3-toast-container-bottom .bp3-toast.bp3-toast-leave-active ~ .bp3-toast{
  -webkit-transform:translateY(60px);
          transform:translateY(60px); }
.bp3-tooltip{
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 2px 4px rgba(16, 22, 26, 0.2), 0 8px 24px rgba(16, 22, 26, 0.2);
  -webkit-transform:scale(1);
          transform:scale(1); }
  .bp3-tooltip .bp3-popover-arrow{
    height:22px;
    position:absolute;
    width:22px; }
    .bp3-tooltip .bp3-popover-arrow::before{
      height:14px;
      margin:4px;
      width:14px; }
  .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-tooltip{
    margin-bottom:11px;
    margin-top:-11px; }
    .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-tooltip > .bp3-popover-arrow{
      bottom:-8px; }
      .bp3-tether-element-attached-bottom.bp3-tether-target-attached-top > .bp3-tooltip > .bp3-popover-arrow svg{
        -webkit-transform:rotate(-90deg);
                transform:rotate(-90deg); }
  .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-tooltip{
    margin-left:11px; }
    .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-tooltip > .bp3-popover-arrow{
      left:-8px; }
      .bp3-tether-element-attached-left.bp3-tether-target-attached-right > .bp3-tooltip > .bp3-popover-arrow svg{
        -webkit-transform:rotate(0);
                transform:rotate(0); }
  .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-tooltip{
    margin-top:11px; }
    .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-tooltip > .bp3-popover-arrow{
      top:-8px; }
      .bp3-tether-element-attached-top.bp3-tether-target-attached-bottom > .bp3-tooltip > .bp3-popover-arrow svg{
        -webkit-transform:rotate(90deg);
                transform:rotate(90deg); }
  .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-tooltip{
    margin-left:-11px;
    margin-right:11px; }
    .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-tooltip > .bp3-popover-arrow{
      right:-8px; }
      .bp3-tether-element-attached-right.bp3-tether-target-attached-left > .bp3-tooltip > .bp3-popover-arrow svg{
        -webkit-transform:rotate(180deg);
                transform:rotate(180deg); }
  .bp3-tether-element-attached-middle > .bp3-tooltip > .bp3-popover-arrow{
    top:50%;
    -webkit-transform:translateY(-50%);
            transform:translateY(-50%); }
  .bp3-tether-element-attached-center > .bp3-tooltip > .bp3-popover-arrow{
    right:50%;
    -webkit-transform:translateX(50%);
            transform:translateX(50%); }
  .bp3-tether-element-attached-top.bp3-tether-target-attached-top > .bp3-tooltip > .bp3-popover-arrow{
    top:-0.22183px; }
  .bp3-tether-element-attached-right.bp3-tether-target-attached-right > .bp3-tooltip > .bp3-popover-arrow{
    right:-0.22183px; }
  .bp3-tether-element-attached-left.bp3-tether-target-attached-left > .bp3-tooltip > .bp3-popover-arrow{
    left:-0.22183px; }
  .bp3-tether-element-attached-bottom.bp3-tether-target-attached-bottom > .bp3-tooltip > .bp3-popover-arrow{
    bottom:-0.22183px; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-left > .bp3-tooltip{
    -webkit-transform-origin:top left;
            transform-origin:top left; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-center > .bp3-tooltip{
    -webkit-transform-origin:top center;
            transform-origin:top center; }
  .bp3-tether-element-attached-top.bp3-tether-element-attached-right > .bp3-tooltip{
    -webkit-transform-origin:top right;
            transform-origin:top right; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-left > .bp3-tooltip{
    -webkit-transform-origin:center left;
            transform-origin:center left; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-center > .bp3-tooltip{
    -webkit-transform-origin:center center;
            transform-origin:center center; }
  .bp3-tether-element-attached-middle.bp3-tether-element-attached-right > .bp3-tooltip{
    -webkit-transform-origin:center right;
            transform-origin:center right; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-left > .bp3-tooltip{
    -webkit-transform-origin:bottom left;
            transform-origin:bottom left; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-center > .bp3-tooltip{
    -webkit-transform-origin:bottom center;
            transform-origin:bottom center; }
  .bp3-tether-element-attached-bottom.bp3-tether-element-attached-right > .bp3-tooltip{
    -webkit-transform-origin:bottom right;
            transform-origin:bottom right; }
  .bp3-tooltip .bp3-popover-content{
    background:#394b59;
    color:#f5f8fa; }
  .bp3-tooltip .bp3-popover-arrow::before{
    -webkit-box-shadow:1px 1px 6px rgba(16, 22, 26, 0.2);
            box-shadow:1px 1px 6px rgba(16, 22, 26, 0.2); }
  .bp3-tooltip .bp3-popover-arrow-border{
    fill:#10161a;
    fill-opacity:0.1; }
  .bp3-tooltip .bp3-popover-arrow-fill{
    fill:#394b59; }
  .bp3-popover-enter > .bp3-tooltip, .bp3-popover-appear > .bp3-tooltip{
    -webkit-transform:scale(0.8);
            transform:scale(0.8); }
  .bp3-popover-enter-active > .bp3-tooltip, .bp3-popover-appear-active > .bp3-tooltip{
    -webkit-transform:scale(1);
            transform:scale(1);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:100ms;
            transition-duration:100ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-popover-exit > .bp3-tooltip{
    -webkit-transform:scale(1);
            transform:scale(1); }
  .bp3-popover-exit-active > .bp3-tooltip{
    -webkit-transform:scale(0.8);
            transform:scale(0.8);
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:100ms;
            transition-duration:100ms;
    -webkit-transition-property:-webkit-transform;
    transition-property:-webkit-transform;
    transition-property:transform;
    transition-property:transform, -webkit-transform;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-tooltip .bp3-popover-content{
    padding:10px 12px; }
  .bp3-tooltip.bp3-dark,
  .bp3-dark .bp3-tooltip{
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 2px 4px rgba(16, 22, 26, 0.4), 0 8px 24px rgba(16, 22, 26, 0.4); }
    .bp3-tooltip.bp3-dark .bp3-popover-content,
    .bp3-dark .bp3-tooltip .bp3-popover-content{
      background:#e1e8ed;
      color:#394b59; }
    .bp3-tooltip.bp3-dark .bp3-popover-arrow::before,
    .bp3-dark .bp3-tooltip .bp3-popover-arrow::before{
      -webkit-box-shadow:1px 1px 6px rgba(16, 22, 26, 0.4);
              box-shadow:1px 1px 6px rgba(16, 22, 26, 0.4); }
    .bp3-tooltip.bp3-dark .bp3-popover-arrow-border,
    .bp3-dark .bp3-tooltip .bp3-popover-arrow-border{
      fill:#10161a;
      fill-opacity:0.2; }
    .bp3-tooltip.bp3-dark .bp3-popover-arrow-fill,
    .bp3-dark .bp3-tooltip .bp3-popover-arrow-fill{
      fill:#e1e8ed; }
  .bp3-tooltip.bp3-intent-primary .bp3-popover-content{
    background:#137cbd;
    color:#ffffff; }
  .bp3-tooltip.bp3-intent-primary .bp3-popover-arrow-fill{
    fill:#137cbd; }
  .bp3-tooltip.bp3-intent-success .bp3-popover-content{
    background:#0f9960;
    color:#ffffff; }
  .bp3-tooltip.bp3-intent-success .bp3-popover-arrow-fill{
    fill:#0f9960; }
  .bp3-tooltip.bp3-intent-warning .bp3-popover-content{
    background:#d9822b;
    color:#ffffff; }
  .bp3-tooltip.bp3-intent-warning .bp3-popover-arrow-fill{
    fill:#d9822b; }
  .bp3-tooltip.bp3-intent-danger .bp3-popover-content{
    background:#db3737;
    color:#ffffff; }
  .bp3-tooltip.bp3-intent-danger .bp3-popover-arrow-fill{
    fill:#db3737; }

.bp3-tooltip-indicator{
  border-bottom:dotted 1px;
  cursor:help; }
.bp3-tree .bp3-icon, .bp3-tree .bp3-icon-standard, .bp3-tree .bp3-icon-large{
  color:#5c7080; }
  .bp3-tree .bp3-icon.bp3-intent-primary, .bp3-tree .bp3-icon-standard.bp3-intent-primary, .bp3-tree .bp3-icon-large.bp3-intent-primary{
    color:#137cbd; }
  .bp3-tree .bp3-icon.bp3-intent-success, .bp3-tree .bp3-icon-standard.bp3-intent-success, .bp3-tree .bp3-icon-large.bp3-intent-success{
    color:#0f9960; }
  .bp3-tree .bp3-icon.bp3-intent-warning, .bp3-tree .bp3-icon-standard.bp3-intent-warning, .bp3-tree .bp3-icon-large.bp3-intent-warning{
    color:#d9822b; }
  .bp3-tree .bp3-icon.bp3-intent-danger, .bp3-tree .bp3-icon-standard.bp3-intent-danger, .bp3-tree .bp3-icon-large.bp3-intent-danger{
    color:#db3737; }

.bp3-tree-node-list{
  list-style:none;
  margin:0;
  padding-left:0; }

.bp3-tree-root{
  background-color:transparent;
  cursor:default;
  padding-left:0;
  position:relative; }

.bp3-tree-node-content-0{
  padding-left:0px; }

.bp3-tree-node-content-1{
  padding-left:23px; }

.bp3-tree-node-content-2{
  padding-left:46px; }

.bp3-tree-node-content-3{
  padding-left:69px; }

.bp3-tree-node-content-4{
  padding-left:92px; }

.bp3-tree-node-content-5{
  padding-left:115px; }

.bp3-tree-node-content-6{
  padding-left:138px; }

.bp3-tree-node-content-7{
  padding-left:161px; }

.bp3-tree-node-content-8{
  padding-left:184px; }

.bp3-tree-node-content-9{
  padding-left:207px; }

.bp3-tree-node-content-10{
  padding-left:230px; }

.bp3-tree-node-content-11{
  padding-left:253px; }

.bp3-tree-node-content-12{
  padding-left:276px; }

.bp3-tree-node-content-13{
  padding-left:299px; }

.bp3-tree-node-content-14{
  padding-left:322px; }

.bp3-tree-node-content-15{
  padding-left:345px; }

.bp3-tree-node-content-16{
  padding-left:368px; }

.bp3-tree-node-content-17{
  padding-left:391px; }

.bp3-tree-node-content-18{
  padding-left:414px; }

.bp3-tree-node-content-19{
  padding-left:437px; }

.bp3-tree-node-content-20{
  padding-left:460px; }

.bp3-tree-node-content{
  -webkit-box-align:center;
      -ms-flex-align:center;
          align-items:center;
  display:-webkit-box;
  display:-ms-flexbox;
  display:flex;
  height:30px;
  padding-right:5px;
  width:100%; }
  .bp3-tree-node-content:hover{
    background-color:rgba(191, 204, 214, 0.4); }

.bp3-tree-node-caret,
.bp3-tree-node-caret-none{
  min-width:30px; }

.bp3-tree-node-caret{
  color:#5c7080;
  cursor:pointer;
  padding:7px;
  -webkit-transform:rotate(0deg);
          transform:rotate(0deg);
  -webkit-transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:-webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9);
  transition:transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9), -webkit-transform 200ms cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-tree-node-caret:hover{
    color:#182026; }
  .bp3-dark .bp3-tree-node-caret{
    color:#a7b6c2; }
    .bp3-dark .bp3-tree-node-caret:hover{
      color:#f5f8fa; }
  .bp3-tree-node-caret.bp3-tree-node-caret-open{
    -webkit-transform:rotate(90deg);
            transform:rotate(90deg); }
  .bp3-tree-node-caret.bp3-icon-standard::before{
    content:""; }

.bp3-tree-node-icon{
  margin-right:7px;
  position:relative; }

.bp3-tree-node-label{
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  word-wrap:normal;
  -webkit-box-flex:1;
      -ms-flex:1 1 auto;
          flex:1 1 auto;
  position:relative;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-tree-node-label span{
    display:inline; }

.bp3-tree-node-secondary-label{
  padding:0 5px;
  -webkit-user-select:none;
     -moz-user-select:none;
      -ms-user-select:none;
          user-select:none; }
  .bp3-tree-node-secondary-label .bp3-popover-wrapper,
  .bp3-tree-node-secondary-label .bp3-popover-target{
    -webkit-box-align:center;
        -ms-flex-align:center;
            align-items:center;
    display:-webkit-box;
    display:-ms-flexbox;
    display:flex; }

.bp3-tree-node.bp3-disabled .bp3-tree-node-content{
  background-color:inherit;
  color:rgba(92, 112, 128, 0.6);
  cursor:not-allowed; }

.bp3-tree-node.bp3-disabled .bp3-tree-node-caret,
.bp3-tree-node.bp3-disabled .bp3-tree-node-icon{
  color:rgba(92, 112, 128, 0.6);
  cursor:not-allowed; }

.bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content{
  background-color:#137cbd; }
  .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content,
  .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content .bp3-icon, .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content .bp3-icon-standard, .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content .bp3-icon-large{
    color:#ffffff; }
  .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content .bp3-tree-node-caret::before{
    color:rgba(255, 255, 255, 0.7); }
  .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content .bp3-tree-node-caret:hover::before{
    color:#ffffff; }

.bp3-dark .bp3-tree-node-content:hover{
  background-color:rgba(92, 112, 128, 0.3); }

.bp3-dark .bp3-tree .bp3-icon, .bp3-dark .bp3-tree .bp3-icon-standard, .bp3-dark .bp3-tree .bp3-icon-large{
  color:#a7b6c2; }
  .bp3-dark .bp3-tree .bp3-icon.bp3-intent-primary, .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-primary, .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-primary{
    color:#137cbd; }
  .bp3-dark .bp3-tree .bp3-icon.bp3-intent-success, .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-success, .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-success{
    color:#0f9960; }
  .bp3-dark .bp3-tree .bp3-icon.bp3-intent-warning, .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-warning, .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-warning{
    color:#d9822b; }
  .bp3-dark .bp3-tree .bp3-icon.bp3-intent-danger, .bp3-dark .bp3-tree .bp3-icon-standard.bp3-intent-danger, .bp3-dark .bp3-tree .bp3-icon-large.bp3-intent-danger{
    color:#db3737; }

.bp3-dark .bp3-tree-node.bp3-tree-node-selected > .bp3-tree-node-content{
  background-color:#137cbd; }
.bp3-omnibar{
  -webkit-filter:blur(0);
          filter:blur(0);
  opacity:1;
  background-color:#ffffff;
  border-radius:3px;
  -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
          box-shadow:0 0 0 1px rgba(16, 22, 26, 0.1), 0 4px 8px rgba(16, 22, 26, 0.2), 0 18px 46px 6px rgba(16, 22, 26, 0.2);
  left:calc(50% - 250px);
  top:20vh;
  width:500px;
  z-index:21; }
  .bp3-omnibar.bp3-overlay-enter, .bp3-omnibar.bp3-overlay-appear{
    -webkit-filter:blur(20px);
            filter:blur(20px);
    opacity:0.2; }
  .bp3-omnibar.bp3-overlay-enter-active, .bp3-omnibar.bp3-overlay-appear-active{
    -webkit-filter:blur(0);
            filter:blur(0);
    opacity:1;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:200ms;
            transition-duration:200ms;
    -webkit-transition-property:opacity, -webkit-filter;
    transition-property:opacity, -webkit-filter;
    transition-property:filter, opacity;
    transition-property:filter, opacity, -webkit-filter;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-omnibar.bp3-overlay-exit{
    -webkit-filter:blur(0);
            filter:blur(0);
    opacity:1; }
  .bp3-omnibar.bp3-overlay-exit-active{
    -webkit-filter:blur(20px);
            filter:blur(20px);
    opacity:0.2;
    -webkit-transition-delay:0;
            transition-delay:0;
    -webkit-transition-duration:200ms;
            transition-duration:200ms;
    -webkit-transition-property:opacity, -webkit-filter;
    transition-property:opacity, -webkit-filter;
    transition-property:filter, opacity;
    transition-property:filter, opacity, -webkit-filter;
    -webkit-transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9);
            transition-timing-function:cubic-bezier(0.4, 1, 0.75, 0.9); }
  .bp3-omnibar .bp3-input{
    background-color:transparent;
    border-radius:0; }
    .bp3-omnibar .bp3-input, .bp3-omnibar .bp3-input:focus{
      -webkit-box-shadow:none;
              box-shadow:none; }
  .bp3-omnibar .bp3-menu{
    background-color:transparent;
    border-radius:0;
    -webkit-box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.15);
            box-shadow:inset 0 1px 0 rgba(16, 22, 26, 0.15);
    max-height:calc(60vh - 40px);
    overflow:auto; }
    .bp3-omnibar .bp3-menu:empty{
      display:none; }
  .bp3-dark .bp3-omnibar, .bp3-omnibar.bp3-dark{
    background-color:#30404d;
    -webkit-box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4);
            box-shadow:0 0 0 1px rgba(16, 22, 26, 0.2), 0 4px 8px rgba(16, 22, 26, 0.4), 0 18px 46px 6px rgba(16, 22, 26, 0.4); }

.bp3-omnibar-overlay .bp3-overlay-backdrop{
  background-color:rgba(16, 22, 26, 0.2); }

.bp3-select-popover .bp3-popover-content{
  padding:5px; }

.bp3-select-popover .bp3-input-group{
  margin-bottom:0; }

.bp3-select-popover .bp3-menu{
  max-height:300px;
  max-width:400px;
  overflow:auto;
  padding:0; }
  .bp3-select-popover .bp3-menu:not(:first-child){
    padding-top:5px; }

.bp3-multi-select{
  min-width:150px; }

.bp3-multi-select-popover .bp3-menu{
  max-height:300px;
  max-width:400px;
  overflow:auto; }

.bp3-select-popover .bp3-popover-content{
  padding:5px; }

.bp3-select-popover .bp3-input-group{
  margin-bottom:0; }

.bp3-select-popover .bp3-menu{
  max-height:300px;
  max-width:400px;
  overflow:auto;
  padding:0; }
  .bp3-select-popover .bp3-menu:not(:first-child){
    padding-top:5px; }
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* This file was auto-generated by ensureUiComponents() in @jupyterlab/buildutils */

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

/* Icons urls */

:root {
  --jp-icon-add: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-bug: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0yMCA4aC0yLjgxYy0uNDUtLjc4LTEuMDctMS40NS0xLjgyLTEuOTZMMTcgNC40MSAxNS41OSAzbC0yLjE3IDIuMTdDMTIuOTYgNS4wNiAxMi40OSA1IDEyIDVjLS40OSAwLS45Ni4wNi0xLjQxLjE3TDguNDEgMyA3IDQuNDFsMS42MiAxLjYzQzcuODggNi41NSA3LjI2IDcuMjIgNi44MSA4SDR2MmgyLjA5Yy0uMDUuMzMtLjA5LjY2LS4wOSAxdjFINHYyaDJ2MWMwIC4zNC4wNC42Ny4wOSAxSDR2MmgyLjgxYzEuMDQgMS43OSAyLjk3IDMgNS4xOSAzczQuMTUtMS4yMSA1LjE5LTNIMjB2LTJoLTIuMDljLjA1LS4zMy4wOS0uNjYuMDktMXYtMWgydi0yaC0ydi0xYzAtLjM0LS4wNC0uNjctLjA5LTFIMjBWOHptLTYgOGgtNHYtMmg0djJ6bTAtNGgtNHYtMmg0djJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-build: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE0LjkgMTcuNDVDMTYuMjUgMTcuNDUgMTcuMzUgMTYuMzUgMTcuMzUgMTVDMTcuMzUgMTMuNjUgMTYuMjUgMTIuNTUgMTQuOSAxMi41NUMxMy41NCAxMi41NSAxMi40NSAxMy42NSAxMi40NSAxNUMxMi40NSAxNi4zNSAxMy41NCAxNy40NSAxNC45IDE3LjQ1Wk0yMC4xIDE1LjY4TDIxLjU4IDE2Ljg0QzIxLjcxIDE2Ljk1IDIxLjc1IDE3LjEzIDIxLjY2IDE3LjI5TDIwLjI2IDE5LjcxQzIwLjE3IDE5Ljg2IDIwIDE5LjkyIDE5LjgzIDE5Ljg2TDE4LjA5IDE5LjE2QzE3LjczIDE5LjQ0IDE3LjMzIDE5LjY3IDE2LjkxIDE5Ljg1TDE2LjY0IDIxLjdDMTYuNjIgMjEuODcgMTYuNDcgMjIgMTYuMyAyMkgxMy41QzEzLjMyIDIyIDEzLjE4IDIxLjg3IDEzLjE1IDIxLjdMMTIuODkgMTkuODVDMTIuNDYgMTkuNjcgMTIuMDcgMTkuNDQgMTEuNzEgMTkuMTZMOS45NjAwMiAxOS44NkM5LjgxMDAyIDE5LjkyIDkuNjIwMDIgMTkuODYgOS41NDAwMiAxOS43MUw4LjE0MDAyIDE3LjI5QzguMDUwMDIgMTcuMTMgOC4wOTAwMiAxNi45NSA4LjIyMDAyIDE2Ljg0TDkuNzAwMDIgMTUuNjhMOS42NTAwMSAxNUw5LjcwMDAyIDE0LjMxTDguMjIwMDIgMTMuMTZDOC4wOTAwMiAxMy4wNSA4LjA1MDAyIDEyLjg2IDguMTQwMDIgMTIuNzFMOS41NDAwMiAxMC4yOUM5LjYyMDAyIDEwLjEzIDkuODEwMDIgMTAuMDcgOS45NjAwMiAxMC4xM0wxMS43MSAxMC44NEMxMi4wNyAxMC41NiAxMi40NiAxMC4zMiAxMi44OSAxMC4xNUwxMy4xNSA4LjI4OTk4QzEzLjE4IDguMTI5OTggMTMuMzIgNy45OTk5OCAxMy41IDcuOTk5OThIMTYuM0MxNi40NyA3Ljk5OTk4IDE2LjYyIDguMTI5OTggMTYuNjQgOC4yODk5OEwxNi45MSAxMC4xNUMxNy4zMyAxMC4zMiAxNy43MyAxMC41NiAxOC4wOSAxMC44NEwxOS44MyAxMC4xM0MyMCAxMC4wNyAyMC4xNyAxMC4xMyAyMC4yNiAxMC4yOUwyMS42NiAxMi43MUMyMS43NSAxMi44NiAyMS43MSAxMy4wNSAyMS41OCAxMy4xNkwyMC4xIDE0LjMxTDIwLjE1IDE1TDIwLjEgMTUuNjhaIi8+CiAgICA8cGF0aCBkPSJNNy4zMjk2NiA3LjQ0NDU0QzguMDgzMSA3LjAwOTU0IDguMzM5MzIgNi4wNTMzMiA3LjkwNDMyIDUuMjk5ODhDNy40NjkzMiA0LjU0NjQzIDYuNTA4MSA0LjI4MTU2IDUuNzU0NjYgNC43MTY1NkM1LjM5MTc2IDQuOTI2MDggNS4xMjY5NSA1LjI3MTE4IDUuMDE4NDkgNS42NzU5NEM0LjkxMDA0IDYuMDgwNzEgNC45NjY4MiA2LjUxMTk4IDUuMTc2MzQgNi44NzQ4OEM1LjYxMTM0IDcuNjI4MzIgNi41NzYyMiA3Ljg3OTU0IDcuMzI5NjYgNy40NDQ1NFpNOS42NTcxOCA0Ljc5NTkzTDEwLjg2NzIgNC45NTE3OUMxMC45NjI4IDQuOTc3NDEgMTEuMDQwMiA1LjA3MTMzIDExLjAzODIgNS4xODc5M0wxMS4wMzg4IDYuOTg4OTNDMTEuMDQ1NSA3LjEwMDU0IDEwLjk2MTYgNy4xOTUxOCAxMC44NTUgNy4yMTA1NEw5LjY2MDAxIDcuMzgwODNMOS4yMzkxNSA4LjEzMTg4TDkuNjY5NjEgOS4yNTc0NUM5LjcwNzI5IDkuMzYyNzEgOS42NjkzNCA5LjQ3Njk5IDkuNTc0MDggOS41MzE5OUw4LjAxNTIzIDEwLjQzMkM3LjkxMTMxIDEwLjQ5MiA3Ljc5MzM3IDEwLjQ2NzcgNy43MjEwNSAxMC4zODI0TDYuOTg3NDggOS40MzE4OEw2LjEwOTMxIDkuNDMwODNMNS4zNDcwNCAxMC4zOTA1QzUuMjg5MDkgMTAuNDcwMiA1LjE3MzgzIDEwLjQ5MDUgNS4wNzE4NyAxMC40MzM5TDMuNTEyNDUgOS41MzI5M0MzLjQxMDQ5IDkuNDc2MzMgMy4zNzY0NyA5LjM1NzQxIDMuNDEwNzUgOS4yNTY3OUwzLjg2MzQ3IDguMTQwOTNMMy42MTc0OSA3Ljc3NDg4TDMuNDIzNDcgNy4zNzg4M0wyLjIzMDc1IDcuMjEyOTdDMi4xMjY0NyA3LjE5MjM1IDIuMDQwNDkgNy4xMDM0MiAyLjA0MjQ1IDYuOTg2ODJMMi4wNDE4NyA1LjE4NTgyQzIuMDQzODMgNS4wNjkyMiAyLjExOTA5IDQuOTc5NTggMi4yMTcwNCA0Ljk2OTIyTDMuNDIwNjUgNC43OTM5M0wzLjg2NzQ5IDQuMDI3ODhMMy40MTEwNSAyLjkxNzMxQzMuMzczMzcgMi44MTIwNCAzLjQxMTMxIDIuNjk3NzYgMy41MTUyMyAyLjYzNzc2TDUuMDc0MDggMS43Mzc3NkM1LjE2OTM0IDEuNjgyNzYgNS4yODcyOSAxLjcwNzA0IDUuMzU5NjEgMS43OTIzMUw2LjExOTE1IDIuNzI3ODhMNi45ODAwMSAyLjczODkzTDcuNzI0OTYgMS43ODkyMkM3Ljc5MTU2IDEuNzA0NTggNy45MTU0OCAxLjY3OTIyIDguMDA4NzkgMS43NDA4Mkw5LjU2ODIxIDIuNjQxODJDOS42NzAxNyAyLjY5ODQyIDkuNzEyODUgMi44MTIzNCA5LjY4NzIzIDIuOTA3OTdMOS4yMTcxOCA0LjAzMzgzTDkuNDYzMTYgNC4zOTk4OEw5LjY1NzE4IDQuNzk1OTNaIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iOS45LDEzLjYgMy42LDcuNCA0LjQsNi42IDkuOSwxMi4yIDE1LjQsNi43IDE2LjEsNy40ICIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNS45TDksOS43bDMuOC0zLjhsMS4yLDEuMmwtNC45LDVsLTQuOS01TDUuMiw1Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-caret-down: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik01LjIsNy41TDksMTEuMmwzLjgtMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-left: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik0xMC44LDEyLjhMNy4xLDlsMy44LTMuOGwwLDcuNkgxMC44eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-right: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KICAgIDxwYXRoIGQ9Ik03LjIsNS4yTDEwLjksOWwtMy44LDMuOFY1LjJINy4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-caret-up-empty-thin: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwb2x5Z29uIGNsYXNzPSJzdDEiIHBvaW50cz0iMTUuNCwxMy4zIDkuOSw3LjcgNC40LDEzLjIgMy42LDEyLjUgOS45LDYuMyAxNi4xLDEyLjYgIi8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-caret-up: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgoJCTxwYXRoIGQ9Ik01LjIsMTAuNUw5LDYuOGwzLjgsMy44SDUuMnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-case-sensitive: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgogIDxnIGNsYXNzPSJqcC1pY29uLWFjY2VudDIiIGZpbGw9IiNGRkYiPgogICAgPHBhdGggZD0iTTcuNiw4aDAuOWwzLjUsOGgtMS4xTDEwLDE0SDZsLTAuOSwySDRMNy42LDh6IE04LDkuMUw2LjQsMTNoMy4yTDgsOS4xeiIvPgogICAgPHBhdGggZD0iTTE2LjYsOS44Yy0wLjIsMC4xLTAuNCwwLjEtMC43LDAuMWMtMC4yLDAtMC40LTAuMS0wLjYtMC4yYy0wLjEtMC4xLTAuMi0wLjQtMC4yLTAuNyBjLTAuMywwLjMtMC42LDAuNS0wLjksMC43Yy0wLjMsMC4xLTAuNywwLjItMS4xLDAuMmMtMC4zLDAtMC41LDAtMC43LTAuMWMtMC4yLTAuMS0wLjQtMC4yLTAuNi0wLjNjLTAuMi0wLjEtMC4zLTAuMy0wLjQtMC41IGMtMC4xLTAuMi0wLjEtMC40LTAuMS0wLjdjMC0wLjMsMC4xLTAuNiwwLjItMC44YzAuMS0wLjIsMC4zLTAuNCwwLjQtMC41QzEyLDcsMTIuMiw2LjksMTIuNSw2LjhjMC4yLTAuMSwwLjUtMC4xLDAuNy0wLjIgYzAuMy0wLjEsMC41LTAuMSwwLjctMC4xYzAuMiwwLDAuNC0wLjEsMC42LTAuMWMwLjIsMCwwLjMtMC4xLDAuNC0wLjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjRjMC0xLTEuMS0xLTEuMy0xIGMtMC40LDAtMS40LDAtMS40LDEuMmgtMC45YzAtMC40LDAuMS0wLjcsMC4yLTFjMC4xLTAuMiwwLjMtMC40LDAuNS0wLjZjMC4yLTAuMiwwLjUtMC4zLDAuOC0wLjNDMTMuMyw0LDEzLjYsNCwxMy45LDQgYzAuMywwLDAuNSwwLDAuOCwwLjFjMC4zLDAsMC41LDAuMSwwLjcsMC4yYzAuMiwwLjEsMC40LDAuMywwLjUsMC41QzE2LDUsMTYsNS4yLDE2LDUuNnYyLjljMCwwLjIsMCwwLjQsMCwwLjUgYzAsMC4xLDAuMSwwLjIsMC4zLDAuMmMwLjEsMCwwLjIsMCwwLjMsMFY5Ljh6IE0xNS4yLDYuOWMtMS4yLDAuNi0zLjEsMC4yLTMuMSwxLjRjMCwxLjQsMy4xLDEsMy4xLTAuNVY2Ljl6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-check: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik05IDE2LjE3TDQuODMgMTJsLTEuNDIgMS40MUw5IDE5IDIxIDdsLTEuNDEtMS40MXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-circle-empty: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTAgMThjLTQuNDEgMC04LTMuNTktOC04czMuNTktOCA4LTggOCAzLjU5IDggOC0zLjU5IDgtOCA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-circle: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-clear: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8bWFzayBpZD0iZG9udXRIb2xlIj4KICAgIDxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiIC8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSJibGFjayIvPgogIDwvbWFzaz4KCiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxyZWN0IGhlaWdodD0iMTgiIHdpZHRoPSIyIiB4PSIxMSIgeT0iMyIgdHJhbnNmb3JtPSJyb3RhdGUoMzE1LCAxMiwgMTIpIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgbWFzaz0idXJsKCNkb251dEhvbGUpIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-close: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1ub25lIGpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIGpwLWljb24zLWhvdmVyIiBmaWxsPSJub25lIj4KICAgIDxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjExIi8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIGpwLWljb24tYWNjZW50Mi1ob3ZlciIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogIDwvZz4KCiAgPGcgY2xhc3M9ImpwLWljb24tbm9uZSBqcC1pY29uLWJ1c3kiIGZpbGw9Im5vbmUiPgogICAgPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-code: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTExLjQgMTguNkw2LjggMTRMMTEuNCA5LjRMMTAgOEw0IDE0TDEwIDIwTDExLjQgMTguNlpNMTYuNiAxOC42TDIxLjIgMTRMMTYuNiA5LjRMMTggOEwyNCAxNEwxOCAyMEwxNi42IDE4LjZWMTguNloiLz4KCTwvZz4KPC9zdmc+Cg==);
  --jp-icon-console: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwMCAyMDAiPgogIDxnIGNsYXNzPSJqcC1pY29uLWJyYW5kMSBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMjg4RDEiPgogICAgPHBhdGggZD0iTTIwIDE5LjhoMTYwdjE1OS45SDIweiIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNmZmYiPgogICAgPHBhdGggZD0iTTEwNSAxMjcuM2g0MHYxMi44aC00MHpNNTEuMSA3N0w3NCA5OS45bC0yMy4zIDIzLjMgMTAuNSAxMC41IDIzLjMtMjMuM0w5NSA5OS45IDg0LjUgODkuNCA2MS42IDY2LjV6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-copy: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTExLjksMUgzLjJDMi40LDEsMS43LDEuNywxLjcsMi41djEwLjJoMS41VjIuNWg4LjdWMXogTTE0LjEsMy45aC04Yy0wLjgsMC0xLjUsMC43LTEuNSwxLjV2MTAuMmMwLDAuOCwwLjcsMS41LDEuNSwxLjVoOCBjMC44LDAsMS41LTAuNywxLjUtMS41VjUuNEMxNS41LDQuNiwxNC45LDMuOSwxNC4xLDMuOXogTTE0LjEsMTUuNWgtOFY1LjRoOFYxNS41eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-copyright: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCI+CiAgPGcgY2xhc3M9ImpwLWljb24zIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik0xMS44OCw5LjE0YzEuMjgsMC4wNiwxLjYxLDEuMTUsMS42MywxLjY2aDEuNzljLTAuMDgtMS45OC0xLjQ5LTMuMTktMy40NS0zLjE5QzkuNjQsNy42MSw4LDksOCwxMi4xNCBjMCwxLjk0LDAuOTMsNC4yNCwzLjg0LDQuMjRjMi4yMiwwLDMuNDEtMS42NSwzLjQ0LTIuOTVoLTEuNzljLTAuMDMsMC41OS0wLjQ1LDEuMzgtMS42MywxLjQ0QzEwLjU1LDE0LjgzLDEwLDEzLjgxLDEwLDEyLjE0IEMxMCw5LjI1LDExLjI4LDkuMTYsMTEuODgsOS4xNHogTTEyLDJDNi40OCwyLDIsNi40OCwyLDEyczQuNDgsMTAsMTAsMTBzMTAtNC40OCwxMC0xMFMxNy41MiwyLDEyLDJ6IE0xMiwyMGMtNC40MSwwLTgtMy41OS04LTggczMuNTktOCw4LThzOCwzLjU5LDgsOFMxNi40MSwyMCwxMiwyMHoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-cut: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkuNjQgNy42NGMuMjMtLjUuMzYtMS4wNS4zNi0xLjY0IDAtMi4yMS0xLjc5LTQtNC00UzIgMy43OSAyIDZzMS43OSA0IDQgNGMuNTkgMCAxLjE0LS4xMyAxLjY0LS4zNkwxMCAxMmwtMi4zNiAyLjM2QzcuMTQgMTQuMTMgNi41OSAxNCA2IDE0Yy0yLjIxIDAtNCAxLjc5LTQgNHMxLjc5IDQgNCA0IDQtMS43OSA0LTRjMC0uNTktLjEzLTEuMTQtLjM2LTEuNjRMMTIgMTRsNyA3aDN2LTFMOS42NCA3LjY0ek02IDhjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTAgMTJjLTEuMSAwLTItLjg5LTItMnMuOS0yIDItMiAyIC44OSAyIDItLjkgMi0yIDJ6bTYtNy41Yy0uMjggMC0uNS0uMjItLjUtLjVzLjIyLS41LjUtLjUuNS4yMi41LjUtLjIyLjUtLjUuNXpNMTkgM2wtNiA2IDIgMiA3LTdWM3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-download: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE5IDloLTRWM0g5djZINWw3IDcgNy03ek01IDE4djJoMTR2LTJINXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-edit: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMgMTcuMjVWMjFoMy43NUwxNy44MSA5Ljk0bC0zLjc1LTMuNzVMMyAxNy4yNXpNMjAuNzEgNy4wNGMuMzktLjM5LjM5LTEuMDIgMC0xLjQxbC0yLjM0LTIuMzRjLS4zOS0uMzktMS4wMi0uMzktMS40MSAwbC0xLjgzIDEuODMgMy43NSAzLjc1IDEuODMtMS44M3oiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-ellipses: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPGNpcmNsZSBjeD0iNSIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIyIi8+CiAgICA8Y2lyY2xlIGN4PSIxOSIgY3k9IjEyIiByPSIyIi8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-extension: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwLjUgMTFIMTlWN2MwLTEuMS0uOS0yLTItMmgtNFYzLjVDMTMgMi4xMiAxMS44OCAxIDEwLjUgMVM4IDIuMTIgOCAzLjVWNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAydjMuOEgzLjVjMS40OSAwIDIuNyAxLjIxIDIuNyAyLjdzLTEuMjEgMi43LTIuNyAyLjdIMlYyMGMwIDEuMS45IDIgMiAyaDMuOHYtMS41YzAtMS40OSAxLjIxLTIuNyAyLjctMi43IDEuNDkgMCAyLjcgMS4yMSAyLjcgMi43VjIySDE3YzEuMSAwIDItLjkgMi0ydi00aDEuNWMxLjM4IDAgMi41LTEuMTIgMi41LTIuNVMyMS44OCAxMSAyMC41IDExeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-fast-forward: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTQgMThsOC41LTZMNCA2djEyem05LTEydjEybDguNS02TDEzIDZ6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-file-upload: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTkgMTZoNnYtNmg0bC03LTctNyA3aDR6bS00IDJoMTR2Mkg1eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-file: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuMyA4LjJsLTUuNS01LjVjLS4zLS4zLS43LS41LTEuMi0uNUgzLjljLS44LjEtMS42LjktMS42IDEuOHYxNC4xYzAgLjkuNyAxLjYgMS42IDEuNmgxNC4yYy45IDAgMS42LS43IDEuNi0xLjZWOS40Yy4xLS41LS4xLS45LS40LTEuMnptLTUuOC0zLjNsMy40IDMuNmgtMy40VjQuOXptMy45IDEyLjdINC43Yy0uMSAwLS4yIDAtLjItLjJWNC43YzAtLjIuMS0uMy4yLS4zaDcuMnY0LjRzMCAuOC4zIDEuMWMuMy4zIDEuMS4zIDEuMS4zaDQuM3Y3LjJzLS4xLjItLjIuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-filter-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEwIDE4aDR2LTJoLTR2MnpNMyA2djJoMThWNkgzem0zIDdoMTJ2LTJINnYyeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY4YzAtMS4xLS45LTItMi0yaC04bC0yLTJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-html5: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiMwMDAiIGQ9Ik0xMDguNCAwaDIzdjIyLjhoMjEuMlYwaDIzdjY5aC0yM1Y0NmgtMjF2MjNoLTIzLjJNMjA2IDIzaC0yMC4zVjBoNjMuN3YyM0gyMjl2NDZoLTIzbTUzLjUtNjloMjQuMWwxNC44IDI0LjNMMzEzLjIgMGgyNC4xdjY5aC0yM1YzNC44bC0xNi4xIDI0LjgtMTYuMS0yNC44VjY5aC0yMi42bTg5LjItNjloMjN2NDYuMmgzMi42VjY5aC01NS42Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI2U0NGQyNiIgZD0iTTEwNy42IDQ3MWwtMzMtMzcwLjRoMzYyLjhsLTMzIDM3MC4yTDI1NS43IDUxMiIvPgogIDxwYXRoIGNsYXNzPSJqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNmMTY1MjkiIGQ9Ik0yNTYgNDgwLjVWMTMxaDE0OC4zTDM3NiA0NDciLz4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNlYmViZWIiIGQ9Ik0xNDIgMTc2LjNoMTE0djQ1LjRoLTY0LjJsNC4yIDQ2LjVoNjB2NDUuM0gxNTQuNG0yIDIyLjhIMjAybDMuMiAzNi4zIDUwLjggMTMuNnY0Ny40bC05My4yLTI2Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZS1pbnZlcnNlIiBmaWxsPSIjZmZmIiBkPSJNMzY5LjYgMTc2LjNIMjU1Ljh2NDUuNGgxMDkuNm0tNC4xIDQ2LjVIMjU1Ljh2NDUuNGg1NmwtNS4zIDU5LTUwLjcgMTMuNnY0Ny4ybDkzLTI1LjgiLz4KPC9zdmc+Cg==);
  --jp-icon-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1icmFuZDQganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGZpbGw9IiNGRkYiIGQ9Ik0yLjIgMi4yaDE3LjV2MTcuNUgyLjJ6Ii8+CiAgPHBhdGggY2xhc3M9ImpwLWljb24tYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzNGNTFCNSIgZD0iTTIuMiAyLjJ2MTcuNWgxNy41bC4xLTE3LjVIMi4yem0xMi4xIDIuMmMxLjIgMCAyLjIgMSAyLjIgMi4ycy0xIDIuMi0yLjIgMi4yLTIuMi0xLTIuMi0yLjIgMS0yLjIgMi4yLTIuMnpNNC40IDE3LjZsMy4zLTguOCAzLjMgNi42IDIuMi0zLjIgNC40IDUuNEg0LjR6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-inspector: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0tNSAxNEg0di00aDExdjR6bTAtNUg0VjloMTF2NHptNSA1aC00VjloNHY5eiIvPgo8L3N2Zz4K);
  --jp-icon-json: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMSBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNGOUE4MjUiPgogICAgPHBhdGggZD0iTTIwLjIgMTEuOGMtMS42IDAtMS43LjUtMS43IDEgMCAuNC4xLjkuMSAxLjMuMS41LjEuOS4xIDEuMyAwIDEuNy0xLjQgMi4zLTMuNSAyLjNoLS45di0xLjloLjVjMS4xIDAgMS40IDAgMS40LS44IDAtLjMgMC0uNi0uMS0xIDAtLjQtLjEtLjgtLjEtMS4yIDAtMS4zIDAtMS44IDEuMy0yLTEuMy0uMi0xLjMtLjctMS4zLTIgMC0uNC4xLS44LjEtMS4yLjEtLjQuMS0uNy4xLTEgMC0uOC0uNC0uNy0xLjQtLjhoLS41VjQuMWguOWMyLjIgMCAzLjUuNyAzLjUgMi4zIDAgLjQtLjEuOS0uMSAxLjMtLjEuNS0uMS45LS4xIDEuMyAwIC41LjIgMSAxLjcgMXYxLjh6TTEuOCAxMC4xYzEuNiAwIDEuNy0uNSAxLjctMSAwLS40LS4xLS45LS4xLTEuMy0uMS0uNS0uMS0uOS0uMS0xLjMgMC0xLjYgMS40LTIuMyAzLjUtMi4zaC45djEuOWgtLjVjLTEgMC0xLjQgMC0xLjQuOCAwIC4zIDAgLjYuMSAxIDAgLjIuMS42LjEgMSAwIDEuMyAwIDEuOC0xLjMgMkM2IDExLjIgNiAxMS43IDYgMTNjMCAuNC0uMS44LS4xIDEuMi0uMS4zLS4xLjctLjEgMSAwIC44LjMuOCAxLjQuOGguNXYxLjloLS45Yy0yLjEgMC0zLjUtLjYtMy41LTIuMyAwLS40LjEtLjkuMS0xLjMuMS0uNS4xLS45LjEtMS4zIDAtLjUtLjItMS0xLjctMXYtMS45eiIvPgogICAgPGNpcmNsZSBjeD0iMTEiIGN5PSIxMy44IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY3g9IjExIiBjeT0iOC4yIiByPSIyLjEiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-julia: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDMyNSAzMDAiPgogIDxnIGNsYXNzPSJqcC1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjY2IzYzMzIj4KICAgIDxwYXRoIGQ9Ik0gMTUwLjg5ODQzOCAyMjUgQyAxNTAuODk4NDM4IDI2Ni40MjE4NzUgMTE3LjMyMDMxMiAzMDAgNzUuODk4NDM4IDMwMCBDIDM0LjQ3NjU2MiAzMDAgMC44OTg0MzggMjY2LjQyMTg3NSAwLjg5ODQzOCAyMjUgQyAwLjg5ODQzOCAxODMuNTc4MTI1IDM0LjQ3NjU2MiAxNTAgNzUuODk4NDM4IDE1MCBDIDExNy4zMjAzMTIgMTUwIDE1MC44OTg0MzggMTgzLjU3ODEyNSAxNTAuODk4NDM4IDIyNSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzM4OTgyNiI+CiAgICA8cGF0aCBkPSJNIDIzNy41IDc1IEMgMjM3LjUgMTE2LjQyMTg3NSAyMDMuOTIxODc1IDE1MCAxNjIuNSAxNTAgQyAxMjEuMDc4MTI1IDE1MCA4Ny41IDExNi40MjE4NzUgODcuNSA3NSBDIDg3LjUgMzMuNTc4MTI1IDEyMS4wNzgxMjUgMCAxNjIuNSAwIEMgMjAzLjkyMTg3NSAwIDIzNy41IDMzLjU3ODEyNSAyMzcuNSA3NSIvPgogIDwvZz4KICA8ZyBjbGFzcz0ianAtYnJhbmQwIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzk1NThiMiI+CiAgICA8cGF0aCBkPSJNIDMyNC4xMDE1NjIgMjI1IEMgMzI0LjEwMTU2MiAyNjYuNDIxODc1IDI5MC41MjM0MzggMzAwIDI0OS4xMDE1NjIgMzAwIEMgMjA3LjY3OTY4OCAzMDAgMTc0LjEwMTU2MiAyNjYuNDIxODc1IDE3NC4xMDE1NjIgMjI1IEMgMTc0LjEwMTU2MiAxODMuNTc4MTI1IDIwNy42Nzk2ODggMTUwIDI0OS4xMDE1NjIgMTUwIEMgMjkwLjUyMzQzOCAxNTAgMzI0LjEwMTU2MiAxODMuNTc4MTI1IDMyNC4xMDE1NjIgMjI1Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-jupyter-favicon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUyIiBoZWlnaHQ9IjE2NSIgdmlld0JveD0iMCAwIDE1MiAxNjUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA3ODk0NywgMTEwLjU4MjkyNykiIGQ9Ik03NS45NDIyODQyLDI5LjU4MDQ1NjEgQzQzLjMwMjM5NDcsMjkuNTgwNDU2MSAxNC43OTY3ODMyLDE3LjY1MzQ2MzQgMCwwIEM1LjUxMDgzMjExLDE1Ljg0MDY4MjkgMTUuNzgxNTM4OSwyOS41NjY3NzMyIDI5LjM5MDQ5NDcsMzkuMjc4NDE3MSBDNDIuOTk5Nyw0OC45ODk4NTM3IDU5LjI3MzcsNTQuMjA2NzgwNSA3NS45NjA1Nzg5LDU0LjIwNjc4MDUgQzkyLjY0NzQ1NzksNTQuMjA2NzgwNSAxMDguOTIxNDU4LDQ4Ljk4OTg1MzcgMTIyLjUzMDY2MywzOS4yNzg0MTcxIEMxMzYuMTM5NDUzLDI5LjU2Njc3MzIgMTQ2LjQxMDI4NCwxNS44NDA2ODI5IDE1MS45MjExNTgsMCBDMTM3LjA4Nzg2OCwxNy42NTM0NjM0IDEwOC41ODI1ODksMjkuNTgwNDU2MSA3NS45NDIyODQyLDI5LjU4MDQ1NjEgTDc1Ljk0MjI4NDIsMjkuNTgwNDU2MSBaIiAvPgogICAgPHBhdGggdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMzczNjgsIDAuNzA0ODc4KSIgZD0iTTc1Ljk3ODQ1NzksMjQuNjI2NDA3MyBDMTA4LjYxODc2MywyNC42MjY0MDczIDEzNy4xMjQ0NTgsMzYuNTUzNDQxNSAxNTEuOTIxMTU4LDU0LjIwNjc4MDUgQzE0Ni40MTAyODQsMzguMzY2MjIyIDEzNi4xMzk0NTMsMjQuNjQwMTMxNyAxMjIuNTMwNjYzLDE0LjkyODQ4NzggQzEwOC45MjE0NTgsNS4yMTY4NDM5IDkyLjY0NzQ1NzksMCA3NS45NjA1Nzg5LDAgQzU5LjI3MzcsMCA0Mi45OTk3LDUuMjE2ODQzOSAyOS4zOTA0OTQ3LDE0LjkyODQ4NzggQzE1Ljc4MTUzODksMjQuNjQwMTMxNyA1LjUxMDgzMjExLDM4LjM2NjIyMiAwLDU0LjIwNjc4MDUgQzE0LjgzMzA4MTYsMzYuNTg5OTI5MyA0My4zMzg1Njg0LDI0LjYyNjQwNzMgNzUuOTc4NDU3OSwyNC42MjY0MDczIEw3NS45Nzg0NTc5LDI0LjYyNjQwNzMgWiIgLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-jupyter: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzkiIGhlaWdodD0iNTEiIHZpZXdCb3g9IjAgMCAzOSA1MSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTYzOCAtMjI4MSkiPgogICAgPGcgY2xhc3M9ImpwLWljb24td2FybjAiIGZpbGw9IiNGMzc3MjYiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5Ljc0IDIzMTEuOTgpIiBkPSJNIDE4LjI2NDYgNy4xMzQxMUMgMTAuNDE0NSA3LjEzNDExIDMuNTU4NzIgNC4yNTc2IDAgMEMgMS4zMjUzOSAzLjgyMDQgMy43OTU1NiA3LjEzMDgxIDcuMDY4NiA5LjQ3MzAzQyAxMC4zNDE3IDExLjgxNTIgMTQuMjU1NyAxMy4wNzM0IDE4LjI2OSAxMy4wNzM0QyAyMi4yODIzIDEzLjA3MzQgMjYuMTk2MyAxMS44MTUyIDI5LjQ2OTQgOS40NzMwM0MgMzIuNzQyNCA3LjEzMDgxIDM1LjIxMjYgMy44MjA0IDM2LjUzOCAwQyAzMi45NzA1IDQuMjU3NiAyNi4xMTQ4IDcuMTM0MTEgMTguMjY0NiA3LjEzNDExWiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM5LjczIDIyODUuNDgpIiBkPSJNIDE4LjI3MzMgNS45MzkzMUMgMjYuMTIzNSA1LjkzOTMxIDMyLjk3OTMgOC44MTU4MyAzNi41MzggMTMuMDczNEMgMzUuMjEyNiA5LjI1MzAzIDMyLjc0MjQgNS45NDI2MiAyOS40Njk0IDMuNjAwNEMgMjYuMTk2MyAxLjI1ODE4IDIyLjI4MjMgMCAxOC4yNjkgMEMgMTQuMjU1NyAwIDEwLjM0MTcgMS4yNTgxOCA3LjA2ODYgMy42MDA0QyAzLjc5NTU2IDUuOTQyNjIgMS4zMjUzOSA5LjI1MzAzIDAgMTMuMDczNEMgMy41Njc0NSA4LjgyNDYzIDEwLjQyMzIgNS45MzkzMSAxOC4yNzMzIDUuOTM5MzFaIi8+CiAgICA8L2c+CiAgICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjY5LjMgMjI4MS4zMSkiIGQ9Ik0gNS44OTM1MyAyLjg0NEMgNS45MTg4OSAzLjQzMTY1IDUuNzcwODUgNC4wMTM2NyA1LjQ2ODE1IDQuNTE2NDVDIDUuMTY1NDUgNS4wMTkyMiA0LjcyMTY4IDUuNDIwMTUgNC4xOTI5OSA1LjY2ODUxQyAzLjY2NDMgNS45MTY4OCAzLjA3NDQ0IDYuMDAxNTEgMi40OTgwNSA1LjkxMTcxQyAxLjkyMTY2IDUuODIxOSAxLjM4NDYzIDUuNTYxNyAwLjk1NDg5OCA1LjE2NDAxQyAwLjUyNTE3IDQuNzY2MzMgMC4yMjIwNTYgNC4yNDkwMyAwLjA4MzkwMzcgMy42Nzc1N0MgLTAuMDU0MjQ4MyAzLjEwNjExIC0wLjAyMTIzIDIuNTA2MTcgMC4xNzg3ODEgMS45NTM2NEMgMC4zNzg3OTMgMS40MDExIDAuNzM2ODA5IDAuOTIwODE3IDEuMjA3NTQgMC41NzM1MzhDIDEuNjc4MjYgMC4yMjYyNTkgMi4yNDA1NSAwLjAyNzU5MTkgMi44MjMyNiAwLjAwMjY3MjI5QyAzLjYwMzg5IC0wLjAzMDcxMTUgNC4zNjU3MyAwLjI0OTc4OSA0Ljk0MTQyIDAuNzgyNTUxQyA1LjUxNzExIDEuMzE1MzEgNS44NTk1NiAyLjA1Njc2IDUuODkzNTMgMi44NDRaIi8+CiAgICAgIDxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MzkuOCAyMzIzLjgxKSIgZD0iTSA3LjQyNzg5IDMuNTgzMzhDIDcuNDYwMDggNC4zMjQzIDcuMjczNTUgNS4wNTgxOSA2Ljg5MTkzIDUuNjkyMTNDIDYuNTEwMzEgNi4zMjYwNyA1Ljk1MDc1IDYuODMxNTYgNS4yODQxMSA3LjE0NDZDIDQuNjE3NDcgNy40NTc2MyAzLjg3MzcxIDcuNTY0MTQgMy4xNDcwMiA3LjQ1MDYzQyAyLjQyMDMyIDcuMzM3MTIgMS43NDMzNiA3LjAwODcgMS4yMDE4NCA2LjUwNjk1QyAwLjY2MDMyOCA2LjAwNTIgMC4yNzg2MSA1LjM1MjY4IDAuMTA1MDE3IDQuNjMyMDJDIC0wLjA2ODU3NTcgMy45MTEzNSAtMC4wMjYyMzYxIDMuMTU0OTQgMC4yMjY2NzUgMi40NTg1NkMgMC40Nzk1ODcgMS43NjIxNyAwLjkzMTY5NyAxLjE1NzEzIDEuNTI1NzYgMC43MjAwMzNDIDIuMTE5ODMgMC4yODI5MzUgMi44MjkxNCAwLjAzMzQzOTUgMy41NjM4OSAwLjAwMzEzMzQ0QyA0LjU0NjY3IC0wLjAzNzQwMzMgNS41MDUyOSAwLjMxNjcwNiA2LjIyOTYxIDAuOTg3ODM1QyA2Ljk1MzkzIDEuNjU4OTYgNy4zODQ4NCAyLjU5MjM1IDcuNDI3ODkgMy41ODMzOEwgNy40Mjc4OSAzLjU4MzM4WiIvPgogICAgICA8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjM4LjM2IDIyODYuMDYpIiBkPSJNIDIuMjc0NzEgNC4zOTYyOUMgMS44NDM2MyA0LjQxNTA4IDEuNDE2NzEgNC4zMDQ0NSAxLjA0Nzk5IDQuMDc4NDNDIDAuNjc5MjY4IDMuODUyNCAwLjM4NTMyOCAzLjUyMTE0IDAuMjAzMzcxIDMuMTI2NTZDIDAuMDIxNDEzNiAyLjczMTk4IC0wLjA0MDM3OTggMi4yOTE4MyAwLjAyNTgxMTYgMS44NjE4MUMgMC4wOTIwMDMxIDEuNDMxOCAwLjI4MzIwNCAxLjAzMTI2IDAuNTc1MjEzIDAuNzEwODgzQyAwLjg2NzIyMiAwLjM5MDUxIDEuMjQ2OTEgMC4xNjQ3MDggMS42NjYyMiAwLjA2MjA1OTJDIDIuMDg1NTMgLTAuMDQwNTg5NyAyLjUyNTYxIC0wLjAxNTQ3MTQgMi45MzA3NiAwLjEzNDIzNUMgMy4zMzU5MSAwLjI4Mzk0MSAzLjY4NzkyIDAuNTUxNTA1IDMuOTQyMjIgMC45MDMwNkMgNC4xOTY1MiAxLjI1NDYyIDQuMzQxNjkgMS42NzQzNiA0LjM1OTM1IDIuMTA5MTZDIDQuMzgyOTkgMi42OTEwNyA0LjE3Njc4IDMuMjU4NjkgMy43ODU5NyAzLjY4NzQ2QyAzLjM5NTE2IDQuMTE2MjQgMi44NTE2NiA0LjM3MTE2IDIuMjc0NzEgNC4zOTYyOUwgMi4yNzQ3MSA0LjM5NjI5WiIvPgogICAgPC9nPgogIDwvZz4+Cjwvc3ZnPgo=);
  --jp-icon-jupyterlab-wordmark: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIHZpZXdCb3g9IjAgMCAxODYwLjggNDc1Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0RTRFNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ4MC4xMzY0MDEsIDY0LjI3MTQ5MykiPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDU4Ljg3NTU2NikiPgogICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjA4NzYwMywgMC4xNDAyOTQpIj4KICAgICAgICA8cGF0aCBkPSJNLTQyNi45LDE2OS44YzAsNDguNy0zLjcsNjQuNy0xMy42LDc2LjRjLTEwLjgsMTAtMjUsMTUuNS0zOS43LDE1LjVsMy43LDI5IGMyMi44LDAuMyw0NC44LTcuOSw2MS45LTIzLjFjMTcuOC0xOC41LDI0LTQ0LjEsMjQtODMuM1YwSC00Mjd2MTcwLjFMLTQyNi45LDE2OS44TC00MjYuOSwxNjkuOHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU1LjA0NTI5NiwgNTYuODM3MTA0KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuNTYyNDUzLCAxLjc5OTg0MikiPgogICAgICAgIDxwYXRoIGQ9Ik0tMzEyLDE0OGMwLDIxLDAsMzkuNSwxLjcsNTUuNGgtMzEuOGwtMi4xLTMzLjNoLTAuOGMtNi43LDExLjYtMTYuNCwyMS4zLTI4LDI3LjkgYy0xMS42LDYuNi0yNC44LDEwLTM4LjIsOS44Yy0zMS40LDAtNjktMTcuNy02OS04OVYwaDM2LjR2MTEyLjdjMCwzOC43LDExLjYsNjQuNyw0NC42LDY0LjdjMTAuMy0wLjIsMjAuNC0zLjUsMjguOS05LjQgYzguNS01LjksMTUuMS0xNC4zLDE4LjktMjMuOWMyLjItNi4xLDMuMy0xMi41LDMuMy0xOC45VjAuMmgzNi40VjE0OEgtMzEyTC0zMTIsMTQ4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzOTAuMDEzMzIyLCA1My40Nzk2MzgpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS43MDY0NTgsIDAuMjMxNDI1KSI+CiAgICAgICAgPHBhdGggZD0iTS00NzguNiw3MS40YzAtMjYtMC44LTQ3LTEuNy02Ni43aDMyLjdsMS43LDM0LjhoMC44YzcuMS0xMi41LDE3LjUtMjIuOCwzMC4xLTI5LjcgYzEyLjUtNywyNi43LTEwLjMsNDEtOS44YzQ4LjMsMCw4NC43LDQxLjcsODQuNywxMDMuM2MwLDczLjEtNDMuNywxMDkuMi05MSwxMDkuMmMtMTIuMSwwLjUtMjQuMi0yLjItMzUtNy44IGMtMTAuOC01LjYtMTkuOS0xMy45LTI2LjYtMjQuMmgtMC44VjI5MWgtMzZ2LTIyMEwtNDc4LjYsNzEuNEwtNDc4LjYsNzEuNHogTS00NDIuNiwxMjUuNmMwLjEsNS4xLDAuNiwxMC4xLDEuNywxNS4xIGMzLDEyLjMsOS45LDIzLjMsMTkuOCwzMS4xYzkuOSw3LjgsMjIuMSwxMi4xLDM0LjcsMTIuMWMzOC41LDAsNjAuNy0zMS45LDYwLjctNzguNWMwLTQwLjctMjEuMS03NS42LTU5LjUtNzUuNiBjLTEyLjksMC40LTI1LjMsNS4xLTM1LjMsMTMuNGMtOS45LDguMy0xNi45LDE5LjctMTkuNiwzMi40Yy0xLjUsNC45LTIuMywxMC0yLjUsMTUuMVYxMjUuNkwtNDQyLjYsMTI1LjZMLTQ0Mi42LDEyNS42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYuNzQwNzI2LCA1Ni44MzcxMDQpIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NTEyMjYsIDEuOTg5Mjk5KSI+CiAgICAgICAgPHBhdGggZD0iTS00NDAuOCwwbDQzLjcsMTIwLjFjNC41LDEzLjQsOS41LDI5LjQsMTIuOCw0MS43aDAuOGMzLjctMTIuMiw3LjktMjcuNywxMi44LTQyLjQgbDM5LjctMTE5LjJoMzguNUwtMzQ2LjksMTQ1Yy0yNiw2OS43LTQzLjcsMTA1LjQtNjguNiwxMjcuMmMtMTIuNSwxMS43LTI3LjksMjAtNDQuNiwyMy45bC05LjEtMzEuMSBjMTEuNy0zLjksMjIuNS0xMC4xLDMxLjgtMTguMWMxMy4yLTExLjEsMjMuNy0yNS4yLDMwLjYtNDEuMmMxLjUtMi44LDIuNS01LjcsMi45LTguOGMtMC4zLTMuMy0xLjItNi42LTIuNS05LjdMLTQ4MC4yLDAuMSBoMzkuN0wtNDQwLjgsMEwtNDQwLjgsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODIyLjc0ODEwNCwgMC4wMDAwMDApIj4KICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS40NjQwNTAsIDAuMzc4OTE0KSI+CiAgICAgICAgPHBhdGggZD0iTS00MTMuNywwdjU4LjNoNTJ2MjguMmgtNTJWMTk2YzAsMjUsNywzOS41LDI3LjMsMzkuNWM3LjEsMC4xLDE0LjItMC43LDIxLjEtMi41IGwxLjcsMjcuN2MtMTAuMywzLjctMjEuMyw1LjQtMzIuMiw1Yy03LjMsMC40LTE0LjYtMC43LTIxLjMtMy40Yy02LjgtMi43LTEyLjktNi44LTE3LjktMTIuMWMtMTAuMy0xMC45LTE0LjEtMjktMTQuMS01Mi45IFY4Ni41aC0zMVY1OC4zaDMxVjkuNkwtNDEzLjcsMEwtNDEzLjcsMHoiLz4KICAgICAgPC9nPgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTc0LjQzMzI4NiwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuOTkwMDM0LCAwLjYxMDMzOSkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDQ1LjgsMTEzYzAuOCw1MCwzMi4yLDcwLjYsNjguNiw3MC42YzE5LDAuNiwzNy45LTMsNTUuMy0xMC41bDYuMiwyNi40IGMtMjAuOSw4LjktNDMuNSwxMy4xLTY2LjIsMTIuNmMtNjEuNSwwLTk4LjMtNDEuMi05OC4zLTEwMi41Qy00ODAuMiw0OC4yLTQ0NC43LDAtMzg2LjUsMGM2NS4yLDAsODIuNyw1OC4zLDgyLjcsOTUuNyBjLTAuMSw1LjgtMC41LDExLjUtMS4yLDE3LjJoLTE0MC42SC00NDUuOEwtNDQ1LjgsMTEzeiBNLTMzOS4yLDg2LjZjMC40LTIzLjUtOS41LTYwLjEtNTAuNC02MC4xIGMtMzYuOCwwLTUyLjgsMzQuNC01NS43LDYwLjFILTMzOS4yTC0zMzkuMiw4Ni42TC0zMzkuMiw4Ni42eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjAxLjk2MTA1OCwgNTMuNDc5NjM4KSI+CiAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMTc5NjQwLCAwLjcwNTA2OCkiPgogICAgICAgIDxwYXRoIGQ9Ik0tNDc4LjYsNjhjMC0yMy45LTAuNC00NC41LTEuNy02My40aDMxLjhsMS4yLDM5LjloMS43YzkuMS0yNy4zLDMxLTQ0LjUsNTUuMy00NC41IGMzLjUtMC4xLDcsMC40LDEwLjMsMS4ydjM0LjhjLTQuMS0wLjktOC4yLTEuMy0xMi40LTEuMmMtMjUuNiwwLTQzLjcsMTkuNy00OC43LDQ3LjRjLTEsNS43LTEuNiwxMS41LTEuNywxNy4ydjEwOC4zaC0zNlY2OCBMLTQ3OC42LDY4eiIvPgogICAgICA8L2c+CiAgICA8L2c+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCIgZmlsbD0iI0YzNzcyNiI+CiAgICA8cGF0aCBkPSJNMTM1Mi4zLDMyNi4yaDM3VjI4aC0zN1YzMjYuMnogTTE2MDQuOCwzMjYuMmMtMi41LTEzLjktMy40LTMxLjEtMy40LTQ4Ljd2LTc2IGMwLTQwLjctMTUuMS04My4xLTc3LjMtODMuMWMtMjUuNiwwLTUwLDcuMS02Ni44LDE4LjFsOC40LDI0LjRjMTQuMy05LjIsMzQtMTUuMSw1My0xNS4xYzQxLjYsMCw0Ni4yLDMwLjIsNDYuMiw0N3Y0LjIgYy03OC42LTAuNC0xMjIuMywyNi41LTEyMi4zLDc1LjZjMCwyOS40LDIxLDU4LjQsNjIuMiw1OC40YzI5LDAsNTAuOS0xNC4zLDYyLjItMzAuMmgxLjNsMi45LDI1LjZIMTYwNC44eiBNMTU2NS43LDI1Ny43IGMwLDMuOC0wLjgsOC0yLjEsMTEuOGMtNS45LDE3LjItMjIuNywzNC00OS4yLDM0Yy0xOC45LDAtMzQuOS0xMS4zLTM0LjktMzUuM2MwLTM5LjUsNDUuOC00Ni42LDg2LjItNDUuOFYyNTcuN3ogTTE2OTguNSwzMjYuMiBsMS43LTMzLjZoMS4zYzE1LjEsMjYuOSwzOC43LDM4LjIsNjguMSwzOC4yYzQ1LjQsMCw5MS4yLTM2LjEsOTEuMi0xMDguOGMwLjQtNjEuNy0zNS4zLTEwMy43LTg1LjctMTAzLjcgYy0zMi44LDAtNTYuMywxNC43LTY5LjMsMzcuNGgtMC44VjI4aC0zNi42djI0NS43YzAsMTguMS0wLjgsMzguNi0xLjcsNTIuNUgxNjk4LjV6IE0xNzA0LjgsMjA4LjJjMC01LjksMS4zLTEwLjksMi4xLTE1LjEgYzcuNi0yOC4xLDMxLjEtNDUuNCw1Ni4zLTQ1LjRjMzkuNSwwLDYwLjUsMzQuOSw2MC41LDc1LjZjMCw0Ni42LTIzLjEsNzguMS02MS44LDc4LjFjLTI2LjksMC00OC4zLTE3LjYtNTUuNS00My4zIGMtMC44LTQuMi0xLjctOC44LTEuNy0xMy40VjIwOC4yeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgZmlsbD0iIzYxNjE2MSIgZD0iTTE1IDlIOXY2aDZWOXptLTIgNGgtMnYtMmgydjJ6bTgtMlY5aC0yVjdjMC0xLjEtLjktMi0yLTJoLTJWM2gtMnYyaC0yVjNIOXYySDdjLTEuMSAwLTIgLjktMiAydjJIM3YyaDJ2MkgzdjJoMnYyYzAgMS4xLjkgMiAyIDJoMnYyaDJ2LTJoMnYyaDJ2LTJoMmMxLjEgMCAyLS45IDItMnYtMmgydi0yaC0ydi0yaDJ6bS00IDZIN1Y3aDEwdjEweiIvPgo8L3N2Zz4K);
  --jp-icon-keyboard: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMjAgNUg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMTdjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY3YzAtMS4xLS45LTItMi0yem0tOSAzaDJ2MmgtMlY4em0wIDNoMnYyaC0ydi0yek04IDhoMnYySDhWOHptMCAzaDJ2Mkg4di0yem0tMSAySDV2LTJoMnYyem0wLTNINVY4aDJ2MnptOSA3SDh2LTJoOHYyem0wLTRoLTJ2LTJoMnYyem0wLTNoLTJWOGgydjJ6bTMgM2gtMnYtMmgydjJ6bTAtM2gtMlY4aDJ2MnoiLz4KPC9zdmc+Cg==);
  --jp-icon-launcher: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkgMTlINVY1aDdWM0g1YTIgMiAwIDAwLTIgMnYxNGEyIDIgMCAwMDIgMmgxNGMxLjEgMCAyLS45IDItMnYtN2gtMnY3ek0xNCAzdjJoMy41OWwtOS44MyA5LjgzIDEuNDEgMS40MUwxOSA2LjQxVjEwaDJWM2gtN3oiLz4KPC9zdmc+Cg==);
  --jp-icon-line-form: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGZpbGw9IndoaXRlIiBkPSJNNS44OCA0LjEyTDEzLjc2IDEybC03Ljg4IDcuODhMOCAyMmwxMC0xMEw4IDJ6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-link: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTMuOSAxMmMwLTEuNzEgMS4zOS0zLjEgMy4xLTMuMWg0VjdIN2MtMi43NiAwLTUgMi4yNC01IDVzMi4yNCA1IDUgNWg0di0xLjlIN2MtMS43MSAwLTMuMS0xLjM5LTMuMS0zLjF6TTggMTNoOHYtMkg4djJ6bTktNmgtNHYxLjloNGMxLjcxIDAgMy4xIDEuMzkgMy4xIDMuMXMtMS4zOSAzLjEtMy4xIDMuMWgtNFYxN2g0YzIuNzYgMCA1LTIuMjQgNS01cy0yLjI0LTUtNS01eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-list: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiM2MTYxNjEiIGQ9Ik0xOSA1djE0SDVWNWgxNG0xLjEtMkgzLjljLS41IDAtLjkuNC0uOS45djE2LjJjMCAuNC40LjkuOS45aDE2LjJjLjQgMCAuOS0uNS45LS45VjMuOWMwLS41LS41LS45LS45LS45ek0xMSA3aDZ2MmgtNlY3em0wIDRoNnYyaC02di0yem0wIDRoNnYyaC02ek03IDdoMnYySDd6bTAgNGgydjJIN3ptMCA0aDJ2Mkg3eiIvPgo8L3N2Zz4=);
  --jp-icon-listings-info: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MC45NzggNTAuOTc4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MC45NzggNTAuOTc4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+Cgk8Zz4KCQk8cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTQzLjUyLDcuNDU4QzM4LjcxMSwyLjY0OCwzMi4zMDcsMCwyNS40ODksMEMxOC42NywwLDEyLjI2NiwyLjY0OCw3LjQ1OCw3LjQ1OAoJCQljLTkuOTQzLDkuOTQxLTkuOTQzLDI2LjExOSwwLDM2LjA2MmM0LjgwOSw0LjgwOSwxMS4yMTIsNy40NTYsMTguMDMxLDcuNDU4YzAsMCwwLjAwMSwwLDAuMDAyLDAKCQkJYzYuODE2LDAsMTMuMjIxLTIuNjQ4LDE4LjAyOS03LjQ1OGM0LjgwOS00LjgwOSw3LjQ1Ny0xMS4yMTIsNy40NTctMTguMDNDNTAuOTc3LDE4LjY3LDQ4LjMyOCwxMi4yNjYsNDMuNTIsNy40NTh6CgkJCSBNNDIuMTA2LDQyLjEwNWMtNC40MzIsNC40MzEtMTAuMzMyLDYuODcyLTE2LjYxNSw2Ljg3MmgtMC4wMDJjLTYuMjg1LTAuMDAxLTEyLjE4Ny0yLjQ0MS0xNi42MTctNi44NzIKCQkJYy05LjE2Mi05LjE2My05LjE2Mi0yNC4wNzEsMC0zMy4yMzNDMTMuMzAzLDQuNDQsMTkuMjA0LDIsMjUuNDg5LDJjNi4yODQsMCwxMi4xODYsMi40NCwxNi42MTcsNi44NzIKCQkJYzQuNDMxLDQuNDMxLDYuODcxLDEwLjMzMiw2Ljg3MSwxNi42MTdDNDguOTc3LDMxLjc3Miw0Ni41MzYsMzcuNjc1LDQyLjEwNiw0Mi4xMDV6Ii8+CgkJPHBhdGggc3R5bGU9ImZpbGw6IzAxMDAwMjsiIGQ9Ik0yMy41NzgsMzIuMjE4Yy0wLjAyMy0xLjczNCwwLjE0My0zLjA1OSwwLjQ5Ni0zLjk3MmMwLjM1My0wLjkxMywxLjExLTEuOTk3LDIuMjcyLTMuMjUzCgkJCWMwLjQ2OC0wLjUzNiwwLjkyMy0xLjA2MiwxLjM2Ny0xLjU3NWMwLjYyNi0wLjc1MywxLjEwNC0xLjQ3OCwxLjQzNi0yLjE3NWMwLjMzMS0wLjcwNywwLjQ5NS0xLjU0MSwwLjQ5NS0yLjUKCQkJYzAtMS4wOTYtMC4yNi0yLjA4OC0wLjc3OS0yLjk3OWMtMC41NjUtMC44NzktMS41MDEtMS4zMzYtMi44MDYtMS4zNjljLTEuODAyLDAuMDU3LTIuOTg1LDAuNjY3LTMuNTUsMS44MzIKCQkJYy0wLjMwMSwwLjUzNS0wLjUwMywxLjE0MS0wLjYwNywxLjgxNGMtMC4xMzksMC43MDctMC4yMDcsMS40MzItMC4yMDcsMi4xNzRoLTIuOTM3Yy0wLjA5MS0yLjIwOCwwLjQwNy00LjExNCwxLjQ5My01LjcxOQoJCQljMS4wNjItMS42NCwyLjg1NS0yLjQ4MSw1LjM3OC0yLjUyN2MyLjE2LDAuMDIzLDMuODc0LDAuNjA4LDUuMTQxLDEuNzU4YzEuMjc4LDEuMTYsMS45MjksMi43NjQsMS45NSw0LjgxMQoJCQljMCwxLjE0Mi0wLjEzNywyLjExMS0wLjQxLDIuOTExYy0wLjMwOSwwLjg0NS0wLjczMSwxLjU5My0xLjI2OCwyLjI0M2MtMC40OTIsMC42NS0xLjA2OCwxLjMxOC0xLjczLDIuMDAyCgkJCWMtMC42NSwwLjY5Ny0xLjMxMywxLjQ3OS0xLjk4NywyLjM0NmMtMC4yMzksMC4zNzctMC40MjksMC43NzctMC41NjUsMS4xOTljLTAuMTYsMC45NTktMC4yMTcsMS45NTEtMC4xNzEsMi45NzkKCQkJQzI2LjU4OSwzMi4yMTgsMjMuNTc4LDMyLjIxOCwyMy41NzgsMzIuMjE4eiBNMjMuNTc4LDM4LjIydi0zLjQ4NGgzLjA3NnYzLjQ4NEgyMy41Nzh6Ii8+Cgk8L2c+Cjwvc3ZnPgo=);
  --jp-icon-markdown: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjN0IxRkEyIiBkPSJNNSAxNC45aDEybC02LjEgNnptOS40LTYuOGMwLTEuMy0uMS0yLjktLjEtNC41LS40IDEuNC0uOSAyLjktMS4zIDQuM2wtMS4zIDQuM2gtMkw4LjUgNy45Yy0uNC0xLjMtLjctMi45LTEtNC4zLS4xIDEuNi0uMSAzLjItLjIgNC42TDcgMTIuNEg0LjhsLjctMTFoMy4zTDEwIDVjLjQgMS4yLjcgMi43IDEgMy45LjMtMS4yLjctMi42IDEtMy45bDEuMi0zLjdoMy4zbC42IDExaC0yLjRsLS4zLTQuMnoiLz4KPC9zdmc+Cg==);
  --jp-icon-new-folder: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIwIDZoLThsLTItMkg0Yy0xLjExIDAtMS45OS44OS0xLjk5IDJMMiAxOGMwIDEuMTEuODkgMiAyIDJoMTZjMS4xMSAwIDItLjg5IDItMlY4YzAtMS4xMS0uODktMi0yLTJ6bS0xIDhoLTN2M2gtMnYtM2gtM3YtMmgzVjloMnYzaDN2MnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-not-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI1IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMTkgMTcuMTg0NCAyLjk2OTY4IDE0LjMwMzIgMS44NjA5NCAxMS40NDA5WiIvPgogICAgPHBhdGggY2xhc3M9ImpwLWljb24yIiBzdHJva2U9IiMzMzMzMzMiIHN0cm9rZS13aWR0aD0iMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOS4zMTU5MiA5LjMyMDMxKSIgZD0iTTcuMzY4NDIgMEwwIDcuMzY0NzkiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDkuMzE1OTIgMTYuNjgzNikgc2NhbGUoMSAtMSkiIGQ9Ik03LjM2ODQyIDBMMCA3LjM2NDc5Ii8+Cjwvc3ZnPgo=);
  --jp-icon-notebook: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi13YXJuMCBqcC1pY29uLXNlbGVjdGFibGUiIGZpbGw9IiNFRjZDMDAiPgogICAgPHBhdGggZD0iTTE4LjcgMy4zdjE1LjRIMy4zVjMuM2gxNS40bTEuNS0xLjVIMS44djE4LjNoMTguM2wuMS0xOC4zeiIvPgogICAgPHBhdGggZD0iTTE2LjUgMTYuNWwtNS40LTQuMy01LjYgNC4zdi0xMWgxMXoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-numbering: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjIiIHZpZXdCb3g9IjAgMCAyOCAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTQgMTlINlYxOS41SDVWMjAuNUg2VjIxSDRWMjJIN1YxOEg0VjE5Wk01IDEwSDZWNkg0VjdINVYxMFpNNCAxM0g1LjhMNCAxNS4xVjE2SDdWMTVINS4yTDcgMTIuOVYxMkg0VjEzWk05IDdWOUgyM1Y3SDlaTTkgMjFIMjNWMTlIOVYyMVpNOSAxNUgyM1YxM0g5VjE1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-offline-bolt: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyIDIuMDJjLTUuNTEgMC05Ljk4IDQuNDctOS45OCA5Ljk4czQuNDcgOS45OCA5Ljk4IDkuOTggOS45OC00LjQ3IDkuOTgtOS45OFMxNy41MSAyLjAyIDEyIDIuMDJ6TTExLjQ4IDIwdi02LjI2SDhMMTMgNHY2LjI2aDMuMzVMMTEuNDggMjB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-palette: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTE4IDEzVjIwSDRWNkg5LjAyQzkuMDcgNS4yOSA5LjI0IDQuNjIgOS41IDRINEMyLjkgNCAyIDQuOSAyIDZWMjBDMiAyMS4xIDIuOSAyMiA0IDIySDE4QzE5LjEgMjIgMjAgMjEuMSAyMCAyMFYxNUwxOCAxM1pNMTkuMyA4Ljg5QzE5Ljc0IDguMTkgMjAgNy4zOCAyMCA2LjVDMjAgNC4wMSAxNy45OSAyIDE1LjUgMkMxMy4wMSAyIDExIDQuMDEgMTEgNi41QzExIDguOTkgMTMuMDEgMTEgMTUuNDkgMTFDMTYuMzcgMTEgMTcuMTkgMTAuNzQgMTcuODggMTAuM0wyMSAxMy40MkwyMi40MiAxMkwxOS4zIDguODlaTTE1LjUgOUMxNC4xMiA5IDEzIDcuODggMTMgNi41QzEzIDUuMTIgMTQuMTIgNCAxNS41IDRDMTYuODggNCAxOCA1LjEyIDE4IDYuNUMxOCA3Ljg4IDE2Ljg4IDkgMTUuNSA5WiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDZIOS4wMTg5NEM5LjAwNjM5IDYuMTY1MDIgOSA2LjMzMTc2IDkgNi41QzkgOC44MTU3NyAxMC4yMTEgMTAuODQ4NyAxMi4wMzQzIDEySDlWMTRIMTZWMTIuOTgxMUMxNi41NzAzIDEyLjkzNzcgMTcuMTIgMTIuODIwNyAxNy42Mzk2IDEyLjYzOTZMMTggMTNWMjBINFY2Wk04IDhINlYxMEg4VjhaTTYgMTJIOFYxNEg2VjEyWk04IDE2SDZWMThIOFYxNlpNOSAxNkgxNlYxOEg5VjE2WiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-paste: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE5IDJoLTQuMThDMTQuNC44NCAxMy4zIDAgMTIgMGMtMS4zIDAtMi40Ljg0LTIuODIgMkg1Yy0xLjEgMC0yIC45LTIgMnYxNmMwIDEuMS45IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6bS03IDBjLjU1IDAgMSAuNDUgMSAxcy0uNDUgMS0xIDEtMS0uNDUtMS0xIC40NS0xIDEtMXptNyAxOEg1VjRoMnYzaDEwVjRoMnYxNnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-pdf: url(data:image/svg+xml;base64,PHN2ZwogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMiAyMiIgd2lkdGg9IjE2Ij4KICAgIDxwYXRoIHRyYW5zZm9ybT0icm90YXRlKDQ1KSIgY2xhc3M9ImpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iI0ZGMkEyQSIKICAgICAgIGQ9Im0gMjIuMzQ0MzY5LC0zLjAxNjM2NDIgaCA1LjYzODYwNCB2IDEuNTc5MjQzMyBoIC0zLjU0OTIyNyB2IDEuNTA4NjkyOTkgaCAzLjMzNzU3NiBWIDEuNjUwODE1NCBoIC0zLjMzNzU3NiB2IDMuNDM1MjYxMyBoIC0yLjA4OTM3NyB6IG0gLTcuMTM2NDQ0LDEuNTc5MjQzMyB2IDQuOTQzOTU0MyBoIDAuNzQ4OTIgcSAxLjI4MDc2MSwwIDEuOTUzNzAzLC0wLjYzNDk1MzUgMC42NzgzNjksLTAuNjM0OTUzNSAwLjY3ODM2OSwtMS44NDUxNjQxIDAsLTEuMjA0NzgzNTUgLTAuNjcyOTQyLC0xLjgzNDMxMDExIC0wLjY3Mjk0MiwtMC42Mjk1MjY1OSAtMS45NTkxMywtMC42Mjk1MjY1OSB6IG0gLTIuMDg5Mzc3LC0xLjU3OTI0MzMgaCAyLjIwMzM0MyBxIDEuODQ1MTY0LDAgMi43NDYwMzksMC4yNjU5MjA3IDAuOTA2MzAxLDAuMjYwNDkzNyAxLjU1MjEwOCwwLjg5MDAyMDMgMC41Njk4MywwLjU0ODEyMjMgMC44NDY2MDUsMS4yNjQ0ODAwNiAwLjI3Njc3NCwwLjcxNjM1NzgxIDAuMjc2Nzc0LDEuNjIyNjU4OTQgMCwwLjkxNzE1NTEgLTAuMjc2Nzc0LDEuNjM4OTM5OSAtMC4yNzY3NzUsMC43MTYzNTc4IC0wLjg0NjYwNSwxLjI2NDQ4IC0wLjY1MTIzNCwwLjYyOTUyNjYgLTEuNTYyOTYyLDAuODk1NDQ3MyAtMC45MTE3MjgsMC4yNjA0OTM3IC0yLjczNTE4NSwwLjI2MDQ5MzcgaCAtMi4yMDMzNDMgeiBtIC04LjE0NTg1NjUsMCBoIDMuNDY3ODIzIHEgMS41NDY2ODE2LDAgMi4zNzE1Nzg1LDAuNjg5MjIzIDAuODMwMzI0LDAuNjgzNzk2MSAwLjgzMDMyNCwxLjk1MzcwMzE0IDAsMS4yNzUzMzM5NyAtMC44MzAzMjQsMS45NjQ1NTcwNiBRIDkuOTg3MTk2MSwyLjI3NDkxNSA4LjQ0MDUxNDUsMi4yNzQ5MTUgSCA3LjA2MjA2ODQgViA1LjA4NjA3NjcgSCA0Ljk3MjY5MTUgWiBtIDIuMDg5Mzc2OSwxLjUxNDExOTkgdiAyLjI2MzAzOTQzIGggMS4xNTU5NDEgcSAwLjYwNzgxODgsMCAwLjkzODg2MjksLTAuMjkzMDU1NDcgMC4zMzEwNDQxLC0wLjI5ODQ4MjQxIDAuMzMxMDQ0MSwtMC44NDExNzc3MiAwLC0wLjU0MjY5NTMxIC0wLjMzMTA0NDEsLTAuODM1NzUwNzQgLTAuMzMxMDQ0MSwtMC4yOTMwNTU1IC0wLjkzODg2MjksLTAuMjkzMDU1NSB6IgovPgo8L3N2Zz4K);
  --jp-icon-python: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1icmFuZDAganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMEQ0N0ExIj4KICAgIDxwYXRoIGQ9Ik0xMS4xIDYuOVY1LjhINi45YzAtLjUgMC0xLjMuMi0xLjYuNC0uNy44LTEuMSAxLjctMS40IDEuNy0uMyAyLjUtLjMgMy45LS4xIDEgLjEgMS45LjkgMS45IDEuOXY0LjJjMCAuNS0uOSAxLjYtMiAxLjZIOC44Yy0xLjUgMC0yLjQgMS40LTIuNCAyLjh2Mi4ySDQuN0MzLjUgMTUuMSAzIDE0IDMgMTMuMVY5Yy0uMS0xIC42LTIgMS44LTIgMS41LS4xIDYuMy0uMSA2LjMtLjF6Ii8+CiAgICA8cGF0aCBkPSJNMTAuOSAxNS4xdjEuMWg0LjJjMCAuNSAwIDEuMy0uMiAxLjYtLjQuNy0uOCAxLjEtMS43IDEuNC0xLjcuMy0yLjUuMy0zLjkuMS0xLS4xLTEuOS0uOS0xLjktMS45di00LjJjMC0uNS45LTEuNiAyLTEuNmgzLjhjMS41IDAgMi40LTEuNCAyLjQtMi44VjYuNmgxLjdDMTguNSA2LjkgMTkgOCAxOSA4LjlWMTNjMCAxLS43IDIuMS0xLjkgMi4xaC02LjJ6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-r-kernel: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjE5NkYzIiBkPSJNNC40IDIuNWMxLjItLjEgMi45LS4zIDQuOS0uMyAyLjUgMCA0LjEuNCA1LjIgMS4zIDEgLjcgMS41IDEuOSAxLjUgMy41IDAgMi0xLjQgMy41LTIuOSA0LjEgMS4yLjQgMS43IDEuNiAyLjIgMyAuNiAxLjkgMSAzLjkgMS4zIDQuNmgtMy44Yy0uMy0uNC0uOC0xLjctMS4yLTMuN3MtMS4yLTIuNi0yLjYtMi42aC0uOXY2LjRINC40VjIuNXptMy43IDYuOWgxLjRjMS45IDAgMi45LS45IDIuOS0yLjNzLTEtMi4zLTIuOC0yLjNjLS43IDAtMS4zIDAtMS42LjJ2NC41aC4xdi0uMXoiLz4KPC9zdmc+Cg==);
  --jp-icon-react: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMTUwIDE1MCA1NDEuOSAyOTUuMyI+CiAgPGcgY2xhc3M9ImpwLWljb24tYnJhbmQyIGpwLWljb24tc2VsZWN0YWJsZSIgZmlsbD0iIzYxREFGQiI+CiAgICA8cGF0aCBkPSJNNjY2LjMgMjk2LjVjMC0zMi41LTQwLjctNjMuMy0xMDMuMS04Mi40IDE0LjQtNjMuNiA4LTExNC4yLTIwLjItMTMwLjQtNi41LTMuOC0xNC4xLTUuNi0yMi40LTUuNnYyMi4zYzQuNiAwIDguMy45IDExLjQgMi42IDEzLjYgNy44IDE5LjUgMzcuNSAxNC45IDc1LjctMS4xIDkuNC0yLjkgMTkuMy01LjEgMjkuNC0xOS42LTQuOC00MS04LjUtNjMuNS0xMC45LTEzLjUtMTguNS0yNy41LTM1LjMtNDEuNi01MCAzMi42LTMwLjMgNjMuMi00Ni45IDg0LTQ2LjlWNzhjLTI3LjUgMC02My41IDE5LjYtOTkuOSA1My42LTM2LjQtMzMuOC03Mi40LTUzLjItOTkuOS01My4ydjIyLjNjMjAuNyAwIDUxLjQgMTYuNSA4NCA0Ni42LTE0IDE0LjctMjggMzEuNC00MS4zIDQ5LjktMjIuNiAyLjQtNDQgNi4xLTYzLjYgMTEtMi4zLTEwLTQtMTkuNy01LjItMjktNC43LTM4LjIgMS4xLTY3LjkgMTQuNi03NS44IDMtMS44IDYuOS0yLjYgMTEuNS0yLjZWNzguNWMtOC40IDAtMTYgMS44LTIyLjYgNS42LTI4LjEgMTYuMi0zNC40IDY2LjctMTkuOSAxMzAuMS02Mi4yIDE5LjItMTAyLjcgNDkuOS0xMDIuNyA4Mi4zIDAgMzIuNSA0MC43IDYzLjMgMTAzLjEgODIuNC0xNC40IDYzLjYtOCAxMTQuMiAyMC4yIDEzMC40IDYuNSAzLjggMTQuMSA1LjYgMjIuNSA1LjYgMjcuNSAwIDYzLjUtMTkuNiA5OS45LTUzLjYgMzYuNCAzMy44IDcyLjQgNTMuMiA5OS45IDUzLjIgOC40IDAgMTYtMS44IDIyLjYtNS42IDI4LjEtMTYuMiAzNC40LTY2LjcgMTkuOS0xMzAuMSA2Mi0xOS4xIDEwMi41LTQ5LjkgMTAyLjUtODIuM3ptLTEzMC4yLTY2LjdjLTMuNyAxMi45LTguMyAyNi4yLTEzLjUgMzkuNS00LjEtOC04LjQtMTYtMTMuMS0yNC00LjYtOC05LjUtMTUuOC0xNC40LTIzLjQgMTQuMiAyLjEgMjcuOSA0LjcgNDEgNy45em0tNDUuOCAxMDYuNWMtNy44IDEzLjUtMTUuOCAyNi4zLTI0LjEgMzguMi0xNC45IDEuMy0zMCAyLTQ1LjIgMi0xNS4xIDAtMzAuMi0uNy00NS0xLjktOC4zLTExLjktMTYuNC0yNC42LTI0LjItMzgtNy42LTEzLjEtMTQuNS0yNi40LTIwLjgtMzkuOCA2LjItMTMuNCAxMy4yLTI2LjggMjAuNy0zOS45IDcuOC0xMy41IDE1LjgtMjYuMyAyNC4xLTM4LjIgMTQuOS0xLjMgMzAtMiA0NS4yLTIgMTUuMSAwIDMwLjIuNyA0NSAxLjkgOC4zIDExLjkgMTYuNCAyNC42IDI0LjIgMzggNy42IDEzLjEgMTQuNSAyNi40IDIwLjggMzkuOC02LjMgMTMuNC0xMy4yIDI2LjgtMjAuNyAzOS45em0zMi4zLTEzYzUuNCAxMy40IDEwIDI2LjggMTMuOCAzOS44LTEzLjEgMy4yLTI2LjkgNS45LTQxLjIgOCA0LjktNy43IDkuOC0xNS42IDE0LjQtMjMuNyA0LjYtOCA4LjktMTYuMSAxMy0yNC4xek00MjEuMiA0MzBjLTkuMy05LjYtMTguNi0yMC4zLTI3LjgtMzIgOSAuNCAxOC4yLjcgMjcuNS43IDkuNCAwIDE4LjctLjIgMjcuOC0uNy05IDExLjctMTguMyAyMi40LTI3LjUgMzJ6bS03NC40LTU4LjljLTE0LjItMi4xLTI3LjktNC43LTQxLTcuOSAzLjctMTIuOSA4LjMtMjYuMiAxMy41LTM5LjUgNC4xIDggOC40IDE2IDEzLjEgMjQgNC43IDggOS41IDE1LjggMTQuNCAyMy40ek00MjAuNyAxNjNjOS4zIDkuNiAxOC42IDIwLjMgMjcuOCAzMi05LS40LTE4LjItLjctMjcuNS0uNy05LjQgMC0xOC43LjItMjcuOC43IDktMTEuNyAxOC4zLTIyLjQgMjcuNS0zMnptLTc0IDU4LjljLTQuOSA3LjctOS44IDE1LjYtMTQuNCAyMy43LTQuNiA4LTguOSAxNi0xMyAyNC01LjQtMTMuNC0xMC0yNi44LTEzLjgtMzkuOCAxMy4xLTMuMSAyNi45LTUuOCA0MS4yLTcuOXptLTkwLjUgMTI1LjJjLTM1LjQtMTUuMS01OC4zLTM0LjktNTguMy01MC42IDAtMTUuNyAyMi45LTM1LjYgNTguMy01MC42IDguNi0zLjcgMTgtNyAyNy43LTEwLjEgNS43IDE5LjYgMTMuMiA0MCAyMi41IDYwLjktOS4yIDIwLjgtMTYuNiA0MS4xLTIyLjIgNjAuNi05LjktMy4xLTE5LjMtNi41LTI4LTEwLjJ6TTMxMCA0OTBjLTEzLjYtNy44LTE5LjUtMzcuNS0xNC45LTc1LjcgMS4xLTkuNCAyLjktMTkuMyA1LjEtMjkuNCAxOS42IDQuOCA0MSA4LjUgNjMuNSAxMC45IDEzLjUgMTguNSAyNy41IDM1LjMgNDEuNiA1MC0zMi42IDMwLjMtNjMuMiA0Ni45LTg0IDQ2LjktNC41LS4xLTguMy0xLTExLjMtMi43em0yMzcuMi03Ni4yYzQuNyAzOC4yLTEuMSA2Ny45LTE0LjYgNzUuOC0zIDEuOC02LjkgMi42LTExLjUgMi42LTIwLjcgMC01MS40LTE2LjUtODQtNDYuNiAxNC0xNC43IDI4LTMxLjQgNDEuMy00OS45IDIyLjYtMi40IDQ0LTYuMSA2My42LTExIDIuMyAxMC4xIDQuMSAxOS44IDUuMiAyOS4xem0zOC41LTY2LjdjLTguNiAzLjctMTggNy0yNy43IDEwLjEtNS43LTE5LjYtMTMuMi00MC0yMi41LTYwLjkgOS4yLTIwLjggMTYuNi00MS4xIDIyLjItNjAuNiA5LjkgMy4xIDE5LjMgNi41IDI4LjEgMTAuMiAzNS40IDE1LjEgNTguMyAzNC45IDU4LjMgNTAuNi0uMSAxNS43LTIzIDM1LjYtNTguNCA1MC42ek0zMjAuOCA3OC40eiIvPgogICAgPGNpcmNsZSBjeD0iNDIwLjkiIGN5PSIyOTYuNSIgcj0iNDUuNyIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-redo: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE2Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgICA8cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz4KICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-refresh: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDE4IDE4Ij4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTkgMTMuNWMtMi40OSAwLTQuNS0yLjAxLTQuNS00LjVTNi41MSA0LjUgOSA0LjVjMS4yNCAwIDIuMzYuNTIgMy4xNyAxLjMzTDEwIDhoNVYzbC0xLjc2IDEuNzZDMTIuMTUgMy42OCAxMC42NiAzIDkgMyA1LjY5IDMgMy4wMSA1LjY5IDMuMDEgOVM1LjY5IDE1IDkgMTVjMi45NyAwIDUuNDMtMi4xNiA1LjktNWgtMS41MmMtLjQ2IDItMi4yNCAzLjUtNC4zOCAzLjV6Ii8+CiAgICA8L2c+Cjwvc3ZnPgo=);
  --jp-icon-regex: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIwIDIwIj4KICA8ZyBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiM0MTQxNDEiPgogICAgPHJlY3QgeD0iMiIgeT0iMiIgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2Ii8+CiAgPC9nPgoKICA8ZyBjbGFzcz0ianAtaWNvbi1hY2NlbnQyIiBmaWxsPSIjRkZGIj4KICAgIDxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjUuNSIgY3k9IjE0LjUiIHI9IjEuNSIvPgogICAgPHJlY3QgeD0iMTIiIHk9IjQiIGNsYXNzPSJzdDIiIHdpZHRoPSIxIiBoZWlnaHQ9IjgiLz4KICAgIDxyZWN0IHg9IjguNSIgeT0iNy41IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjg2NiAtMC41IDAuNSAwLjg2NiAtMi4zMjU1IDcuMzIxOSkiIGNsYXNzPSJzdDIiIHdpZHRoPSI4IiBoZWlnaHQ9IjEiLz4KICAgIDxyZWN0IHg9IjEyIiB5PSI0IiB0cmFuc2Zvcm09Im1hdHJpeCgwLjUgLTAuODY2IDAuODY2IDAuNSAtMC42Nzc5IDE0LjgyNTIpIiBjbGFzcz0ic3QyIiB3aWR0aD0iMSIgaGVpZ2h0PSI4Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-run: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTggNXYxNGwxMS03eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-running: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDUxMiA1MTIiPgogIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICA8cGF0aCBkPSJNMjU2IDhDMTE5IDggOCAxMTkgOCAyNTZzMTExIDI0OCAyNDggMjQ4IDI0OC0xMTEgMjQ4LTI0OFMzOTMgOCAyNTYgOHptOTYgMzI4YzAgOC44LTcuMiAxNi0xNiAxNkgxNzZjLTguOCAwLTE2LTcuMi0xNi0xNlYxNzZjMC04LjggNy4yLTE2IDE2LTE2aDE2MGM4LjggMCAxNiA3LjIgMTYgMTZ2MTYweiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-save: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTE3IDNINWMtMS4xMSAwLTIgLjktMiAydjE0YzAgMS4xLjg5IDIgMiAyaDE0YzEuMSAwIDItLjkgMi0yVjdsLTQtNHptLTUgMTZjLTEuNjYgMC0zLTEuMzQtMy0zczEuMzQtMyAzLTMgMyAxLjM0IDMgMy0xLjM0IDMtMyAzem0zLTEwSDVWNWgxMHY0eiIvPgogICAgPC9nPgo8L3N2Zz4K);
  --jp-icon-search: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjEsMTAuOWgtMC43bC0wLjItMC4yYzAuOC0wLjksMS4zLTIuMiwxLjMtMy41YzAtMy0yLjQtNS40LTUuNC01LjRTMS44LDQuMiwxLjgsNy4xczIuNCw1LjQsNS40LDUuNCBjMS4zLDAsMi41LTAuNSwzLjUtMS4zbDAuMiwwLjJ2MC43bDQuMSw0LjFsMS4yLTEuMkwxMi4xLDEwLjl6IE03LjEsMTAuOWMtMi4xLDAtMy43LTEuNy0zLjctMy43czEuNy0zLjcsMy43LTMuN3MzLjcsMS43LDMuNywzLjcgUzkuMiwxMC45LDcuMSwxMC45eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-settings: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTkuNDMgMTIuOThjLjA0LS4zMi4wNy0uNjQuMDctLjk4cy0uMDMtLjY2LS4wNy0uOThsMi4xMS0xLjY1Yy4xOS0uMTUuMjQtLjQyLjEyLS42NGwtMi0zLjQ2Yy0uMTItLjIyLS4zOS0uMy0uNjEtLjIybC0yLjQ5IDFjLS41Mi0uNC0xLjA4LS43My0xLjY5LS45OGwtLjM4LTIuNjVBLjQ4OC40ODggMCAwMDE0IDJoLTRjLS4yNSAwLS40Ni4xOC0uNDkuNDJsLS4zOCAyLjY1Yy0uNjEuMjUtMS4xNy41OS0xLjY5Ljk4bC0yLjQ5LTFjLS4yMy0uMDktLjQ5IDAtLjYxLjIybC0yIDMuNDZjLS4xMy4yMi0uMDcuNDkuMTIuNjRsMi4xMSAxLjY1Yy0uMDQuMzItLjA3LjY1LS4wNy45OHMuMDMuNjYuMDcuOThsLTIuMTEgMS42NWMtLjE5LjE1LS4yNC40Mi0uMTIuNjRsMiAzLjQ2Yy4xMi4yMi4zOS4zLjYxLjIybDIuNDktMWMuNTIuNCAxLjA4LjczIDEuNjkuOThsLjM4IDIuNjVjLjAzLjI0LjI0LjQyLjQ5LjQyaDRjLjI1IDAgLjQ2LS4xOC40OS0uNDJsLjM4LTIuNjVjLjYxLS4yNSAxLjE3LS41OSAxLjY5LS45OGwyLjQ5IDFjLjIzLjA5LjQ5IDAgLjYxLS4yMmwyLTMuNDZjLjEyLS4yMi4wNy0uNDktLjEyLS42NGwtMi4xMS0xLjY1ek0xMiAxNS41Yy0xLjkzIDAtMy41LTEuNTctMy41LTMuNXMxLjU3LTMuNSAzLjUtMy41IDMuNSAxLjU3IDMuNSAzLjUtMS41NyAzLjUtMy41IDMuNXoiLz4KPC9zdmc+Cg==);
  --jp-icon-spreadsheet: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8cGF0aCBjbGFzcz0ianAtaWNvbi1jb250cmFzdDEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNENBRjUwIiBkPSJNMi4yIDIuMnYxNy42aDE3LjZWMi4ySDIuMnptMTUuNCA3LjdoLTUuNVY0LjRoNS41djUuNXpNOS45IDQuNHY1LjVINC40VjQuNGg1LjV6bS01LjUgNy43aDUuNXY1LjVINC40di01LjV6bTcuNyA1LjV2LTUuNWg1LjV2NS41aC01LjV6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-stop: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik02IDZoMTJ2MTJINnoiLz4KICAgIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tab: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTIxIDNIM2MtMS4xIDAtMiAuOS0yIDJ2MTRjMCAxLjEuOSAyIDIgMmgxOGMxLjEgMCAyLS45IDItMlY1YzAtMS4xLS45LTItMi0yem0wIDE2SDNWNWgxMHY0aDh2MTB6Ii8+CiAgPC9nPgo8L3N2Zz4K);
  --jp-icon-table-rows: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMSw4SDNWNGgxOFY4eiBNMjEsMTBIM3Y0aDE4VjEweiBNMjEsMTZIM3Y0aDE4VjE2eiIvPgogICAgPC9nPgo8L3N2Zz4=);
  --jp-icon-tag: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCA0MyAyOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CgkJPHBhdGggZD0iTTI4LjgzMzIgMTIuMzM0TDMyLjk5OTggMTYuNTAwN0wzNy4xNjY1IDEyLjMzNEgyOC44MzMyWiIvPgoJCTxwYXRoIGQ9Ik0xNi4yMDk1IDIxLjYxMDRDMTUuNjg3MyAyMi4xMjk5IDE0Ljg0NDMgMjIuMTI5OSAxNC4zMjQ4IDIxLjYxMDRMNi45ODI5IDE0LjcyNDVDNi41NzI0IDE0LjMzOTQgNi4wODMxMyAxMy42MDk4IDYuMDQ3ODYgMTMuMDQ4MkM1Ljk1MzQ3IDExLjUyODggNi4wMjAwMiA4LjYxOTQ0IDYuMDY2MjEgNy4wNzY5NUM2LjA4MjgxIDYuNTE0NzcgNi41NTU0OCA2LjA0MzQ3IDcuMTE4MDQgNi4wMzA1NUM5LjA4ODYzIDUuOTg0NzMgMTMuMjYzOCA1LjkzNTc5IDEzLjY1MTggNi4zMjQyNUwyMS43MzY5IDEzLjYzOUMyMi4yNTYgMTQuMTU4NSAyMS43ODUxIDE1LjQ3MjQgMjEuMjYyIDE1Ljk5NDZMMTYuMjA5NSAyMS42MTA0Wk05Ljc3NTg1IDguMjY1QzkuMzM1NTEgNy44MjU2NiA4LjYyMzUxIDcuODI1NjYgOC4xODI4IDguMjY1QzcuNzQzNDYgOC43MDU3MSA3Ljc0MzQ2IDkuNDE3MzMgOC4xODI4IDkuODU2NjdDOC42MjM4MiAxMC4yOTY0IDkuMzM1ODIgMTAuMjk2NCA5Ljc3NTg1IDkuODU2NjdDMTAuMjE1NiA5LjQxNzMzIDEwLjIxNTYgOC43MDUzMyA5Ljc3NTg1IDguMjY1WiIvPgoJPC9nPgo8L3N2Zz4K);
  --jp-icon-terminal: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiA+CiAgICA8cmVjdCBjbGFzcz0ianAtaWNvbjIganAtaWNvbi1zZWxlY3RhYmxlIiB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMikiIGZpbGw9IiMzMzMzMzMiLz4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uLWFjY2VudDIganAtaWNvbi1zZWxlY3RhYmxlLWludmVyc2UiIGQ9Ik01LjA1NjY0IDguNzYxNzJDNS4wNTY2NCA4LjU5NzY2IDUuMDMxMjUgOC40NTMxMiA0Ljk4MDQ3IDguMzI4MTJDNC45MzM1OSA4LjE5OTIyIDQuODU1NDcgOC4wODIwMyA0Ljc0NjA5IDcuOTc2NTZDNC42NDA2MiA3Ljg3MTA5IDQuNSA3Ljc3NTM5IDQuMzI0MjIgNy42ODk0NUM0LjE1MjM0IDcuNTk5NjEgMy45NDMzNiA3LjUxMTcyIDMuNjk3MjcgNy40MjU3OEMzLjMwMjczIDcuMjg1MTYgMi45NDMzNiA3LjEzNjcyIDIuNjE5MTQgNi45ODA0N0MyLjI5NDkyIDYuODI0MjIgMi4wMTc1OCA2LjY0MjU4IDEuNzg3MTEgNi40MzU1NUMxLjU2MDU1IDYuMjI4NTIgMS4zODQ3NyA1Ljk4ODI4IDEuMjU5NzcgNS43MTQ4NEMxLjEzNDc3IDUuNDM3NSAxLjA3MjI3IDUuMTA5MzggMS4wNzIyNyA0LjczMDQ3QzEuMDcyMjcgNC4zOTg0NCAxLjEyODkxIDQuMDk1NyAxLjI0MjE5IDMuODIyMjdDMS4zNTU0NyAzLjU0NDkyIDEuNTE1NjIgMy4zMDQ2OSAxLjcyMjY2IDMuMTAxNTZDMS45Mjk2OSAyLjg5ODQ0IDIuMTc5NjkgMi43MzQzNyAyLjQ3MjY2IDIuNjA5MzhDMi43NjU2MiAyLjQ4NDM4IDMuMDkxOCAyLjQwNDMgMy40NTExNyAyLjM2OTE0VjEuMTA5MzhINC4zODg2N1YyLjM4MDg2QzQuNzQwMjMgMi40Mjc3MyA1LjA1NjY0IDIuNTIzNDQgNS4zMzc4OSAyLjY2Nzk3QzUuNjE5MTQgMi44MTI1IDUuODU3NDIgMy4wMDE5NSA2LjA1MjczIDMuMjM2MzNDNi4yNTE5NSAzLjQ2NjggNi40MDQzIDMuNzQwMjMgNi41MDk3NyA0LjA1NjY0QzYuNjE5MTQgNC4zNjkxNCA2LjY3MzgzIDQuNzIwNyA2LjY3MzgzIDUuMTExMzNINS4wNDQ5MkM1LjA0NDkyIDQuNjM4NjcgNC45Mzc1IDQuMjgxMjUgNC43MjI2NiA0LjAzOTA2QzQuNTA3ODEgMy43OTI5NyA0LjIxNjggMy42Njk5MiAzLjg0OTYxIDMuNjY5OTJDMy42NTAzOSAzLjY2OTkyIDMuNDc2NTYgMy42OTcyNyAzLjMyODEyIDMuNzUxOTVDMy4xODM1OSAzLjgwMjczIDMuMDY0NDUgMy44NzY5NSAyLjk3MDcgMy45NzQ2MUMyLjg3Njk1IDQuMDY4MzYgMi44MDY2NCA0LjE3OTY5IDIuNzU5NzcgNC4zMDg1OUMyLjcxNjggNC40Mzc1IDIuNjk1MzEgNC41NzgxMiAyLjY5NTMxIDQuNzMwNDdDMi42OTUzMSA0Ljg4MjgxIDIuNzE2OCA1LjAxOTUzIDIuNzU5NzcgNS4xNDA2MkMyLjgwNjY0IDUuMjU3ODEgMi44ODI4MSA1LjM2NzE5IDIuOTg4MjggNS40Njg3NUMzLjA5NzY2IDUuNTcwMzEgMy4yNDAyMyA1LjY2Nzk3IDMuNDE2MDIgNS43NjE3MkMzLjU5MTggNS44NTE1NiAzLjgxMDU1IDUuOTQzMzYgNC4wNzIyNyA2LjAzNzExQzQuNDY2OCA2LjE4NTU1IDQuODI0MjIgNi4zMzk4NCA1LjE0NDUzIDYuNUM1LjQ2NDg0IDYuNjU2MjUgNS43MzgyOCA2LjgzOTg0IDUuOTY0ODQgNy4wNTA3OEM2LjE5NTMxIDcuMjU3ODEgNi4zNzEwOSA3LjUgNi40OTIxOSA3Ljc3NzM0QzYuNjE3MTkgOC4wNTA3OCA2LjY3OTY5IDguMzc1IDYuNjc5NjkgOC43NUM2LjY3OTY5IDkuMDkzNzUgNi42MjMwNSA5LjQwNDMgNi41MDk3NyA5LjY4MTY0QzYuMzk2NDggOS45NTUwOCA2LjIzNDM4IDEwLjE5MTQgNi4wMjM0NCAxMC4zOTA2QzUuODEyNSAxMC41ODk4IDUuNTU4NTkgMTAuNzUgNS4yNjE3MiAxMC44NzExQzQuOTY0ODQgMTAuOTg4MyA0LjYzMjgxIDExLjA2NDUgNC4yNjU2MiAxMS4wOTk2VjEyLjI0OEgzLjMzMzk4VjExLjA5OTZDMy4wMDE5NSAxMS4wNjg0IDIuNjc5NjkgMTAuOTk2MSAyLjM2NzE5IDEwLjg4MjhDMi4wNTQ2OSAxMC43NjU2IDEuNzc3MzQgMTAuNTk3NyAxLjUzNTE2IDEwLjM3ODlDMS4yOTY4OCAxMC4xNjAyIDEuMTA1NDcgOS44ODQ3NyAwLjk2MDkzOCA5LjU1MjczQzAuODE2NDA2IDkuMjE2OCAwLjc0NDE0MSA4LjgxNDQ1IDAuNzQ0MTQxIDguMzQ1N0gyLjM3ODkxQzIuMzc4OTEgOC42MjY5NSAyLjQxOTkyIDguODYzMjggMi41MDE5NSA5LjA1NDY5QzIuNTgzOTggOS4yNDIxOSAyLjY4OTQ1IDkuMzkyNTggMi44MTgzNiA5LjUwNTg2QzIuOTUxMTcgOS42MTUyMyAzLjEwMTU2IDkuNjkzMzYgMy4yNjk1MyA5Ljc0MDIzQzMuNDM3NSA5Ljc4NzExIDMuNjA5MzggOS44MTA1NSAzLjc4NTE2IDkuODEwNTVDNC4yMDMxMiA5LjgxMDU1IDQuNTE5NTMgOS43MTI4OSA0LjczNDM4IDkuNTE3NThDNC45NDkyMiA5LjMyMjI3IDUuMDU2NjQgOS4wNzAzMSA1LjA1NjY0IDguNzYxNzJaTTEzLjQxOCAxMi4yNzE1SDguMDc0MjJWMTFIMTMuNDE4VjEyLjI3MTVaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzLjk1MjY0IDYpIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K);
  --jp-icon-text-editor: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8cGF0aCBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIiBkPSJNMTUgMTVIM3YyaDEydi0yem0wLThIM3YyaDEyVjd6TTMgMTNoMTh2LTJIM3Yyem0wIDhoMTh2LTJIM3Yyek0zIDN2MmgxOFYzSDN6Ii8+Cjwvc3ZnPgo=);
  --jp-icon-toc: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGFzcz0ianAtaWNvbjMganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjNjE2MTYxIj4KICAgIDxwYXRoIGQ9Ik03LDVIMjFWN0g3VjVNNywxM1YxMUgyMVYxM0g3TTQsNC41QTEuNSwxLjUgMCAwLDEgNS41LDZBMS41LDEuNSAwIDAsMSA0LDcuNUExLjUsMS41IDAgMCwxIDIuNSw2QTEuNSwxLjUgMCAwLDEgNCw0LjVNNCwxMC41QTEuNSwxLjUgMCAwLDEgNS41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMy41QTEuNSwxLjUgMCAwLDEgMi41LDEyQTEuNSwxLjUgMCAwLDEgNCwxMC41TTcsMTlWMTdIMjFWMTlIN000LDE2LjVBMS41LDEuNSAwIDAsMSA1LjUsMThBMS41LDEuNSAwIDAsMSA0LDE5LjVBMS41LDEuNSAwIDAsMSAyLjUsMThBMS41LDEuNSAwIDAsMSA0LDE2LjVaIiAvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-tree-view: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGNsYXNzPSJqcC1pY29uMyIgZmlsbD0iIzYxNjE2MSI+CiAgICAgICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgogICAgICAgIDxwYXRoIGQ9Ik0yMiAxMVYzaC03djNIOVYzSDJ2OGg3VjhoMnYxMGg0djNoN3YtOGgtN3YzaC0yVjhoMnYzeiIvPgogICAgPC9nPgo8L3N2Zz4=);
  --jp-icon-trusted: url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDI0IDI1Ij4KICAgIDxwYXRoIGNsYXNzPSJqcC1pY29uMiIgc3Ryb2tlPSIjMzMzMzMzIiBzdHJva2Utd2lkdGg9IjIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIgMykiIGQ9Ik0xLjg2MDk0IDExLjQ0MDlDMC44MjY0NDggOC43NzAyNyAwLjg2Mzc3OSA2LjA1NzY0IDEuMjQ5MDcgNC4xOTkzMkMyLjQ4MjA2IDMuOTMzNDcgNC4wODA2OCAzLjQwMzQ3IDUuNjAxMDIgMi44NDQ5QzcuMjM1NDkgMi4yNDQ0IDguODU2NjYgMS41ODE1IDkuOTg3NiAxLjA5NTM5QzExLjA1OTcgMS41ODM0MSAxMi42MDk0IDIuMjQ0NCAxNC4yMTggMi44NDMzOUMxNS43NTAzIDMuNDEzOTQgMTcuMzk5NSAzLjk1MjU4IDE4Ljc1MzkgNC4yMTM4NUMxOS4xMzY0IDYuMDcxNzcgMTkuMTcwOSA4Ljc3NzIyIDE4LjEzOSAxMS40NDA5QzE3LjAzMDMgMTQuMzAzMiAxNC42NjY4IDE3LjE4NDQgOS45OTk5OSAxOC45MzU0QzUuMzMzMiAxNy4xODQ0IDIuOTY5NjggMTQuMzAzMiAxLjg2MDk0IDExLjQ0MDlaIi8+CiAgICA8cGF0aCBjbGFzcz0ianAtaWNvbjIiIGZpbGw9IiMzMzMzMzMiIHN0cm9rZT0iIzMzMzMzMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCA5Ljg2NzE5KSIgZD0iTTIuODYwMTUgNC44NjUzNUwwLjcyNjU0OSAyLjk5OTU5TDAgMy42MzA0NUwyLjg2MDE1IDYuMTMxNTdMOCAwLjYzMDg3Mkw3LjI3ODU3IDBMMi44NjAxNSA0Ljg2NTM1WiIvPgo8L3N2Zz4K);
  --jp-icon-undo: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZyBjbGFzcz0ianAtaWNvbjMiIGZpbGw9IiM2MTYxNjEiPgogICAgPHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-vega: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbjEganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjMjEyMTIxIj4KICAgIDxwYXRoIGQ9Ik0xMC42IDUuNGwyLjItMy4ySDIuMnY3LjNsNC02LjZ6Ii8+CiAgICA8cGF0aCBkPSJNMTUuOCAyLjJsLTQuNCA2LjZMNyA2LjNsLTQuOCA4djUuNWgxNy42VjIuMmgtNHptLTcgMTUuNEg1LjV2LTQuNGgzLjN2NC40em00LjQgMEg5LjhWOS44aDMuNHY3Ljh6bTQuNCAwaC0zLjRWNi41aDMuNHYxMS4xeiIvPgogIDwvZz4KPC9zdmc+Cg==);
  --jp-icon-yaml: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgdmlld0JveD0iMCAwIDIyIDIyIj4KICA8ZyBjbGFzcz0ianAtaWNvbi1jb250cmFzdDIganAtaWNvbi1zZWxlY3RhYmxlIiBmaWxsPSIjRDgxQjYwIj4KICAgIDxwYXRoIGQ9Ik03LjIgMTguNnYtNS40TDMgNS42aDMuM2wxLjQgMy4xYy4zLjkuNiAxLjYgMSAyLjUuMy0uOC42LTEuNiAxLTIuNWwxLjQtMy4xaDMuNGwtNC40IDcuNnY1LjVsLTIuOS0uMXoiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxNi41IiByPSIyLjEiLz4KICAgIDxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjE3LjYiIGN5PSIxMSIgcj0iMi4xIi8+CiAgPC9nPgo8L3N2Zz4K);
}

/* Icon CSS class declarations */

.jp-AddIcon {
  background-image: var(--jp-icon-add);
}
.jp-BugIcon {
  background-image: var(--jp-icon-bug);
}
.jp-BuildIcon {
  background-image: var(--jp-icon-build);
}
.jp-CaretDownEmptyIcon {
  background-image: var(--jp-icon-caret-down-empty);
}
.jp-CaretDownEmptyThinIcon {
  background-image: var(--jp-icon-caret-down-empty-thin);
}
.jp-CaretDownIcon {
  background-image: var(--jp-icon-caret-down);
}
.jp-CaretLeftIcon {
  background-image: var(--jp-icon-caret-left);
}
.jp-CaretRightIcon {
  background-image: var(--jp-icon-caret-right);
}
.jp-CaretUpEmptyThinIcon {
  background-image: var(--jp-icon-caret-up-empty-thin);
}
.jp-CaretUpIcon {
  background-image: var(--jp-icon-caret-up);
}
.jp-CaseSensitiveIcon {
  background-image: var(--jp-icon-case-sensitive);
}
.jp-CheckIcon {
  background-image: var(--jp-icon-check);
}
.jp-CircleEmptyIcon {
  background-image: var(--jp-icon-circle-empty);
}
.jp-CircleIcon {
  background-image: var(--jp-icon-circle);
}
.jp-ClearIcon {
  background-image: var(--jp-icon-clear);
}
.jp-CloseIcon {
  background-image: var(--jp-icon-close);
}
.jp-CodeIcon {
  background-image: var(--jp-icon-code);
}
.jp-ConsoleIcon {
  background-image: var(--jp-icon-console);
}
.jp-CopyIcon {
  background-image: var(--jp-icon-copy);
}
.jp-CopyrightIcon {
  background-image: var(--jp-icon-copyright);
}
.jp-CutIcon {
  background-image: var(--jp-icon-cut);
}
.jp-DownloadIcon {
  background-image: var(--jp-icon-download);
}
.jp-EditIcon {
  background-image: var(--jp-icon-edit);
}
.jp-EllipsesIcon {
  background-image: var(--jp-icon-ellipses);
}
.jp-ExtensionIcon {
  background-image: var(--jp-icon-extension);
}
.jp-FastForwardIcon {
  background-image: var(--jp-icon-fast-forward);
}
.jp-FileIcon {
  background-image: var(--jp-icon-file);
}
.jp-FileUploadIcon {
  background-image: var(--jp-icon-file-upload);
}
.jp-FilterListIcon {
  background-image: var(--jp-icon-filter-list);
}
.jp-FolderIcon {
  background-image: var(--jp-icon-folder);
}
.jp-Html5Icon {
  background-image: var(--jp-icon-html5);
}
.jp-ImageIcon {
  background-image: var(--jp-icon-image);
}
.jp-InspectorIcon {
  background-image: var(--jp-icon-inspector);
}
.jp-JsonIcon {
  background-image: var(--jp-icon-json);
}
.jp-JuliaIcon {
  background-image: var(--jp-icon-julia);
}
.jp-JupyterFaviconIcon {
  background-image: var(--jp-icon-jupyter-favicon);
}
.jp-JupyterIcon {
  background-image: var(--jp-icon-jupyter);
}
.jp-JupyterlabWordmarkIcon {
  background-image: var(--jp-icon-jupyterlab-wordmark);
}
.jp-KernelIcon {
  background-image: var(--jp-icon-kernel);
}
.jp-KeyboardIcon {
  background-image: var(--jp-icon-keyboard);
}
.jp-LauncherIcon {
  background-image: var(--jp-icon-launcher);
}
.jp-LineFormIcon {
  background-image: var(--jp-icon-line-form);
}
.jp-LinkIcon {
  background-image: var(--jp-icon-link);
}
.jp-ListIcon {
  background-image: var(--jp-icon-list);
}
.jp-ListingsInfoIcon {
  background-image: var(--jp-icon-listings-info);
}
.jp-MarkdownIcon {
  background-image: var(--jp-icon-markdown);
}
.jp-NewFolderIcon {
  background-image: var(--jp-icon-new-folder);
}
.jp-NotTrustedIcon {
  background-image: var(--jp-icon-not-trusted);
}
.jp-NotebookIcon {
  background-image: var(--jp-icon-notebook);
}
.jp-NumberingIcon {
  background-image: var(--jp-icon-numbering);
}
.jp-OfflineBoltIcon {
  background-image: var(--jp-icon-offline-bolt);
}
.jp-PaletteIcon {
  background-image: var(--jp-icon-palette);
}
.jp-PasteIcon {
  background-image: var(--jp-icon-paste);
}
.jp-PdfIcon {
  background-image: var(--jp-icon-pdf);
}
.jp-PythonIcon {
  background-image: var(--jp-icon-python);
}
.jp-RKernelIcon {
  background-image: var(--jp-icon-r-kernel);
}
.jp-ReactIcon {
  background-image: var(--jp-icon-react);
}
.jp-RedoIcon {
  background-image: var(--jp-icon-redo);
}
.jp-RefreshIcon {
  background-image: var(--jp-icon-refresh);
}
.jp-RegexIcon {
  background-image: var(--jp-icon-regex);
}
.jp-RunIcon {
  background-image: var(--jp-icon-run);
}
.jp-RunningIcon {
  background-image: var(--jp-icon-running);
}
.jp-SaveIcon {
  background-image: var(--jp-icon-save);
}
.jp-SearchIcon {
  background-image: var(--jp-icon-search);
}
.jp-SettingsIcon {
  background-image: var(--jp-icon-settings);
}
.jp-SpreadsheetIcon {
  background-image: var(--jp-icon-spreadsheet);
}
.jp-StopIcon {
  background-image: var(--jp-icon-stop);
}
.jp-TabIcon {
  background-image: var(--jp-icon-tab);
}
.jp-TableRowsIcon {
  background-image: var(--jp-icon-table-rows);
}
.jp-TagIcon {
  background-image: var(--jp-icon-tag);
}
.jp-TerminalIcon {
  background-image: var(--jp-icon-terminal);
}
.jp-TextEditorIcon {
  background-image: var(--jp-icon-text-editor);
}
.jp-TocIcon {
  background-image: var(--jp-icon-toc);
}
.jp-TreeViewIcon {
  background-image: var(--jp-icon-tree-view);
}
.jp-TrustedIcon {
  background-image: var(--jp-icon-trusted);
}
.jp-UndoIcon {
  background-image: var(--jp-icon-undo);
}
.jp-VegaIcon {
  background-image: var(--jp-icon-vega);
}
.jp-YamlIcon {
  background-image: var(--jp-icon-yaml);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * (DEPRECATED) Support for consuming icons as CSS background images
 */

.jp-Icon,
.jp-MaterialIcon {
  background-position: center;
  background-repeat: no-repeat;
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-cover {
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
}

/**
 * (DEPRECATED) Support for specific CSS icon sizes
 */

.jp-Icon-16 {
  background-size: 16px;
  min-width: 16px;
  min-height: 16px;
}

.jp-Icon-18 {
  background-size: 18px;
  min-width: 18px;
  min-height: 18px;
}

.jp-Icon-20 {
  background-size: 20px;
  min-width: 20px;
  min-height: 20px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for icons as inline SVG HTMLElements
 */

/* recolor the primary elements of an icon */
.jp-icon0[fill] {
  fill: var(--jp-inverse-layout-color0);
}
.jp-icon1[fill] {
  fill: var(--jp-inverse-layout-color1);
}
.jp-icon2[fill] {
  fill: var(--jp-inverse-layout-color2);
}
.jp-icon3[fill] {
  fill: var(--jp-inverse-layout-color3);
}
.jp-icon4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}
.jp-icon1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}
.jp-icon2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}
.jp-icon3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}
.jp-icon4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}
/* recolor the accent elements of an icon */
.jp-icon-accent0[fill] {
  fill: var(--jp-layout-color0);
}
.jp-icon-accent1[fill] {
  fill: var(--jp-layout-color1);
}
.jp-icon-accent2[fill] {
  fill: var(--jp-layout-color2);
}
.jp-icon-accent3[fill] {
  fill: var(--jp-layout-color3);
}
.jp-icon-accent4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-accent0[stroke] {
  stroke: var(--jp-layout-color0);
}
.jp-icon-accent1[stroke] {
  stroke: var(--jp-layout-color1);
}
.jp-icon-accent2[stroke] {
  stroke: var(--jp-layout-color2);
}
.jp-icon-accent3[stroke] {
  stroke: var(--jp-layout-color3);
}
.jp-icon-accent4[stroke] {
  stroke: var(--jp-layout-color4);
}
/* set the color of an icon to transparent */
.jp-icon-none[fill] {
  fill: none;
}

.jp-icon-none[stroke] {
  stroke: none;
}
/* brand icon colors. Same for light and dark */
.jp-icon-brand0[fill] {
  fill: var(--jp-brand-color0);
}
.jp-icon-brand1[fill] {
  fill: var(--jp-brand-color1);
}
.jp-icon-brand2[fill] {
  fill: var(--jp-brand-color2);
}
.jp-icon-brand3[fill] {
  fill: var(--jp-brand-color3);
}
.jp-icon-brand4[fill] {
  fill: var(--jp-brand-color4);
}

.jp-icon-brand0[stroke] {
  stroke: var(--jp-brand-color0);
}
.jp-icon-brand1[stroke] {
  stroke: var(--jp-brand-color1);
}
.jp-icon-brand2[stroke] {
  stroke: var(--jp-brand-color2);
}
.jp-icon-brand3[stroke] {
  stroke: var(--jp-brand-color3);
}
.jp-icon-brand4[stroke] {
  stroke: var(--jp-brand-color4);
}
/* warn icon colors. Same for light and dark */
.jp-icon-warn0[fill] {
  fill: var(--jp-warn-color0);
}
.jp-icon-warn1[fill] {
  fill: var(--jp-warn-color1);
}
.jp-icon-warn2[fill] {
  fill: var(--jp-warn-color2);
}
.jp-icon-warn3[fill] {
  fill: var(--jp-warn-color3);
}

.jp-icon-warn0[stroke] {
  stroke: var(--jp-warn-color0);
}
.jp-icon-warn1[stroke] {
  stroke: var(--jp-warn-color1);
}
.jp-icon-warn2[stroke] {
  stroke: var(--jp-warn-color2);
}
.jp-icon-warn3[stroke] {
  stroke: var(--jp-warn-color3);
}
/* icon colors that contrast well with each other and most backgrounds */
.jp-icon-contrast0[fill] {
  fill: var(--jp-icon-contrast-color0);
}
.jp-icon-contrast1[fill] {
  fill: var(--jp-icon-contrast-color1);
}
.jp-icon-contrast2[fill] {
  fill: var(--jp-icon-contrast-color2);
}
.jp-icon-contrast3[fill] {
  fill: var(--jp-icon-contrast-color3);
}

.jp-icon-contrast0[stroke] {
  stroke: var(--jp-icon-contrast-color0);
}
.jp-icon-contrast1[stroke] {
  stroke: var(--jp-icon-contrast-color1);
}
.jp-icon-contrast2[stroke] {
  stroke: var(--jp-icon-contrast-color2);
}
.jp-icon-contrast3[stroke] {
  stroke: var(--jp-icon-contrast-color3);
}

/* CSS for icons in selected items in the settings editor */
#setting-editor .jp-PluginList .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}
#setting-editor
  .jp-PluginList
  .jp-mod-selected
  .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* CSS for icons in selected filebrowser listing items */
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}
.jp-DirListing-item.jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}

/* CSS for icons in selected tabs in the sidebar tab manager */
#tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-selectable[fill] {
  fill: #fff;
}

#tab-manager .lm-TabBar-tab.jp-mod-active .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}
#tab-manager
  .lm-TabBar-tab.jp-mod-active
  .jp-icon-hover
  :hover
  .jp-icon-selectable[fill] {
  fill: var(--jp-brand-color1);
}

#tab-manager
  .lm-TabBar-tab.jp-mod-active
  .jp-icon-hover
  :hover
  .jp-icon-selectable-inverse[fill] {
  fill: #fff;
}

/**
 * TODO: come up with non css-hack solution for showing the busy icon on top
 *  of the close icon
 * CSS for complex behavior of close icon of tabs in the sidebar tab manager
 */
#tab-manager
  .lm-TabBar-tab.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}
#tab-manager
  .lm-TabBar-tab.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

#tab-manager
  .lm-TabBar-tab.jp-mod-dirty.jp-mod-active
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: #fff;
}

/**
* TODO: come up with non css-hack solution for showing the busy icon on top
*  of the close icon
* CSS for complex behavior of close icon of tabs in the main area tabbar
*/
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon3[fill] {
  fill: none;
}
.lm-DockPanel-tabBar
  .lm-TabBar-tab.lm-mod-closable.jp-mod-dirty
  > .lm-TabBar-tabCloseIcon
  > :not(:hover)
  > .jp-icon-busy[fill] {
  fill: var(--jp-inverse-layout-color3);
}

/* CSS for icons in status bar */
#jp-main-statusbar .jp-mod-selected .jp-icon-selectable[fill] {
  fill: #fff;
}

#jp-main-statusbar .jp-mod-selected .jp-icon-selectable-inverse[fill] {
  fill: var(--jp-brand-color1);
}
/* special handling for splash icon CSS. While the theme CSS reloads during
   splash, the splash icon can loose theming. To prevent that, we set a
   default for its color variable */
:root {
  --jp-warn-color0: var(--md-orange-700);
}

/* not sure what to do with this one, used in filebrowser listing */
.jp-DragIcon {
  margin-right: 4px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/**
 * Support for alt colors for icons as inline SVG HTMLElements
 */

/* alt recolor the primary elements of an icon */
.jp-icon-alt .jp-icon0[fill] {
  fill: var(--jp-layout-color0);
}
.jp-icon-alt .jp-icon1[fill] {
  fill: var(--jp-layout-color1);
}
.jp-icon-alt .jp-icon2[fill] {
  fill: var(--jp-layout-color2);
}
.jp-icon-alt .jp-icon3[fill] {
  fill: var(--jp-layout-color3);
}
.jp-icon-alt .jp-icon4[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-alt .jp-icon0[stroke] {
  stroke: var(--jp-layout-color0);
}
.jp-icon-alt .jp-icon1[stroke] {
  stroke: var(--jp-layout-color1);
}
.jp-icon-alt .jp-icon2[stroke] {
  stroke: var(--jp-layout-color2);
}
.jp-icon-alt .jp-icon3[stroke] {
  stroke: var(--jp-layout-color3);
}
.jp-icon-alt .jp-icon4[stroke] {
  stroke: var(--jp-layout-color4);
}

/* alt recolor the accent elements of an icon */
.jp-icon-alt .jp-icon-accent0[fill] {
  fill: var(--jp-inverse-layout-color0);
}
.jp-icon-alt .jp-icon-accent1[fill] {
  fill: var(--jp-inverse-layout-color1);
}
.jp-icon-alt .jp-icon-accent2[fill] {
  fill: var(--jp-inverse-layout-color2);
}
.jp-icon-alt .jp-icon-accent3[fill] {
  fill: var(--jp-inverse-layout-color3);
}
.jp-icon-alt .jp-icon-accent4[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-alt .jp-icon-accent0[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}
.jp-icon-alt .jp-icon-accent1[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}
.jp-icon-alt .jp-icon-accent2[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}
.jp-icon-alt .jp-icon-accent3[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}
.jp-icon-alt .jp-icon-accent4[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-icon-hoverShow:not(:hover) svg {
  display: none !important;
}

/**
 * Support for hover colors for icons as inline SVG HTMLElements
 */

/**
 * regular colors
 */

/* recolor the primary elements of an icon */
.jp-icon-hover :hover .jp-icon0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}
.jp-icon-hover :hover .jp-icon1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}
.jp-icon-hover :hover .jp-icon2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}
.jp-icon-hover :hover .jp-icon3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}
.jp-icon-hover :hover .jp-icon4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}
.jp-icon-hover :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}
.jp-icon-hover :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}
.jp-icon-hover :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}
.jp-icon-hover :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/* recolor the accent elements of an icon */
.jp-icon-hover :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-layout-color0);
}
.jp-icon-hover :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-layout-color1);
}
.jp-icon-hover :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-layout-color2);
}
.jp-icon-hover :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-layout-color3);
}
.jp-icon-hover :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}
.jp-icon-hover :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}
.jp-icon-hover :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}
.jp-icon-hover :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}
.jp-icon-hover :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* set the color of an icon to transparent */
.jp-icon-hover :hover .jp-icon-none-hover[fill] {
  fill: none;
}

.jp-icon-hover :hover .jp-icon-none-hover[stroke] {
  stroke: none;
}

/**
 * inverse colors
 */

/* inverse recolor the primary elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[fill] {
  fill: var(--jp-layout-color0);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[fill] {
  fill: var(--jp-layout-color1);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[fill] {
  fill: var(--jp-layout-color2);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[fill] {
  fill: var(--jp-layout-color3);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[fill] {
  fill: var(--jp-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon0-hover[stroke] {
  stroke: var(--jp-layout-color0);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon1-hover[stroke] {
  stroke: var(--jp-layout-color1);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon2-hover[stroke] {
  stroke: var(--jp-layout-color2);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon3-hover[stroke] {
  stroke: var(--jp-layout-color3);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon4-hover[stroke] {
  stroke: var(--jp-layout-color4);
}

/* inverse recolor the accent elements of an icon */
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[fill] {
  fill: var(--jp-inverse-layout-color0);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[fill] {
  fill: var(--jp-inverse-layout-color1);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[fill] {
  fill: var(--jp-inverse-layout-color2);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[fill] {
  fill: var(--jp-inverse-layout-color3);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[fill] {
  fill: var(--jp-inverse-layout-color4);
}

.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent0-hover[stroke] {
  stroke: var(--jp-inverse-layout-color0);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent1-hover[stroke] {
  stroke: var(--jp-inverse-layout-color1);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent2-hover[stroke] {
  stroke: var(--jp-inverse-layout-color2);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent3-hover[stroke] {
  stroke: var(--jp-inverse-layout-color3);
}
.jp-icon-hover.jp-icon-alt :hover .jp-icon-accent4-hover[stroke] {
  stroke: var(--jp-inverse-layout-color4);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-switch {
  display: flex;
  align-items: center;
  padding-left: 4px;
  padding-right: 4px;
  font-size: var(--jp-ui-font-size1);
  background-color: transparent;
  color: var(--jp-ui-font-color1);
  border: none;
  height: 20px;
}

.jp-switch:hover {
  background-color: var(--jp-layout-color2);
}

.jp-switch-label {
  margin-right: 5px;
}

.jp-switch-track {
  cursor: pointer;
  background-color: var(--jp-border-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 34px;
  height: 16px;
  width: 35px;
  position: relative;
}

.jp-switch-track::before {
  content: '';
  position: absolute;
  height: 10px;
  width: 10px;
  margin: 3px;
  left: 0px;
  background-color: var(--jp-ui-inverse-font-color1);
  -webkit-transition: 0.4s;
  transition: 0.4s;
  border-radius: 50%;
}

.jp-switch[aria-checked='true'] .jp-switch-track {
  background-color: var(--jp-warn-color0);
}

.jp-switch[aria-checked='true'] .jp-switch-track::before {
  /* track width (35) - margins (3 + 3) - thumb width (10) */
  left: 19px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/* Sibling imports */

/* Override Blueprint's _reset.scss styles */
html {
  box-sizing: unset;
}

*,
*::before,
*::after {
  box-sizing: unset;
}

body {
  color: unset;
  font-family: var(--jp-ui-font-family);
}

p {
  margin-top: unset;
  margin-bottom: unset;
}

small {
  font-size: unset;
}

strong {
  font-weight: unset;
}

/* Override Blueprint's _typography.scss styles */
a {
  text-decoration: unset;
  color: unset;
}
a:hover {
  text-decoration: unset;
  color: unset;
}

/* Override Blueprint's _accessibility.scss styles */
:focus {
  outline: unset;
  outline-offset: unset;
  -moz-outline-radius: unset;
}

/* Styles for ui-components */
.jp-Button {
  border-radius: var(--jp-border-radius);
  padding: 0px 12px;
  font-size: var(--jp-ui-font-size1);
}

/* Use our own theme for hover styles */
button.jp-Button.bp3-button.bp3-minimal:hover {
  background-color: var(--jp-layout-color2);
}
.jp-Button.minimal {
  color: unset !important;
}

.jp-Button.jp-ToolbarButtonComponent {
  text-transform: none;
}

.jp-InputGroup input {
  box-sizing: border-box;
  border-radius: 0;
  background-color: transparent;
  color: var(--jp-ui-font-color0);
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.jp-InputGroup input:focus {
  box-shadow: inset 0 0 0 var(--jp-border-width)
      var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-InputGroup input::placeholder,
input::placeholder {
  color: var(--jp-ui-font-color3);
}

.jp-BPIcon {
  display: inline-block;
  vertical-align: middle;
  margin: auto;
}

/* Stop blueprint futzing with our icon fills */
.bp3-icon.jp-BPIcon > svg:not([fill]) {
  fill: var(--jp-inverse-layout-color3);
}

.jp-InputGroupAction {
  padding: 6px;
}

.jp-HTMLSelect.jp-DefaultStyle select {
  background-color: initial;
  border: none;
  border-radius: 0;
  box-shadow: none;
  color: var(--jp-ui-font-color0);
  display: block;
  font-size: var(--jp-ui-font-size1);
  height: 24px;
  line-height: 14px;
  padding: 0 25px 0 10px;
  text-align: left;
  -moz-appearance: none;
  -webkit-appearance: none;
}

/* Use our own theme for hover and option styles */
.jp-HTMLSelect.jp-DefaultStyle select:hover,
.jp-HTMLSelect.jp-DefaultStyle select > option {
  background-color: var(--jp-layout-color2);
  color: var(--jp-ui-font-color0);
}
select {
  box-sizing: border-box;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapse {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-top: 1px solid var(--jp-border-color2);
  border-bottom: 1px solid var(--jp-border-color2);
}

.jp-Collapse-header {
  padding: 1px 12px;
  color: var(--jp-ui-font-color1);
  background-color: var(--jp-layout-color1);
  font-size: var(--jp-ui-font-size2);
}

.jp-Collapse-header:hover {
  background-color: var(--jp-layout-color2);
}

.jp-Collapse-contents {
  padding: 0px 12px 0px 12px;
  background-color: var(--jp-layout-color1);
  color: var(--jp-ui-font-color1);
  overflow: auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-commandpalette-search-height: 28px;
}

/*-----------------------------------------------------------------------------
| Overall styles
|----------------------------------------------------------------------------*/

.lm-CommandPalette {
  padding-bottom: 0px;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Modal variant
|----------------------------------------------------------------------------*/

.jp-ModalCommandPalette {
  position: absolute;
  z-index: 10000;
  top: 38px;
  left: 30%;
  margin: 0;
  padding: 4px;
  width: 40%;
  box-shadow: var(--jp-elevation-z4);
  border-radius: 4px;
  background: var(--jp-layout-color0);
}

.jp-ModalCommandPalette .lm-CommandPalette {
  max-height: 40vh;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-close-icon::after {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-header {
  display: none;
}

.jp-ModalCommandPalette .lm-CommandPalette .lm-CommandPalette-item {
  margin-left: 4px;
  margin-right: 4px;
}

.jp-ModalCommandPalette
  .lm-CommandPalette
  .lm-CommandPalette-item.lm-mod-disabled {
  display: none;
}

/*-----------------------------------------------------------------------------
| Search
|----------------------------------------------------------------------------*/

.lm-CommandPalette-search {
  padding: 4px;
  background-color: var(--jp-layout-color1);
  z-index: 2;
}

.lm-CommandPalette-wrapper {
  overflow: overlay;
  padding: 0px 9px;
  background-color: var(--jp-input-active-background);
  height: 30px;
  box-shadow: inset 0 0 0 var(--jp-border-width) var(--jp-input-border-color);
}

.lm-CommandPalette.lm-mod-focused .lm-CommandPalette-wrapper {
  box-shadow: inset 0 0 0 1px var(--jp-input-active-box-shadow-color),
    inset 0 0 0 3px var(--jp-input-active-box-shadow-color);
}

.jp-SearchIconGroup {
  color: white;
  background-color: var(--jp-brand-color1);
  position: absolute;
  top: 4px;
  right: 4px;
  padding: 5px 5px 1px 5px;
}

.jp-SearchIconGroup svg {
  height: 20px;
  width: 20px;
}

.jp-SearchIconGroup .jp-icon3[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-input {
  background: transparent;
  width: calc(100% - 18px);
  float: left;
  border: none;
  outline: none;
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  line-height: var(--jp-private-commandpalette-search-height);
}

.lm-CommandPalette-input::-webkit-input-placeholder,
.lm-CommandPalette-input::-moz-placeholder,
.lm-CommandPalette-input:-ms-input-placeholder {
  color: var(--jp-ui-font-color2);
  font-size: var(--jp-ui-font-size1);
}

/*-----------------------------------------------------------------------------
| Results
|----------------------------------------------------------------------------*/

.lm-CommandPalette-header:first-child {
  margin-top: 0px;
}

.lm-CommandPalette-header {
  border-bottom: solid var(--jp-border-width) var(--jp-border-color2);
  color: var(--jp-ui-font-color1);
  cursor: pointer;
  display: flex;
  font-size: var(--jp-ui-font-size0);
  font-weight: 600;
  letter-spacing: 1px;
  margin-top: 8px;
  padding: 8px 0 8px 12px;
  text-transform: uppercase;
}

.lm-CommandPalette-header.lm-mod-active {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-header > mark {
  background-color: transparent;
  font-weight: bold;
  color: var(--jp-ui-font-color1);
}

.lm-CommandPalette-item {
  padding: 4px 12px 4px 4px;
  color: var(--jp-ui-font-color1);
  font-size: var(--jp-ui-font-size1);
  font-weight: 400;
  display: flex;
}

.lm-CommandPalette-item.lm-mod-disabled {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item.lm-mod-active {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active .jp-icon-selectable[fill] {
  fill: var(--jp-layout-color0);
}

.lm-CommandPalette-item.lm-mod-active .lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-inverse-font-color0);
}

.lm-CommandPalette-item.lm-mod-active:hover:not(.lm-mod-disabled) {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.lm-CommandPalette-item:hover:not(.lm-mod-active):not(.lm-mod-disabled) {
  background: var(--jp-layout-color2);
}

.lm-CommandPalette-itemContent {
  overflow: hidden;
}

.lm-CommandPalette-itemLabel > mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.lm-CommandPalette-item.lm-mod-disabled mark {
  color: var(--jp-ui-font-color2);
}

.lm-CommandPalette-item .lm-CommandPalette-itemIcon {
  margin: 0 4px 0 0;
  position: relative;
  width: 16px;
  top: 2px;
  flex: 0 0 auto;
}

.lm-CommandPalette-item.lm-mod-disabled .lm-CommandPalette-itemIcon {
  opacity: 0.6;
}

.lm-CommandPalette-item .lm-CommandPalette-itemShortcut {
  flex: 0 0 auto;
}

.lm-CommandPalette-itemCaption {
  display: none;
}

.lm-CommandPalette-content {
  background-color: var(--jp-layout-color1);
}

.lm-CommandPalette-content:empty:after {
  content: 'No results';
  margin: auto;
  margin-top: 20px;
  width: 100px;
  display: block;
  font-size: var(--jp-ui-font-size2);
  font-family: var(--jp-ui-font-family);
  font-weight: lighter;
}

.lm-CommandPalette-emptyMessage {
  text-align: center;
  margin-top: 24px;
  line-height: 1.32;
  padding: 0px 8px;
  color: var(--jp-content-font-color3);
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Dialog {
  position: absolute;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: 0px;
  left: 0px;
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-dialog-background);
}

.jp-Dialog-content {
  display: flex;
  flex-direction: column;
  margin-left: auto;
  margin-right: auto;
  background: var(--jp-layout-color1);
  padding: 24px;
  padding-bottom: 12px;
  min-width: 300px;
  min-height: 150px;
  max-width: 1000px;
  max-height: 500px;
  box-sizing: border-box;
  box-shadow: var(--jp-elevation-z20);
  word-wrap: break-word;
  border-radius: var(--jp-border-radius);
  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color1);
  resize: both;
}

.jp-Dialog-button {
  overflow: visible;
}

button.jp-Dialog-button:focus {
  outline: 1px solid var(--jp-brand-color1);
  outline-offset: 4px;
  -moz-outline-radius: 0px;
}

button.jp-Dialog-button:focus::-moz-focus-inner {
  border: 0;
}

button.jp-Dialog-close-button {
  padding: 0;
  height: 100%;
  min-width: unset;
  min-height: unset;
}

.jp-Dialog-header {
  display: flex;
  justify-content: space-between;
  flex: 0 0 auto;
  padding-bottom: 12px;
  font-size: var(--jp-ui-font-size3);
  font-weight: 400;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-body {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  font-size: var(--jp-ui-font-size1);
  background: var(--jp-layout-color1);
  overflow: auto;
}

.jp-Dialog-footer {
  display: flex;
  flex-direction: row;
  justify-content: flex-end;
  flex: 0 0 auto;
  margin-left: -12px;
  margin-right: -12px;
  padding: 12px;
}

.jp-Dialog-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

.jp-Dialog-body > .jp-select-wrapper {
  width: 100%;
}

.jp-Dialog-body > button {
  padding: 0px 16px;
}

.jp-Dialog-body > label {
  line-height: 1.4;
  color: var(--jp-ui-font-color0);
}

.jp-Dialog-button.jp-mod-styled:not(:last-child) {
  margin-right: 12px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-HoverBox {
  position: fixed;
}

.jp-HoverBox.jp-mod-outofview {
  display: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-IFrame {
  width: 100%;
  height: 100%;
}

.jp-IFrame > iframe {
  border: none;
}

/*
When drag events occur, `p-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-IFrame {
  position: relative;
}

body.lm-mod-override-cursor .jp-IFrame:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

.jp-Input-Boolean-Dialog {
  flex-direction: row-reverse;
  align-items: end;
  width: 100%;
}

.jp-Input-Boolean-Dialog > label {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MainAreaWidget > :focus {
  outline: none;
}

/**
 * google-material-color v1.2.6
 * https://github.com/danlevan/google-material-color
 */
:root {
  --md-red-50: #ffebee;
  --md-red-100: #ffcdd2;
  --md-red-200: #ef9a9a;
  --md-red-300: #e57373;
  --md-red-400: #ef5350;
  --md-red-500: #f44336;
  --md-red-600: #e53935;
  --md-red-700: #d32f2f;
  --md-red-800: #c62828;
  --md-red-900: #b71c1c;
  --md-red-A100: #ff8a80;
  --md-red-A200: #ff5252;
  --md-red-A400: #ff1744;
  --md-red-A700: #d50000;

  --md-pink-50: #fce4ec;
  --md-pink-100: #f8bbd0;
  --md-pink-200: #f48fb1;
  --md-pink-300: #f06292;
  --md-pink-400: #ec407a;
  --md-pink-500: #e91e63;
  --md-pink-600: #d81b60;
  --md-pink-700: #c2185b;
  --md-pink-800: #ad1457;
  --md-pink-900: #880e4f;
  --md-pink-A100: #ff80ab;
  --md-pink-A200: #ff4081;
  --md-pink-A400: #f50057;
  --md-pink-A700: #c51162;

  --md-purple-50: #f3e5f5;
  --md-purple-100: #e1bee7;
  --md-purple-200: #ce93d8;
  --md-purple-300: #ba68c8;
  --md-purple-400: #ab47bc;
  --md-purple-500: #9c27b0;
  --md-purple-600: #8e24aa;
  --md-purple-700: #7b1fa2;
  --md-purple-800: #6a1b9a;
  --md-purple-900: #4a148c;
  --md-purple-A100: #ea80fc;
  --md-purple-A200: #e040fb;
  --md-purple-A400: #d500f9;
  --md-purple-A700: #aa00ff;

  --md-deep-purple-50: #ede7f6;
  --md-deep-purple-100: #d1c4e9;
  --md-deep-purple-200: #b39ddb;
  --md-deep-purple-300: #9575cd;
  --md-deep-purple-400: #7e57c2;
  --md-deep-purple-500: #673ab7;
  --md-deep-purple-600: #5e35b1;
  --md-deep-purple-700: #512da8;
  --md-deep-purple-800: #4527a0;
  --md-deep-purple-900: #311b92;
  --md-deep-purple-A100: #b388ff;
  --md-deep-purple-A200: #7c4dff;
  --md-deep-purple-A400: #651fff;
  --md-deep-purple-A700: #6200ea;

  --md-indigo-50: #e8eaf6;
  --md-indigo-100: #c5cae9;
  --md-indigo-200: #9fa8da;
  --md-indigo-300: #7986cb;
  --md-indigo-400: #5c6bc0;
  --md-indigo-500: #3f51b5;
  --md-indigo-600: #3949ab;
  --md-indigo-700: #303f9f;
  --md-indigo-800: #283593;
  --md-indigo-900: #1a237e;
  --md-indigo-A100: #8c9eff;
  --md-indigo-A200: #536dfe;
  --md-indigo-A400: #3d5afe;
  --md-indigo-A700: #304ffe;

  --md-blue-50: #e3f2fd;
  --md-blue-100: #bbdefb;
  --md-blue-200: #90caf9;
  --md-blue-300: #64b5f6;
  --md-blue-400: #42a5f5;
  --md-blue-500: #2196f3;
  --md-blue-600: #1e88e5;
  --md-blue-700: #1976d2;
  --md-blue-800: #1565c0;
  --md-blue-900: #0d47a1;
  --md-blue-A100: #82b1ff;
  --md-blue-A200: #448aff;
  --md-blue-A400: #2979ff;
  --md-blue-A700: #2962ff;

  --md-light-blue-50: #e1f5fe;
  --md-light-blue-100: #b3e5fc;
  --md-light-blue-200: #81d4fa;
  --md-light-blue-300: #4fc3f7;
  --md-light-blue-400: #29b6f6;
  --md-light-blue-500: #03a9f4;
  --md-light-blue-600: #039be5;
  --md-light-blue-700: #0288d1;
  --md-light-blue-800: #0277bd;
  --md-light-blue-900: #01579b;
  --md-light-blue-A100: #80d8ff;
  --md-light-blue-A200: #40c4ff;
  --md-light-blue-A400: #00b0ff;
  --md-light-blue-A700: #0091ea;

  --md-cyan-50: #e0f7fa;
  --md-cyan-100: #b2ebf2;
  --md-cyan-200: #80deea;
  --md-cyan-300: #4dd0e1;
  --md-cyan-400: #26c6da;
  --md-cyan-500: #00bcd4;
  --md-cyan-600: #00acc1;
  --md-cyan-700: #0097a7;
  --md-cyan-800: #00838f;
  --md-cyan-900: #006064;
  --md-cyan-A100: #84ffff;
  --md-cyan-A200: #18ffff;
  --md-cyan-A400: #00e5ff;
  --md-cyan-A700: #00b8d4;

  --md-teal-50: #e0f2f1;
  --md-teal-100: #b2dfdb;
  --md-teal-200: #80cbc4;
  --md-teal-300: #4db6ac;
  --md-teal-400: #26a69a;
  --md-teal-500: #009688;
  --md-teal-600: #00897b;
  --md-teal-700: #00796b;
  --md-teal-800: #00695c;
  --md-teal-900: #004d40;
  --md-teal-A100: #a7ffeb;
  --md-teal-A200: #64ffda;
  --md-teal-A400: #1de9b6;
  --md-teal-A700: #00bfa5;

  --md-green-50: #e8f5e9;
  --md-green-100: #c8e6c9;
  --md-green-200: #a5d6a7;
  --md-green-300: #81c784;
  --md-green-400: #66bb6a;
  --md-green-500: #4caf50;
  --md-green-600: #43a047;
  --md-green-700: #388e3c;
  --md-green-800: #2e7d32;
  --md-green-900: #1b5e20;
  --md-green-A100: #b9f6ca;
  --md-green-A200: #69f0ae;
  --md-green-A400: #00e676;
  --md-green-A700: #00c853;

  --md-light-green-50: #f1f8e9;
  --md-light-green-100: #dcedc8;
  --md-light-green-200: #c5e1a5;
  --md-light-green-300: #aed581;
  --md-light-green-400: #9ccc65;
  --md-light-green-500: #8bc34a;
  --md-light-green-600: #7cb342;
  --md-light-green-700: #689f38;
  --md-light-green-800: #558b2f;
  --md-light-green-900: #33691e;
  --md-light-green-A100: #ccff90;
  --md-light-green-A200: #b2ff59;
  --md-light-green-A400: #76ff03;
  --md-light-green-A700: #64dd17;

  --md-lime-50: #f9fbe7;
  --md-lime-100: #f0f4c3;
  --md-lime-200: #e6ee9c;
  --md-lime-300: #dce775;
  --md-lime-400: #d4e157;
  --md-lime-500: #cddc39;
  --md-lime-600: #c0ca33;
  --md-lime-700: #afb42b;
  --md-lime-800: #9e9d24;
  --md-lime-900: #827717;
  --md-lime-A100: #f4ff81;
  --md-lime-A200: #eeff41;
  --md-lime-A400: #c6ff00;
  --md-lime-A700: #aeea00;

  --md-yellow-50: #fffde7;
  --md-yellow-100: #fff9c4;
  --md-yellow-200: #fff59d;
  --md-yellow-300: #fff176;
  --md-yellow-400: #ffee58;
  --md-yellow-500: #ffeb3b;
  --md-yellow-600: #fdd835;
  --md-yellow-700: #fbc02d;
  --md-yellow-800: #f9a825;
  --md-yellow-900: #f57f17;
  --md-yellow-A100: #ffff8d;
  --md-yellow-A200: #ffff00;
  --md-yellow-A400: #ffea00;
  --md-yellow-A700: #ffd600;

  --md-amber-50: #fff8e1;
  --md-amber-100: #ffecb3;
  --md-amber-200: #ffe082;
  --md-amber-300: #ffd54f;
  --md-amber-400: #ffca28;
  --md-amber-500: #ffc107;
  --md-amber-600: #ffb300;
  --md-amber-700: #ffa000;
  --md-amber-800: #ff8f00;
  --md-amber-900: #ff6f00;
  --md-amber-A100: #ffe57f;
  --md-amber-A200: #ffd740;
  --md-amber-A400: #ffc400;
  --md-amber-A700: #ffab00;

  --md-orange-50: #fff3e0;
  --md-orange-100: #ffe0b2;
  --md-orange-200: #ffcc80;
  --md-orange-300: #ffb74d;
  --md-orange-400: #ffa726;
  --md-orange-500: #ff9800;
  --md-orange-600: #fb8c00;
  --md-orange-700: #f57c00;
  --md-orange-800: #ef6c00;
  --md-orange-900: #e65100;
  --md-orange-A100: #ffd180;
  --md-orange-A200: #ffab40;
  --md-orange-A400: #ff9100;
  --md-orange-A700: #ff6d00;

  --md-deep-orange-50: #fbe9e7;
  --md-deep-orange-100: #ffccbc;
  --md-deep-orange-200: #ffab91;
  --md-deep-orange-300: #ff8a65;
  --md-deep-orange-400: #ff7043;
  --md-deep-orange-500: #ff5722;
  --md-deep-orange-600: #f4511e;
  --md-deep-orange-700: #e64a19;
  --md-deep-orange-800: #d84315;
  --md-deep-orange-900: #bf360c;
  --md-deep-orange-A100: #ff9e80;
  --md-deep-orange-A200: #ff6e40;
  --md-deep-orange-A400: #ff3d00;
  --md-deep-orange-A700: #dd2c00;

  --md-brown-50: #efebe9;
  --md-brown-100: #d7ccc8;
  --md-brown-200: #bcaaa4;
  --md-brown-300: #a1887f;
  --md-brown-400: #8d6e63;
  --md-brown-500: #795548;
  --md-brown-600: #6d4c41;
  --md-brown-700: #5d4037;
  --md-brown-800: #4e342e;
  --md-brown-900: #3e2723;

  --md-grey-50: #fafafa;
  --md-grey-100: #f5f5f5;
  --md-grey-200: #eeeeee;
  --md-grey-300: #e0e0e0;
  --md-grey-400: #bdbdbd;
  --md-grey-500: #9e9e9e;
  --md-grey-600: #757575;
  --md-grey-700: #616161;
  --md-grey-800: #424242;
  --md-grey-900: #212121;

  --md-blue-grey-50: #eceff1;
  --md-blue-grey-100: #cfd8dc;
  --md-blue-grey-200: #b0bec5;
  --md-blue-grey-300: #90a4ae;
  --md-blue-grey-400: #78909c;
  --md-blue-grey-500: #607d8b;
  --md-blue-grey-600: #546e7a;
  --md-blue-grey-700: #455a64;
  --md-blue-grey-800: #37474f;
  --md-blue-grey-900: #263238;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Spinner {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 10;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: var(--jp-layout-color0);
  outline: none;
}

.jp-SpinnerContent {
  font-size: 10px;
  margin: 50px auto;
  text-indent: -9999em;
  width: 3em;
  height: 3em;
  border-radius: 50%;
  background: var(--jp-brand-color3);
  background: linear-gradient(
    to right,
    #f37626 10%,
    rgba(255, 255, 255, 0) 42%
  );
  position: relative;
  animation: load3 1s infinite linear, fadeIn 1s;
}

.jp-SpinnerContent:before {
  width: 50%;
  height: 50%;
  background: #f37626;
  border-radius: 100% 0 0 0;
  position: absolute;
  top: 0;
  left: 0;
  content: '';
}

.jp-SpinnerContent:after {
  background: var(--jp-layout-color0);
  width: 75%;
  height: 75%;
  border-radius: 50%;
  content: '';
  margin: auto;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

@keyframes load3 {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

button.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: none;
  box-sizing: border-box;
  text-align: center;
  line-height: 32px;
  height: 32px;
  padding: 0px 12px;
  letter-spacing: 0.8px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input.jp-mod-styled {
  background: var(--jp-input-background);
  height: 28px;
  box-sizing: border-box;
  border: var(--jp-border-width) solid var(--jp-border-color1);
  padding-left: 7px;
  padding-right: 7px;
  font-size: var(--jp-ui-font-size2);
  color: var(--jp-ui-font-color0);
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

input[type='checkbox'].jp-mod-styled {
  appearance: checkbox;
  -webkit-appearance: checkbox;
  -moz-appearance: checkbox;
  height: auto;
}

input.jp-mod-styled:focus {
  border: var(--jp-border-width) solid var(--md-blue-500);
  box-shadow: inset 0 0 4px var(--md-blue-300);
}

.jp-FileDialog-Checkbox {
  margin-top: 35px;
  display: flex;
  flex-direction: row;
  align-items: end;
  width: 100%;
}

.jp-FileDialog-Checkbox > label {
  flex: 1 1 auto;
}

.jp-select-wrapper {
  display: flex;
  position: relative;
  flex-direction: column;
  padding: 1px;
  background-color: var(--jp-layout-color1);
  height: 28px;
  box-sizing: border-box;
  margin-bottom: 12px;
}

.jp-select-wrapper.jp-mod-focused select.jp-mod-styled {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-input-active-background);
}

select.jp-mod-styled:hover {
  background-color: var(--jp-layout-color1);
  cursor: pointer;
  color: var(--jp-ui-font-color0);
  background-color: var(--jp-input-hover-background);
  box-shadow: inset 0 0px 1px rgba(0, 0, 0, 0.5);
}

select.jp-mod-styled {
  flex: 1 1 auto;
  height: 32px;
  width: 100%;
  font-size: var(--jp-ui-font-size2);
  background: var(--jp-input-background);
  color: var(--jp-ui-font-color0);
  padding: 0 25px 0 8px;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0px;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

:root {
  --jp-private-toolbar-height: calc(
    28px + var(--jp-border-width)
  ); /* leave 28px for content */
}

.jp-Toolbar {
  color: var(--jp-ui-font-color1);
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  border-bottom: var(--jp-border-width) solid var(--jp-toolbar-border-color);
  box-shadow: var(--jp-toolbar-box-shadow);
  background: var(--jp-toolbar-background);
  min-height: var(--jp-toolbar-micro-height);
  padding: 2px;
  z-index: 1;
  overflow-x: auto;
}

/* Toolbar items */

.jp-Toolbar > .jp-Toolbar-item.jp-Toolbar-spacer {
  flex-grow: 1;
  flex-shrink: 1;
}

.jp-Toolbar-item.jp-Toolbar-kernelStatus {
  display: inline-block;
  width: 32px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 16px;
}

.jp-Toolbar > .jp-Toolbar-item {
  flex: 0 0 auto;
  display: flex;
  padding-left: 1px;
  padding-right: 1px;
  font-size: var(--jp-ui-font-size1);
  line-height: var(--jp-private-toolbar-height);
  height: 100%;
}

/* Toolbar buttons */

/* This is the div we use to wrap the react component into a Widget */
div.jp-ToolbarButton {
  color: transparent;
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0px;
  margin: 0px;
}

button.jp-ToolbarButtonComponent {
  background: var(--jp-layout-color1);
  border: none;
  box-sizing: border-box;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 0px 6px;
  margin: 0px;
  height: 24px;
  border-radius: var(--jp-border-radius);
  display: flex;
  align-items: center;
  text-align: center;
  font-size: 14px;
  min-width: unset;
  min-height: unset;
}

button.jp-ToolbarButtonComponent:disabled {
  opacity: 0.4;
}

button.jp-ToolbarButtonComponent span {
  padding: 0px;
  flex: 0 0 auto;
}

button.jp-ToolbarButtonComponent .jp-ToolbarButtonComponent-label {
  font-size: var(--jp-ui-font-size1);
  line-height: 100%;
  padding-left: 2px;
  color: var(--jp-ui-font-color1);
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar.jp-Toolbar-micro {
  padding: 0;
  min-height: 0;
}

#jp-main-dock-panel[data-mode='single-document']
  .jp-MainAreaWidget
  > .jp-Toolbar {
  border: none;
  box-shadow: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2017, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Copyright (c) 2014-2017, PhosphorJS Contributors
|
| Distributed under the terms of the BSD 3-Clause License.
|
| The full license is in the file LICENSE, distributed with this software.
|----------------------------------------------------------------------------*/


/* <DEPRECATED> */ body.p-mod-override-cursor *, /* </DEPRECATED> */
body.lm-mod-override-cursor * {
  cursor: inherit !important;
}

/*-----------------------------------------------------------------------------
| Copyright (c) 2014-2016, Jupyter Development Team.
|
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-JSONEditor {
  display: flex;
  flex-direction: column;
  width: 100%;
}

.jp-JSONEditor-host {
  flex: 1 1 auto;
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  border-radius: 0px;
  background: var(--jp-layout-color0);
  min-height: 50px;
  padding: 1px;
}

.jp-JSONEditor.jp-mod-error .jp-JSONEditor-host {
  border-color: red;
  outline-color: red;
}

.jp-JSONEditor-header {
  display: flex;
  flex: 1 0 auto;
  padding: 0 0 0 12px;
}

.jp-JSONEditor-header label {
  flex: 0 0 auto;
}

.jp-JSONEditor-commitButton {
  height: 16px;
  width: 16px;
  background-size: 18px;
  background-repeat: no-repeat;
  background-position: center;
}

.jp-JSONEditor-host.jp-mod-focused {
  background-color: var(--jp-input-active-background);
  border: 1px solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

.jp-Editor.jp-mod-dropTarget {
  border: var(--jp-border-width) solid var(--jp-input-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
}

/* BASICS */

.CodeMirror {
  /* Set height, width, borders, and global font properties here */
  font-family: monospace;
  height: 300px;
  color: black;
  direction: ltr;
}

/* PADDING */

.CodeMirror-lines {
  padding: 4px 0; /* Vertical padding around content */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  padding: 0 4px; /* Horizontal padding of content */
}

.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  background-color: white; /* The little square between H and V scrollbars */
}

/* GUTTER */

.CodeMirror-gutters {
  border-right: 1px solid #ddd;
  background-color: #f7f7f7;
  white-space: nowrap;
}
.CodeMirror-linenumbers {}
.CodeMirror-linenumber {
  padding: 0 3px 0 5px;
  min-width: 20px;
  text-align: right;
  color: #999;
  white-space: nowrap;
}

.CodeMirror-guttermarker { color: black; }
.CodeMirror-guttermarker-subtle { color: #999; }

/* CURSOR */

.CodeMirror-cursor {
  border-left: 1px solid black;
  border-right: none;
  width: 0;
}
/* Shown when moving in bi-directional text */
.CodeMirror div.CodeMirror-secondarycursor {
  border-left: 1px solid silver;
}
.cm-fat-cursor .CodeMirror-cursor {
  width: auto;
  border: 0 !important;
  background: #7e7;
}
.cm-fat-cursor div.CodeMirror-cursors {
  z-index: 1;
}
.cm-fat-cursor-mark {
  background-color: rgba(20, 255, 20, 0.5);
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
}
.cm-animate-fat-cursor {
  width: auto;
  border: 0;
  -webkit-animation: blink 1.06s steps(1) infinite;
  -moz-animation: blink 1.06s steps(1) infinite;
  animation: blink 1.06s steps(1) infinite;
  background-color: #7e7;
}
@-moz-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@-webkit-keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}
@keyframes blink {
  0% {}
  50% { background-color: transparent; }
  100% {}
}

/* Can style cursor different in overwrite (non-insert) mode */
.CodeMirror-overwrite .CodeMirror-cursor {}

.cm-tab { display: inline-block; text-decoration: inherit; }

.CodeMirror-rulers {
  position: absolute;
  left: 0; right: 0; top: -50px; bottom: 0;
  overflow: hidden;
}
.CodeMirror-ruler {
  border-left: 1px solid #ccc;
  top: 0; bottom: 0;
  position: absolute;
}

/* DEFAULT THEME */

.cm-s-default .cm-header {color: blue;}
.cm-s-default .cm-quote {color: #090;}
.cm-negative {color: #d44;}
.cm-positive {color: #292;}
.cm-header, .cm-strong {font-weight: bold;}
.cm-em {font-style: italic;}
.cm-link {text-decoration: underline;}
.cm-strikethrough {text-decoration: line-through;}

.cm-s-default .cm-keyword {color: #708;}
.cm-s-default .cm-atom {color: #219;}
.cm-s-default .cm-number {color: #164;}
.cm-s-default .cm-def {color: #00f;}
.cm-s-default .cm-variable,
.cm-s-default .cm-punctuation,
.cm-s-default .cm-property,
.cm-s-default .cm-operator {}
.cm-s-default .cm-variable-2 {color: #05a;}
.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}
.cm-s-default .cm-comment {color: #a50;}
.cm-s-default .cm-string {color: #a11;}
.cm-s-default .cm-string-2 {color: #f50;}
.cm-s-default .cm-meta {color: #555;}
.cm-s-default .cm-qualifier {color: #555;}
.cm-s-default .cm-builtin {color: #30a;}
.cm-s-default .cm-bracket {color: #997;}
.cm-s-default .cm-tag {color: #170;}
.cm-s-default .cm-attribute {color: #00c;}
.cm-s-default .cm-hr {color: #999;}
.cm-s-default .cm-link {color: #00c;}

.cm-s-default .cm-error {color: #f00;}
.cm-invalidchar {color: #f00;}

.CodeMirror-composing { border-bottom: 2px solid; }

/* Default styles for common addons */

div.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}
div.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}
.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }
.CodeMirror-activeline-background {background: #e8f2ff;}

/* STOP */

/* The rest of this file contains styles related to the mechanics of
   the editor. You probably shouldn't touch them. */

.CodeMirror {
  position: relative;
  overflow: hidden;
  background: white;
}

.CodeMirror-scroll {
  overflow: scroll !important; /* Things will break if this is overridden */
  /* 50px is the magic margin used to hide the element's real scrollbars */
  /* See overflow: hidden in .CodeMirror */
  margin-bottom: -50px; margin-right: -50px;
  padding-bottom: 50px;
  height: 100%;
  outline: none; /* Prevent dragging from highlighting the element */
  position: relative;
}
.CodeMirror-sizer {
  position: relative;
  border-right: 50px solid transparent;
}

/* The fake, visible scrollbars. Used to force redraw during scrolling
   before actual scrolling happens, thus preventing shaking and
   flickering artifacts. */
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {
  position: absolute;
  z-index: 6;
  display: none;
  outline: none;
}
.CodeMirror-vscrollbar {
  right: 0; top: 0;
  overflow-x: hidden;
  overflow-y: scroll;
}
.CodeMirror-hscrollbar {
  bottom: 0; left: 0;
  overflow-y: hidden;
  overflow-x: scroll;
}
.CodeMirror-scrollbar-filler {
  right: 0; bottom: 0;
}
.CodeMirror-gutter-filler {
  left: 0; bottom: 0;
}

.CodeMirror-gutters {
  position: absolute; left: 0; top: 0;
  min-height: 100%;
  z-index: 3;
}
.CodeMirror-gutter {
  white-space: normal;
  height: 100%;
  display: inline-block;
  vertical-align: top;
  margin-bottom: -50px;
}
.CodeMirror-gutter-wrapper {
  position: absolute;
  z-index: 4;
  background: none !important;
  border: none !important;
}
.CodeMirror-gutter-background {
  position: absolute;
  top: 0; bottom: 0;
  z-index: 4;
}
.CodeMirror-gutter-elt {
  position: absolute;
  cursor: default;
  z-index: 4;
}
.CodeMirror-gutter-wrapper ::selection { background-color: transparent }
.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }

.CodeMirror-lines {
  cursor: text;
  min-height: 1px; /* prevents collapsing before first draw */
}
.CodeMirror pre.CodeMirror-line,
.CodeMirror pre.CodeMirror-line-like {
  /* Reset some styles that the rest of the page might have set */
  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;
  border-width: 0;
  background: transparent;
  font-family: inherit;
  font-size: inherit;
  margin: 0;
  white-space: pre;
  word-wrap: normal;
  line-height: inherit;
  color: inherit;
  z-index: 2;
  position: relative;
  overflow: visible;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-variant-ligatures: contextual;
  font-variant-ligatures: contextual;
}
.CodeMirror-wrap pre.CodeMirror-line,
.CodeMirror-wrap pre.CodeMirror-line-like {
  word-wrap: break-word;
  white-space: pre-wrap;
  word-break: normal;
}

.CodeMirror-linebackground {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  z-index: 0;
}

.CodeMirror-linewidget {
  position: relative;
  z-index: 2;
  padding: 0.1px; /* Force widget margins to stay inside of the container */
}

.CodeMirror-widget {}

.CodeMirror-rtl pre { direction: rtl; }

.CodeMirror-code {
  outline: none;
}

/* Force content-box sizing for the elements where we expect it */
.CodeMirror-scroll,
.CodeMirror-sizer,
.CodeMirror-gutter,
.CodeMirror-gutters,
.CodeMirror-linenumber {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

.CodeMirror-measure {
  position: absolute;
  width: 100%;
  height: 0;
  overflow: hidden;
  visibility: hidden;
}

.CodeMirror-cursor {
  position: absolute;
  pointer-events: none;
}
.CodeMirror-measure pre { position: static; }

div.CodeMirror-cursors {
  visibility: hidden;
  position: relative;
  z-index: 3;
}
div.CodeMirror-dragcursors {
  visibility: visible;
}

.CodeMirror-focused div.CodeMirror-cursors {
  visibility: visible;
}

.CodeMirror-selected { background: #d9d9d9; }
.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }
.CodeMirror-crosshair { cursor: crosshair; }
.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }
.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }

.cm-searching {
  background-color: #ffa;
  background-color: rgba(255, 255, 0, .4);
}

/* Used to force a border model for a node */
.cm-force-border { padding-right: .1px; }

@media print {
  /* Hide the cursor when printing */
  .CodeMirror div.CodeMirror-cursors {
    visibility: hidden;
  }
}

/* See issue #2901 */
.cm-tab-wrap-hack:after { content: ''; }

/* Help users use markselection to safely style text background */
span.CodeMirror-selectedtext { background: none; }

.CodeMirror-dialog {
  position: absolute;
  left: 0; right: 0;
  background: inherit;
  z-index: 15;
  padding: .1em .8em;
  overflow: hidden;
  color: inherit;
}

.CodeMirror-dialog-top {
  border-bottom: 1px solid #eee;
  top: 0;
}

.CodeMirror-dialog-bottom {
  border-top: 1px solid #eee;
  bottom: 0;
}

.CodeMirror-dialog input {
  border: none;
  outline: none;
  background: transparent;
  width: 20em;
  color: inherit;
  font-family: monospace;
}

.CodeMirror-dialog button {
  font-size: 70%;
}

.CodeMirror-foldmarker {
  color: blue;
  text-shadow: #b9f 1px 1px 2px, #b9f -1px -1px 2px, #b9f 1px -1px 2px, #b9f -1px 1px 2px;
  font-family: arial;
  line-height: .3;
  cursor: pointer;
}
.CodeMirror-foldgutter {
  width: .7em;
}
.CodeMirror-foldgutter-open,
.CodeMirror-foldgutter-folded {
  cursor: pointer;
}
.CodeMirror-foldgutter-open:after {
  content: "\25BE";
}
.CodeMirror-foldgutter-folded:after {
  content: "\25B8";
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.CodeMirror {
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  border: 0;
  border-radius: 0;
  height: auto;
  /* Changed to auto to autogrow */
}

.CodeMirror pre {
  padding: 0 var(--jp-code-padding);
}

.jp-CodeMirrorEditor[data-type='inline'] .CodeMirror-dialog {
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

/* This causes https://github.com/jupyter/jupyterlab/issues/522 */
/* May not cause it not because we changed it! */
.CodeMirror-lines {
  padding: var(--jp-code-padding) 0;
}

.CodeMirror-linenumber {
  padding: 0 8px;
}

.jp-CodeMirrorEditor {
  cursor: text;
}

.jp-CodeMirrorEditor[data-type='inline'] .CodeMirror-cursor {
  border-left: var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color);
}

/* When zoomed out 67% and 33% on a screen of 1440 width x 900 height */
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .jp-CodeMirrorEditor[data-type='inline'] .CodeMirror-cursor {
    border-left: var(--jp-code-cursor-width1) solid
      var(--jp-editor-cursor-color);
  }
}

/* When zoomed out less than 33% */
@media screen and (min-width: 4320px) {
  .jp-CodeMirrorEditor[data-type='inline'] .CodeMirror-cursor {
    border-left: var(--jp-code-cursor-width2) solid
      var(--jp-editor-cursor-color);
  }
}

.CodeMirror.jp-mod-readOnly .CodeMirror-cursor {
  display: none;
}

.CodeMirror-gutters {
  border-right: 1px solid var(--jp-border-color2);
  background-color: var(--jp-layout-color0);
}

.jp-CollaboratorCursor {
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: none;
  border-bottom: 3px solid;
  background-clip: content-box;
  margin-left: -5px;
  margin-right: -5px;
}

.CodeMirror-selectedtext.cm-searching {
  background-color: var(--jp-search-selected-match-background-color) !important;
  color: var(--jp-search-selected-match-color) !important;
}

.cm-searching {
  background-color: var(
    --jp-search-unselected-match-background-color
  ) !important;
  color: var(--jp-search-unselected-match-color) !important;
}

.CodeMirror-focused .CodeMirror-selected {
  background-color: var(--jp-editor-selected-focused-background);
}

.CodeMirror-selected {
  background-color: var(--jp-editor-selected-background);
}

.jp-CollaboratorCursor-hover {
  position: absolute;
  z-index: 1;
  transform: translateX(-50%);
  color: white;
  border-radius: 3px;
  padding-left: 4px;
  padding-right: 4px;
  padding-top: 1px;
  padding-bottom: 1px;
  text-align: center;
  font-size: var(--jp-ui-font-size1);
  white-space: nowrap;
}

.jp-CodeMirror-ruler {
  border-left: 1px dashed var(--jp-border-color2);
}

/**
 * Here is our jupyter theme for CodeMirror syntax highlighting
 * This is used in our marked.js syntax highlighting and CodeMirror itself
 * The string "jupyter" is set in ../codemirror/widget.DEFAULT_CODEMIRROR_THEME
 * This came from the classic notebook, which came form highlight.js/GitHub
 */

/**
 * CodeMirror themes are handling the background/color in this way. This works
 * fine for CodeMirror editors outside the notebook, but the notebook styles
 * these things differently.
 */
.CodeMirror.cm-s-jupyter {
  background: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
}

/* In the notebook, we want this styling to be handled by its container */
.jp-CodeConsole .CodeMirror.cm-s-jupyter,
.jp-Notebook .CodeMirror.cm-s-jupyter {
  background: transparent;
}

.cm-s-jupyter .CodeMirror-cursor {
  border-left: var(--jp-code-cursor-width0) solid var(--jp-editor-cursor-color);
}
.cm-s-jupyter span.cm-keyword {
  color: var(--jp-mirror-editor-keyword-color);
  font-weight: bold;
}
.cm-s-jupyter span.cm-atom {
  color: var(--jp-mirror-editor-atom-color);
}
.cm-s-jupyter span.cm-number {
  color: var(--jp-mirror-editor-number-color);
}
.cm-s-jupyter span.cm-def {
  color: var(--jp-mirror-editor-def-color);
}
.cm-s-jupyter span.cm-variable {
  color: var(--jp-mirror-editor-variable-color);
}
.cm-s-jupyter span.cm-variable-2 {
  color: var(--jp-mirror-editor-variable-2-color);
}
.cm-s-jupyter span.cm-variable-3 {
  color: var(--jp-mirror-editor-variable-3-color);
}
.cm-s-jupyter span.cm-punctuation {
  color: var(--jp-mirror-editor-punctuation-color);
}
.cm-s-jupyter span.cm-property {
  color: var(--jp-mirror-editor-property-color);
}
.cm-s-jupyter span.cm-operator {
  color: var(--jp-mirror-editor-operator-color);
  font-weight: bold;
}
.cm-s-jupyter span.cm-comment {
  color: var(--jp-mirror-editor-comment-color);
  font-style: italic;
}
.cm-s-jupyter span.cm-string {
  color: var(--jp-mirror-editor-string-color);
}
.cm-s-jupyter span.cm-string-2 {
  color: var(--jp-mirror-editor-string-2-color);
}
.cm-s-jupyter span.cm-meta {
  color: var(--jp-mirror-editor-meta-color);
}
.cm-s-jupyter span.cm-qualifier {
  color: var(--jp-mirror-editor-qualifier-color);
}
.cm-s-jupyter span.cm-builtin {
  color: var(--jp-mirror-editor-builtin-color);
}
.cm-s-jupyter span.cm-bracket {
  color: var(--jp-mirror-editor-bracket-color);
}
.cm-s-jupyter span.cm-tag {
  color: var(--jp-mirror-editor-tag-color);
}
.cm-s-jupyter span.cm-attribute {
  color: var(--jp-mirror-editor-attribute-color);
}
.cm-s-jupyter span.cm-header {
  color: var(--jp-mirror-editor-header-color);
}
.cm-s-jupyter span.cm-quote {
  color: var(--jp-mirror-editor-quote-color);
}
.cm-s-jupyter span.cm-link {
  color: var(--jp-mirror-editor-link-color);
}
.cm-s-jupyter span.cm-error {
  color: var(--jp-mirror-editor-error-color);
}
.cm-s-jupyter span.cm-hr {
  color: #999;
}

.cm-s-jupyter span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}

.cm-s-jupyter .CodeMirror-activeline-background,
.cm-s-jupyter .CodeMirror-gutter {
  background-color: var(--jp-layout-color2);
}

/* Styles for shared cursors (remote cursor locations and selected ranges) */
.jp-CodeMirrorEditor .remote-caret {
  position: relative;
  border-left: 2px solid black;
  margin-left: -1px;
  margin-right: -1px;
  box-sizing: border-box;
}

.jp-CodeMirrorEditor .remote-caret > div {
  white-space: nowrap;
  position: absolute;
  top: -1.15em;
  padding-bottom: 0.05em;
  left: -2px;
  font-size: 0.95em;
  background-color: rgb(250, 129, 0);
  font-family: var(--jp-ui-font-family);
  font-weight: bold;
  line-height: normal;
  user-select: none;
  color: white;
  padding-left: 2px;
  padding-right: 2px;
  z-index: 3;
  transition: opacity 0.3s ease-in-out;
}

.jp-CodeMirrorEditor .remote-caret.hide-name > div {
  transition-delay: 0.7s;
  opacity: 0;
}

.jp-CodeMirrorEditor .remote-caret:hover > div {
  opacity: 1;
  transition-delay: 0s;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| RenderedText
|----------------------------------------------------------------------------*/

:root {
  /* This is the padding value to fill the gaps between lines containing spans with background color. */
  --jp-private-code-span-padding: calc(
    (var(--jp-code-line-height) - 1) * var(--jp-code-font-size) / 2
  );
}

.jp-RenderedText {
  text-align: left;
  padding-left: var(--jp-code-padding);
  line-height: var(--jp-code-line-height);
  font-family: var(--jp-code-font-family);
}

.jp-RenderedText pre,
.jp-RenderedJavaScript pre,
.jp-RenderedHTMLCommon pre {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-code-font-size);
  border: none;
  margin: 0px;
  padding: 0px;
}

.jp-RenderedText pre a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}
.jp-RenderedText pre a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}
.jp-RenderedText pre a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* console foregrounds and backgrounds */
.jp-RenderedText pre .ansi-black-fg {
  color: #3e424d;
}
.jp-RenderedText pre .ansi-red-fg {
  color: #e75c58;
}
.jp-RenderedText pre .ansi-green-fg {
  color: #00a250;
}
.jp-RenderedText pre .ansi-yellow-fg {
  color: #ddb62b;
}
.jp-RenderedText pre .ansi-blue-fg {
  color: #208ffb;
}
.jp-RenderedText pre .ansi-magenta-fg {
  color: #d160c4;
}
.jp-RenderedText pre .ansi-cyan-fg {
  color: #60c6c8;
}
.jp-RenderedText pre .ansi-white-fg {
  color: #c5c1b4;
}

.jp-RenderedText pre .ansi-black-bg {
  background-color: #3e424d;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-red-bg {
  background-color: #e75c58;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-green-bg {
  background-color: #00a250;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-yellow-bg {
  background-color: #ddb62b;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-blue-bg {
  background-color: #208ffb;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-magenta-bg {
  background-color: #d160c4;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-cyan-bg {
  background-color: #60c6c8;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-white-bg {
  background-color: #c5c1b4;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-black-intense-fg {
  color: #282c36;
}
.jp-RenderedText pre .ansi-red-intense-fg {
  color: #b22b31;
}
.jp-RenderedText pre .ansi-green-intense-fg {
  color: #007427;
}
.jp-RenderedText pre .ansi-yellow-intense-fg {
  color: #b27d12;
}
.jp-RenderedText pre .ansi-blue-intense-fg {
  color: #0065ca;
}
.jp-RenderedText pre .ansi-magenta-intense-fg {
  color: #a03196;
}
.jp-RenderedText pre .ansi-cyan-intense-fg {
  color: #258f8f;
}
.jp-RenderedText pre .ansi-white-intense-fg {
  color: #a1a6b2;
}

.jp-RenderedText pre .ansi-black-intense-bg {
  background-color: #282c36;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-red-intense-bg {
  background-color: #b22b31;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-green-intense-bg {
  background-color: #007427;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-yellow-intense-bg {
  background-color: #b27d12;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-blue-intense-bg {
  background-color: #0065ca;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-magenta-intense-bg {
  background-color: #a03196;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-cyan-intense-bg {
  background-color: #258f8f;
  padding: var(--jp-private-code-span-padding) 0;
}
.jp-RenderedText pre .ansi-white-intense-bg {
  background-color: #a1a6b2;
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-default-inverse-fg {
  color: var(--jp-ui-inverse-font-color0);
}
.jp-RenderedText pre .ansi-default-inverse-bg {
  background-color: var(--jp-inverse-layout-color0);
  padding: var(--jp-private-code-span-padding) 0;
}

.jp-RenderedText pre .ansi-bold {
  font-weight: bold;
}
.jp-RenderedText pre .ansi-underline {
  text-decoration: underline;
}

.jp-RenderedText[data-mime-type='application/vnd.jupyter.stderr'] {
  background: var(--jp-rendermime-error-background);
  padding-top: var(--jp-code-padding);
}

/*-----------------------------------------------------------------------------
| RenderedLatex
|----------------------------------------------------------------------------*/

.jp-RenderedLatex {
  color: var(--jp-content-font-color1);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
}

/* Left-justify outputs.*/
.jp-OutputArea-output.jp-RenderedLatex {
  padding: var(--jp-code-padding);
  text-align: left;
}

/*-----------------------------------------------------------------------------
| RenderedHTML
|----------------------------------------------------------------------------*/

.jp-RenderedHTMLCommon {
  color: var(--jp-content-font-color1);
  font-family: var(--jp-content-font-family);
  font-size: var(--jp-content-font-size1);
  line-height: var(--jp-content-line-height);
  /* Give a bit more R padding on Markdown text to keep line lengths reasonable */
  padding-right: 20px;
}

.jp-RenderedHTMLCommon em {
  font-style: italic;
}

.jp-RenderedHTMLCommon strong {
  font-weight: bold;
}

.jp-RenderedHTMLCommon u {
  text-decoration: underline;
}

.jp-RenderedHTMLCommon a:link {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:hover {
  text-decoration: underline;
  color: var(--jp-content-link-color);
}

.jp-RenderedHTMLCommon a:visited {
  text-decoration: none;
  color: var(--jp-content-link-color);
}

/* Headings */

.jp-RenderedHTMLCommon h1,
.jp-RenderedHTMLCommon h2,
.jp-RenderedHTMLCommon h3,
.jp-RenderedHTMLCommon h4,
.jp-RenderedHTMLCommon h5,
.jp-RenderedHTMLCommon h6 {
  line-height: var(--jp-content-heading-line-height);
  font-weight: var(--jp-content-heading-font-weight);
  font-style: normal;
  margin: var(--jp-content-heading-margin-top) 0
    var(--jp-content-heading-margin-bottom) 0;
}

.jp-RenderedHTMLCommon h1:first-child,
.jp-RenderedHTMLCommon h2:first-child,
.jp-RenderedHTMLCommon h3:first-child,
.jp-RenderedHTMLCommon h4:first-child,
.jp-RenderedHTMLCommon h5:first-child,
.jp-RenderedHTMLCommon h6:first-child {
  margin-top: calc(0.5 * var(--jp-content-heading-margin-top));
}

.jp-RenderedHTMLCommon h1:last-child,
.jp-RenderedHTMLCommon h2:last-child,
.jp-RenderedHTMLCommon h3:last-child,
.jp-RenderedHTMLCommon h4:last-child,
.jp-RenderedHTMLCommon h5:last-child,
.jp-RenderedHTMLCommon h6:last-child {
  margin-bottom: calc(0.5 * var(--jp-content-heading-margin-bottom));
}

.jp-RenderedHTMLCommon h1 {
  font-size: var(--jp-content-font-size5);
}

.jp-RenderedHTMLCommon h2 {
  font-size: var(--jp-content-font-size4);
}

.jp-RenderedHTMLCommon h3 {
  font-size: var(--jp-content-font-size3);
}

.jp-RenderedHTMLCommon h4 {
  font-size: var(--jp-content-font-size2);
}

.jp-RenderedHTMLCommon h5 {
  font-size: var(--jp-content-font-size1);
}

.jp-RenderedHTMLCommon h6 {
  font-size: var(--jp-content-font-size0);
}

/* Lists */

.jp-RenderedHTMLCommon ul:not(.list-inline),
.jp-RenderedHTMLCommon ol:not(.list-inline) {
  padding-left: 2em;
}

.jp-RenderedHTMLCommon ul {
  list-style: disc;
}

.jp-RenderedHTMLCommon ul ul {
  list-style: square;
}

.jp-RenderedHTMLCommon ul ul ul {
  list-style: circle;
}

.jp-RenderedHTMLCommon ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol ol {
  list-style: upper-alpha;
}

.jp-RenderedHTMLCommon ol ol ol {
  list-style: lower-alpha;
}

.jp-RenderedHTMLCommon ol ol ol ol {
  list-style: lower-roman;
}

.jp-RenderedHTMLCommon ol ol ol ol ol {
  list-style: decimal;
}

.jp-RenderedHTMLCommon ol,
.jp-RenderedHTMLCommon ul {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon ul ul,
.jp-RenderedHTMLCommon ul ol,
.jp-RenderedHTMLCommon ol ul,
.jp-RenderedHTMLCommon ol ol {
  margin-bottom: 0em;
}

.jp-RenderedHTMLCommon hr {
  color: var(--jp-border-color2);
  background-color: var(--jp-border-color1);
  margin-top: 1em;
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon > pre {
  margin: 1.5em 2em;
}

.jp-RenderedHTMLCommon pre,
.jp-RenderedHTMLCommon code {
  border: 0;
  background-color: var(--jp-layout-color0);
  color: var(--jp-content-font-color1);
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  line-height: var(--jp-code-line-height);
  padding: 0;
  white-space: pre-wrap;
}

.jp-RenderedHTMLCommon :not(pre) > code {
  background-color: var(--jp-layout-color2);
  padding: 1px 5px;
}

/* Tables */

.jp-RenderedHTMLCommon table {
  border-collapse: collapse;
  border-spacing: 0;
  border: none;
  color: var(--jp-ui-font-color1);
  font-size: 12px;
  table-layout: fixed;
  margin-left: auto;
  margin-right: auto;
}

.jp-RenderedHTMLCommon thead {
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  vertical-align: bottom;
}

.jp-RenderedHTMLCommon td,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon tr {
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}

.jp-RenderedMarkdown.jp-RenderedHTMLCommon td,
.jp-RenderedMarkdown.jp-RenderedHTMLCommon th {
  max-width: none;
}

:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon td,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon th,
:not(.jp-RenderedMarkdown).jp-RenderedHTMLCommon tr {
  text-align: right;
}

.jp-RenderedHTMLCommon th {
  font-weight: bold;
}

.jp-RenderedHTMLCommon tbody tr:nth-child(odd) {
  background: var(--jp-layout-color0);
}

.jp-RenderedHTMLCommon tbody tr:nth-child(even) {
  background: var(--jp-rendermime-table-row-background);
}

.jp-RenderedHTMLCommon tbody tr:hover {
  background: var(--jp-rendermime-table-row-hover-background);
}

.jp-RenderedHTMLCommon table {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon p {
  text-align: left;
  margin: 0px;
}

.jp-RenderedHTMLCommon p {
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon img {
  -moz-force-broken-image-icon: 1;
}

/* Restrict to direct children as other images could be nested in other content. */
.jp-RenderedHTMLCommon > img {
  display: block;
  margin-left: 0;
  margin-right: 0;
  margin-bottom: 1em;
}

/* Change color behind transparent images if they need it... */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-light-background {
  background-color: var(--jp-inverse-layout-color1);
}
[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-dark-background {
  background-color: var(--jp-inverse-layout-color1);
}
/* ...or leave it untouched if they don't */
[data-jp-theme-light='false'] .jp-RenderedImage img.jp-needs-dark-background {
}
[data-jp-theme-light='true'] .jp-RenderedImage img.jp-needs-light-background {
}

.jp-RenderedHTMLCommon img,
.jp-RenderedImage img,
.jp-RenderedHTMLCommon svg,
.jp-RenderedSVG svg {
  max-width: 100%;
  height: auto;
}

.jp-RenderedHTMLCommon img.jp-mod-unconfined,
.jp-RenderedImage img.jp-mod-unconfined,
.jp-RenderedHTMLCommon svg.jp-mod-unconfined,
.jp-RenderedSVG svg.jp-mod-unconfined {
  max-width: none;
}

.jp-RenderedHTMLCommon .alert {
  padding: var(--jp-notebook-padding);
  border: var(--jp-border-width) solid transparent;
  border-radius: var(--jp-border-radius);
  margin-bottom: 1em;
}

.jp-RenderedHTMLCommon .alert-info {
  color: var(--jp-info-color0);
  background-color: var(--jp-info-color3);
  border-color: var(--jp-info-color2);
}
.jp-RenderedHTMLCommon .alert-info hr {
  border-color: var(--jp-info-color3);
}
.jp-RenderedHTMLCommon .alert-info > p:last-child,
.jp-RenderedHTMLCommon .alert-info > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-warning {
  color: var(--jp-warn-color0);
  background-color: var(--jp-warn-color3);
  border-color: var(--jp-warn-color2);
}
.jp-RenderedHTMLCommon .alert-warning hr {
  border-color: var(--jp-warn-color3);
}
.jp-RenderedHTMLCommon .alert-warning > p:last-child,
.jp-RenderedHTMLCommon .alert-warning > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-success {
  color: var(--jp-success-color0);
  background-color: var(--jp-success-color3);
  border-color: var(--jp-success-color2);
}
.jp-RenderedHTMLCommon .alert-success hr {
  border-color: var(--jp-success-color3);
}
.jp-RenderedHTMLCommon .alert-success > p:last-child,
.jp-RenderedHTMLCommon .alert-success > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon .alert-danger {
  color: var(--jp-error-color0);
  background-color: var(--jp-error-color3);
  border-color: var(--jp-error-color2);
}
.jp-RenderedHTMLCommon .alert-danger hr {
  border-color: var(--jp-error-color3);
}
.jp-RenderedHTMLCommon .alert-danger > p:last-child,
.jp-RenderedHTMLCommon .alert-danger > ul:last-child {
  margin-bottom: 0;
}

.jp-RenderedHTMLCommon blockquote {
  margin: 1em 2em;
  padding: 0 1em;
  border-left: 5px solid var(--jp-border-color2);
}

a.jp-InternalAnchorLink {
  visibility: hidden;
  margin-left: 8px;
  color: var(--md-blue-800);
}

h1:hover .jp-InternalAnchorLink,
h2:hover .jp-InternalAnchorLink,
h3:hover .jp-InternalAnchorLink,
h4:hover .jp-InternalAnchorLink,
h5:hover .jp-InternalAnchorLink,
h6:hover .jp-InternalAnchorLink {
  visibility: visible;
}

.jp-RenderedHTMLCommon kbd {
  background-color: var(--jp-rendermime-table-row-background);
  border: 1px solid var(--jp-border-color0);
  border-bottom-color: var(--jp-border-color2);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
  display: inline-block;
  font-size: 0.8em;
  line-height: 1em;
  padding: 0.2em 0.5em;
}

/* Most direct children of .jp-RenderedHTMLCommon have a margin-bottom of 1.0.
 * At the bottom of cells this is a bit too much as there is also spacing
 * between cells. Going all the way to 0 gets too tight between markdown and
 * code cells.
 */
.jp-RenderedHTMLCommon > *:last-child {
  margin-bottom: 0.5em;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-MimeDocument {
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-filebrowser-button-height: 28px;
  --jp-private-filebrowser-button-width: 48px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-FileBrowser {
  display: flex;
  flex-direction: column;
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  /* This is needed so that all font sizing of children done in ems is
   * relative to this base size */
  font-size: var(--jp-ui-font-size1);
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  border-bottom: none;
  height: auto;
  margin: var(--jp-toolbar-header-margin);
  box-shadow: none;
}

.jp-BreadCrumbs {
  flex: 0 0 auto;
  margin: 8px 12px 8px 12px;
}

.jp-BreadCrumbs-item {
  margin: 0px 2px;
  padding: 0px 2px;
  border-radius: var(--jp-border-radius);
  cursor: pointer;
}

.jp-BreadCrumbs-item:hover {
  background-color: var(--jp-layout-color2);
}

.jp-BreadCrumbs-item:first-child {
  margin-left: 0px;
}

.jp-BreadCrumbs-item.jp-mod-dropTarget {
  background-color: var(--jp-brand-color2);
  opacity: 0.7;
}

/*-----------------------------------------------------------------------------
| Buttons
|----------------------------------------------------------------------------*/

.jp-FileBrowser-toolbar.jp-Toolbar {
  padding: 0px;
  margin: 8px 12px 0px 12px;
}

.jp-FileBrowser-toolbar.jp-Toolbar {
  justify-content: flex-start;
}

.jp-FileBrowser-toolbar.jp-Toolbar .jp-Toolbar-item {
  flex: 0 0 auto;
  padding-left: 0px;
  padding-right: 2px;
}

.jp-FileBrowser-toolbar.jp-Toolbar .jp-ToolbarButtonComponent {
  width: 40px;
}

.jp-FileBrowser-toolbar.jp-Toolbar
  .jp-Toolbar-item:first-child
  .jp-ToolbarButtonComponent {
  width: 72px;
  background: var(--jp-brand-color1);
}

.jp-FileBrowser-toolbar.jp-Toolbar
  .jp-Toolbar-item:first-child
  .jp-ToolbarButtonComponent:focus-visible {
  background-color: var(--jp-brand-color0);
}

.jp-FileBrowser-toolbar.jp-Toolbar
  .jp-Toolbar-item:first-child
  .jp-ToolbarButtonComponent
  .jp-icon3 {
  fill: white;
}

/*-----------------------------------------------------------------------------
| Other styles
|----------------------------------------------------------------------------*/

.jp-FileDialog.jp-mod-conflict input {
  color: var(--jp-error-color1);
}

.jp-FileDialog .jp-new-name-title {
  margin-top: 12px;
}

.jp-LastModified-hidden {
  display: none;
}

.jp-FileBrowser-filterBox {
  padding: 0px;
  flex: 0 0 auto;
  margin: 8px 12px 0px 12px;
}

/*-----------------------------------------------------------------------------
| DirListing
|----------------------------------------------------------------------------*/

.jp-DirListing {
  flex: 1 1 auto;
  display: flex;
  flex-direction: column;
  outline: 0;
}

.jp-DirListing:focus-visible {
  border: 1px solid var(--jp-brand-color1);
}

.jp-DirListing-header {
  flex: 0 0 auto;
  display: flex;
  flex-direction: row;
  overflow: hidden;
  border-top: var(--jp-border-width) solid var(--jp-border-color2);
  border-bottom: var(--jp-border-width) solid var(--jp-border-color1);
  box-shadow: var(--jp-toolbar-box-shadow);
  z-index: 2;
}

.jp-DirListing-headerItem {
  padding: 4px 12px 2px 12px;
  font-weight: 500;
}

.jp-DirListing-headerItem:hover {
  background: var(--jp-layout-color2);
}

.jp-DirListing-headerItem.jp-id-name {
  flex: 1 0 84px;
}

.jp-DirListing-headerItem.jp-id-modified {
  flex: 0 0 112px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
}

.jp-id-narrow {
  display: none;
  flex: 0 0 5px;
  padding: 4px 4px;
  border-left: var(--jp-border-width) solid var(--jp-border-color2);
  text-align: right;
  color: var(--jp-border-color2);
}

.jp-DirListing-narrow .jp-id-narrow {
  display: block;
}

.jp-DirListing-narrow .jp-id-modified,
.jp-DirListing-narrow .jp-DirListing-itemModified {
  display: none;
}

.jp-DirListing-headerItem.jp-mod-selected {
  font-weight: 600;
}

/* increase specificity to override bundled default */
.jp-DirListing-content {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-DirListing-content mark {
  color: var(--jp-ui-font-color0);
  background-color: transparent;
  font-weight: bold;
}

.jp-DirListing-content .jp-DirListing-item.jp-mod-selected mark {
  color: var(--jp-ui-inverse-font-color0);
}

/* Style the directory listing content when a user drops a file to upload */
.jp-DirListing.jp-mod-native-drop .jp-DirListing-content {
  outline: 5px dashed rgba(128, 128, 128, 0.5);
  outline-offset: -10px;
  cursor: copy;
}

.jp-DirListing-item {
  display: flex;
  flex-direction: row;
  padding: 4px 12px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.jp-DirListing-item[data-is-dot] {
  opacity: 75%;
}

.jp-DirListing-item.jp-mod-selected {
  color: var(--jp-ui-inverse-font-color1);
  background: var(--jp-brand-color1);
}

.jp-DirListing-item.jp-mod-dropTarget {
  background: var(--jp-brand-color3);
}

.jp-DirListing-item:hover:not(.jp-mod-selected) {
  background: var(--jp-layout-color2);
}

.jp-DirListing-itemIcon {
  flex: 0 0 20px;
  margin-right: 4px;
}

.jp-DirListing-itemText {
  flex: 1 0 64px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

.jp-DirListing-itemModified {
  flex: 0 0 125px;
  text-align: right;
}

.jp-DirListing-editor {
  flex: 1 0 64px;
  outline: none;
  border: none;
}

.jp-DirListing-item.jp-mod-running .jp-DirListing-itemIcon:before {
  color: var(--jp-success-color1);
  content: '\25CF';
  font-size: 8px;
  position: absolute;
  left: -8px;
}

.jp-DirListing-item.jp-mod-running.jp-mod-selected
  .jp-DirListing-itemIcon:before {
  color: var(--jp-ui-inverse-font-color1);
}

.jp-DirListing-item.lm-mod-drag-image,
.jp-DirListing-item.jp-mod-selected.lm-mod-drag-image {
  font-size: var(--jp-ui-font-size1);
  padding-left: 4px;
  margin-left: 4px;
  width: 160px;
  background-color: var(--jp-ui-inverse-font-color2);
  box-shadow: var(--jp-elevation-z2);
  border-radius: 0px;
  color: var(--jp-ui-font-color1);
  transform: translateX(-40%) translateY(-58%);
}

.jp-DirListing-deadSpace {
  flex: 1 1 auto;
  margin: 0;
  padding: 0;
  list-style-type: none;
  overflow: auto;
  background-color: var(--jp-layout-color1);
}

.jp-Document {
  min-width: 120px;
  min-height: 120px;
  outline: none;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
}

/*-----------------------------------------------------------------------------
| Main OutputArea
| OutputArea has a list of Outputs
|----------------------------------------------------------------------------*/

.jp-OutputArea {
  overflow-y: auto;
}

.jp-OutputArea-child {
  display: flex;
  flex-direction: row;
}

body[data-format='mobile'] .jp-OutputArea-child {
  flex-direction: column;
}

.jp-OutputPrompt {
  flex: 0 0 var(--jp-cell-prompt-width);
  color: var(--jp-cell-outprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);
  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

body[data-format='mobile'] .jp-OutputPrompt {
  flex: 0 0 auto;
  text-align: left;
}

.jp-OutputArea-output {
  height: auto;
  overflow: auto;
  user-select: text;
  -moz-user-select: text;
  -webkit-user-select: text;
  -ms-user-select: text;
}

.jp-OutputArea-child .jp-OutputArea-output {
  flex-grow: 1;
  flex-shrink: 1;
}

body[data-format='mobile'] .jp-OutputArea-child .jp-OutputArea-output {
  margin-left: var(--jp-notebook-padding);
}

/**
 * Isolated output.
 */
.jp-OutputArea-output.jp-mod-isolated {
  width: 100%;
  display: block;
}

/*
When drag events occur, `p-mod-override-cursor` is added to the body.
Because iframes steal all cursor events, the following two rules are necessary
to suppress pointer events while resize drags are occurring. There may be a
better solution to this problem.
*/
body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated {
  position: relative;
}

body.lm-mod-override-cursor .jp-OutputArea-output.jp-mod-isolated:before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: transparent;
}

/* pre */

.jp-OutputArea-output pre {
  border: none;
  margin: 0px;
  padding: 0px;
  overflow-x: auto;
  overflow-y: auto;
  word-break: break-all;
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* tables */

.jp-OutputArea-output.jp-RenderedHTMLCommon table {
  margin-left: 0;
  margin-right: 0;
}

/* description lists */

.jp-OutputArea-output dl,
.jp-OutputArea-output dt,
.jp-OutputArea-output dd {
  display: block;
}

.jp-OutputArea-output dl {
  width: 100%;
  overflow: hidden;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dt {
  font-weight: bold;
  float: left;
  width: 20%;
  padding: 0;
  margin: 0;
}

.jp-OutputArea-output dd {
  float: left;
  width: 80%;
  padding: 0;
  margin: 0;
}

/* Hide the gutter in case of
 *  - nested output areas (e.g. in the case of output widgets)
 *  - mirrored output areas
 */
.jp-OutputArea .jp-OutputArea .jp-OutputArea-prompt {
  display: none;
}

/*-----------------------------------------------------------------------------
| executeResult is added to any Output-result for the display of the object
| returned by a cell
|----------------------------------------------------------------------------*/

.jp-OutputArea-output.jp-OutputArea-executeResult {
  margin-left: 0px;
  flex: 1 1 auto;
}

/* Text output with the Out[] prompt needs a top padding to match the
 * alignment of the Out[] prompt itself.
 */
.jp-OutputArea-executeResult .jp-RenderedText.jp-OutputArea-output {
  padding-top: var(--jp-code-padding);
  border-top: var(--jp-border-width) solid transparent;
}

/*-----------------------------------------------------------------------------
| The Stdin output
|----------------------------------------------------------------------------*/

.jp-OutputArea-stdin {
  line-height: var(--jp-code-line-height);
  padding-top: var(--jp-code-padding);
  display: flex;
}

.jp-Stdin-prompt {
  color: var(--jp-content-font-color0);
  padding-right: var(--jp-code-padding);
  vertical-align: baseline;
  flex: 0 0 auto;
}

.jp-Stdin-input {
  font-family: var(--jp-code-font-family);
  font-size: inherit;
  color: inherit;
  background-color: inherit;
  width: 42%;
  min-width: 200px;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
  flex: 0 0 70%;
}

.jp-Stdin-input:focus {
  box-shadow: none;
}

/*-----------------------------------------------------------------------------
| Output Area View
|----------------------------------------------------------------------------*/

.jp-LinkedOutputView .jp-OutputArea {
  height: 100%;
  display: block;
}

.jp-LinkedOutputView .jp-OutputArea-output:only-child {
  height: 100%;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

.jp-Collapser {
  flex: 0 0 var(--jp-cell-collapser-width);
  padding: 0px;
  margin: 0px;
  border: none;
  outline: none;
  background: transparent;
  border-radius: var(--jp-border-radius);
  opacity: 1;
}

.jp-Collapser-child {
  display: block;
  width: 100%;
  box-sizing: border-box;
  /* height: 100% doesn't work because the height of its parent is computed from content */
  position: absolute;
  top: 0px;
  bottom: 0px;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Header/Footer
|----------------------------------------------------------------------------*/

/* Hidden by zero height by default */
.jp-CellHeader,
.jp-CellFooter {
  height: 0px;
  width: 100%;
  padding: 0px;
  margin: 0px;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Input
|----------------------------------------------------------------------------*/

/* All input areas */
.jp-InputArea {
  display: flex;
  flex-direction: row;
  overflow: hidden;
}

body[data-format='mobile'] .jp-InputArea {
  flex-direction: column;
}

.jp-InputArea-editor {
  flex: 1 1 auto;
  overflow: hidden;
}

.jp-InputArea-editor {
  /* This is the non-active, default styling */
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  border-radius: 0px;
  background: var(--jp-cell-editor-background);
}

body[data-format='mobile'] .jp-InputArea-editor {
  margin-left: var(--jp-notebook-padding);
}

.jp-InputPrompt {
  flex: 0 0 var(--jp-cell-prompt-width);
  color: var(--jp-cell-inprompt-font-color);
  font-family: var(--jp-cell-prompt-font-family);
  padding: var(--jp-code-padding);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  opacity: var(--jp-cell-prompt-opacity);
  line-height: var(--jp-code-line-height);
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
  opacity: var(--jp-cell-prompt-opacity);
  /* Right align prompt text, don't wrap to handle large prompt numbers */
  text-align: right;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  /* Disable text selection */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

body[data-format='mobile'] .jp-InputPrompt {
  flex: 0 0 auto;
  text-align: left;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Placeholder {
  display: flex;
  flex-direction: row;
  flex: 1 1 auto;
}

.jp-Placeholder-prompt {
  box-sizing: border-box;
}

.jp-Placeholder-content {
  flex: 1 1 auto;
  border: none;
  background: transparent;
  height: 20px;
  box-sizing: border-box;
}

.jp-Placeholder-content .jp-MoreHorizIcon {
  width: 32px;
  height: 16px;
  border: 1px solid transparent;
  border-radius: var(--jp-border-radius);
}

.jp-Placeholder-content .jp-MoreHorizIcon:hover {
  border: 1px solid var(--jp-border-color1);
  box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.25);
  background-color: var(--jp-layout-color0);
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-cell-scrolling-output-offset: 5px;
}

/*-----------------------------------------------------------------------------
| Cell
|----------------------------------------------------------------------------*/

.jp-Cell {
  padding: var(--jp-cell-padding);
  margin: 0px;
  border: none;
  outline: none;
  background: transparent;
}

/*-----------------------------------------------------------------------------
| Common input/output
|----------------------------------------------------------------------------*/

.jp-Cell-inputWrapper,
.jp-Cell-outputWrapper {
  display: flex;
  flex-direction: row;
  padding: 0px;
  margin: 0px;
  /* Added to reveal the box-shadow on the input and output collapsers. */
  overflow: visible;
}

/* Only input/output areas inside cells */
.jp-Cell-inputArea,
.jp-Cell-outputArea {
  flex: 1 1 auto;
}

/*-----------------------------------------------------------------------------
| Collapser
|----------------------------------------------------------------------------*/

/* Make the output collapser disappear when there is not output, but do so
 * in a manner that leaves it in the layout and preserves its width.
 */
.jp-Cell.jp-mod-noOutputs .jp-Cell-outputCollapser {
  border: none !important;
  background: transparent !important;
}

.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputCollapser {
  min-height: var(--jp-cell-collapser-min-height);
}

/*-----------------------------------------------------------------------------
| Output
|----------------------------------------------------------------------------*/

/* Put a space between input and output when there IS output */
.jp-Cell:not(.jp-mod-noOutputs) .jp-Cell-outputWrapper {
  margin-top: 5px;
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-Cell-outputArea {
  overflow-y: auto;
  max-height: 200px;
  box-shadow: inset 0 0 6px 2px rgba(0, 0, 0, 0.3);
  margin-left: var(--jp-private-cell-scrolling-output-offset);
}

.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  flex: 0 0
    calc(
      var(--jp-cell-prompt-width) -
        var(--jp-private-cell-scrolling-output-offset)
    );
}

/*-----------------------------------------------------------------------------
| CodeCell
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| MarkdownCell
|----------------------------------------------------------------------------*/

.jp-MarkdownOutput {
  flex: 1 1 auto;
  margin-top: 0;
  margin-bottom: 0;
  padding-left: var(--jp-code-padding);
}

.jp-MarkdownOutput.jp-RenderedHTMLCommon {
  overflow: auto;
}

.jp-showHiddenCellsButton {
  margin-left: calc(var(--jp-cell-prompt-width) + 2 * var(--jp-code-padding));
  margin-top: var(--jp-code-padding);
  border: 1px solid var(--jp-border-color2);
  background-color: var(--jp-border-color3) !important;
  color: var(--jp-content-font-color0) !important;
}

.jp-showHiddenCellsButton:hover {
  background-color: var(--jp-border-color2) !important;
}

.jp-collapseHeadingButton {
  display: none;
}

.jp-MarkdownCell:hover .jp-collapseHeadingButton {
  display: flex;
  min-height: var(--jp-cell-collapser-min-height);
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Variables
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------

/*-----------------------------------------------------------------------------
| Styles
|----------------------------------------------------------------------------*/

.jp-NotebookPanel-toolbar {
  padding: 2px;
}

.jp-Toolbar-item.jp-Notebook-toolbarCellType .jp-select-wrapper.jp-mod-focused {
  border: none;
  box-shadow: none;
}

.jp-Notebook-toolbarCellTypeDropdown select {
  height: 24px;
  font-size: var(--jp-ui-font-size1);
  line-height: 14px;
  border-radius: 0;
  display: block;
}

.jp-Notebook-toolbarCellTypeDropdown span {
  top: 5px !important;
}

/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Private CSS variables
|----------------------------------------------------------------------------*/

:root {
  --jp-private-notebook-dragImage-width: 304px;
  --jp-private-notebook-dragImage-height: 36px;
  --jp-private-notebook-selected-color: var(--md-blue-400);
  --jp-private-notebook-active-color: var(--md-green-400);
}

/*-----------------------------------------------------------------------------
| Imports
|----------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
| Notebook
|----------------------------------------------------------------------------*/

.jp-NotebookPanel {
  display: block;
  height: 100%;
}

.jp-NotebookPanel.jp-Document {
  min-width: 240px;
  min-height: 120px;
}

.jp-Notebook {
  padding: var(--jp-notebook-padding);
  outline: none;
  overflow: auto;
  background: var(--jp-layout-color0);
}

.jp-Notebook.jp-mod-scrollPastEnd::after {
  display: block;
  content: '';
  min-height: var(--jp-notebook-scroll-padding);
}

.jp-MainAreaWidget-ContainStrict .jp-Notebook * {
  contain: strict;
}

.jp-Notebook-render * {
  contain: none !important;
}

.jp-Notebook .jp-Cell {
  overflow: visible;
}

.jp-Notebook .jp-Cell .jp-InputPrompt {
  cursor: move;
  float: left;
}

/*-----------------------------------------------------------------------------
| Notebook state related styling
|
| The notebook and cells each have states, here are the possibilities:
|
| - Notebook
|   - Command
|   - Edit
| - Cell
|   - None
|   - Active (only one can be active)
|   - Selected (the cells actions are applied to)
|   - Multiselected (when multiple selected, the cursor)
|   - No outputs
|----------------------------------------------------------------------------*/

/* Command or edit modes */

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-InputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

.jp-Notebook .jp-Cell:not(.jp-mod-active) .jp-OutputPrompt {
  opacity: var(--jp-cell-prompt-not-active-opacity);
  color: var(--jp-cell-prompt-not-active-font-color);
}

/* cell is active */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser {
  background: var(--jp-brand-color1);
}

/* cell is dirty */
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt {
  color: var(--jp-warn-color1);
}
.jp-Notebook .jp-Cell.jp-mod-dirty .jp-InputPrompt:before {
  color: var(--jp-warn-color1);
  content: '';
}

.jp-Notebook .jp-Cell.jp-mod-active.jp-mod-dirty .jp-Collapser {
  background: var(--jp-warn-color1);
}

/* collapser is hovered */
.jp-Notebook .jp-Cell .jp-Collapser:hover {
  box-shadow: var(--jp-elevation-z2);
  background: var(--jp-brand-color1);
  opacity: var(--jp-cell-collapser-not-active-hover-opacity);
}

/* cell is active and collapser is hovered */
.jp-Notebook .jp-Cell.jp-mod-active .jp-Collapser:hover {
  background: var(--jp-brand-color0);
  opacity: 1;
}

/* Command mode */

.jp-Notebook.jp-mod-commandMode .jp-Cell.jp-mod-selected {
  background: var(--jp-notebook-multiselected-color);
}

.jp-Notebook.jp-mod-commandMode
  .jp-Cell.jp-mod-active.jp-mod-selected:not(.jp-mod-multiSelected) {
  background: transparent;
}

/* Edit mode */

.jp-Notebook.jp-mod-editMode .jp-Cell.jp-mod-active .jp-InputArea-editor {
  border: var(--jp-border-width) solid var(--jp-cell-editor-active-border-color);
  box-shadow: var(--jp-input-box-shadow);
  background-color: var(--jp-cell-editor-active-background);
}

/*-----------------------------------------------------------------------------
| Notebook drag and drop
|----------------------------------------------------------------------------*/

.jp-Notebook-cell.jp-mod-dropSource {
  opacity: 0.5;
}

.jp-Notebook-cell.jp-mod-dropTarget,
.jp-Notebook.jp-mod-commandMode
  .jp-Notebook-cell.jp-mod-active.jp-mod-selected.jp-mod-dropTarget {
  border-top-color: var(--jp-private-notebook-selected-color);
  border-top-style: solid;
  border-top-width: 2px;
}

.jp-dragImage {
  display: block;
  flex-direction: row;
  width: var(--jp-private-notebook-dragImage-width);
  height: var(--jp-private-notebook-dragImage-height);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background);
  overflow: visible;
}

.jp-dragImage-singlePrompt {
  box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.12);
}

.jp-dragImage .jp-dragImage-content {
  flex: 1 1 auto;
  z-index: 2;
  font-size: var(--jp-code-font-size);
  font-family: var(--jp-code-font-family);
  line-height: var(--jp-code-line-height);
  padding: var(--jp-code-padding);
  border: var(--jp-border-width) solid var(--jp-cell-editor-border-color);
  background: var(--jp-cell-editor-background-color);
  color: var(--jp-content-font-color3);
  text-align: left;
  margin: 4px 4px 4px 0px;
}

.jp-dragImage .jp-dragImage-prompt {
  flex: 0 0 auto;
  min-width: 36px;
  color: var(--jp-cell-inprompt-font-color);
  padding: var(--jp-code-padding);
  padding-left: 12px;
  font-family: var(--jp-cell-prompt-font-family);
  letter-spacing: var(--jp-cell-prompt-letter-spacing);
  line-height: 1.9;
  font-size: var(--jp-code-font-size);
  border: var(--jp-border-width) solid transparent;
}

.jp-dragImage-multipleBack {
  z-index: -1;
  position: absolute;
  height: 32px;
  width: 300px;
  top: 8px;
  left: 8px;
  background: var(--jp-layout-color2);
  border: var(--jp-border-width) solid var(--jp-input-border-color);
  box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.12);
}

/*-----------------------------------------------------------------------------
| Cell toolbar
|----------------------------------------------------------------------------*/

.jp-NotebookTools {
  display: block;
  min-width: var(--jp-sidebar-min-width);
  color: var(--jp-ui-font-color1);
  background: var(--jp-layout-color1);
  /* This is needed so that all font sizing of children done in ems is
    * relative to this base size */
  font-size: var(--jp-ui-font-size1);
  overflow: auto;
}

.jp-NotebookTools-tool {
  padding: 0px 12px 0 12px;
}

.jp-ActiveCellTool {
  padding: 12px;
  background-color: var(--jp-layout-color1);
  border-top: none !important;
}

.jp-ActiveCellTool .jp-InputArea-prompt {
  flex: 0 0 auto;
  padding-left: 0px;
}

.jp-ActiveCellTool .jp-InputArea-editor {
  flex: 1 1 auto;
  background: var(--jp-cell-editor-background);
  border-color: var(--jp-cell-editor-border-color);
}

.jp-ActiveCellTool .jp-InputArea-editor .CodeMirror {
  background: transparent;
}

.jp-MetadataEditorTool {
  flex-direction: column;
  padding: 12px 0px 12px 0px;
}

.jp-RankedPanel > :not(:first-child) {
  margin-top: 12px;
}

.jp-KeySelector select.jp-mod-styled {
  font-size: var(--jp-ui-font-size1);
  color: var(--jp-ui-font-color0);
  border: var(--jp-border-width) solid var(--jp-border-color1);
}

.jp-KeySelector label,
.jp-MetadataEditorTool label {
  line-height: 1.4;
}

.jp-NotebookTools .jp-select-wrapper {
  margin-top: 4px;
  margin-bottom: 0px;
}

.jp-NotebookTools .jp-Collapse {
  margin-top: 16px;
}

/*-----------------------------------------------------------------------------
| Presentation Mode (.jp-mod-presentationMode)
|----------------------------------------------------------------------------*/

.jp-mod-presentationMode .jp-Notebook {
  --jp-content-font-size1: var(--jp-content-presentation-font-size1);
  --jp-code-font-size: var(--jp-code-presentation-font-size);
}

.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-InputPrompt,
.jp-mod-presentationMode .jp-Notebook .jp-Cell .jp-OutputPrompt {
  flex: 0 0 110px;
}

/*-----------------------------------------------------------------------------
| Placeholder
|----------------------------------------------------------------------------*/

.jp-Cell-Placeholder {
  padding-left: 55px;
}

.jp-Cell-Placeholder-wrapper {
  background: #fff;
  border: 1px solid;
  border-color: #e5e6e9 #dfe0e4 #d0d1d5;
  border-radius: 4px;
  -webkit-border-radius: 4px;
  margin: 10px 15px;
}

.jp-Cell-Placeholder-wrapper-inner {
  padding: 15px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body {
  background-repeat: repeat;
  background-size: 50% auto;
}

.jp-Cell-Placeholder-wrapper-body div {
  background: #f6f7f8;
  background-image: -webkit-linear-gradient(
    left,
    #f6f7f8 0%,
    #edeef1 20%,
    #f6f7f8 40%,
    #f6f7f8 100%
  );
  background-repeat: no-repeat;
  background-size: 800px 104px;
  height: 104px;
  position: relative;
}

.jp-Cell-Placeholder-wrapper-body div {
  position: absolute;
  right: 15px;
  left: 15px;
  top: 15px;
}

div.jp-Cell-Placeholder-h1 {
  top: 20px;
  height: 20px;
  left: 15px;
  width: 150px;
}

div.jp-Cell-Placeholder-h2 {
  left: 15px;
  top: 50px;
  height: 10px;
  width: 100px;
}

div.jp-Cell-Placeholder-content-1,
div.jp-Cell-Placeholder-content-2,
div.jp-Cell-Placeholder-content-3 {
  left: 15px;
  right: 15px;
  height: 10px;
}

div.jp-Cell-Placeholder-content-1 {
  top: 100px;
}

div.jp-Cell-Placeholder-content-2 {
  top: 120px;
}

div.jp-Cell-Placeholder-content-3 {
  top: 140px;
}

</style>

    <style type="text/css">
/*-----------------------------------------------------------------------------
| Copyright (c) Jupyter Development Team.
| Distributed under the terms of the Modified BSD License.
|----------------------------------------------------------------------------*/

/*
The following CSS variables define the main, public API for styling JupyterLab.
These variables should be used by all plugins wherever possible. In other
words, plugins should not define custom colors, sizes, etc unless absolutely
necessary. This enables users to change the visual theme of JupyterLab
by changing these variables.

Many variables appear in an ordered sequence (0,1,2,3). These sequences
are designed to work well together, so for example, `--jp-border-color1` should
be used with `--jp-layout-color1`. The numbers have the following meanings:

* 0: super-primary, reserved for special emphasis
* 1: primary, most important under normal situations
* 2: secondary, next most important under normal situations
* 3: tertiary, next most important under normal situations

Throughout JupyterLab, we are mostly following principles from Google's
Material Design when selecting colors. We are not, however, following
all of MD as it is not optimized for dense, information rich UIs.
*/

:root {
  /* Elevation
   *
   * We style box-shadows using Material Design's idea of elevation. These particular numbers are taken from here:
   *
   * https://github.com/material-components/material-components-web
   * https://material-components-web.appspot.com/elevation.html
   */

  --jp-shadow-base-lightness: 0;
  --jp-shadow-umbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.2
  );
  --jp-shadow-penumbra-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.14
  );
  --jp-shadow-ambient-color: rgba(
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    var(--jp-shadow-base-lightness),
    0.12
  );
  --jp-elevation-z0: none;
  --jp-elevation-z1: 0px 2px 1px -1px var(--jp-shadow-umbra-color),
    0px 1px 1px 0px var(--jp-shadow-penumbra-color),
    0px 1px 3px 0px var(--jp-shadow-ambient-color);
  --jp-elevation-z2: 0px 3px 1px -2px var(--jp-shadow-umbra-color),
    0px 2px 2px 0px var(--jp-shadow-penumbra-color),
    0px 1px 5px 0px var(--jp-shadow-ambient-color);
  --jp-elevation-z4: 0px 2px 4px -1px var(--jp-shadow-umbra-color),
    0px 4px 5px 0px var(--jp-shadow-penumbra-color),
    0px 1px 10px 0px var(--jp-shadow-ambient-color);
  --jp-elevation-z6: 0px 3px 5px -1px var(--jp-shadow-umbra-color),
    0px 6px 10px 0px var(--jp-shadow-penumbra-color),
    0px 1px 18px 0px var(--jp-shadow-ambient-color);
  --jp-elevation-z8: 0px 5px 5px -3px var(--jp-shadow-umbra-color),
    0px 8px 10px 1px var(--jp-shadow-penumbra-color),
    0px 3px 14px 2px var(--jp-shadow-ambient-color);
  --jp-elevation-z12: 0px 7px 8px -4px var(--jp-shadow-umbra-color),
    0px 12px 17px 2px var(--jp-shadow-penumbra-color),
    0px 5px 22px 4px var(--jp-shadow-ambient-color);
  --jp-elevation-z16: 0px 8px 10px -5px var(--jp-shadow-umbra-color),
    0px 16px 24px 2px var(--jp-shadow-penumbra-color),
    0px 6px 30px 5px var(--jp-shadow-ambient-color);
  --jp-elevation-z20: 0px 10px 13px -6px var(--jp-shadow-umbra-color),
    0px 20px 31px 3px var(--jp-shadow-penumbra-color),
    0px 8px 38px 7px var(--jp-shadow-ambient-color);
  --jp-elevation-z24: 0px 11px 15px -7px var(--jp-shadow-umbra-color),
    0px 24px 38px 3px var(--jp-shadow-penumbra-color),
    0px 9px 46px 8px var(--jp-shadow-ambient-color);

  /* Borders
   *
   * The following variables, specify the visual styling of borders in JupyterLab.
   */

  --jp-border-width: 1px;
  --jp-border-color0: var(--md-grey-400);
  --jp-border-color1: var(--md-grey-400);
  --jp-border-color2: var(--md-grey-300);
  --jp-border-color3: var(--md-grey-200);
  --jp-border-radius: 2px;

  /* UI Fonts
   *
   * The UI font CSS variables are used for the typography all of the JupyterLab
   * user interface elements that are not directly user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-ui-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-ui-font-scale-factor: 1.2;
  --jp-ui-font-size0: 0.83333em;
  --jp-ui-font-size1: 13px; /* Base font size */
  --jp-ui-font-size2: 1.2em;
  --jp-ui-font-size3: 1.44em;

  --jp-ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,
    Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';

  /*
   * Use these font colors against the corresponding main layout colors.
   * In a light theme, these go from dark to light.
   */

  /* Defaults use Material Design specification */
  --jp-ui-font-color0: rgba(0, 0, 0, 1);
  --jp-ui-font-color1: rgba(0, 0, 0, 0.87);
  --jp-ui-font-color2: rgba(0, 0, 0, 0.54);
  --jp-ui-font-color3: rgba(0, 0, 0, 0.38);

  /*
   * Use these against the brand/accent/warn/error colors.
   * These will typically go from light to darker, in both a dark and light theme.
   */

  --jp-ui-inverse-font-color0: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color1: rgba(255, 255, 255, 1);
  --jp-ui-inverse-font-color2: rgba(255, 255, 255, 0.7);
  --jp-ui-inverse-font-color3: rgba(255, 255, 255, 0.5);

  /* Content Fonts
   *
   * Content font variables are used for typography of user generated content.
   *
   * The font sizing here is done assuming that the body font size of --jp-content-font-size1
   * is applied to a parent element. When children elements, such as headings, are sized
   * in em all things will be computed relative to that body size.
   */

  --jp-content-line-height: 1.6;
  --jp-content-font-scale-factor: 1.2;
  --jp-content-font-size0: 0.83333em;
  --jp-content-font-size1: 14px; /* Base font size */
  --jp-content-font-size2: 1.2em;
  --jp-content-font-size3: 1.44em;
  --jp-content-font-size4: 1.728em;
  --jp-content-font-size5: 2.0736em;

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-content-presentation-font-size1: 17px;

  --jp-content-heading-line-height: 1;
  --jp-content-heading-margin-top: 1.2em;
  --jp-content-heading-margin-bottom: 0.8em;
  --jp-content-heading-font-weight: 500;

  /* Defaults use Material Design specification */
  --jp-content-font-color0: rgba(0, 0, 0, 1);
  --jp-content-font-color1: rgba(0, 0, 0, 0.87);
  --jp-content-font-color2: rgba(0, 0, 0, 0.54);
  --jp-content-font-color3: rgba(0, 0, 0, 0.38);

  --jp-content-link-color: var(--md-blue-700);

  --jp-content-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI',
    Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
    'Segoe UI Symbol';

  /*
   * Code Fonts
   *
   * Code font variables are used for typography of code and other monospaces content.
   */

  --jp-code-font-size: 13px;
  --jp-code-line-height: 1.3077; /* 17px for 13px base */
  --jp-code-padding: 5px; /* 5px for 13px base, codemirror highlighting needs integer px value */
  --jp-code-font-family-default: Menlo, Consolas, 'DejaVu Sans Mono', monospace;
  --jp-code-font-family: var(--jp-code-font-family-default);

  /* This gives a magnification of about 125% in presentation mode over normal. */
  --jp-code-presentation-font-size: 16px;

  /* may need to tweak cursor width if you change font size */
  --jp-code-cursor-width0: 1.4px;
  --jp-code-cursor-width1: 2px;
  --jp-code-cursor-width2: 4px;

  /* Layout
   *
   * The following are the main layout colors use in JupyterLab. In a light
   * theme these would go from light to dark.
   */

  --jp-layout-color0: white;
  --jp-layout-color1: white;
  --jp-layout-color2: var(--md-grey-200);
  --jp-layout-color3: var(--md-grey-400);
  --jp-layout-color4: var(--md-grey-600);

  /* Inverse Layout
   *
   * The following are the inverse layout colors use in JupyterLab. In a light
   * theme these would go from dark to light.
   */

  --jp-inverse-layout-color0: #111111;
  --jp-inverse-layout-color1: var(--md-grey-900);
  --jp-inverse-layout-color2: var(--md-grey-800);
  --jp-inverse-layout-color3: var(--md-grey-700);
  --jp-inverse-layout-color4: var(--md-grey-600);

  /* Brand/accent */

  --jp-brand-color0: var(--md-blue-900);
  --jp-brand-color1: var(--md-blue-700);
  --jp-brand-color2: var(--md-blue-300);
  --jp-brand-color3: var(--md-blue-100);
  --jp-brand-color4: var(--md-blue-50);

  --jp-accent-color0: var(--md-green-900);
  --jp-accent-color1: var(--md-green-700);
  --jp-accent-color2: var(--md-green-300);
  --jp-accent-color3: var(--md-green-100);

  /* State colors (warn, error, success, info) */

  --jp-warn-color0: var(--md-orange-900);
  --jp-warn-color1: var(--md-orange-700);
  --jp-warn-color2: var(--md-orange-300);
  --jp-warn-color3: var(--md-orange-100);

  --jp-error-color0: var(--md-red-900);
  --jp-error-color1: var(--md-red-700);
  --jp-error-color2: var(--md-red-300);
  --jp-error-color3: var(--md-red-100);

  --jp-success-color0: var(--md-green-900);
  --jp-success-color1: var(--md-green-700);
  --jp-success-color2: var(--md-green-300);
  --jp-success-color3: var(--md-green-100);

  --jp-info-color0: var(--md-cyan-900);
  --jp-info-color1: var(--md-cyan-700);
  --jp-info-color2: var(--md-cyan-300);
  --jp-info-color3: var(--md-cyan-100);

  /* Cell specific styles */

  --jp-cell-padding: 5px;

  --jp-cell-collapser-width: 8px;
  --jp-cell-collapser-min-height: 20px;
  --jp-cell-collapser-not-active-hover-opacity: 0.6;

  --jp-cell-editor-background: var(--md-grey-100);
  --jp-cell-editor-border-color: var(--md-grey-300);
  --jp-cell-editor-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-cell-editor-active-background: var(--jp-layout-color0);
  --jp-cell-editor-active-border-color: var(--jp-brand-color1);

  --jp-cell-prompt-width: 64px;
  --jp-cell-prompt-font-family: var(--jp-code-font-family-default);
  --jp-cell-prompt-letter-spacing: 0px;
  --jp-cell-prompt-opacity: 1;
  --jp-cell-prompt-not-active-opacity: 0.5;
  --jp-cell-prompt-not-active-font-color: var(--md-grey-700);
  /* A custom blend of MD grey and blue 600
   * See https://meyerweb.com/eric/tools/color-blend/#546E7A:1E88E5:5:hex */
  --jp-cell-inprompt-font-color: #307fc1;
  /* A custom blend of MD grey and orange 600
   * https://meyerweb.com/eric/tools/color-blend/#546E7A:F4511E:5:hex */
  --jp-cell-outprompt-font-color: #bf5b3d;

  /* Notebook specific styles */

  --jp-notebook-padding: 10px;
  --jp-notebook-select-background: var(--jp-layout-color1);
  --jp-notebook-multiselected-color: var(--md-blue-50);

  /* The scroll padding is calculated to fill enough space at the bottom of the
  notebook to show one single-line cell (with appropriate padding) at the top
  when the notebook is scrolled all the way to the bottom. We also subtract one
  pixel so that no scrollbar appears if we have just one single-line cell in the
  notebook. This padding is to enable a 'scroll past end' feature in a notebook.
  */
  --jp-notebook-scroll-padding: calc(
    100% - var(--jp-code-font-size) * var(--jp-code-line-height) -
      var(--jp-code-padding) - var(--jp-cell-padding) - 1px
  );

  /* Rendermime styles */

  --jp-rendermime-error-background: #fdd;
  --jp-rendermime-table-row-background: var(--md-grey-100);
  --jp-rendermime-table-row-hover-background: var(--md-light-blue-50);

  /* Dialog specific styles */

  --jp-dialog-background: rgba(0, 0, 0, 0.25);

  /* Console specific styles */

  --jp-console-padding: 10px;

  /* Toolbar specific styles */

  --jp-toolbar-border-color: var(--jp-border-color1);
  --jp-toolbar-micro-height: 8px;
  --jp-toolbar-background: var(--jp-layout-color1);
  --jp-toolbar-box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.24);
  --jp-toolbar-header-margin: 4px 4px 0px 4px;
  --jp-toolbar-active-background: var(--md-grey-300);

  /* Statusbar specific styles */

  --jp-statusbar-height: 24px;

  /* Input field styles */

  --jp-input-box-shadow: inset 0 0 2px var(--md-blue-300);
  --jp-input-active-background: var(--jp-layout-color1);
  --jp-input-hover-background: var(--jp-layout-color1);
  --jp-input-background: var(--md-grey-100);
  --jp-input-border-color: var(--jp-border-color1);
  --jp-input-active-border-color: var(--jp-brand-color1);
  --jp-input-active-box-shadow-color: rgba(19, 124, 189, 0.3);

  /* General editor styles */

  --jp-editor-selected-background: #d9d9d9;
  --jp-editor-selected-focused-background: #d7d4f0;
  --jp-editor-cursor-color: var(--jp-ui-font-color0);

  /* Code mirror specific styles */

  --jp-mirror-editor-keyword-color: #008000;
  --jp-mirror-editor-atom-color: #88f;
  --jp-mirror-editor-number-color: #080;
  --jp-mirror-editor-def-color: #00f;
  --jp-mirror-editor-variable-color: var(--md-grey-900);
  --jp-mirror-editor-variable-2-color: #05a;
  --jp-mirror-editor-variable-3-color: #085;
  --jp-mirror-editor-punctuation-color: #05a;
  --jp-mirror-editor-property-color: #05a;
  --jp-mirror-editor-operator-color: #aa22ff;
  --jp-mirror-editor-comment-color: #408080;
  --jp-mirror-editor-string-color: #ba2121;
  --jp-mirror-editor-string-2-color: #708;
  --jp-mirror-editor-meta-color: #aa22ff;
  --jp-mirror-editor-qualifier-color: #555;
  --jp-mirror-editor-builtin-color: #008000;
  --jp-mirror-editor-bracket-color: #997;
  --jp-mirror-editor-tag-color: #170;
  --jp-mirror-editor-attribute-color: #00c;
  --jp-mirror-editor-header-color: blue;
  --jp-mirror-editor-quote-color: #090;
  --jp-mirror-editor-link-color: #00c;
  --jp-mirror-editor-error-color: #f00;
  --jp-mirror-editor-hr-color: #999;

  /* Vega extension styles */

  --jp-vega-background: white;

  /* Sidebar-related styles */

  --jp-sidebar-min-width: 250px;

  /* Search-related styles */

  --jp-search-toggle-off-opacity: 0.5;
  --jp-search-toggle-hover-opacity: 0.8;
  --jp-search-toggle-on-opacity: 1;
  --jp-search-selected-match-background-color: rgb(245, 200, 0);
  --jp-search-selected-match-color: black;
  --jp-search-unselected-match-background-color: var(
    --jp-inverse-layout-color0
  );
  --jp-search-unselected-match-color: var(--jp-ui-inverse-font-color0);

  /* Icon colors that work well with light or dark backgrounds */
  --jp-icon-contrast-color0: var(--md-purple-600);
  --jp-icon-contrast-color1: var(--md-green-600);
  --jp-icon-contrast-color2: var(--md-pink-600);
  --jp-icon-contrast-color3: var(--md-blue-600);
}
</style>

<style type="text/css">
/* Force rendering true colors when outputing to pdf */
* {
  -webkit-print-color-adjust: exact;
}

/* Misc */
a.anchor-link {
  display: none;
}

.highlight  {
  margin: 0.4em;
}

/* Input area styling */
.jp-InputArea {
  overflow: hidden;
}

.jp-InputArea-editor {
  overflow: hidden;
}

.CodeMirror pre {
  margin: 0;
  padding: 0;
}

/* Using table instead of flexbox so that we can use break-inside property */
/* CSS rules under this comment should not be required anymore after we move to the JupyterLab 4.0 CSS */


.jp-CodeCell.jp-mod-outputsScrolled .jp-OutputArea-prompt {
  min-width: calc(
    var(--jp-cell-prompt-width) - var(--jp-private-cell-scrolling-output-offset)
  );
}

.jp-OutputArea-child {
  display: table;
  width: 100%;
}

.jp-OutputPrompt {
  display: table-cell;
  vertical-align: top;
  min-width: var(--jp-cell-prompt-width);
}

body[data-format='mobile'] .jp-OutputPrompt {
  display: table-row;
}

.jp-OutputArea-output {
  display: table-cell;
  width: 100%;
}

body[data-format='mobile'] .jp-OutputArea-child .jp-OutputArea-output {
  display: table-row;
}

.jp-OutputArea-output.jp-OutputArea-executeResult {
  width: 100%;
}

/* Hiding the collapser by default */
.jp-Collapser {
  display: none;
}

@media print {
  .jp-Cell-inputWrapper,
  .jp-Cell-outputWrapper {
    display: block;
  }

  .jp-OutputArea-child {
    break-inside: avoid-page;
  }
}
</style>

<!-- Load mathjax -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML-full,Safe"> </script>
    <!-- MathJax configuration -->
    <script type="text/x-mathjax-config">
    init_mathjax = function() {
        if (window.MathJax) {
        // MathJax loaded
            MathJax.Hub.Config({
                TeX: {
                    equationNumbers: {
                    autoNumber: "AMS",
                    useLabelIds: true
                    }
                },
                tex2jax: {
                    inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                    displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                    processEscapes: true,
                    processEnvironments: true
                },
                displayAlign: 'center',
                CommonHTML: {
                    linebreaks: {
                    automatic: true
                    }
                }
            });

            MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
        }
    }
    init_mathjax();
    </script>
    <!-- End of mathjax configuration --></head>
<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
<div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[49]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pdfminer</span><span class="o">.</span><span class="n">six</span>
</pre></div>

     </div>
</div>
</div>
</div>

<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt"></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain">
<pre>Requirement already satisfied: pdfminer.six in c:\users\student\anaconda3\lib\site-packages (20240706)
Requirement already satisfied: charset-normalizer&gt;=2.0.0 in c:\users\student\anaconda3\lib\site-packages (from pdfminer.six) (2.0.4)
Requirement already satisfied: cryptography&gt;=36.0.0 in c:\users\student\anaconda3\lib\site-packages (from pdfminer.six) (41.0.3)
Requirement already satisfied: cffi&gt;=1.12 in c:\users\student\anaconda3\lib\site-packages (from cryptography&gt;=36.0.0-&gt;pdfminer.six) (1.15.1)
Requirement already satisfied: pycparser in c:\users\student\anaconda3\lib\site-packages (from cffi&gt;=1.12-&gt;cryptography&gt;=36.0.0-&gt;pdfminer.six) (2.21)
Note: you may need to restart the kernel to use updated packages.
</pre>
</div>
</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[50]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">nltk</span>
</pre></div>

     </div>
</div>
</div>
</div>

<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt"></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain">
<pre>Requirement already satisfied: nltk in c:\users\student\anaconda3\lib\site-packages (3.8.1)
Requirement already satisfied: click in c:\users\student\anaconda3\lib\site-packages (from nltk) (8.0.4)
Requirement already satisfied: joblib in c:\users\student\anaconda3\lib\site-packages (from nltk) (1.2.0)
Requirement already satisfied: regex&gt;=2021.8.3 in c:\users\student\anaconda3\lib\site-packages (from nltk) (2022.7.9)
Requirement already satisfied: tqdm in c:\users\student\anaconda3\lib\site-packages (from nltk) (4.65.0)
Requirement already satisfied: colorama in c:\users\student\anaconda3\lib\site-packages (from click-&gt;nltk) (0.4.6)
Note: you may need to restart the kernel to use updated packages.
</pre>
</div>
</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[51]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pdfminer.high_level</span> <span class="kn">import</span> <span class="n">extract_text</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[52]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.tokenize</span> <span class="kn">import</span> <span class="n">RegexpTokenizer</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[53]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.probability</span> <span class="kn">import</span> <span class="n">FreqDist</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[54]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Extract the text from PDF file</span>
<span class="n">text</span><span class="o">=</span><span class="n">extract_text</span><span class="p">(</span><span class="s1">'Python for Data Analysis. Data Wrangling with Pandas, NumPy, and IPython (2017, OReilly).pdf'</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[55]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt"></div>


<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain">
<pre>SECOND EDITION

Python for Data Analysis
Data Wrangling with Pandas, NumPy,
and IPython

Wes McKinney

Python for Data Analysis
by Wes McKinney

Copyright  2018 William McKinney

Printed in the United States of America

October 2012:
October 2017:

 First Edition
 Second Edition

Revision History for the Second Edition
2017-09-25:  First Release

http://oreilly.com/catalog/errata.csp?isbn=9781491957660

978-1-491-95766-0

[LSI]

Contents

Preface. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   xi

1. Preliminaries. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   1
1.1 What Is This Book About?                                                                                          1
What Kinds of Data?                                                                                                      1
1.2 Why Python for Data Analysis?                                                                                 2
Python as Glue                                                                                                                2
Solving the Two-Language Problem                                                                         3
Why Not Python?                                                                                                           3
1.3 Essential Python Libraries                                                                                           4
NumPy                                                                                                                              4
pandas                                                                                                                               4
matplotlib                                                                                                                         5
IPython and Jupyter                                                                                                       6
SciPy                                                                                                                                  6
scikit-learn                                                                                                                       7
statsmodels                                                                                                                       8
1.4 Installation and Setup                                                                                                  8
Windows                                                                                                                          9
Apple (OS X, macOS)                                                                                                     9
GNU/Linux                                                                                                                      9
Installing or Updating Python Packages                                                                   10
Python 2 and Python 3                                                                                                 11
Integrated Development Environments (IDEs) and Text Editors                         11
1.5 Community and Conferences                                                                                  12
1.6 Navigating This Book                                                                                                12
Code Examples                                                                                                              13
Data for Examples                                                                                                         13

Import Conventions                                                                                                     14
Jargon                                                                                                                              14

2. Python Language Basics, IPython, and Jupyter Notebooks. . . . . . . . . . . . . . . . . . . . . . . .  15
2.1 The Python Interpreter                                                                                             16
2.2 IPython Basics                                                                                                            17
Running the IPython Shell                                                                                          17
Running the Jupyter Notebook                                                                                   18
Tab Completion                                                                                                             21
Introspection                                                                                                                 23
The %run Command                                                                                                   25
Executing Code from the Clipboard                                                                          26
Terminal Keyboard Shortcuts                                                                                     27
About Magic Commands                                                                                             28
Matplotlib Integration                                                                                                  29
2.3 Python Language Basics                                                                                            30
Language Semantics                                                                                                     30
Scalar Types                                                                                                                   38
Control Flow                                                                                                                  46

3. Built-in Data Structures, Functions, and Files. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   51
3.1 Data Structures and Sequences                                                                                51
Tuple                                                                                                                               51
List                                                                                                                                   54
Built-in Sequence Functions                                                                                       59
dict                                                                                                                                  61
set                                                                                                                                    65
List, Set, and Dict Comprehensions                                                                           67
3.2 Functions                                                                                                                     69
Namespaces, Scope, and Local Functions                                                                 70
Returning Multiple Values                                                                                           71
Functions Are Objects                                                                                                  72
Anonymous (Lambda) Functions                                                                              73
Currying: Partial Argument Application                                                                  74
Generators                                                                                                                      75
Errors and Exception Handling                                                                                  77
3.3 Files and the Operating System                                                                                80
Bytes and Unicode with Files                                                                                      83
3.4 Conclusion                                                                                                                  84

4. NumPy Basics: Arrays and Vectorized Computation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   85
4.1 The NumPy ndarray: A Multidimensional Array Object                                     87

Creating ndarrays                                                                                                         88
Data Types for ndarrays                                                                                               90
Arithmetic with NumPy Arrays                                                                                  93
Basic Indexing and Slicing                                                                                           94
Boolean Indexing                                                                                                          99
Fancy Indexing                                                                                                            102
Transposing Arrays and Swapping Axes                                                                 103
4.2 Universal Functions: Fast Element-Wise Array Functions                                105
4.3 Array-Oriented Programming with Arrays                                                         108
Expressing Conditional Logic as Array Operations                                              109
Mathematical and Statistical Methods                                                                     111
Methods for Boolean Arrays                                                                                     113
Sorting                                                                                                                          113
Unique and Other Set Logic                                                                                      114
4.4 File Input and Output with Arrays                                                                        115
4.5 Linear Algebra                                                                                                          116
4.6 Pseudorandom Number Generation                                                                     118
4.7 Example: Random Walks                                                                                        119
Simulating Many Random Walks at Once                                                              121
4.8 Conclusion                                                                                                                122

5. Getting Started with pandas. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   123
5.1 Introduction to pandas Data Structures                                                               124
Series                                                                                                                             124
DataFrame                                                                                                                   128
Index Objects                                                                                                               134
5.2 Essential Functionality                                                                                            136
Reindexing                                                                                                                   136
Dropping Entries from an Axis                                                                                138
Indexing, Selection, and Filtering                                                                            140
Integer Indexes                                                                                                            145
Arithmetic and Data Alignment                                                                               146
Function Application and Mapping                                                                         151
Sorting and Ranking                                                                                                  153
Axis Indexes with Duplicate Labels                                                                         157
5.3 Summarizing and Computing Descriptive Statistics                                          158
Correlation and Covariance                                                                                      160
Unique Values, Value Counts, and Membership                                                    162
5.4 Conclusion                                                                                                                165

6. Data Loading, Storage, and File Formats. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  167
6.1 Reading and Writing Data in Text Format                                                           167

Reading Text Files in Pieces                                                                                      173
Writing Data to Text Format                                                                                     175
Working with Delimited Formats                                                                            176
JSON Data                                                                                                                    178
XML and HTML: Web Scraping                                                                              180
6.2 Binary Data Formats                                                                                                183
Using HDF5 Format                                                                                                   184
Reading Microsoft Excel Files                                                                                   186
6.3 Interacting with Web APIs                                                                                      187
6.4 Interacting with Databases                                                                                     188
6.5 Conclusion                                                                                                                190

7. Data Cleaning and Preparation. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   191
7.1 Handling Missing Data                                                                                           191
Filtering Out Missing Data                                                                                        193
Filling In Missing Data                                                                                              195
7.2 Data Transformation                                                                                               197
Removing Duplicates                                                                                                 197
Transforming Data Using a Function or Mapping                                                198
Replacing Values                                                                                                         200
Renaming Axis Indexes                                                                                             201
Discretization and Binning                                                                                       203
Detecting and Filtering Outliers                                                                               205
Permutation and Random Sampling                                                                       206
Computing Indicator/Dummy Variables                                                                208
7.3 String Manipulation                                                                                                 211
String Object Methods                                                                                               211
Regular Expressions                                                                                                   213
Vectorized String Functions in pandas                                                                    216
7.4 Conclusion                                                                                                                219

8. Data Wrangling: Join, Combine, and Reshape. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

 221
8.1 Hierarchical Indexing                                                                                              221
Reordering and Sorting Levels                                                                                  224
Summary Statistics by Level                                                                                      225
Indexing with a DataFrames columns                                                                     225
8.2 Combining and Merging Datasets                                                                         227
Database-Style DataFrame Joins                                                                              227
Merging on Index                                                                                                       232
Concatenating Along an Axis                                                                                   236
Combining Data with Overlap                                                                                 241
8.3 Reshaping and Pivoting                                                                                          242

Reshaping with Hierarchical Indexing                                                                    243
Pivoting Long to Wide Format                                                                          246
Pivoting Wide to Long Format                                                                          249
8.4 Conclusion                                                                                                                251

9. Plotting and Visualization. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   253
9.1 A Brief matplotlib API Primer                                                                               253
Figures and Subplots                                                                                                  255
Colors, Markers, and Line Styles                                                                              259
Ticks, Labels, and Legends                                                                                        261
Annotations and Drawing on a Subplot                                                                  265
Saving Plots to File                                                                                                      267
matplotlib Configuration                                                                                           268
9.2 Plotting with pandas and seaborn                                                                         268
Line Plots                                                                                                                     269
Bar Plots                                                                                                                       272
Histograms and Density Plots                                                                                  277
Scatter or Point Plots                                                                                                  280
Facet Grids and Categorical Data                                                                             283
9.3 Other Python Visualization Tools                                                                         285
9.4 Conclusion                                                                                                                286

10. Data Aggregation and Group Operations. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  287
10.1 GroupBy Mechanics                                                                                              288
Iterating Over Groups                                                                                                291
Selecting a Column or Subset of Columns                                                              293
Grouping with Dicts and Series                                                                                294
Grouping with Functions                                                                                          295
Grouping by Index Levels                                                                                         295
10.2 Data Aggregation                                                                                                   296
Column-Wise and Multiple Function Application                                                298
Returning Aggregated Data Without Row Indexes                                               301
10.3 Apply: General split-apply-combine                                                                   302
Suppressing the Group Keys                                                                                     304
Quantile and Bucket Analysis                                                                                   305
Example: Filling Missing Values with Group-Specific Values                             306
Example: Random Sampling and Permutation                                                      308
Example: Group Weighted Average and Correlation                                            310
Example: Group-Wise Linear Regression                                                               312
10.4 Pivot Tables and Cross-Tabulation                                                                      313
Cross-Tabulations: Crosstab                                                                                     315
10.5 Conclusion                                                                                                              316

11. Time Series. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   317
11.1 Date and Time Data Types and Tools                                                                 318
Converting Between String and Datetime                                                              319
11.2 Time Series Basics                                                                                                  322
Indexing, Selection, Subsetting                                                                                 323
Time Series with Duplicate Indices                                                                          326
11.3 Date Ranges, Frequencies, and Shifting                                                              327
Generating Date Ranges                                                                                            328
Frequencies and Date Offsets                                                                                    330
Shifting (Leading and Lagging) Data                                                                       332
11.4 Time Zone Handling                                                                                             335
Time Zone Localization and Conversion                                                                335
Operations with Time ZoneAware Timestamp Objects                                     338
Operations Between Different Time Zones                                                            339
11.5 Periods and Period Arithmetic                                                                            339
Period Frequency Conversion                                                                                  340
Quarterly Period Frequencies                                                                                   342
Converting Timestamps to Periods (and Back)                                                     344
Creating a PeriodIndex from Arrays                                                                       345
11.6 Resampling and Frequency Conversion                                                             348
Downsampling                                                                                                            349
Upsampling and Interpolation                                                                                  352
Resampling with Periods                                                                                           353
11.7 Moving Window Functions                                                                                  354
Exponentially Weighted Functions                                                                          358
Binary Moving Window Functions                                                                          359
User-Defined Moving Window Functions                                                              361
11.8 Conclusion                                                                                                              362

12. Advanced pandas. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 

 363
12.1 Categorical Data                                                                                                     363
Background and Motivation                                                                                     363
Categorical Type in pandas                                                                                       365
Computations with Categoricals                                                                              367
Categorical Methods                                                                                                  370
12.2 Advanced GroupBy Use                                                                                        373
Group Transforms and Unwrapped GroupBys                                                  373
Grouped Time Resampling                                                                                       377
12.3 Techniques for Method Chaining                                                                        378
The pipe Method                                                                                                         380
12.4 Conclusion                                                                                                              381

13.

Introduction to Modeling Libraries in Python. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   383
13.1 Interfacing Between pandas and Model Code                                                   383
13.2 Creating Model Descriptions with Patsy                                                            386
Data Transformations in Patsy Formulas                                                                389
Categorical Data and Patsy                                                                                        390
13.3 Introduction to statsmodels                                                                                 393
Estimating Linear Models                                                                                          393
Estimating Time Series Processes                                                                             396
13.4 Introduction to scikit-learn                                                                                  397
13.5 Continuing Your Education                                                                                 401

14. Data Analysis Examples. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   403
14.1 1.USA.gov Data from Bitly                                                                                   403
Counting Time Zones in Pure Python                                                                    404
Counting Time Zones with pandas                                                                          406
14.2 MovieLens 1M Dataset                                                                                          413
Measuring Rating Disagreement                                                                              418
14.3 US Baby Names 18802010                                                                                  419
Analyzing Naming Trends                                                                                        425
14.4 USDA Food Database                                                                                            434
14.5 2012 Federal Election Commission Database                                                    440
Donation Statistics by Occupation and Employer                                                 442
Bucketing Donation Amounts                                                                                  445
Donation Statistics by State                                                                                       447
14.6 Conclusion                                                                                                              448

A. Advanced NumPy. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   449
A.1 ndarray Object Internals                                                                                       449
NumPy dtype Hierarchy                                                                                           450
A.2 Advanced Array Manipulation                                                                            451
Reshaping Arrays                                                                                                       452
C Versus Fortran Order                                                                                            454
Concatenating and Splitting Arrays                                                                        454
Repeating Elements: tile and repeat                                                                        457
Fancy Indexing Equivalents: take and put                                                             459
A.3 Broadcasting                                                                                                           460
Broadcasting Over Other Axes                                                                                462
Setting Array Values by Broadcasting                                                                    465
A.4 Advanced ufunc Usage                                                                                          466
ufunc Instance Methods                                                                                           466
Writing New ufuncs in Python                                                                                468
A.5 Structured and Record Arrays                                                                             469

Nested dtypes and Multidimensional Fields                                                         469
Why Use Structured Arrays?                                                                                    470
A.6 More About Sorting                                                                                               471
Indirect Sorts: argsort and lexsort                                                                           472
Alternative Sort Algorithms                                                                                     474
Partially Sorting Arrays                                                                                            474
numpy.searchsorted: Finding Elements in a Sorted Array                                  475
A.7 Writing Fast NumPy Functions with Numba                                                    476
Creating Custom numpy.ufunc Objects with Numba                                          478
A.8 Advanced Array Input and Output                                                                     478
Memory-Mapped Files                                                                                             478
HDF5 and Other Array Storage Options                                                               480
A.9 Performance Tips                                                                                                   480
The Importance of Contiguous Memory                                                               480

B. More on the IPython System. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   483
B.1 Using the Command History                                                                               483
Searching and Reusing the Command History                                                    483
Input and Output Variables                                                                                     484
B.2 Interacting with the Operating System                                                               485
Shell Commands and Aliases                                                                                   486
Directory Bookmark System                                                                                   487
B.3 Software Development Tools                                                                                487
Interactive Debugger                                                                                                 488
Timing Code: %time and %timeit                                                                           492
Basic Profiling: %prun and %run -p                                                                       494
Profiling a Function Line by Line                                                                           496
B.4 Tips for Productive Code Development Using IPython                                   498
Reloading Module Dependencies                                                                           498
Code Design Tips                                                                                                      499
B.5 Advanced IPython Features                                                                                  500
Making Your Own Classes IPython-Friendly                                                       500
Profiles and Configuration                                                                                       501
B.6 Conclusion                                                                                                               503

Index. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   505

Preface

New for the Second Edition
The first edition of this book was published in 2012, during a time when open source
data analysis libraries for Python (such as pandas) were very new and developing rap
idly. In this updated and expanded second edition, I have overhauled the chapters to
account both for incompatible changes and deprecations as well as new features that
have occurred in the last five years. Ive also added fresh content to introduce tools
that  either  did  not  exist  in  2012  or  had  not  matured  enough  to  make  the  first  cut.
Finally, I have tried to avoid writing about new or cutting-edge open source projects
that may not have had a chance to mature. I would like readers of this edition to find
that the content is still almost as relevant in 2020 or 2021 as it is in 2017.

The major updates in this second edition include:

 All code, including the Python tutorial, updated for Python 3.6 (the first edition

used Python 2.7)

 Updated Python installation instructions for the Anaconda Python Distribution

and other needed Python packages

 Updates for the latest versions of the pandas library in 2017

 A new chapter on some more advanced pandas tools, and some other usage tips

 A brief introduction to using statsmodels and scikit-learn

I also reorganized a significant portion of the content from the first edition to make
the book more accessible to newcomers.

Conventions Used in This Book
The following typographical conventions are used in this book:

Italic

Indicates new terms, URLs, email addresses, filenames, and file extensions.

Constant width

Used for program listings, as well as within paragraphs to refer to program ele
ments  such  as  variable  or  function  names,  databases,  data  types,  environment
variables, statements, and keywords.

Constant width bold

Shows commands or other text that should be typed literally by the user.

Constant width italic

Shows text that should be replaced with user-supplied values or by values deter
mined by context.

This element signifies a tip or suggestion.

This element signifies a general note.

This element indicates a warning or caution.

Using Code Examples
You can find data files and related material for each chapter is available in this books
GitHub repository at http://github.com/wesm/pydata-book.

This book is here to help you get your job done. In general, if example code is offered
with  this  book,  you  may  use  it  in  your  programs  and  documentation.  You  do  not
need to contact us for permission unless youre reproducing a significant portion of
the code. For example, writing a program that uses several chunks of code from this

book  does  not  require  permission.  Selling  or  distributing  a  CD-ROM  of  examples
from  OReilly  books  does  require  permission.  Answering  a  question  by  citing  this
book and quoting example code does not require permission. Incorporating a signifi
cant amount of example code from this book into your products documentation does
require permission.

We  appreciate,  but  do  not  require,  attribution.  An  attribution  usually  includes  the
title,  author,  publisher,  and  ISBN.  For  example:  Python  for  Data  Analysis  by  Wes
McKinney (OReilly). Copyright 2017 Wes McKinney, 978-1-491-95766-0.

If  you  feel  your  use  of  code  examples  falls  outside  fair  use  or  the  permission  given
above, feel free to contact us at permissions@oreilly.com.

CHAPTER 1
Preliminaries

1.1 What Is This Book About?
This book is concerned with the nuts and bolts of manipulating, processing, cleaning,
and crunching data in Python. My goal is to offer a guide to the parts of the Python
programming  language  and  its  data-oriented  library  ecosystem  and  tools  that  will
equip you to become an effective data analyst. While data analysis is in the title of
the  book,  the  focus  is  specifically  on  Python  programming,  libraries,  and  tools  as
opposed to data analysis methodology. This is the Python programming you need for
data analysis.

What Kinds of Data?
When I say data, what am I referring to exactly? The primary focus is on structured
data,  a  deliberately  vague  term  that  encompasses  many  different  common  forms  of
data, such as:

 Tabular  or  spreadsheet-like  data  in  which  each  column  may  be  a  different  type
(string, numeric, date, or otherwise). This includes most kinds of data commonly
stored in relational databases or tab- or comma-delimited text files.

 Multidimensional arrays (matrices).

 Multiple  tables  of  data  interrelated  by  key  columns  (what  would  be  primary  or

foreign keys for a SQL user).

 Evenly or unevenly spaced time series.

This is by no means a complete list. Even though it may not always be obvious, a large
percentage of datasets can be transformed into a structured form that is more suitable
for analysis and modeling. If not, it may be possible to extract features from a dataset

1

into  a  structured  form.  As  an  example,  a  collection  of  news  articles  could  be  pro
cessed into a word frequency table, which could then be used to perform sentiment
analysis.

Most  users  of  spreadsheet  programs  like  Microsoft  Excel,  perhaps  the  most  widely
used data analysis tool in the world, will not be strangers to these kinds of data.

1.2 Why Python for Data Analysis?
For many people, the Python programming language has strong appeal. Since its first
appearance  in  1991,  Python  has  become  one  of  the  most  popular  interpreted  pro
gramming  languages,  along  with  Perl,  Ruby,  and  others.  Python  and  Ruby  have
become especially popular since 2005 or so for building websites using their numer
ous  web  frameworks,  like  Rails  (Ruby)  and  Django  (Python).  Such  languages  are
often called scripting languages, as they can be used to quickly write small programs,
or scripts to automate other tasks. I dont like the term scripting language, as it car
ries  a  connotation  that  they  cannot  be  used  for  building  serious  software.  Among 
interpreted languages, for various historical and cultural reasons, Python has devel
oped a large and active scientific computing and data analysis community. In the last
10 years, Python has gone from a bleeding-edge or at your own risk scientific com
puting  language  to  one  of  the  most  important  languages  for  data  science,  machine
learning, and general software development in academia and industry.

For data analysis and interactive computing and data visualization, Python will inevi
tably draw comparisons with other open source and commercial programming lan
guages and tools in wide use, such as R, MATLAB, SAS, Stata, and others. In recent
years,  Pythons  improved  support  for  libraries  (such  as  pandas  and  scikit-learn)  has
made  it  a  popular  choice  for  data  analysis  tasks.  Combined  with  Pythons  overall
strength for general-purpose software engineering, it is an excellent option as a pri
mary language for building data applications.

Python as Glue
Part of Pythons success in scientific computing is the ease of integrating C, C++, and
FORTRAN code. Most modern computing environments share a similar set of legacy
FORTRAN  and  C  libraries  for  doing  linear  algebra,  optimization,  integration,  fast
Fourier  transforms,  and  other  such  algorithms.  The  same  story  has  held  true  for
many  companies  and  national  labs  that  have  used  Python  to  glue  together  decades
worth of legacy software.

Many  programs  consist  of  small  portions  of  code  where  most  of  the  time  is  spent,
with large amounts of glue code that doesnt run often. In many cases, the execution
time of the glue code is insignificant; effort is most fruitfully invested in optimizing

2 

| 

Chapter 1: Preliminaries

the  computational  bottlenecks,  sometimes  by  moving  the  code  to  a  lower-level  lan
guage like C.

Solving the Two-Language Problem
In many organizations, it is common to research, prototype, and test new ideas using
a more specialized computing language like SAS or R and then later port those ideas
to be part of a larger production system written in, say, Java, C#, or C++. What people
are  increasingly  finding  is  that  Python  is  a  suitable  language  not  only  for  doing
research  and  prototyping  but  also  for  building  the  production  systems.  Why  main
tain  two  development  environments  when  one  will  suffice?  I  believe  that  more  and
more companies will go down this path, as there are often significant organizational
benefits to having both researchers and software engineers using the same set of pro
gramming tools.

Why Not Python?
While  Python  is  an  excellent  environment  for  building  many  kinds  of  analytical
applications  and  general-purpose  systems,  there  are  a  number  of  uses  for  which
Python may be less suitable.

As Python is an interpreted programming language, in general most Python code will
run substantially slower than code written in a compiled language like Java or C++.
As programmer time is often more valuable than CPU time, many are happy to make
this  trade-off.  However,  in  an  application  with  very  low  latency  or  demanding
resource  utilization  requirements  (e.g.,  a  high-frequency  trading  system),  the  time
spent programming in a lower-level (but also lower-productivity) language like C++
to achieve the maximum possible performance might be time well spent.

Python can be a challenging language for building highly concurrent, multithreaded
applications, particularly applications with many CPU-bound threads. The reason for
this is that it has what is known as the global interpreter lock (GIL), a mechanism that
prevents the interpreter from executing more than one Python instruction at a time.
The technical reasons for why the GIL exists are beyond the scope of this book. While
it is true that in many big data processing applications, a cluster of computers may be
required to process a dataset in a reasonable amount of time, there are still situations
where a single-process, multithreaded system is desirable.

This  is  not  to  say  that  Python  cannot  execute  truly  multithreaded,  parallel  code.
Python  C  extensions  that  use  native  multithreading  (in  C  or  C++)  can  run  code  in
parallel without being impacted by the GIL, so long as they do not need to regularly
interact with Python objects.

1.2 Why Python for Data Analysis? 

| 

3

1.3 Essential Python Libraries
For those who are less familiar with the Python data ecosystem and the libraries used
throughout the book, I will give a brief overview of some of them.

NumPy
NumPy, short for Numerical Python, has long been a cornerstone of numerical com
puting in Python. It provides the data structures, algorithms, and library glue needed
for most scientific applications involving numerical data in Python. NumPy contains,
among other things:

 A fast and efficient multidimensional array object ndarray

 Functions for performing element-wise computations with arrays or mathemati

cal operations between arrays

 Tools for reading and writing array-based datasets to disk

 Linear algebra operations, Fourier transform, and random number generation

 A mature C API to enable Python extensions and native C or C++ code to access

NumPys data structures and computational facilities

Beyond the fast array-processing capabilities that NumPy adds to Python, one of its
primary  uses  in  data  analysis  is  as  a  container  for  data  to  be  passed  between  algo
rithms and libraries. For numerical data, NumPy arrays are more efficient for storing
and manipulating data than the other built-in Python data structures. Also, libraries
written in a lower-level language, such as C or Fortran, can operate on the data stored
in  a  NumPy  array  without  copying  data  into  some  other  memory  representation.
Thus, many numerical computing tools for Python either assume NumPy arrays as a
primary data structure or else target seamless interoperability with NumPy.

pandas
pandas provides high-level data structures and functions designed to make working
with structured or tabular data fast, easy, and expressive. Since its emergence in 2010,
it has helped enable Python to be a powerful and productive data analysis environ
ment. The primary objects in pandas that will be used in this book are the DataFrame,
a tabular, column-oriented data structure with both row and column labels, and the
Series, a one-dimensional labeled array object.

pandas blends the high-performance, array-computing ideas of NumPy with the flex
ible data manipulation capabilities of spreadsheets and relational databases (such as
SQL). It provides sophisticated indexing functionality to make it easy to reshape, slice
and dice, perform aggregations, and select subsets of data. Since data manipulation,

4 

| 

Chapter 1: Preliminaries

preparation, and cleaning is such an important skill in data analysis, pandas is one of
the primary focuses of this book.

As a bit of background, I started building pandas in early 2008 during my tenure at
AQR Capital Management, a quantitative investment management firm. At the time,
I had a distinct set of requirements that were not well addressed by any single tool at
my disposal:

 Data structures with labeled axes supporting automatic or explicit data alignment
this prevents common errors resulting from misaligned data and working with
differently indexed data coming from different sources

 Integrated time series functionality

 The same data structures handle both time series data and nontime series data

 Arithmetic operations and reductions that preserve metadata

 Flexible handling of missing data

 Merge  and  other  relational  operations  found  in  popular  databases  (SQL-based,

for example)

I wanted to be able to do all of these things in one place, preferably in a language well
suited  to  general-purpose  software  development.  Python  was  a  good  candidate  lan
guage for this, but at that time there was not an integrated set of data structures and
tools  providing  this  functionality.  As  a  result  of  having  been  built  initially  to  solve
finance and business analytics problems, pandas features especially deep time series
functionality and tools well suited for working with time-indexed data generated by
business processes.

For  users  of  the  R  language  for  statistical  computing,  the  DataFrame  name  will  be
familiar,  as  the  object  was  named  after  the  similar  R  data.frame  object.  Unlike
Python,  data  frames  are  built  into  the  R  programming  language  and  its  standard
library. As a result, many features found in pandas are typically either part of the R
core implementation or provided by add-on packages.

The pandas name itself is derived from panel data, an econometrics term for multidi
mensional structured datasets, and a play on the phrase Python data analysis itself.

matplotlib
matplotlib  is  the  most  popular  Python  library  for  producing  plots  and  other  two-
dimensional  data  visualizations.  It  was  originally  created  by  John  D.  Hunter  and  is
now maintained by a large team of developers. It is designed for creating plots suit
able for publication. While there are other visualization libraries available to Python
programmers, matplotlib is the most widely used and as such has generally good inte

1.3 Essential Python Libraries 

| 

5

gration with the rest of the ecosystem. I think it is a safe choice as a default visualiza
tion tool.

IPython and Jupyter
The IPython project began in 2001 as Fernando Prezs side project to make a better
interactive  Python  interpreter.  In  the  subsequent  16  years  it  has  become  one  of  the
most important tools in the modern Python data stack. While it does not provide any
computational or data analytical tools by itself, IPython is designed from the ground
up to maximize your productivity in both interactive computing and software devel
opment. It encourages an execute-explore workflow instead of the typical edit-compile-
run workflow of many other programming languages. It also provides easy access to
your  operating  systems  shell  and  filesystem.  Since  much  of  data  analysis  coding
involves exploration, trial and error, and iteration, IPython can help you get the job
done faster.

In  2014,  Fernando  and  the  IPython  team  announced  the  Jupyter  project,  a  broader
initiative to design language-agnostic interactive computing tools. The IPython web
notebook became the Jupyter notebook, with support now for over 40 programming
languages. The IPython system can now be used as a kernel (a programming language
mode) for using Python with Jupyter.

IPython  itself  has  become  a  component  of  the  much  broader  Jupyter  open  source
project,  which  provides  a  productive  environment  for  interactive  and  exploratory
computing. Its oldest and simplest mode is as an enhanced Python shell designed to
accelerate  the  writing,  testing,  and  debugging  of  Python  code.  You  can  also  use  the
IPython system through the Jupyter Notebook, an interactive web-based code note
book offering support for dozens of programming languages. The IPython shell and
Jupyter notebooks are especially useful for data exploration and visualization.

The  Jupyter  notebook  system  also  allows  you  to  author  content  in  Markdown  and
HTML, providing you a means to create rich documents with code and text. Other
programming languages have also implemented kernels for Jupyter to enable you to
use languages other than Python in Jupyter.

For me personally, IPython is usually involved with the majority of my Python work,
including running, debugging, and testing code.

In the accompanying book materials, you will find Jupyter notebooks containing all
the code examples from each chapter.

SciPy
SciPy is a collection of packages addressing a number of different standard problem
domains in scientific computing. Here is a sampling of the packages included:

6 

| 

Chapter 1: Preliminaries

scipy.integrate

Numerical integration routines and differential equation solvers

scipy.linalg

Linear algebra routines and matrix decompositions extending beyond those pro
vided in numpy.linalg

scipy.optimize

Function optimizers (minimizers) and root finding algorithms

scipy.signal

Signal processing tools

scipy.sparse

Sparse matrices and sparse linear system solvers

scipy.special

Wrapper  around  SPECFUN,  a  Fortran  library  implementing  many  common
mathematical functions, such as the gamma function

scipy.stats

Standard  continuous  and  discrete  probability  distributions  (density  functions,
samplers,  continuous  distribution  functions),  various  statistical  tests,  and  more
descriptive statistics

Together  NumPy  and  SciPy  form  a  reasonably  complete  and  mature  computational
foundation for many traditional scientific computing applications.

scikit-learn
Since  the  projects  inception  in  2010,  scikit-learn  has  become  the  premier  general-
purpose machine learning toolkit for Python programmers. In just seven years, it has
had over 1,500 contributors from around the world. It includes submodules for such
models as:

 Classification: SVM, nearest neighbors, random forest, logistic regression, etc.

 Regression: Lasso, ridge regression, etc.

 Clustering: k-means, spectral clustering, etc.

 Dimensionality reduction: PCA, feature selection, matrix factorization, etc.

 Model selection: Grid search, cross-validation, metrics

 Preprocessing: Feature extraction, normalization

Along  with  pandas,  statsmodels,  and  IPython,  scikit-learn  has  been  critical  for  ena
bling Python to be a productive data science programming language. While I wont

1.3 Essential Python Libraries 

| 

7

be  able  to  include  a  comprehensive  guide  to  scikit-learn  in  this  book,  I  will  give  a
brief  introduction  to  some  of  its  models  and  how  to  use  them  with  the  other  tools
presented in the book.

statsmodels
statsmodels  is  a  statistical  analysis  package  that  was  seeded  by  work  from  Stanford
University statistics professor Jonathan Taylor, who implemented a number of regres
sion analysis models popular in the R programming language. Skipper Seabold and
Josef  Perktold  formally  created  the  new  statsmodels  project  in  2010  and  since  then
have grown the project to a critical mass of engaged users and contributors. Nathaniel
Smith developed the Patsy project, which provides a formula or model specification
framework for statsmodels inspired by Rs formula system.

Compared with scikit-learn, statsmodels contains algorithms for classical (primarily
frequentist) statistics and econometrics. This includes such submodules as:

 Regression  models:  Linear  regression,  generalized  linear  models,  robust  linear

models, linear mixed effects models, etc.

 Analysis of variance (ANOVA)

 Time series analysis: AR, ARMA, ARIMA, VAR, and other models

 Nonparametric methods: Kernel density estimation, kernel regression

 Visualization of statistical model results

statsmodels is more focused on statistical inference, providing uncertainty estimates
and p-values for parameters. scikit-learn, by contrast, is more prediction-focused.

As with scikit-learn, I will give a brief introduction to statsmodels and how to use it
with NumPy and pandas.

1.4 Installation and Setup
Since everyone uses Python for different applications, there is no single solution for
setting up Python and required add-on packages. Many readers will not have a com
plete Python development environment suitable for following along with this book,
so here I will give detailed instructions to get set up on each operating system. I rec
ommend using the free Anaconda distribution. At the time of this writing, Anaconda
is offered in both Python 2.7 and 3.6 forms, though this might change at some point
in the future. This book uses Python 3.6, and I encourage you to use Python 3.6 or
higher.

8 

| 

Chapter 1: Preliminaries

Windows
To get started on Windows, download the Anaconda installer. I recommend follow
ing  the  installation  instructions  for  Windows  available  on  the  Anaconda  download
page, which may have changed between the time this book was published and when
you are reading this.

Now, lets verify that things are configured correctly. To open the Command Prompt
application (also known as cmd.exe), right-click the Start menu and select Command
Prompt. Try starting the Python interpreter by typing python. You should see a mes
sage that matches the version of Anaconda you installed:

C:\Users\wesm&gt;python
Python 3.5.2 |Anaconda 4.1.1 (64-bit)| (default, Jul  5 2016, 11:41:13)
[MSC v.1900 64 bit (AMD64)] on win32
&gt;&gt;&gt;

To  exit  the  shell,  press  Ctrl-D  (on  Linux  or  macOS),  Ctrl-Z  (on  Windows),  or  type
the command exit() and press Enter.

Apple (OS X, macOS)
Download  the  OS  X  Anaconda  installer,  which  should  be  named  something  like
Anaconda3-4.1.0-MacOSX-x86_64.pkg. Double-click the .pkg file to run the installer.
When  the  installer  runs,  it  automatically  appends  the  Anaconda  executable  path  to
your .bash_profile file. This is located at /Users/$USER/.bash_profile.

To verify everything is working, try launching IPython in the system shell (open the
Terminal application to get a command prompt):

$ ipython

To exit the shell, press Ctrl-D or type exit() and press Enter.

GNU/Linux
Linux details will vary a bit depending on your Linux flavor, but here I give details for
such distributions as Debian, Ubuntu, CentOS, and Fedora. Setup is similar to OS X
with  the  exception  of  how  Anaconda  is  installed.  The  installer  is  a  shell  script  that
must be executed in the terminal. Depending on whether you have a 32-bit or 64-bit
system, you will either need to install the x86 (32-bit) or x86_64 (64-bit) installer. You
will  then  have  a  file  named  something  similar  to  Anaconda3-4.1.0-Linux-x86_64.sh.
To install it, execute this script with bash:

$ bash Anaconda3-4.1.0-Linux-x86_64.sh

1.4 Installation and Setup 

| 

9

Some Linux distributions have versions of all the required Python
packages  in  their  package  managers  and  can  be  installed  using  a
tool like apt. The setup described here uses Anaconda, as its both
easily  reproducible  across  distributions  and  simpler  to  upgrade
packages to their latest versions.

After accepting the license, you will be presented with a choice of where to put the
Anaconda files. I recommend installing the files in the default location in your home
directoryfor example, /home/$USER/anaconda (with your username, naturally).

The  Anaconda  installer  may  ask  if  you  wish  to  prepend  its  bin/  directory  to  your
$PATH variable. If you have any problems after installation, you can do this yourself by
modifying your .bashrc (or .zshrc, if you are using the zsh shell) with something akin
to:

export PATH=/home/$USER/anaconda/bin:$PATH

After doing this you can either start a new terminal process or execute your .bashrc
again with source ~/.bashrc.

Installing or Updating Python Packages
At some point while reading, you may wish to install additional Python packages that
are not included in the Anaconda distribution. In general, these can be installed with
the following command:

conda install package_name

If this does not work, you may also be able to install the package using the pip pack
age management tool:

pip install package_name

You can update packages by using the conda update command:

conda update package_name

pip also supports upgrades using the --upgrade flag:

pip install --upgrade package_name

You will have several opportunities to try out these commands throughout the book.

While  you  can  use  both  conda  and  pip  to  install  packages,  you
should not attempt to update conda packages with pip, as doing so
can lead to environment problems. When using Anaconda or Min
iconda, its best to first try updating with conda.

10 

| 

Chapter 1: Preliminaries

Python 2 and Python 3
The first version of the Python 3.x line of interpreters was released at the end of 2008.
It included a number of changes that made some previously written Python 2.x code
incompatible.  Because  17  years  had  passed  since  the  very  first  release  of  Python  in
1991, creating a breaking release of Python 3 was viewed to be for the greater good
given the lessons learned during that time.

In  2012,  much  of  the  scientific  and  data  analysis  community  was  still  using  Python
2.x because many packages had not been made fully Python 3 compatible. Thus, the
first  edition  of  this  book  used  Python  2.7.  Now,  users  are  free  to  choose  between
Python 2.x and 3.x and in general have full library support with either flavor.

However, Python 2.x will reach its development end of life in 2020 (including critical
security patches), and so it is no longer a good idea to start new projects in Python
2.7.  Therefore,  this  book  uses  Python  3.6,  a  widely  deployed,  well-supported  stable
release.  We  have  begun  to  call  Python  2.x  Legacy  Python  and  Python  3.x  simply
Python. I encourage you to do the same.

This book uses Python 3.6 as its basis. Your version of Python may be newer than 3.6,
but the code examples should be forward compatible. Some code examples may work
differently or not at all in Python 2.7.

Integrated Development Environments (IDEs) and Text Editors
When asked about my standard development environment, I almost always say IPy
thon plus a text editor. I typically write a program and iteratively test and debug each
piece of it in IPython or Jupyter notebooks. It is also useful to be able to play around
with data interactively and visually verify that a particular set of data manipulations is
doing the right thing. Libraries like pandas and NumPy are designed to be easy to use
in the shell.

When  building  software,  however,  some  users  may  prefer  to  use  a  more  richly  fea
tured IDE rather than a comparatively primitive text editor like Emacs or Vim. Here
are some that you can explore:

 PyDev (free), an IDE built on the Eclipse platform

 PyCharm from JetBrains (subscription-based for commercial users, free for open

source developers)

 Python Tools for Visual Studio (for Windows users)

 Spyder (free), an IDE currently shipped with Anaconda

 Komodo IDE (commercial)

1.4 Installation and Setup 

| 

11

Due  to  the  popularity  of  Python,  most  text  editors,  like  Atom  and  Sublime  Text  2,
have excellent Python support.

1.5 Community and Conferences
Outside of an internet search, the various scientific and data-related Python mailing
lists are generally helpful and responsive to questions. Some to take a look at include:

 pydata: A Google Group list for questions related to Python for data analysis and

pandas

 pystatsmodels: For statsmodels or pandas-related questions

 Mailing  list  for  scikit-learn  (scikit-learn@python.org)  and  machine  learning  in

Python, generally

 numpy-discussion: For NumPy-related questions

 scipy-user: For general SciPy or scientific Python questions

I  deliberately  did  not  post  URLs  for  these  in  case  they  change.  They  can  be  easily
located via an internet search.

Each year many conferences are held all over the world for Python programmers. If
you would like to connect with other Python programmers who share your interests,
I encourage you to explore attending one, if possible. Many conferences have finan
cial support available for those who cannot afford admission or travel to the confer
ence. Here are some to consider:

 PyCon  and  EuroPython:  The  two  main  general  Python  conferences  in  North

America and Europe, respectively

 SciPy and EuroSciPy: Scientific-computing-oriented conferences in North Amer

ica and Europe, respectively

 PyData: A worldwide series of regional conferences targeted at data science and

data analysis use cases

 International  and  regional  PyCon  conferences  (see  http://pycon.org  for  a  com

plete listing)

1.6 Navigating This Book
If you have never programmed in Python before, you will want to spend some time in
Chapters 2 and 3, where I have placed a condensed tutorial on Python language fea
tures  and  the  IPython  shell  and  Jupyter  notebooks.  These  things  are  prerequisite

12 

| 

Chapter 1: Preliminaries

knowledge for the remainder of the book. If you have Python experience already, you
may instead choose to skim or skip these chapters.

Next,  I  give  a  short  introduction  to  the  key  features  of  NumPy,  leaving  more
advanced NumPy use for Appendix A. Then, I introduce pandas and devote the rest
of the book to data analysis topics applying pandas, NumPy, and matplotlib (for visu
alization).  I  have  structured  the  material  in  the  most  incremental  way  possible,
though there is occasionally some minor cross-over between chapters, with a few iso
lated cases where concepts are used that havent necessarily been introduced yet.

While readers may have many different end goals for their work, the tasks required
generally fall into a number of different broad groups:

Interacting with the outside world

Reading and writing with a variety of file formats and data stores

Preparation

Cleaning,  munging,  combining,  normalizing,  reshaping,  slicing  and  dicing,  and
transforming data for analysis

Transformation

Applying mathematical and statistical operations to groups of datasets to derive
new datasets (e.g., aggregating a large table by group variables)

Modeling and computation

Connecting your data to statistical models, machine learning algorithms, or other
computational tools

Presentation

Creating interactive or static graphical visualizations or textual summaries

Code Examples
Most of the code examples in the book are shown with input and output as it would
appear executed in the IPython shell or in Jupyter notebooks:

In [5]: CODE EXAMPLE
Out[5]: OUTPUT

When you see a code example like this, the intent is for you to type in the example
code in the In block in your coding environment and execute it by pressing the Enter
key (or Shift-Enter in Jupyter). You should see output similar to what is shown in the
Out block.

Data for Examples
Datasets for the examples in each chapter are hosted in a GitHub repository. You can
download this data either by using the Git version control system on the command

1.6 Navigating This Book 

| 

13

line or by downloading a zip file of the repository from the website. If you run into
problems,  navigate  to  my  website  for  up-to-date  instructions  about  obtaining  the
book materials.

I have made every effort to ensure that it contains everything necessary to reproduce
the examples, but I may have made some mistakes or omissions. If so, please send me
an email: book@wesmckinney.com. The best way to report errors in the book is on the
errata page on the OReilly website.

Import Conventions
The Python community has adopted a number of naming conventions for commonly
used modules:

import numpy as np
import matplotlib.pyplot as plt
import pandas as pd
import seaborn as sns
import statsmodels as sm

This means that when you see np.arange, this is a reference to the arange function in
NumPy. This is done because its considered bad practice in Python software develop
ment to import everything (from numpy import *) from a large package like NumPy.

Jargon
Ill use some terms common both to programming and data science that you may not
be familiar with. Thus, here are some brief definitions:

Munge/munging/wrangling

Describes  the  overall  process  of  manipulating  unstructured  and/or  messy  data
into  a  structured  or  clean  form.  The  word  has  snuck  its  way  into  the  jargon  of
many modern-day data hackers. Munge rhymes with grunge.

Pseudocode

A description of an algorithm or process that takes a code-like form while likely
not being actual valid source code.

Syntactic sugar

Programming syntax that does not add new features, but makes something more
convenient or easier to type.

14 

| 

Chapter 1: Preliminaries

CHAPTER 2
Python Language Basics, IPython, and
Jupyter Notebooks

When I wrote the first edition of this book in 2011 and 2012, there were fewer resour
ces  available  for  learning  about  doing  data  analysis  in  Python.  This  was  partially  a
chicken-and-egg problem; many libraries that we now take for granted, like pandas,
scikit-learn, and statsmodels, were comparatively immature back then. In 2017, there
is now a growing literature on data science, data analysis, and machine learning, sup
plementing  the  prior  works  on  general-purpose  scientific  computing  geared  toward
computational scientists, physicists, and professionals in other research fields. There
are also excellent books about learning the Python programming language itself and
becoming an effective software engineer.

As this book is intended as an introductory text in working with data in Python, I feel
it  is  valuable  to  have  a  self-contained  overview  of  some  of  the  most  important  fea
tures  of  Pythons  built-in  data  structures  and  libraries  from  the  perspective  of  data
manipulation. So, I will only present roughly enough information in this chapter and
Chapter 3 to enable you to follow along with the rest of the book.

In my opinion, it is not necessary to become proficient at building good software in
Python  to  be  able  to  productively  do  data  analysis.  I  encourage  you  to  use  the  IPy
thon  shell  and  Jupyter  notebooks  to  experiment  with  the  code  examples  and  to
explore the documentation for the various types, functions, and methods. While Ive
made best efforts to present the book material in an incremental form, you may occa
sionally encounter things that have not yet been fully introduced.

Much  of  this  book  focuses  on  table-based  analytics  and  data  preparation  tools  for
working with large datasets. In order to use those tools you must often first do some
munging to corral messy data into a more nicely tabular (or structured) form. Fortu
nately,  Python  is  an  ideal  language  for  rapidly  whipping  your  data  into  shape.  The

15

greater your facility with Python the language, the easier it will be for you to prepare
new datasets for analysis.

Some of the tools in this book are best explored from a live IPython or Jupyter ses
sion. Once you learn how to start up IPython and Jupyter, I recommend that you fol
low along with the examples so you can experiment and try different things. As with
any  keyboard-driven  console-like  environment,  developing  muscle-memory  for  the
common commands is also part of the learning curve.

There are introductory Python concepts that this chapter does not
cover,  like  classes  and  object-oriented  programming,  which  you
may find useful in your foray into data analysis in Python.

To  deepen  your  Python  language  knowledge,  I  recommend  that
you  supplement  this  chapter  with  the  official  Python  tutorial  and
potentially  one  of  the  many  excellent  books  on  general-purpose
Python  programming.  Some  recommendations  to  get  you  started
include:

 Python Cookbook, Third Edition, by David Beazley and Brian

K. Jones (OReilly)

 Fluent Python by Luciano Ramalho (OReilly)

 Effective Python by Brett Slatkin (Pearson)

2.1 The Python Interpreter
Python is an interpreted language. The Python interpreter runs a program by execut
ing  one  statement  at  a  time.  The  standard  interactive  Python  interpreter  can  be
invoked on the command line with the python command:

$ python
Python 3.6.0 | packaged by conda-forge | (default, Jan 13 2017, 23:17:12)
[GCC 4.8.2 20140120 (Red Hat 4.8.2-15)] on linux
Type &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.
&gt;&gt;&gt; a = 5
&gt;&gt;&gt; print(a)
5

The &gt;&gt;&gt; you see is the prompt where youll type code expressions. To exit the Python
interpreter and return to the command prompt, you can either type exit() or press
Ctrl-D.

Running  Python  programs  is  as  simple  as  calling  python  with  a  .py  file  as  its  first
argument. Suppose we had created hello_world.py with these contents:

print(&#39;Hello world&#39;)

16 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

You can run it by executing the following command (the hello_world.py file must be
in your current working terminal directory):

$ python hello_world.py
Hello world

While some Python programmers execute all of their Python code in this way, those
doing data analysis or scientific computing make use of IPython, an enhanced Python
interpreter,  or  Jupyter  notebooks,  web-based  code  notebooks  originally  created
within  the  IPython  project.  I  give  an  introduction  to  using  IPython  and  Jupyter  in
this chapter and have included a deeper look at IPython functionality in Appendix A. 
When you use the %run command, IPython executes the code in the specified file in
the same process, enabling you to explore the results interactively when its done:

$ ipython
Python 3.6.0 | packaged by conda-forge | (default, Jan 13 2017, 23:17:12)
Type &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.

IPython 5.1.0 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython&#39;s features.
%quickref -&gt; Quick reference.
help      -&gt; Python&#39;s own help system.
object?   -&gt; Details about &#39;object&#39;, use &#39;object??&#39; for extra details.

In [1]: %run hello_world.py
Hello world

In [2]:

The default IPython prompt adopts the numbered In [2]: style compared with the
standard &gt;&gt;&gt; prompt.

2.2 IPython Basics
In this section, well get you up and running with the IPython shell and Jupyter note
book, and introduce you to some of the essential concepts.

Running the IPython Shell
You can launch the IPython shell on the command line just like launching the regular
Python interpreter except with the ipython command:

$ ipython
Python 3.6.0 | packaged by conda-forge | (default, Jan 13 2017, 23:17:12)
Type &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.

IPython 5.1.0 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython&#39;s features.
%quickref -&gt; Quick reference.
help      -&gt; Python&#39;s own help system.

2.2 IPython Basics 

| 

17

object?   -&gt; Details about &#39;object&#39;, use &#39;object??&#39; for extra details.

In [1]: a = 5

In [2]: a
Out[2]: 5

You can execute arbitrary Python statements by typing them in and pressing Return
(or Enter). When you type just a variable into IPython, it renders a string representa
tion of the object:

In [5]: import numpy as np

In [6]: data = {i : np.random.randn() for i in range(7)}

In [7]: data
Out[7]: 
{0: -0.20470765948471295,
 1: 0.47894333805754824,
 2: -0.5194387150567381,
 3: -0.55573030434749,
 4: 1.9657805725027142,
 5: 1.3934058329729904,
 6: 0.09290787674371767}

The first two lines are Python code statements; the second statement creates a vari
able named data that refers to a newly created Python dictionary. The last line prints
the value of data in the console.

Many  kinds  of  Python  objects  are  formatted  to  be  more  readable,  or  pretty-printed,
which  is  distinct  from  normal  printing  with  print.  If  you  printed  the  above  data
variable in the standard Python interpreter, it would be much less readable:

&gt;&gt;&gt; from numpy.random import randn
&gt;&gt;&gt; data = {i : randn() for i in range(7)}
&gt;&gt;&gt; print(data)
{0: -1.5948255432744511, 1: 0.10569006472787983, 2: 1.972367135977295,
3: 0.15455217573074576, 4: -0.24058577449429575, 5: -1.2904897053651216,
6: 0.3308507317325902}

IPython  also  provides  facilities  to  execute  arbitrary  blocks  of  code  (via  a  somewhat
glorified  copy-and-paste  approach)  and  whole  Python  scripts.  You  can  also  use  the
Jupyter notebook to work with larger blocks of code, as well soon see.

Running the Jupyter Notebook
One of the major components of the Jupyter project is the notebook, a type of interac
tive document for code, text (with or without markup), data visualizations, and other
output.  The  Jupyter  notebook  interacts  with  kernels,  which  are  implementations  of

18 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

the  Jupyter  interactive  computing  protocol  in  any  number  of  programming  lan
guages. Pythons Jupyter kernel uses the IPython system for its underlying behavior.

To start up Jupyter, run the command jupyter notebook in a terminal:

$ jupyter notebook
[I 15:20:52.739 NotebookApp] Serving notebooks from local directory:
/home/wesm/code/pydata-book
[I 15:20:52.739 NotebookApp] 0 active kernels
[I 15:20:52.739 NotebookApp] The Jupyter Notebook is running at:
http://localhost:8888/
[I 15:20:52.740 NotebookApp] Use Control-C to stop this server and shut down
all kernels (twice to skip confirmation).
Created new window in existing browser session.

On many platforms, Jupyter will automatically open up in your default web browser
(unless  you  start  it  with  --no-browser).  Otherwise,  you  can  navigate  to  the  HTTP
address printed when you started the notebook, here http://localhost:8888/. See
Figure 2-1 for what this looks like in Google Chrome.

Many people use Jupyter as a local computing environment, but it
can  also  be  deployed  on  servers  and  accessed  remotely.  I  wont
cover those details here, but encourage you to explore this topic on
the internet if its relevant to your needs.

Figure 2-1. Jupyter notebook landing page

2.2 IPython Basics 

| 

19

To create a new notebook, click the New button and select the Python 3 or conda
[default] option. You should see something like Figure 2-2. If this is your first time,
try clicking on the empty code cell and entering a line of Python code. Then press
Shift-Enter to execute it.

Figure 2-2. Jupyter new notebook view

When  you  save  the  notebook  (see  Save  and  Checkpoint  under  the  notebook  File
menu), it creates a file with the extension .ipynb. This is a self-contained file format
that contains all of the content (including any evaluated code output) currently in the
notebook. These can be loaded and edited by other Jupyter users. To load an existing
notebook, put the file in the same directory where you started the notebook process
(or in a subfolder within it), then double-click the name from the landing page. You
can try it out with the notebooks from my wesm/pydata-book repository on GitHub.
See Figure 2-3.

While the Jupyter notebook can feel like a distinct experience from the IPython shell,
nearly all of the commands and tools in this chapter can be used in either environ
ment.

20 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Figure 2-3. Jupyter example view for an existing notebook

Tab Completion
On  the  surface,  the  IPython  shell  looks  like  a  cosmetically  different  version  of  the
standard  terminal  Python  interpreter  (invoked  with  python).  One  of  the  major
improvements over the standard Python shell is tab completion, found in many IDEs
or other interactive computing analysis environments. While entering expressions in
the  shell,  pressing  the  Tab  key  will  search  the  namespace  for  any  variables  (objects,
functions, etc.) matching the characters you have typed so far:

In [1]: an_apple = 27

In [2]: an_example = 42

In [3]: an&lt;Tab&gt;
an_apple    and         an_example  any

In this example, note that IPython displayed both the two variables I defined as well
as  the  Python  keyword  and  and  built-in  function  any.  Naturally,  you  can  also  com
plete methods and attributes on any object after typing a period:

2.2 IPython Basics 

| 

21

In [3]: b = [1, 2, 3]

In [4]: b.&lt;Tab&gt;
b.append  b.count   b.insert  b.reverse
b.clear   b.extend  b.pop     b.sort
b.copy    b.index   b.remove

The same goes for modules:

In [1]: import datetime

In [2]: datetime.&lt;Tab&gt;
datetime.date          datetime.MAXYEAR       datetime.timedelta
datetime.datetime      datetime.MINYEAR       datetime.timezone
datetime.datetime_CAPI datetime.time          datetime.tzinfo

In  the  Jupyter  notebook  and  newer  versions  of  IPython  (5.0  and  higher),  the  auto
completions show up in a drop-down box rather than as text output.

Note that IPython by default hides methods and attributes starting
with  underscores,  such  as  magic  methods  and  internal  private
methods  and  attributes,  in  order  to  avoid  cluttering  the  display
(and  confusing  novice  users!).  These,  too,  can  be  tab-completed,
but you must first type an underscore to see them. If you prefer to
always  see  such  methods  in  tab  completion,  you  can  change  this
setting in the IPython configuration. See the IPython documenta
tion to find out how to do this.

Tab  completion  works  in  many  contexts  outside  of  searching  the  interactive  name
space and completing object or module attributes. When typing anything that looks
like a file path (even in a Python string), pressing the Tab key will complete anything
on your computers filesystem matching what youve typed:

In [7]: datasets/movielens/&lt;Tab&gt;
datasets/movielens/movies.dat    datasets/movielens/README
datasets/movielens/ratings.dat   datasets/movielens/users.dat

In [7]: path = &#39;datasets/movielens/&lt;Tab&gt;
datasets/movielens/movies.dat    datasets/movielens/README
datasets/movielens/ratings.dat   datasets/movielens/users.dat

Combined  with  the  %run  command  (see  The  %run  Command  on  page  25),  this
functionality can save you many keystrokes.

Another area where tab completion saves time is in the completion of function key
word arguments (and including the = sign!). See Figure 2-4.

22 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Figure 2-4. Autocomplete function keywords in Jupyter notebook

Well have a closer look at functions in a little bit.

Introspection
Using a question mark (?) before or after a variable will display some general infor
mation about the object:

In [8]: b = [1, 2, 3]

In [9]: b?
Type:       list
String Form:[1, 2, 3]
Length:     3
Docstring:
list() -&gt; new empty list
list(iterable) -&gt; new list initialized from iterable&#39;s items

In [10]: print?
Docstring:
print(value, ..., sep=&#39; &#39;, end=&#39;\n&#39;, file=sys.stdout, flush=False)

Prints the values to a stream, or to sys.stdout by default.
Optional keyword arguments:
file:  a file-like object (stream); defaults to the current sys.stdout.
sep:   string inserted between values, default a space.
end:   string appended after the last value, default a newline.
flush: whether to forcibly flush the stream.
Type:      builtin_function_or_method

This  is  referred  to  as  object  introspection.  If  the  object  is  a  function  or  instance
method, the docstring, if defined, will also be shown. Suppose wed written the follow
ing function (which you can reproduce in IPython or Jupyter):

2.2 IPython Basics 

| 

23

def add_numbers(a, b):
    &#34;&#34;&#34;
    Add two numbers together

    Returns
    -------
    the_sum : type of arguments
    &#34;&#34;&#34;
    return a + b

Then using ? shows us the docstring:

In [11]: add_numbers?
Signature: add_numbers(a, b)
Docstring:
Add two numbers together

Returns
-------
the_sum : type of arguments
File:      &lt;ipython-input-9-6a548a216e27&gt;
Type:      function

Using ?? will also show the functions source code if possible:

In [12]: add_numbers??
Signature: add_numbers(a, b)
Source:
def add_numbers(a, b):
    &#34;&#34;&#34;
    Add two numbers together

    Returns
    -------
    the_sum : type of arguments
    &#34;&#34;&#34;
    return a + b
File:      &lt;ipython-input-9-6a548a216e27&gt;
Type:      function

? has a final usage, which is for searching the IPython namespace in a manner similar
to the standard Unix or Windows command line. A number of characters combined
with  the  wildcard  (*)  will  show  all  names  matching  the  wildcard  expression.  For
example, we could get a list of all functions in the top-level NumPy namespace con
taining load:

In [13]: np.*load*?
np.__loader__
np.load
np.loads
np.loadtxt
np.pkgload

24 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

The %run Command
You  can  run  any  file  as  a  Python  program  inside  the  environment  of  your  IPython
session using the %run command. Suppose you had the following simple script stored
in ipython_script_test.py:

def f(x, y, z):
    return (x + y) / z

a = 5
b = 6
c = 7.5

result = f(a, b, c)

You can execute this by passing the filename to %run:

In [14]: %run ipython_script_test.py

The script is run in an empty namespace (with no imports or other variables defined)
so that the behavior should be identical to running the program on the command line
using  python  script.py.  All  of  the  variables  (imports,  functions,  and  globals)
defined in the file (up until an exception, if any, is raised) will then be accessible in
the IPython shell:

In [15]: c
Out [15]: 7.5

In [16]: result
Out[16]: 1.4666666666666666

If a Python script expects command-line arguments (to be found in sys.argv), these
can be passed after the file path as though run on the command line.

Should you wish to give a script access to variables already defined
in the interactive IPython namespace, use %run -i instead of plain
%run.

In the Jupyter notebook, you may also use the related  %load magic function, which
imports a script into a code cell:

&gt;&gt;&gt; %load ipython_script_test.py

    def f(x, y, z):
        return (x + y) / z

    a = 5
    b = 6
    c = 7.5

2.2 IPython Basics 

| 

25

    result = f(a, b, c)

Interrupting running code

Pressing Ctrl-C while any code is running, whether a script through %run or a long-
running  command,  will  cause  a  KeyboardInterrupt  to  be  raised.  This  will  cause
nearly all Python programs to stop immediately except in certain unusual cases.

When a piece of Python code has called into some compiled exten
sion  modules,  pressing  Ctrl-C  will  not  always  cause  the  program
execution  to  stop  immediately.  In  such  cases,  you  will  have  to
either wait until control is returned to the Python interpreter, or in
more dire circumstances, forcibly terminate the Python process.

Executing Code from the Clipboard
If you are using the Jupyter notebook, you can copy and paste code into any code cell
and execute it. It is also possible to run code from the clipboard in the IPython shell.
Suppose you had the following code in some other application:

x = 5
y = 7
if x &gt; 5:
    x += 1

    y = 8

The  most  foolproof  methods  are  the  %paste  and  %cpaste  magic  functions.  %paste
takes whatever text is in the clipboard and executes it as a single block in the shell:

In [17]: %paste
x = 5
y = 7
if x &gt; 5:
    x += 1

    y = 8
## -- End pasted text --

%cpaste is similar, except that it gives you a special prompt for pasting code into:

In [18]: %cpaste
Pasting code; enter &#39;--&#39; alone on the line to stop or use Ctrl-D.
:x = 5
:y = 7
:if x &gt; 5:
:    x += 1
:

26 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

:    y = 8
:--

With  the  %cpaste  block,  you  have  the  freedom  to  paste  as  much  code  as  you  like
before  executing  it.  You  might  decide  to  use  %cpaste  in  order  to  look  at  the  pasted
code before executing it. If you accidentally paste the wrong code, you can break out
of the %cpaste prompt by pressing Ctrl-C.

Terminal Keyboard Shortcuts
IPython has many keyboard shortcuts for navigating the prompt (which will be famil
iar to users of the Emacs text editor or the Unix bash shell) and interacting with the
shells  command  history.  Table  2-1  summarizes  some  of  the  most  commonly  used
shortcuts.  See  Figure  2-5  for  an  illustration  of  a  few  of  these,  such  as  cursor
movement.

Figure 2-5. Illustration of some keyboard shortcuts in the IPython shell

Table 2-1. Standard IPython keyboard shortcuts

Description
Search backward in command history for commands starting with currently entered text

Keyboard shortcut
Ctrl-P or up-arrow
Ctrl-N or down-arrow Search forward in command history for commands starting with currently entered text
Ctrl-R
Ctrl-Shift-V
Ctrl-C
Ctrl-A
Ctrl-E
Ctrl-K
Ctrl-U
Ctrl-F
Ctrl-B
Ctrl-L

Readline-style reverse history search (partial matching)
Paste text from clipboard
Interrupt currently executing code
Move cursor to beginning of line
Move cursor to end of line
Delete text from cursor until end of line
Discard all text on current line
Move cursor forward one character
Move cursor back one character
Clear screen

Note that Jupyter notebooks have a largely separate set of keyboard shortcuts for nav
igation and editing. Since these shortcuts have evolved more rapidly than IPythons, I
encourage you to explore the integrated help system in the Jupyter notebooks menus.

2.2 IPython Basics 

| 

27

About Magic Commands
IPythons  special  commands  (which  are  not  built  into  Python  itself)  are  known  as
magic commands. These are designed to facilitate common tasks and enable you to
easily  control  the  behavior  of  the  IPython  system.  A  magic  command  is  any  com
mand  prefixed  by  the  percent  symbol  %.  For  example,  you  can  check  the  execution
time  of  any  Python  statement,  such  as  a  matrix  multiplication,  using  the  %timeit
magic function (which will be discussed in more detail later):

In [20]: a = np.random.randn(100, 100)

In [20]: %timeit np.dot(a, a)
10000 loops, best of 3: 20.9 s per loop

Magic  commands  can  be  viewed  as  command-line  programs  to  be  run  within  the
IPython system. Many of them have additional command-line options, which can
all be viewed (as you might expect) using ?:

In [21]: %debug?
Docstring:
::

  %debug [--breakpoint FILE:LINE] [statement [statement ...]]

Activate the interactive debugger.

This magic command support two ways of activating debugger.
One is to activate debugger before executing code.  This way, you
can set a break point, to step through the code from the point.
You can use this mode by giving statements to execute and optionally
a breakpoint.

The other one is to activate debugger in post-mortem mode.  You can
activate this mode simply running %debug without any argument.
If an exception has just occurred, this lets you inspect its stack
frames interactively.  Note that this will always work only on the last
traceback that occurred, so you must call this quickly after an
exception that you wish to inspect has fired, because if another one
occurs, it clobbers the previous one.

If you want IPython to automatically do this on every exception, see
the %pdb magic for more details.

positional arguments:
  statement             Code to run in debugger. You can omit this in cell
                        magic mode.

optional arguments:
  --breakpoint &lt;FILE:LINE&gt;, -b &lt;FILE:LINE&gt;
                        Set break point at LINE in FILE.

28 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Magic functions can be used by default without the percent sign, as long as no vari
able is defined with the same name as the magic function in question. This feature is
called automagic and can be enabled or disabled with %automagic.

Some magic functions behave like Python functions and their output can be assigned
to a variable:

In [22]: %pwd
Out[22]: &#39;/home/wesm/code/pydata-book

In [23]: foo = %pwd

In [24]: foo
Out[24]: &#39;/home/wesm/code/pydata-book&#39;

Since IPythons documentation is accessible from within the system, I encourage you
to  explore  all  of  the  special  commands  available  by  typing  %quickref  or  %magic.
Table 2-2 highlights some of the most critical ones for being productive in interactive
computing and Python development in IPython.

Table 2-2. Some frequently used IPython magic commands

Command
%quickref

%magic

%debug

%hist

%pdb

%paste

%cpaste

%reset
%page OBJECT
%run script.py
%prun statement
%time statement
%timeit statement

Description
Display the IPython Quick Reference Card
Display detailed documentation for all of the available magic commands
Enter the interactive debugger at the bottom of the last exception traceback
Print command input (and optionally output) history
Automatically enter debugger after any exception
Execute preformatted Python code from clipboard
Open a special prompt for manually pasting Python code to be executed
Delete all variables/names defined in interactive namespace
Pretty-print the object and display it through a pager
Run a Python script inside IPython
Execute statement with cProfile and report the profiler output
Report the execution time of a single statement
Run a statement multiple times to compute an ensemble average execution time; useful for
timing code with very short execution time

%who, %who_ls, %whos Display variables defined in interactive namespace, with varying levels of information/

%xdel variable

verbosity
Delete a variable and attempt to clear any references to the object in the IPython internals

Matplotlib Integration
One reason for IPythons popularity in analytical computing is that it integrates well
with data visualization and other user interface libraries like matplotlib. Dont worry
if you have never used matplotlib before; it will be discussed in more detail later in

2.2 IPython Basics 

| 

29

this book. The  %matplotlib magic function configures its integration with the IPy
thon shell or Jupyter notebook. This is important, as otherwise plots you create will
either not appear (notebook) or take control of the session until closed (shell).

In the IPython shell, running %matplotlib sets up the integration so you can create
multiple plot windows without interfering with the console session:

In [26]: %matplotlib
Using matplotlib backend: Qt4Agg

In Jupyter, the command is a little different (Figure 2-6):

In [26]: %matplotlib inline

Figure 2-6. Jupyter inline matplotlib plotting

2.3 Python Language Basics
In this section, I will give you an overview of essential Python programming concepts
and language mechanics. In the next chapter, I will go into more detail about Pythons
data structures, functions, and other built-in tools.

Language Semantics
The Python language design is distinguished by its emphasis on readability, simplic
ity, and explicitness. Some people go so far as to liken it to executable pseudocode.

Indentation, not braces

Python uses whitespace (tabs or spaces) to structure code instead of using braces as in
many other languages like R, C++, Java, and Perl. Consider a for loop from a sorting
algorithm:

30 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

for x in array:
    if x &lt; pivot:
        less.append(x)
    else:
        greater.append(x)

A colon denotes the start of an indented code block after which all of the code must
be indented by the same amount until the end of the block.

Love it or hate it, significant whitespace is a fact of life for Python programmers, and
in my experience it can make Python code more readable than other languages Ive
used. While it may seem foreign at first, you will hopefully grow accustomed in time.

I strongly recommend using four spaces as your default indentation
and replacing tabs with four spaces. Many text editors have a set
ting that will replace tab stops with spaces automatically (do this!).
Some  people  use  tabs  or  a  different  number  of  spaces,  with  two
spaces  not  being  terribly  uncommon.  By  and  large,  four  spaces  is
the standard adopted by the vast majority of Python programmers,
so I recommend doing that in the absence of a compelling reason
otherwise.

As you can see by now, Python statements also do not need to be terminated by semi
colons. Semicolons can be used, however, to separate multiple statements on a single
line:

a = 5; b = 6; c = 7

Putting multiple statements on one line is generally discouraged in Python as it often
makes code less readable.

Everything is an object

An  important  characteristic  of  the  Python  language  is  the  consistency  of  its  object
model. Every number, string, data structure, function, class, module, and so on exists
in  the  Python  interpreter  in  its  own  box,  which  is  referred  to  as  a  Python  object.
Each object has an associated type (e.g., string or function) and internal data. In prac
tice  this  makes  the  language  very  flexible,  as  even  functions  can  be  treated  like  any
other object.

Comments

Any text preceded by the hash mark (pound sign) # is ignored by the Python inter
preter. This is often used to add comments to code. At times you may also want to
exclude certain blocks of code without deleting them. An easy solution is to comment
out the code:

2.3 Python Language Basics 

| 

31

results = []
for line in file_handle:
    # keep the empty lines for now
    # if len(line) == 0:
    #   continue
    results.append(line.replace(&#39;foo&#39;, &#39;bar&#39;))

Comments  can  also  occur  after  a  line  of  executed  code.  While  some  programmers
prefer comments to be placed in the line preceding a particular line of code, this can
be useful at times:

print(&#34;Reached this line&#34;)  # Simple status report

Function and object method calls

You call functions using parentheses and passing zero or more arguments, optionally
assigning the returned value to a variable:

result = f(x, y, z)
g()

Almost every object in Python has attached functions, known as methods, that have
access to the objects internal contents. You can call them using the following syntax:

obj.some_method(x, y, z)

Functions can take both positional and keyword arguments:

result = f(a, b, c, d=5, e=&#39;foo&#39;)

More on this later.

Variables and argument passing

When  assigning  a  variable  (or  name)  in  Python,  you  are  creating  a  reference  to  the
object on the righthand side of the equals sign. In practical terms, consider a list of
integers:

In [8]: a = [1, 2, 3]

Suppose we assign a to a new variable b:

In [9]: b = a

In some languages, this assignment would cause the data [1, 2, 3] to be copied. In
Python, a and b actually now refer to the same object, the original list [1, 2, 3] (see
Figure 2-7 for a mockup). You can prove this to yourself by appending an element to
a and then examining b:

In [10]: a.append(4)

In [11]: b
Out[11]: [1, 2, 3, 4]

32 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Figure 2-7. Two references for the same object

Understanding the semantics of references in Python and when, how, and why data is
copied is especially critical when you are working with larger datasets in Python.

Assignment is also referred to as binding, as we are binding a name
to an object. Variable names that have been assigned may occasion
ally be referred to as bound variables.

When you pass objects as arguments to a function, new local variables are created ref
erencing the original objects without any copying. If you bind a new object to a vari
able  inside  a  function,  that  change  will  not  be  reflected  in  the  parent  scope.  It  is
therefore possible to alter the internals of a mutable argument. Suppose we had the
following function:

def append_element(some_list, element):
    some_list.append(element)

Then we have:

In [27]: data = [1, 2, 3]

In [28]: append_element(data, 4)

In [29]: data
Out[29]: [1, 2, 3, 4]

Dynamic references, strong types

In contrast with many compiled languages, such as Java and C++, object references in
Python have no type associated with them. There is no problem with the following:

In [12]: a = 5

In [13]: type(a)
Out[13]: int

In [14]: a = &#39;foo&#39;

2.3 Python Language Basics 

| 

33

In [15]: type(a)
Out[15]: str

Variables are names for objects within a particular namespace; the type information is
stored in the object itself. Some observers might hastily conclude that Python is not a
typed language. This is not true; consider this example:

In [16]: &#39;5&#39; + 5
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-16-f9dbf5f0b234&gt; in &lt;module&gt;()
----&gt; 1 &#39;5&#39; + 5
TypeError: must be str, not int

In some languages, such as Visual Basic, the string &#39;5&#39; might get implicitly converted
(or casted) to an integer, thus yielding 10. Yet in other languages, such as JavaScript,
the integer 5 might be casted to a string, yielding the concatenated string &#39;55&#39;. In this
regard Python is considered a strongly typed language, which means that every object
has a specific type (or class), and implicit conversions will occur only in certain obvi
ous circumstances, such as the following:

In [17]: a = 4.5

In [18]: b = 2

# String formatting, to be visited later
In [19]: print(&#39;a is {0}, b is {1}&#39;.format(type(a), type(b)))
a is &lt;class &#39;float&#39;&gt;, b is &lt;class &#39;int&#39;&gt;

In [20]: a / b
Out[20]: 2.25

Knowing the type of an object is important, and its useful to be able to write func
tions that can handle many different kinds of input. You can check that an object is an
instance of a particular type using the isinstance function:

In [21]: a = 5

In [22]: isinstance(a, int)
Out[22]: True

isinstance  can  accept  a  tuple  of  types  if  you  want  to  check  that  an  objects  type  is
among those present in the tuple:

In [23]: a = 5; b = 4.5

In [24]: isinstance(a, (int, float))
Out[24]: True

In [25]: isinstance(b, (int, float))
Out[25]: True

34 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Attributes and methods

Objects in Python typically have both attributes (other Python objects stored inside
the object) and methods (functions associated with an object that can have access to
the  syntax
the  objects 
obj.attribute_name:

internal  data).  Both  of 

them  are  accessed  via 

In [1]: a = &#39;foo&#39;

In [2]: a.&lt;Press Tab&gt;
a.capitalize  a.format      a.isupper     a.rindex      a.strip
a.center      a.index       a.join        a.rjust       a.swapcase
a.count       a.isalnum     a.ljust       a.rpartition  a.title
a.decode      a.isalpha     a.lower       a.rsplit      a.translate
a.encode      a.isdigit     a.lstrip      a.rstrip      a.upper
a.endswith    a.islower     a.partition   a.split       a.zfill
a.expandtabs  a.isspace     a.replace     a.splitlines
a.find        a.istitle     a.rfind       a.startswith

Attributes and methods can also be accessed by name via the getattr function:

In [27]: getattr(a, &#39;split&#39;)
Out[27]: &lt;function str.split&gt;

In  other  languages,  accessing  objects  by  name  is  often  referred  to  as  reflection.
While  we  will  not  extensively  use  the  functions  getattr  and  related  functions
hasattr and setattr in this book, they can be used very effectively to write generic,
reusable code.

Duck typing

Often  you  may  not  care  about  the  type  of  an  object  but  rather  only  whether  it  has
certain methods or behavior. This is sometimes called duck typing, after the saying
If it walks like a duck and quacks like a duck, then its a duck. For example, you can
verify  that  an  object  is  iterable  if  it  implemented  the  iterator  protocol.  For  many
objects, this means it has a __iter__ magic method, though an alternative and bet
ter way to check is to try using the iter function:

def isiterable(obj):
    try:
        iter(obj)
        return True
    except TypeError: # not iterable
        return False

This function would return True for strings as well as most Python collection types:

In [29]: isiterable(&#39;a string&#39;)
Out[29]: True

In [30]: isiterable([1, 2, 3])

2.3 Python Language Basics 

| 

35

Out[30]: True

In [31]: isiterable(5)
Out[31]: False

A place where I use this functionality all the time is to write functions that can accept
multiple  kinds  of  input.  A  common  case  is  writing  a  function  that  can  accept  any
kind  of  sequence  (list,  tuple,  ndarray)  or  even  an  iterator.  You  can  first  check  if  the
object is a list (or a NumPy array) and, if it is not, convert it to be one:

if not isinstance(x, list) and isiterable(x):
    x = list(x)

Imports

In  Python  a  module  is  simply  a  file  with  the  .py  extension  containing  Python  code.
Suppose that we had the following module:

# some_module.py
PI = 3.14159

def f(x):
    return x + 2

def g(a, b):
    return a + b

If we wanted to access the variables and functions defined in some_module.py, from
another file in the same directory we could do:

import some_module
result = some_module.f(5)
pi = some_module.PI

Or equivalently:

from some_module import f, g, PI
result = g(5, PI)

By using the as keyword you can give imports different variable names:

import some_module as sm
from some_module import PI as pi, g as gf

r1 = sm.f(pi)
r2 = gf(6, pi)

Binary operators and comparisons

Most of the binary math operations and comparisons are as you might expect:

In [32]: 5 - 7
Out[32]: -2

36 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

In [33]: 12 + 21.5
Out[33]: 33.5

In [34]: 5 &lt;= 2
Out[34]: False

See Table 2-3 for all of the available binary operators.

To check if two references refer to the same object, use the is keyword. is not is also
perfectly valid if you want to check that two objects are not the same:

In [35]: a = [1, 2, 3]

In [36]: b = a

In [37]: c = list(a)

In [38]: a is b
Out[38]: True

In [39]: a is not c
Out[39]: True

Since list always creates a new Python list (i.e., a copy), we can be sure that c is dis
tinct from a. Comparing with is is not the same as the == operator, because in this
case we have:

In [40]: a == c
Out[40]: True

A very common use of is and is not is to check if a variable is None, since there is
only one instance of None:

In [41]: a = None

In [42]: a is None
Out[42]: True

Table 2-3. Binary operators

Operation
a + b

a - b

a * b

a / b

a // b

a ** b

a &amp; b

a | b

a ^ b

Description
Add a and b
Subtract b from a
Multiply a by b
Divide a by b
Floor-divide a by b, dropping any fractional remainder
Raise a to the b power
True if both a and b are True; for integers, take the bitwise AND
True if either a or b is True; for integers, take the bitwise OR
For booleans, True if a or b is True, but not both; for integers, take the bitwise EXCLUSIVE-OR

2.3 Python Language Basics 

| 

37

Operation
a == b

Description
True if a equals b
True if a is not equal to b

a != b
a &lt;= b, a &lt; b True if a is less than (less than or equal) to b
a &gt; b, a &gt;= b True if a is greater than (greater than or equal) to b
a is b

True if a and b reference the same Python object
True if a and b reference different Python objects

a is not b

Mutable and immutable objects

Most  objects  in  Python,  such  as  lists,  dicts,  NumPy  arrays,  and  most  user-defined
types (classes), are mutable. This means that the object or values that they contain can
be modified:

In [43]: a_list = [&#39;foo&#39;, 2, [4, 5]]

In [44]: a_list[2] = (3, 4)

In [45]: a_list
Out[45]: [&#39;foo&#39;, 2, (3, 4)]

Others, like strings and tuples, are immutable:

In [46]: a_tuple = (3, 5, (4, 5))

In [47]: a_tuple[1] = &#39;four&#39;
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-47-b7966a9ae0f1&gt; in &lt;module&gt;()
----&gt; 1 a_tuple[1] = &#39;four&#39;
TypeError: &#39;tuple&#39; object does not support item assignment

Remember that just because you can mutate an object does not mean that you always
should. Such actions are known as side effects. For example, when writing a function,
any side effects should be explicitly communicated to the user in the functions docu
mentation  or  comments.  If  possible,  I  recommend  trying  to  avoid  side  effects  and
favor immutability, even though there may be mutable objects involved.

Scalar Types
Python along with its standard library has a small set of built-in types for handling
numerical  data,  strings,  boolean  (True  or  False)  values,  and  dates  and  time.  These
single  value  types  are  sometimes  called  scalar  types  and  we  refer  to  them  in  this
book as scalars. See Table 2-4 for a list of the main scalar types. Date and time han
dling  will  be  discussed  separately,  as  these  are  provided  by  the  datetime  module  in
the standard library.

38 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

Table 2-4. Standard Python scalar types

Type
None

str

Description
The Python null value (only one instance of the None object exists)
String type; holds Unicode (UTF-8 encoded) strings

bytes Raw ASCII bytes (or Unicode encoded as bytes)
float Double-precision (64-bit) floating-point number (note there is no separate double type)
bool

A True or False value
Arbitrary precision signed integer

int

Numeric types

The primary Python types for numbers are int and float. An int can store arbitrar
ily large numbers:

In [48]: ival = 17239871

In [49]: ival ** 6
Out[49]: 26254519291092456596965462913230729701102721

Floating-point numbers are represented with the Python float type. Under the hood
each one is a double-precision (64-bit) value. They can also be expressed with scien
tific notation:

In [50]: fval = 7.243

In [51]: fval2 = 6.78e-5

Integer  division  not  resulting  in  a  whole  number  will  always  yield  a  floating-point
number:

In [52]: 3 / 2
Out[52]: 1.5

To get C-style integer division (which drops the fractional part if the result is not a
whole number), use the floor division operator //:

In [53]: 3 // 2
Out[53]: 1

Strings

Many people use Python for its powerful and flexible built-in string processing capa
bilities. You can write string literals using either single quotes &#39; or double quotes &#34;:

a = &#39;one way of writing a string&#39;
b = &#34;another way&#34;

For multiline strings with line breaks, you can use triple quotes, either &#39;&#39;&#39; or &#34;&#34;&#34;:

2.3 Python Language Basics 

| 

39

c = &#34;&#34;&#34;
This is a longer string that
spans multiple lines
&#34;&#34;&#34;

It  may  surprise  you  that  this  string  c  actually  contains  four  lines  of  text;  the  line
breaks after &#34;&#34;&#34; and after lines are included in the string. We can count the new line
characters with the count method on c:

In [55]: c.count(&#39;\n&#39;)
Out[55]: 3

Python strings are immutable; you cannot modify a string:

In [56]: a = &#39;this is a string&#39;

In [57]: a[10] = &#39;f&#39;
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-57-5ca625d1e504&gt; in &lt;module&gt;()
----&gt; 1 a[10] = &#39;f&#39;
TypeError: &#39;str&#39; object does not support item assignment

In [58]: b = a.replace(&#39;string&#39;, &#39;longer string&#39;)

In [59]: b
Out[59]: &#39;this is a longer string&#39;

Afer this operation, the variable a is unmodified:

In [60]: a
Out[60]: &#39;this is a string&#39;

Many Python objects can be converted to a string using the str function:

In [61]: a = 5.6

In [62]: s = str(a)

In [63]: print(s)
5.6

Strings are a sequence of Unicode characters and therefore can be treated like other
sequences, such as lists and tuples (which we will explore in more detail in the next
chapter):

In [64]: s = &#39;python&#39;

In [65]: list(s)
Out[65]: [&#39;p&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]

In [66]: s[:3]
Out[66]: &#39;pyt&#39;

40 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

The  syntax  s[:3]  is  called  slicing  and  is  implemented  for  many  kinds  of  Python
sequences. This will be explained in more detail later on, as it is used extensively in
this book.

The  backslash  character  \  is  an  escape  character,  meaning  that  it  is  used  to  specify
special characters like newline \n or Unicode characters. To write a string literal with
backslashes, you need to escape them:

In [67]: s = &#39;12\\34&#39;

In [68]: print(s)
12\34

If you have a string with a lot of backslashes and no special characters, you might find
this a bit annoying. Fortunately you can preface the leading quote of the string with r,
which means that the characters should be interpreted as is:

In [69]: s = r&#39;this\has\no\special\characters&#39;

In [70]: s
Out[70]: &#39;this\\has\\no\\special\\characters&#39;

The r stands for raw.

Adding two strings together concatenates them and produces a new string:

In [71]: a = &#39;this is the first half &#39;

In [72]: b = &#39;and this is the second half&#39;

In [73]: a + b
Out[73]: &#39;this is the first half and this is the second half&#39;

String  templating  or  formatting  is  another  important  topic.  The  number  of  ways  to
do so has expanded with the advent of Python 3, and here I will briefly describe the
mechanics  of  one  of  the  main  interfaces.  String  objects  have  a  format  method  that
can  be  used  to  substitute  formatted  arguments  into  the  string,  producing  a  new
string:

In [74]: template = &#39;{0:.2f} {1:s} are worth US${2:d}&#39;

In this string,

 {0:.2f} means to format the first argument as a floating-point number with two

decimal places.

 {1:s} means to format the second argument as a string.
 {2:d} means to format the third argument as an exact integer.

To  substitute  arguments  for  these  format  parameters,  we  pass  a  sequence  of  argu
ments to the format method:

2.3 Python Language Basics 

| 

41

In [75]: template.format(4.5560, &#39;Argentine Pesos&#39;, 1)
Out[75]: &#39;4.56 Argentine Pesos are worth US$1&#39;

String formatting is a deep topic; there are multiple methods and numerous options
and  tweaks  available  to  control  how  values  are  formatted  in  the  resulting  string.  To
learn more, I recommend consulting the official Python documentation.

I discuss general string processing as it relates to data analysis in more detail in Chap
ter 8.

Bytes and Unicode

In modern Python (i.e., Python 3.0 and up), Unicode has become the first-class string
type to enable more consistent handling of ASCII and non-ASCII text. In older ver
sions  of  Python,  strings  were  all  bytes  without  any  explicit  Unicode  encoding.  You
could convert to Unicode assuming you knew the character encoding. Lets look at an
example:

In [76]: val = &#34;espaol&#34;

In [77]: val
Out[77]: &#39;espaol&#39;

We  can  convert  this  Unicode  string  to  its  UTF-8  bytes  representation  using  the
encode method:

In [78]: val_utf8 = val.encode(&#39;utf-8&#39;)

In [79]: val_utf8
Out[79]: b&#39;espa\xc3\xb1ol&#39;

In [80]: type(val_utf8)
Out[80]: bytes

Assuming you know the Unicode encoding of a bytes object, you can go back using 
the decode method:

In [81]: val_utf8.decode(&#39;utf-8&#39;)
Out[81]: &#39;espaol&#39;

While its become preferred to use UTF-8 for any encoding, for historical reasons you
may encounter data in any number of different encodings:

In [82]: val.encode(&#39;latin1&#39;)
Out[82]: b&#39;espa\xf1ol&#39;

In [83]: val.encode(&#39;utf-16&#39;)
Out[83]: b&#39;\xff\xfee\x00s\x00p\x00a\x00\xf1\x00o\x00l\x00&#39;

In [84]: val.encode(&#39;utf-16le&#39;)
Out[84]: b&#39;e\x00s\x00p\x00a\x00\xf1\x00o\x00l\x00&#39;

42 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

It is most common to encounter  bytes objects in the context of working with files,
where implicitly decoding all data to Unicode strings may not be desired.

Though you may seldom need to do so, you can define your own byte literals by pre
fixing a string with b:

In [85]: bytes_val = b&#39;this is bytes&#39;

In [86]: bytes_val
Out[86]: b&#39;this is bytes&#39;

In [87]: decoded = bytes_val.decode(&#39;utf8&#39;)

In [88]: decoded  # this is str (Unicode) now
Out[88]: &#39;this is bytes&#39;

Booleans

The two boolean values in Python are written as True and False. Comparisons and
other  conditional  expressions  evaluate  to  either  True  or  False.  Boolean  values  are
combined with the and and or keywords:

In [89]: True and True
Out[89]: True

In [90]: False or True
Out[90]: True

Type casting

The str, bool, int, and float types are also functions that can be used to cast values
to those types:

In [91]: s = &#39;3.14159&#39;

In [92]: fval = float(s)

In [93]: type(fval)
Out[93]: float

In [94]: int(fval)
Out[94]: 3

In [95]: bool(fval)
Out[95]: True

In [96]: bool(0)
Out[96]: False

2.3 Python Language Basics 

| 

43

None

None is the Python null value type. If a function does not explicitly return a value, it
implicitly returns None:

In [97]: a = None

In [98]: a is None
Out[98]: True

In [99]: b = 5

In [100]: b is not None
Out[100]: True

None is also a common default value for function arguments:

def add_and_maybe_multiply(a, b, c=None):
    result = a + b

    if c is not None:
        result = result * c

    return result

While a technical point, its worth bearing in mind that  None is not only a reserved
keyword but also a unique instance of NoneType:

In [101]: type(None)
Out[101]: NoneType

Dates and times

The built-in Python datetime module provides datetime, date, and time types. The
datetime  type,  as  you  may  imagine,  combines  the  information  stored  in  date  and
time and is the most commonly used:

In [102]: from datetime import datetime, date, time

In [103]: dt = datetime(2011, 10, 29, 20, 30, 21)

In [104]: dt.day
Out[104]: 29

In [105]: dt.minute
Out[105]: 30

Given a datetime instance, you can extract the equivalent date and time objects by
calling methods on the datetime of the same name:

In [106]: dt.date()
Out[106]: datetime.date(2011, 10, 29)

44 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

In [107]: dt.time()
Out[107]: datetime.time(20, 30, 21)

The strftime method formats a datetime as a string:

In [108]: dt.strftime(&#39;%m/%d/%Y %H:%M&#39;)
Out[108]: &#39;10/29/2011 20:30&#39;

Strings can be converted (parsed) into datetime objects with the strptime function:

In [109]: datetime.strptime(&#39;20091031&#39;, &#39;%Y%m%d&#39;)
Out[109]: datetime.datetime(2009, 10, 31, 0, 0)

See Table 2-5 for a full list of format specifications.

When you are aggregating or otherwise grouping time series data, it will occasionally
be useful to replace time fields of a series of  datetimesfor example, replacing the
minute and second fields with zero:

In [110]: dt.replace(minute=0, second=0)
Out[110]: datetime.datetime(2011, 10, 29, 20, 0)

Since  datetime.datetime is an immutable type, methods like these always produce
new objects.

The difference of two datetime objects produces a datetime.timedelta type:

In [111]: dt2 = datetime(2011, 11, 15, 22, 30)

In [112]: delta = dt2 - dt

In [113]: delta
Out[113]: datetime.timedelta(17, 7179)

In [114]: type(delta)
Out[114]: datetime.timedelta

The output timedelta(17, 7179) indicates that the timedelta encodes an offset of 17
days and 7,179 seconds.

Adding a timedelta to a datetime produces a new shifted datetime:

In [115]: dt
Out[115]: datetime.datetime(2011, 10, 29, 20, 30, 21)

In [116]: dt + delta
Out[116]: datetime.datetime(2011, 11, 15, 22, 30)

Table 2-5. Datetime format specification (ISO C89 compatible)

Type Description
%Y

Four-digit year
Two-digit year

%y

2.3 Python Language Basics 

| 

45

Type Description
%m

Two-digit month [01, 12]
Two-digit day [01, 31]
Hour (24-hour clock) [00, 23]
Hour (12-hour clock) [01, 12]
Two-digit minute [00, 59]
Second [00, 61] (seconds 60, 61 account for leap seconds)
Weekday as integer [0 (Sunday), 6]
Week number of the year [00, 53]; Sunday is considered the first day of the week, and days before the first Sunday of
the year are week 0
Week number of the year [00, 53]; Monday is considered the first day of the week, and days before the first Monday of
the year are week 0
UTC time zone offset as +HHMM or -HHMM; empty if time zone naive
Shortcut for %Y-%m-%d (e.g., 2012-4-18)
Shortcut for %m/%d/%y (e.g., 04/18/12)

%d

%H

%I

%M

%S

%w

%U

%W

%z

%F

%D

Control Flow
Python has several built-in keywords for conditional logic, loops, and other standard
control flow concepts found in other programming languages.

if, elif, and else

The  if  statement  is  one  of  the  most  well-known  control  flow  statement  types.  It
checks a condition that, if True, evaluates the code in the block that follows:

if x &lt; 0:
    print(&#39;It&#39;s negative&#39;)

An if statement can be optionally followed by one or more elif blocks and a catch-
all else block if all of the conditions are False:

if x &lt; 0:
    print(&#39;It&#39;s negative&#39;)
elif x == 0:
    print(&#39;Equal to zero&#39;)
elif 0 &lt; x &lt; 5:
    print(&#39;Positive but smaller than 5&#39;)
else:
    print(&#39;Positive and larger than or equal to 5&#39;)

If any of the conditions is True, no further elif or else blocks will be reached. With
a compound condition using and or or, conditions are evaluated left to right and will
short-circuit:

In [117]: a = 5; b = 7

In [118]: c = 8; d = 4

46 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

In [119]: if a &lt; b or c &gt; d:
   .....:     print(&#39;Made it&#39;)
Made it

In this example, the comparison c &gt; d never gets evaluated because the first compar
ison was True.

It is also possible to chain comparisons:

In [120]: 4 &gt; 3 &gt; 2 &gt; 1
Out[120]: True

for loops

for  loops  are  for  iterating  over  a  collection  (like  a  list  or  tuple)  or  an  iterater.  The
standard syntax for a for loop is:

for value in collection:
    # do something with value

You can advance a for loop to the next iteration, skipping the remainder of the block,
using the continue keyword. Consider this code, which sums up integers in a list and
skips None values:

sequence = [1, 2, None, 4, None, 5]
total = 0
for value in sequence:
    if value is None:
        continue
    total += value

A  for  loop  can  be  exited  altogether  with  the  break  keyword.  This  code  sums  ele
ments of the list until a 5 is reached:

sequence = [1, 2, 0, 4, 6, 5, 2, 1]
total_until_5 = 0
for value in sequence:
    if value == 5:
        break
    total_until_5 += value

The break keyword only terminates the innermost for loop; any outer for loops will
continue to run:

In [121]: for i in range(4):
   .....:     for j in range(4):
   .....:         if j &gt; i:
   .....:             break
   .....:         print((i, j))
   .....:
(0, 0)
(1, 0)

2.3 Python Language Basics 

| 

47

(1, 1)
(2, 0)
(2, 1)
(2, 2)
(3, 0)
(3, 1)
(3, 2)
(3, 3)

As we will see in more detail, if the elements in the collection or iterator are sequen
ces (tuples or lists, say), they can be conveniently unpacked into variables in the for
loop statement:

for a, b, c in iterator:
    # do something

while loops

A while loop specifies a condition and a block of code that is to be executed until the
condition evaluates to False or the loop is explicitly ended with break:

x = 256
total = 0
while x &gt; 0:
    if total &gt; 500:
        break
    total += x
    x = x // 2

pass

pass is the no-op statement in Python. It can be used in blocks where no action is to
be  taken  (or  as  a  placeholder  for  code  not  yet  implemented);  it  is  only  required
because Python uses whitespace to delimit blocks:

if x &lt; 0:
    print(&#39;negative!&#39;)
elif x == 0:
    # TODO: put something smart here
    pass
else:
    print(&#39;positive!&#39;)

range

The  range  function  returns  an  iterator  that  yields  a  sequence  of  evenly  spaced
integers:

In [122]: range(10)
Out[122]: range(0, 10)

48 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

In [123]: list(range(10))
Out[123]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Both a start, end, and step (which may be negative) can be given:

In [124]: list(range(0, 20, 2))
Out[124]: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]

In [125]: list(range(5, 0, -1))
Out[125]: [5, 4, 3, 2, 1]

As  you  can  see,  range  produces  integers  up  to  but  not  including  the  endpoint.  A
common use of range is for iterating through sequences by index:

seq = [1, 2, 3, 4]
for i in range(len(seq)):
    val = seq[i]

While you can use functions like list to store all the integers generated by range in
some other data structure, often the default iterator form will be what you want. This
snippet sums all numbers from 0 to 99,999 that are multiples of 3 or 5:

sum = 0
for i in range(100000):
    # % is the modulo operator
    if i % 3 == 0 or i % 5 == 0:
        sum += i

While the range generated can be arbitrarily large, the memory use at any given time
may be very small.

Ternary expressions

A  ternary  expression  in  Python  allows  you  to  combine  an  if-else  block  that  pro
duces a value into a single line or expression. The syntax for this in Python is:

value = true-expr if condition else false-expr

Here, true-expr and false-expr can be any Python expressions. It has the identical
effect as the more verbose:

if condition:
    value = true-expr
else:
    value = false-expr

This is a more concrete example:

In [126]: x = 5

In [127]: &#39;Non-negative&#39; if x &gt;= 0 else &#39;Negative&#39;
Out[127]: &#39;Non-negative&#39;

2.3 Python Language Basics 

| 

49

As with if-else blocks, only one of the expressions will be executed. Thus, the if 
and else sides of the ternary expression could contain costly computations, but only
the true branch is ever evaluated.

While it may be tempting to always use ternary expressions to condense your code,
realize that you may sacrifice readability if the condition as well as the true and false
expressions are very complex.

50 

| 

Chapter 2: Python Language Basics, IPython, and Jupyter Notebooks

CHAPTER 3
Built-in Data Structures, Functions,
and Files

This  chapter  discusses  capabilities  built  into  the  Python  language  that  will  be  used
ubiquitously  throughout  the  book.  While  add-on  libraries  like  pandas  and  NumPy
add advanced computational functionality for larger datasets, they are designed to be
used together with Pythons built-in data manipulation tools.

Well start with Pythons workhorse data structures: tuples, lists, dicts, and sets. Then,
well  discuss  creating  your  own  reusable  Python  functions.  Finally,  well  look  at  the
mechanics of Python file objects and interacting with your local hard drive.

3.1 Data Structures and Sequences
Pythons data structures are simple but powerful. Mastering their use is a critical part
of becoming a proficient Python programmer.

Tuple
A tuple is a fixed-length, immutable sequence of Python objects. The easiest way to
create one is with a comma-separated sequence of values:

In [1]: tup = 4, 5, 6

In [2]: tup
Out[2]: (4, 5, 6)

When youre defining tuples in more complicated expressions, its often necessary to
enclose the values in parentheses, as in this example of creating a tuple of tuples:

51

In [3]: nested_tup = (4, 5, 6), (7, 8)

In [4]: nested_tup
Out[4]: ((4, 5, 6), (7, 8))

You can convert any sequence or iterator to a tuple by invoking tuple:

In [5]: tuple([4, 0, 2])
Out[5]: (4, 0, 2)

In [6]: tup = tuple(&#39;string&#39;)

In [7]: tup
Out[7]: (&#39;s&#39;, &#39;t&#39;, &#39;r&#39;, &#39;i&#39;, &#39;n&#39;, &#39;g&#39;)

Elements can be accessed with square brackets [] as with most other sequence types.
As in C, C++, Java, and many other languages, sequences are 0-indexed in Python:

In [8]: tup[0]
Out[8]: &#39;s&#39;

While the objects stored in a tuple may be mutable themselves, once the tuple is cre
ated its not possible to modify which object is stored in each slot:

In [9]: tup = tuple([&#39;foo&#39;, [1, 2], True])

In [10]: tup[2] = False
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-10-c7308343b841&gt; in &lt;module&gt;()
----&gt; 1 tup[2] = False
TypeError: &#39;tuple&#39; object does not support item assignment

If an object inside a tuple is mutable, such as a list, you can modify it in-place:

In [11]: tup[1].append(3)

In [12]: tup
Out[12]: (&#39;foo&#39;, [1, 2, 3], True)

You can concatenate tuples using the + operator to produce longer tuples:

In [13]: (4, None, &#39;foo&#39;) + (6, 0) + (&#39;bar&#39;,)
Out[13]: (4, None, &#39;foo&#39;, 6, 0, &#39;bar&#39;)

Multiplying a tuple by an integer, as with lists, has the effect of concatenating together
that many copies of the tuple:

In [14]: (&#39;foo&#39;, &#39;bar&#39;) * 4
Out[14]: (&#39;foo&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;foo&#39;, &#39;bar&#39;)

Note that the objects themselves are not copied, only the references to them.

52 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

Unpacking tuples

If  you  try  to  assign  to  a  tuple-like  expression  of  variables,  Python  will  attempt  to
unpack the value on the righthand side of the equals sign:

In [15]: tup = (4, 5, 6)

In [16]: a, b, c = tup

In [17]: b
Out[17]: 5

Even sequences with nested tuples can be unpacked:

In [18]: tup = 4, 5, (6, 7)

In [19]: a, b, (c, d) = tup

In [20]: d
Out[20]: 7

Using  this  functionality  you  can  easily  swap  variable  names,  a  task  which  in  many
languages might look like:

tmp = a
a = b
b = tmp

But, in Python, the swap can be done like this:

In [21]: a, b = 1, 2

In [22]: a
Out[22]: 1

In [23]: b
Out[23]: 2

In [24]: b, a = a, b

In [25]: a
Out[25]: 2

In [26]: b
Out[26]: 1

A common use of variable unpacking is iterating over sequences of tuples or lists:

In [27]: seq = [(1, 2, 3), (4, 5, 6), (7, 8, 9)]

In [28]: for a, b, c in seq:
   ....:     print(&#39;a={0}, b={1}, c={2}&#39;.format(a, b, c))
a=1, b=2, c=3
a=4, b=5, c=6
a=7, b=8, c=9

3.1 Data Structures and Sequences 

| 

53

Another common use is returning multiple values from a function. Ill cover this in
more detail later.

The Python language recently acquired some more advanced tuple unpacking to help
with situations where you may want to pluck a few elements from the beginning of
a tuple. This uses the special syntax *rest, which is also used in function signatures
to capture an arbitrarily long list of positional arguments:

In [29]: values = 1, 2, 3, 4, 5

In [30]: a, b, *rest = values

In [31]: a, b
Out[31]: (1, 2)

In [32]: rest
Out[32]: [3, 4, 5]

This  rest  bit  is  sometimes  something  you  want  to  discard;  there  is  nothing  special
about the rest name. As a matter of convention, many Python programmers will use
the underscore (_) for unwanted variables:

In [33]: a, b, *_ = values

Tuple methods

Since the size and contents of a tuple cannot be modified, it is very light on instance
methods. A particularly useful one (also available on lists) is count, which counts the
number of occurrences of a value:

In [34]: a = (1, 2, 2, 2, 3, 4, 2)

In [35]: a.count(2)
Out[35]: 4

List
In  contrast  with  tuples,  lists  are  variable-length  and  their  contents  can  be  modified
in-place. You can define them using square brackets [] or using the list type func
tion:

In [36]: a_list = [2, 3, 7, None]

In [37]: tup = (&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;)

In [38]: b_list = list(tup)

In [39]: b_list
Out[39]: [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]

In [40]: b_list[1] = &#39;peekaboo&#39;

54 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

In [41]: b_list
Out[41]: [&#39;foo&#39;, &#39;peekaboo&#39;, &#39;baz&#39;]

Lists and tuples are semantically similar (though tuples cannot be modified) and can
be used interchangeably in many functions.

The  list  function  is  frequently  used  in  data  processing  as  a  way  to  materialize  an
iterator or generator expression:

In [42]: gen = range(10)

In [43]: gen
Out[43]: range(0, 10)

In [44]: list(gen)
Out[44]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Adding and removing elements

Elements can be appended to the end of the list with the append method:

In [45]: b_list.append(&#39;dwarf&#39;)

In [46]: b_list
Out[46]: [&#39;foo&#39;, &#39;peekaboo&#39;, &#39;baz&#39;, &#39;dwarf&#39;]

Using insert you can insert an element at a specific location in the list:

In [47]: b_list.insert(1, &#39;red&#39;)

In [48]: b_list
Out[48]: [&#39;foo&#39;, &#39;red&#39;, &#39;peekaboo&#39;, &#39;baz&#39;, &#39;dwarf&#39;]

The insertion index must be between 0 and the length of the list, inclusive.

insert  is  computationally  expensive  compared  with  append,
because references to subsequent elements have to be shifted inter
nally to make room for the new element. If you need to insert ele
ments at both the beginning and end of a sequence, you may wish
to explore collections.deque, a double-ended queue, for this pur
pose.

The inverse operation to insert is pop, which removes and returns an element at a
particular index:

In [49]: b_list.pop(2)
Out[49]: &#39;peekaboo&#39;

In [50]: b_list
Out[50]: [&#39;foo&#39;, &#39;red&#39;, &#39;baz&#39;, &#39;dwarf&#39;]

3.1 Data Structures and Sequences 

| 

55

Elements can be removed by value with remove, which locates the first such value and
removes it from the last:

In [51]: b_list.append(&#39;foo&#39;)

In [52]: b_list
Out[52]: [&#39;foo&#39;, &#39;red&#39;, &#39;baz&#39;, &#39;dwarf&#39;, &#39;foo&#39;]

In [53]: b_list.remove(&#39;foo&#39;)

In [54]: b_list
Out[54]: [&#39;red&#39;, &#39;baz&#39;, &#39;dwarf&#39;, &#39;foo&#39;]

If performance is not a concern, by using append and remove, you can use a Python
list as a perfectly suitable multiset data structure.

Check if a list contains a value using the in keyword:

In [55]: &#39;dwarf&#39; in b_list
Out[55]: True

The keyword not can be used to negate in:

In [56]: &#39;dwarf&#39; not in b_list
Out[56]: False

Checking whether a list contains a value is a lot slower than doing so with dicts and
sets (to be introduced shortly), as Python makes a linear scan across the values of the
list, whereas it can check the others (based on hash tables) in constant time.

Concatenating and combining lists

Similar to tuples, adding two lists together with + concatenates them:

In [57]: [4, None, &#39;foo&#39;] + [7, 8, (2, 3)]
Out[57]: [4, None, &#39;foo&#39;, 7, 8, (2, 3)]

If you have a list already defined, you can append multiple elements to it using the
extend method:

In [58]: x = [4, None, &#39;foo&#39;]

In [59]: x.extend([7, 8, (2, 3)])

In [60]: x
Out[60]: [4, None, &#39;foo&#39;, 7, 8, (2, 3)]

Note that list concatenation by addition is a comparatively expensive operation since
a new list must be created and the objects copied over. Using extend to append ele
ments to an existing list, especially if you are building up a large list, is usually pref
erable. Thus,

56 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

everything = []
for chunk in list_of_lists:
    everything.extend(chunk)

is faster than the concatenative alternative:

everything = []
for chunk in list_of_lists:
    everything = everything + chunk

Sorting

You  can  sort  a  list  in-place  (without  creating  a  new  object)  by  calling  its  sort
function:

In [61]: a = [7, 2, 5, 1, 3]

In [62]: a.sort()

In [63]: a
Out[63]: [1, 2, 3, 5, 7]

sort has a few options that will occasionally come in handy. One is the ability to pass
a  secondary  sort  keythat  is,  a  function  that  produces  a  value  to  use  to  sort  the
objects. For example, we could sort a collection of strings by their lengths:

In [64]: b = [&#39;saw&#39;, &#39;small&#39;, &#39;He&#39;, &#39;foxes&#39;, &#39;six&#39;]

In [65]: b.sort(key=len)

In [66]: b
Out[66]: [&#39;He&#39;, &#39;saw&#39;, &#39;six&#39;, &#39;small&#39;, &#39;foxes&#39;]

Soon, well look at the sorted function, which can produce a sorted copy of a general
sequence.

Binary search and maintaining a sorted list

The built-in bisect module implements binary search and insertion into a sorted list.
bisect.bisect finds the location where an element should be inserted to keep it sor
ted, while bisect.insort actually inserts the element into that location:

In [67]: import bisect

In [68]: c = [1, 2, 2, 2, 3, 4, 7]

In [69]: bisect.bisect(c, 2)
Out[69]: 4

In [70]: bisect.bisect(c, 5)
Out[70]: 6

3.1 Data Structures and Sequences 

| 

57

In [71]: bisect.insort(c, 6)

In [72]: c
Out[72]: [1, 2, 2, 2, 3, 4, 6, 7]

The bisect module functions do not check whether the list is sor
ted, as doing so would be computationally expensive. Thus, using
them with an unsorted list will succeed without error but may lead
to incorrect results.

Slicing

You  can  select  sections  of  most  sequence  types  by  using  slice  notation,  which  in  its
basic form consists of start:stop passed to the indexing operator []:

In [73]: seq = [7, 2, 3, 7, 5, 6, 0, 1]

In [74]: seq[1:5]
Out[74]: [2, 3, 7, 5]

Slices can also be assigned to with a sequence:

In [75]: seq[3:4] = [6, 3]

In [76]: seq
Out[76]: [7, 2, 3, 6, 3, 5, 6, 0, 1]

While the element at the start index is included, the stop index is not included, so
that the number of elements in the result is stop - start.

Either the start or stop can be omitted, in which case they default to the start of the
sequence and the end of the sequence, respectively:

In [77]: seq[:5]
Out[77]: [7, 2, 3, 6, 3]

In [78]: seq[3:]
Out[78]: [6, 3, 5, 6, 0, 1]

Negative indices slice the sequence relative to the end:

In [79]: seq[-4:]
Out[79]: [5, 6, 0, 1]

In [80]: seq[-6:-2]
Out[80]: [6, 3, 5, 6]

Slicing semantics takes a bit of getting used to, especially if youre coming from R or
MATLAB. See Figure 3-1 for a helpful illustration of slicing with positive and nega
tive  integers.  In  the  figure,  the  indices  are  shown  at  the  bin  edges  to  help  show
where the slice selections start and stop using positive or negative indices.

58 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

A step can also be used after a second colon to, say, take every other element:

In [81]: seq[::2]
Out[81]: [7, 3, 3, 6, 1]

A clever use of this is to pass -1, which has the useful effect of reversing a list or tuple:

In [82]: seq[::-1]
Out[82]: [1, 0, 6, 5, 3, 6, 3, 2, 7]

Figure 3-1. Illustration of Python slicing conventions

Built-in Sequence Functions
Python has a handful of useful sequence functions that you should familiarize your
self with and use at any opportunity.

enumerate

Its common when iterating over a sequence to want to keep track of the index of the
current item. A do-it-yourself approach would look like:

i = 0
for value in collection:
   # do something with value
   i += 1

Since this is so common, Python has a built-in function, enumerate, which returns a
sequence of (i, value) tuples:

for i, value in enumerate(collection):
   # do something with value

When  you  are  indexing  data,  a  helpful  pattern  that  uses  enumerate  is  computing  a
dict  mapping  the  values  of  a  sequence  (which  are  assumed  to  be  unique)  to  their
locations in the sequence:

In [83]: some_list = [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]

In [84]: mapping = {}

3.1 Data Structures and Sequences 

| 

59

In [85]: for i, v in enumerate(some_list):
   ....:     mapping[v] = i

In [86]: mapping
Out[86]: {&#39;bar&#39;: 1, &#39;baz&#39;: 2, &#39;foo&#39;: 0}

sorted

The sorted function returns a new sorted list from the elements of any sequence:

In [87]: sorted([7, 1, 2, 6, 0, 3, 2])
Out[87]: [0, 1, 2, 2, 3, 6, 7]

In [88]: sorted(&#39;horse race&#39;)
Out[88]: [&#39; &#39;, &#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;e&#39;, &#39;h&#39;, &#39;o&#39;, &#39;r&#39;, &#39;r&#39;, &#39;s&#39;]

The sorted function accepts the same arguments as the sort method on lists.

zip

zip pairs up the elements of a number of lists, tuples, or other sequences to create a
list of tuples:

In [89]: seq1 = [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]

In [90]: seq2 = [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;]

In [91]: zipped = zip(seq1, seq2)

In [92]: list(zipped)
Out[92]: [(&#39;foo&#39;, &#39;one&#39;), (&#39;bar&#39;, &#39;two&#39;), (&#39;baz&#39;, &#39;three&#39;)]

zip can take an arbitrary number of sequences, and the number of elements it pro
duces is determined by the shortest sequence:

In [93]: seq3 = [False, True]

In [94]: list(zip(seq1, seq2, seq3))
Out[94]: [(&#39;foo&#39;, &#39;one&#39;, False), (&#39;bar&#39;, &#39;two&#39;, True)]

A very common use of zip is simultaneously iterating over multiple sequences, possi
bly also combined with enumerate:

In [95]: for i, (a, b) in enumerate(zip(seq1, seq2)):
   ....:     print(&#39;{0}: {1}, {2}&#39;.format(i, a, b))
   ....:
0: foo, one
1: bar, two
2: baz, three

60 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

Given  a  zipped  sequence,  zip  can  be  applied  in  a  clever  way  to  unzip  the
sequence.  Another  way  to  think  about  this  is  converting  a  list  of  rows  into  a  list  of
columns. The syntax, which looks a bit magical, is:

In [96]: pitchers = [(&#39;Nolan&#39;, &#39;Ryan&#39;), (&#39;Roger&#39;, &#39;Clemens&#39;),
   ....:             (&#39;Schilling&#39;, &#39;Curt&#39;)]

In [97]: first_names, last_names = zip(*pitchers)

In [98]: first_names
Out[98]: (&#39;Nolan&#39;, &#39;Roger&#39;, &#39;Schilling&#39;)

In [99]: last_names
Out[99]: (&#39;Ryan&#39;, &#39;Clemens&#39;, &#39;Curt&#39;)

reversed

reversed iterates over the elements of a sequence in reverse order:

In [100]: list(reversed(range(10)))
Out[100]: [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]

Keep in mind that reversed is a generator (to be discussed in some more detail later),
so it does not create the reversed sequence until materialized (e.g., with list or a for
loop).

dict
dict  is  likely  the  most  important  built-in  Python  data  structure.  A  more  common
name for it is hash map or associative array. It is a flexibly sized collection of key-value
pairs, where key and value are Python objects. One approach for creating one is to use
curly braces {} and colons to separate keys and values:

In [101]: empty_dict = {}

In [102]: d1 = {&#39;a&#39; : &#39;some value&#39;, &#39;b&#39; : [1, 2, 3, 4]}

In [103]: d1
Out[103]: {&#39;a&#39;: &#39;some value&#39;, &#39;b&#39;: [1, 2, 3, 4]}

You can access, insert, or set elements using the same syntax as for accessing elements
of a list or tuple:

In [104]: d1[7] = &#39;an integer&#39;

In [105]: d1
Out[105]: {&#39;a&#39;: &#39;some value&#39;, &#39;b&#39;: [1, 2, 3, 4], 7: &#39;an integer&#39;}

In [106]: d1[&#39;b&#39;]
Out[106]: [1, 2, 3, 4]

3.1 Data Structures and Sequences 

| 

61

You  can  check  if  a  dict  contains  a  key  using  the  same  syntax  used  for  checking
whether a list or tuple contains a value:

In [107]: &#39;b&#39; in d1
Out[107]: True

You can delete values either using the del keyword or the pop method (which simul
taneously returns the value and deletes the key):

In [108]: d1[5] = &#39;some value&#39;

In [109]: d1
Out[109]: 
{&#39;a&#39;: &#39;some value&#39;,
 &#39;b&#39;: [1, 2, 3, 4],
 7: &#39;an integer&#39;,
 5: &#39;some value&#39;}

In [110]: d1[&#39;dummy&#39;] = &#39;another value&#39;

In [111]: d1
Out[111]: 
{&#39;a&#39;: &#39;some value&#39;,
 &#39;b&#39;: [1, 2, 3, 4],
 7: &#39;an integer&#39;,
 5: &#39;some value&#39;,
 &#39;dummy&#39;: &#39;another value&#39;}

In [112]: del d1[5]

In [113]: d1
Out[113]: 
{&#39;a&#39;: &#39;some value&#39;,
 &#39;b&#39;: [1, 2, 3, 4],
 7: &#39;an integer&#39;,
 &#39;dummy&#39;: &#39;another value&#39;}

In [114]: ret = d1.pop(&#39;dummy&#39;)

In [115]: ret
Out[115]: &#39;another value&#39;

In [116]: d1
Out[116]: {&#39;a&#39;: &#39;some value&#39;, &#39;b&#39;: [1, 2, 3, 4], 7: &#39;an integer&#39;}

The keys and values method give you iterators of the dicts keys and values, respec
tively. While the key-value pairs are not in any particular order, these functions out
put the keys and values in the same order:

In [117]: list(d1.keys())
Out[117]: [&#39;a&#39;, &#39;b&#39;, 7]

62 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

In [118]: list(d1.values())
Out[118]: [&#39;some value&#39;, [1, 2, 3, 4], &#39;an integer&#39;]

You can merge one dict into another using the update method:

In [119]: d1.update({&#39;b&#39; : &#39;foo&#39;, &#39;c&#39; : 12})

In [120]: d1
Out[120]: {&#39;a&#39;: &#39;some value&#39;, &#39;b&#39;: &#39;foo&#39;, 7: &#39;an integer&#39;, &#39;c&#39;: 12}

The update method changes dicts in-place, so any existing keys in the data passed to
update will have their old values discarded.

Creating dicts from sequences

Its  common  to  occasionally  end  up  with  two  sequences  that  you  want  to  pair  up
element-wise in a dict. As a first cut, you might write code like this:

mapping = {}
for key, value in zip(key_list, value_list):
    mapping[key] = value

Since a dict is essentially a collection of 2-tuples, the  dict function accepts a list of
2-tuples:

In [121]: mapping = dict(zip(range(5), reversed(range(5))))

In [122]: mapping
Out[122]: {0: 4, 1: 3, 2: 2, 3: 1, 4: 0}

Later well talk about dict comprehensions, another elegant way to construct dicts.

Default values

Its very common to have logic like:

if key in some_dict:
    value = some_dict[key]
else:
    value = default_value

Thus, the dict methods get and pop can take a default value to be returned, so that
the above if-else block can be written simply as:

value = some_dict.get(key, default_value)

get by default will return None if the key is not present, while pop will raise an excep
tion. With setting values, a common case is for the values in a dict to be other collec
tions, like lists. For example, you could imagine categorizing a list of words by their
first letters as a dict of lists:

In [123]: words = [&#39;apple&#39;, &#39;bat&#39;, &#39;bar&#39;, &#39;atom&#39;, &#39;book&#39;]

In [124]: by_letter = {}

3.1 Data Structures and Sequences 

| 

63

In [125]: for word in words:
   .....:     letter = word[0]
   .....:     if letter not in by_letter:
   .....:         by_letter[letter] = [word]
   .....:     else:
   .....:         by_letter[letter].append(word)
   .....:

In [126]: by_letter
Out[126]: {&#39;a&#39;: [&#39;apple&#39;, &#39;atom&#39;], &#39;b&#39;: [&#39;bat&#39;, &#39;bar&#39;, &#39;book&#39;]}

The  setdefault  dict  method  is  for  precisely  this  purpose.  The  preceding  for  loop
can be rewritten as:

for word in words:
    letter = word[0]
    by_letter.setdefault(letter, []).append(word)

The built-in collections module has a useful class, defaultdict, which makes this
even easier. To create one, you pass a type or function for generating the default value
for each slot in the dict:

from collections import defaultdict
by_letter = defaultdict(list)
for word in words:
    by_letter[word[0]].append(word)

Valid dict key types

While  the  values  of  a  dict  can  be  any  Python  object,  the  keys  generally  have  to  be
immutable objects like scalar types (int, float, string) or tuples (all the objects in the
tuple  need  to  be  immutable,  too).  The  technical  term  here  is  hashability.  You  can
check  whether  an  object  is  hashable  (can  be  used  as  a  key  in  a  dict)  with  the  hash
function:

In [127]: hash(&#39;string&#39;)
Out[127]: 5023931463650008331

In [128]: hash((1, 2, (2, 3)))
Out[128]: 1097636502276347782

In [129]: hash((1, 2, [2, 3])) # fails because lists are mutable
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-129-800cd14ba8be&gt; in &lt;module&gt;()
----&gt; 1 hash((1, 2, [2, 3])) # fails because lists are mutable
TypeError: unhashable type: &#39;list&#39;

64 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

To use a list as a key, one option is to convert it to a tuple, which can be hashed as
long as its elements also can:

In [130]: d = {}

In [131]: d[tuple([1, 2, 3])] = 5

In [132]: d
Out[132]: {(1, 2, 3): 5}

set
A set is an unordered collection of unique elements. You can think of them like dicts,
but keys only, no values. A set can be created in two ways: via the set function or via
a set literal with curly braces:

In [133]: set([2, 2, 2, 1, 3, 3])
Out[133]: {1, 2, 3}

In [134]: {2, 2, 2, 1, 3, 3}
Out[134]: {1, 2, 3}

Sets  support  mathematical  set  operations  like  union,  intersection,  difference,  and
symmetric difference. Consider these two example sets:

In [135]: a = {1, 2, 3, 4, 5}

In [136]: b = {3, 4, 5, 6, 7, 8}

The union of these two sets is the set of distinct elements occurring in either set. This
can be computed with either the union method or the | binary operator:

In [137]: a.union(b)
Out[137]: {1, 2, 3, 4, 5, 6, 7, 8}

In [138]: a | b
Out[138]: {1, 2, 3, 4, 5, 6, 7, 8}

The intersection contains the elements occurring in both sets. The &amp; operator or the
intersection method can be used:

In [139]: a.intersection(b)
Out[139]: {3, 4, 5}

In [140]: a &amp; b
Out[140]: {3, 4, 5}

See Table 3-1 for a list of commonly used set methods.

3.1 Data Structures and Sequences 

| 

65

Table 3-1. Python set operations

Function

a.add(x)

a.clear()

a.remove(x)

a.pop()

a.union(b)

a.update(b)

a.intersection(b)

a.intersection_update(b)

a.difference(b)

a.difference_update(b)

a.symmetric_difference(b)

Alternative
syntax
N/A
N/A

N/A
N/A

a | b

a |= b

a &amp; b

a &amp;= b

a - b

a -= b

a ^ b

a.symmetric_difference_update(b) a ^= b

a.issubset(b)

a.issuperset(b)

a.isdisjoint(b)

N/A
N/A
N/A

Description

Add element x to the set a
Reset the set a to an empty state, discarding all of
its elements
Remove element x from the set a
Remove an arbitrary element from the set a, raising
KeyError if the set is empty
All of the unique elements in a and b
Set the contents of a to be the union of the
elements in a and b
All of the elements in both a and b
Set the contents of a to be the intersection of the
elements in a and b
The elements in a that are not in b
Set a to the elements in a that are not in b
All of the elements in either a or b but not both
Set a to contain the elements in either a or b but
not both
True if the elements of a are all contained in b
True if the elements of b are all contained in a
True if a and b have no elements in common

All  of  the  logical  set  operations  have  in-place  counterparts,  which  enable  you  to
replace  the  contents  of  the  set  on  the  left  side  of  the  operation  with  the  result.  For
very large sets, this may be more efficient:

In [141]: c = a.copy()

In [142]: c |= b

In [143]: c
Out[143]: {1, 2, 3, 4, 5, 6, 7, 8}

In [144]: d = a.copy()

In [145]: d &amp;= b

In [146]: d
Out[146]: {3, 4, 5}

Like dicts, set elements generally must be immutable. To have list-like elements, you
must convert it to a tuple:

66 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

In [147]: my_data = [1, 2, 3, 4]

In [148]: my_set = {tuple(my_data)}

In [149]: my_set
Out[149]: {(1, 2, 3, 4)}

You can also check if a set is a subset of (is contained in) or a superset of (contains all
elements of) another set:

In [150]: a_set = {1, 2, 3, 4, 5}

In [151]: {1, 2, 3}.issubset(a_set)
Out[151]: True

In [152]: a_set.issuperset({1, 2, 3})
Out[152]: True

Sets are equal if and only if their contents are equal:

In [153]: {1, 2, 3} == {3, 2, 1}
Out[153]: True

List, Set, and Dict Comprehensions
List comprehensions are one of the most-loved Python language features. They allow
you to concisely form a new list by filtering the elements of a collection, transforming
the elements passing the filter in one concise expression. They take the basic form:

[expr for val in collection if condition]

This is equivalent to the following for loop:

result = []
for val in collection:
    if condition:
        result.append(expr)

The filter condition can be omitted, leaving only the expression. For example, given a
list of strings, we could filter out strings with length 2 or less and also convert them to
uppercase like this:

In [154]: strings = [&#39;a&#39;, &#39;as&#39;, &#39;bat&#39;, &#39;car&#39;, &#39;dove&#39;, &#39;python&#39;]

In [155]: [x.upper() for x in strings if len(x) &gt; 2]
Out[155]: [&#39;BAT&#39;, &#39;CAR&#39;, &#39;DOVE&#39;, &#39;PYTHON&#39;]

Set and dict comprehensions are a natural extension, producing sets and dicts in an
idiomatically similar way instead of lists. A dict comprehension looks like this:

dict_comp = {key-expr : value-expr for value in collection
             if condition}

3.1 Data Structures and Sequences 

| 

67

A set comprehension looks like the equivalent list comprehension except with curly
braces instead of square brackets:

set_comp = {expr for value in collection if condition}

Like list comprehensions, set and dict comprehensions are mostly conveniences, but
they similarly can make code both easier to write and read. Consider the list of strings
from before. Suppose we wanted a set containing just the lengths of the strings con
tained in the collection; we could easily compute this using a set comprehension:

In [156]: unique_lengths = {len(x) for x in strings}

In [157]: unique_lengths
Out[157]: {1, 2, 3, 4, 6}

We  could  also  express  this  more  functionally  using  the  map  function,  introduced
shortly:

In [158]: set(map(len, strings))
Out[158]: {1, 2, 3, 4, 6}

As  a  simple  dict  comprehension  example,  we  could  create  a  lookup  map  of  these
strings to their locations in the list:

In [159]: loc_mapping = {val : index for index, val in enumerate(strings)}

In [160]: loc_mapping
Out[160]: {&#39;a&#39;: 0, &#39;as&#39;: 1, &#39;bat&#39;: 2, &#39;car&#39;: 3, &#39;dove&#39;: 4, &#39;python&#39;: 5}

Nested list comprehensions

Suppose we have a list of lists containing some English and Spanish names:

In [161]: all_data = [[&#39;John&#39;, &#39;Emily&#39;, &#39;Michael&#39;, &#39;Mary&#39;, &#39;Steven&#39;],
   .....:             [&#39;Maria&#39;, &#39;Juan&#39;, &#39;Javier&#39;, &#39;Natalia&#39;, &#39;Pilar&#39;]]

You  might  have  gotten  these  names  from  a  couple  of  files  and  decided  to  organize
them by language. Now, suppose we wanted to get a single list containing all names
with two or more es in them. We could certainly do this with a simple for loop:

names_of_interest = []
for names in all_data:
    enough_es = [name for name in names if name.count(&#39;e&#39;) &gt;= 2]
    names_of_interest.extend(enough_es)

You can actually wrap this whole operation up in a single nested list comprehension,
which will look like:

In [162]: result = [name for names in all_data for name in names
   .....:           if name.count(&#39;e&#39;) &gt;= 2]

In [163]: result
Out[163]: [&#39;Steven&#39;]

68 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

At first, nested list comprehensions are a bit hard to wrap your head around. The for
parts of the list comprehension are arranged according to the order of nesting, and
any  filter  condition  is  put  at  the  end  as  before.  Here  is  another  example  where  we
flatten a list of tuples of integers into a simple list of integers:

In [164]: some_tuples = [(1, 2, 3), (4, 5, 6), (7, 8, 9)]

In [165]: flattened = [x for tup in some_tuples for x in tup]

In [166]: flattened
Out[166]: [1, 2, 3, 4, 5, 6, 7, 8, 9]

Keep in mind that the order of the for expressions would be the same if you wrote a
nested for loop instead of a list comprehension:

flattened = []

for tup in some_tuples:
    for x in tup:
        flattened.append(x)

You can have arbitrarily many levels of nesting, though if you have more than two or
three levels of nesting you should probably start to question whether this makes sense
from a code readability standpoint. Its important to distinguish the syntax just shown
from a list comprehension inside a list comprehension, which is also perfectly valid:

In [167]: [[x for x in tup] for tup in some_tuples]
Out[167]: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]

This produces a list of lists, rather than a flattened list of all of the inner elements.

3.2 Functions
Functions  are  the  primary  and  most  important  method  of  code  organization  and
reuse in Python. As a rule of thumb, if you anticipate needing to repeat the same or
very similar code more than once, it may be worth writing a reusable function. Func
tions  can  also  help  make  your  code  more  readable  by  giving  a  name  to  a  group  of
Python statements.

Functions are declared with the def keyword and returned from with the return key
word:

def my_function(x, y, z=1.5):
    if z &gt; 1:
        return z * (x + y)
    else:
        return z / (x + y)

3.2 Functions 

| 

69

There is no issue with having multiple return statements. If Python reaches the end
of  a  function  without  encountering  a  return  statement,  None  is  returned  automati
cally.

Each function can have positional arguments and keyword arguments. Keyword argu
ments  are  most  commonly  used  to  specify  default  values  or  optional  arguments.  In
the preceding function, x and y are positional arguments while z is a keyword argu
ment. This means that the function can be called in any of these ways:

my_function(5, 6, z=0.7)
my_function(3.14, 7, 3.5)
my_function(10, 20)

The main restriction on function arguments is that the keyword arguments must fol
low  the  positional  arguments  (if  any).  You  can  specify  keyword  arguments  in  any
order; this frees you from having to remember which order the function arguments
were specified in and only what their names are.

It  is  possible  to  use  keywords  for  passing  positional  arguments  as
well. In the preceding example, we could also have written:

my_function(x=5, y=6, z=7)
my_function(y=6, x=5, z=7)

In some cases this can help with readability.

Namespaces, Scope, and Local Functions
Functions can access variables in two different scopes: global and local. An alternative
and more descriptive name describing a variable scope in Python is a namespace. Any
variables  that  are  assigned  within  a  function  by  default  are  assigned  to  the  local
namespace. The local namespace is created when the function is called and immedi
ately populated by the functions arguments. After the function is finished, the local
namespace  is  destroyed  (with  some  exceptions  that  are  outside  the  purview  of  this
chapter). Consider the following function:

def func():
    a = []
    for i in range(5):
        a.append(i)

When  func()  is  called,  the  empty  list  a  is  created,  five  elements  are  appended,  and
then  a  is  destroyed  when  the  function  exits.  Suppose  instead  we  had  declared  a  as
follows:

a = []
def func():
    for i in range(5):
        a.append(i)

70 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

Assigning  variables  outside  of  the  functions  scope  is  possible,  but  those  variables
must be declared as global via the global keyword:

In [168]: a = None

In [169]: def bind_a_variable():
   .....:     global a
   .....:     a = []
   .....: bind_a_variable()
   .....:

In [170]: print(a)
[]

I generally discourage use of the global keyword. Typically global
variables  are  used  to  store  some  kind  of  state  in  a  system.  If  you
find yourself using a lot of them, it may indicate a need for object-
oriented programming (using classes).

Returning Multiple Values
When I first programmed in Python after having programmed in Java and C++, one
of my favorite features was the ability to return multiple values from a function with
simple syntax. Heres an example:

def f():
    a = 5
    b = 6
    c = 7
    return a, b, c

a, b, c = f()

In  data  analysis  and  other  scientific  applications,  you  may  find  yourself  doing  this
often. Whats happening here is that the function is actually just returning one object,
namely a tuple, which is then being unpacked into the result variables. In the preced
ing example, we could have done this instead:

return_value = f()

In  this  case,  return_value  would  be  a  3-tuple  with  the  three  returned  variables.  A
potentially attractive alternative to returning multiple values like before might be to
return a dict instead:

def f():
    a = 5
    b = 6
    c = 7
    return {&#39;a&#39; : a, &#39;b&#39; : b, &#39;c&#39; : c}

3.2 Functions 

| 

71

This alternative technique can be useful depending on what you are trying to do.

Functions Are Objects
Since Python functions are objects, many constructs can be easily expressed that are
difficult  to  do  in  other  languages.  Suppose  we  were  doing  some  data  cleaning  and
needed to apply a bunch of transformations to the following list of strings:

In [171]: states = [&#39;   Alabama &#39;, &#39;Georgia!&#39;, &#39;Georgia&#39;, &#39;georgia&#39;, &#39;FlOrIda&#39;,
   .....:           &#39;south   carolina##&#39;, &#39;West virginia?&#39;]

Anyone who has ever worked with user-submitted survey data has seen messy results
like  these.  Lots  of  things  need  to  happen  to  make  this  list  of  strings  uniform  and
ready for analysis: stripping whitespace, removing punctuation symbols, and stand
ardizing on proper capitalization. One way to do this is to use built-in string methods
along with the re standard library module for regular expressions:

import re

def clean_strings(strings):
    result = []
    for value in strings:
        value = value.strip()
        value = re.sub(&#39;[!#?]&#39;, &#39;&#39;, value)
        value = value.title()
        result.append(value)
    return result

The result looks like this:

In [173]: clean_strings(states)
Out[173]: 
[&#39;Alabama&#39;,
 &#39;Georgia&#39;,
 &#39;Georgia&#39;,
 &#39;Georgia&#39;,
 &#39;Florida&#39;,
 &#39;South   Carolina&#39;,
 &#39;West Virginia&#39;]

An alternative approach that you may find useful is to make a list of the operations
you want to apply to a particular set of strings:

def remove_punctuation(value):
    return re.sub(&#39;[!#?]&#39;, &#39;&#39;, value)

clean_ops = [str.strip, remove_punctuation, str.title]

def clean_strings(strings, ops):
    result = []
    for value in strings:
        for function in ops:

72 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

            value = function(value)
        result.append(value)
    return result

Then we have the following:

In [175]: clean_strings(states, clean_ops)
Out[175]: 
[&#39;Alabama&#39;,
 &#39;Georgia&#39;,
 &#39;Georgia&#39;,
 &#39;Georgia&#39;,
 &#39;Florida&#39;,
 &#39;South   Carolina&#39;,
 &#39;West Virginia&#39;]

A more functional pattern like this enables you to easily modify how the strings are
transformed at a very high level. The clean_strings function is also now more reus
able and generic.

You can use functions as arguments to other functions like the built-in map function,
which applies a function to a sequence of some kind:

In [176]: for x in map(remove_punctuation, states):
   .....:     print(x)
Alabama 
Georgia
Georgia
georgia
FlOrIda
south   carolina
West virginia

Anonymous (Lambda) Functions
Python has support for so-called anonymous or lambda functions, which are a way of
writing  functions  consisting  of  a  single  statement,  the  result  of  which  is  the  return
value. They are defined with the lambda keyword, which has no meaning other than
we are declaring an anonymous function:

def short_function(x):
    return x * 2

equiv_anon = lambda x: x * 2

I usually refer to these as lambda functions in the rest of the book. They are especially
convenient  in  data  analysis  because,  as  youll  see,  there  are  many  cases  where  data
transformation functions will take functions as arguments. Its often less typing (and
clearer) to pass a lambda function as opposed to writing a full-out function declara
tion or even assigning the lambda function to a local variable. For example, consider
this silly example:

3.2 Functions 

| 

73

def apply_to_list(some_list, f):
    return [f(x) for x in some_list]

ints = [4, 0, 1, 5, 6]
apply_to_list(ints, lambda x: x * 2)

You could also have written [x * 2 for x in ints], but here we were able to suc
cinctly pass a custom operator to the apply_to_list function.

As another example, suppose you wanted to sort a collection of strings by the number
of distinct letters in each string:

In [177]: strings = [&#39;foo&#39;, &#39;card&#39;, &#39;bar&#39;, &#39;aaaa&#39;, &#39;abab&#39;]

Here we could pass a lambda function to the lists sort method:

In [178]: strings.sort(key=lambda x: len(set(list(x))))

In [179]: strings
Out[179]: [&#39;aaaa&#39;, &#39;foo&#39;, &#39;abab&#39;, &#39;bar&#39;, &#39;card&#39;]

One  reason  lambda  functions  are  called  anonymous  functions  is
that , unlike functions declared with the def keyword, the function
object itself is never given an explicit __name__ attribute.

Currying: Partial Argument Application
Currying is computer science jargon (named after the mathematician Haskell Curry)
that  means  deriving  new  functions  from  existing  ones  by  partial  argument  applica
tion. For example, suppose we had a trivial function that adds two numbers together:

def add_numbers(x, y):
    return x + y

Using this function, we could derive a new function of one variable,  add_five, that
adds 5 to its argument:

add_five = lambda y: add_numbers(5, y)

The second argument to add_numbers is said to be curried. Theres nothing very fancy
here, as all weve really done is define a new function that calls an existing function.
The built-in functools module can simplify this process using the partial function:

from functools import partial
add_five = partial(add_numbers, 5)

74 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

Generators
Having  a  consistent  way  to  iterate  over  sequences,  like  objects  in  a  list  or  lines  in  a
file,  is  an  important  Python  feature.  This  is  accomplished  by  means  of  the  iterator
protocol,  a  generic  way  to  make  objects  iterable.  For  example,  iterating  over  a  dict
yields the dict keys:

In [180]: some_dict = {&#39;a&#39;: 1, &#39;b&#39;: 2, &#39;c&#39;: 3}

In [181]: for key in some_dict:
   .....:     print(key)
a
b
c

When you write for key in some_dict, the Python interpreter first attempts to cre
ate an iterator out of some_dict:

In [182]: dict_iterator = iter(some_dict)

In [183]: dict_iterator
Out[183]: &lt;dict_keyiterator at 0x7fbbd5a9f908&gt;

An iterator is any object that will yield objects to the Python interpreter when used in
a  context  like  a  for  loop.  Most  methods  expecting  a  list  or  list-like  object  will  also
accept any iterable object. This includes built-in methods such as min, max, and sum,
and type constructors like list and tuple:

In [184]: list(dict_iterator)
Out[184]: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]

A generator is a concise way to construct a new iterable object. Whereas normal func
tions  execute  and  return  a  single  result  at  a  time,  generators  return  a  sequence  of
multiple results lazily, pausing after each one until the next one is requested. To create
a generator, use the yield keyword instead of return in a function:

def squares(n=10):
    print(&#39;Generating squares from 1 to {0}&#39;.format(n ** 2))
    for i in range(1, n + 1):
        yield i ** 2

When you actually call the generator, no code is immediately executed:

In [186]: gen = squares()

In [187]: gen
Out[187]: &lt;generator object squares at 0x7fbbd5ab4570&gt;

It  is  not  until  you  request  elements  from  the  generator  that  it  begins  executing  its
code:

3.2 Functions 

| 

75

In [188]: for x in gen:
   .....:     print(x, end=&#39; &#39;)
Generating squares from 1 to 100
1 4 9 16 25 36 49 64 81 100

Generator expresssions

Another even more concise way to make a generator is by using a generator expres
sion. This is a generator analogue to list, dict, and set comprehensions; to create one,
enclose what would otherwise be a list comprehension within parentheses instead of
brackets:

In [189]: gen = (x ** 2 for x in range(100))

In [190]: gen
Out[190]: &lt;generator object &lt;genexpr&gt; at 0x7fbbd5ab29e8&gt;

This is completely equivalent to the following more verbose generator:

def _make_gen():
    for x in range(100):
        yield x ** 2
gen = _make_gen()

Generator expressions can be used instead of list comprehensions as function argu
ments in many cases:

In [191]: sum(x ** 2 for x in range(100))
Out[191]: 328350

In [192]: dict((i, i **2) for i in range(5))
Out[192]: {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

itertools module

The standard library itertools module has a collection of generators for many com
mon  data  algorithms.  For  example,  groupby  takes  any  sequence  and  a  function,
grouping consecutive elements in the sequence by return value of the function. Heres
an example:

In [193]: import itertools

In [194]: first_letter = lambda x: x[0]

In [195]: names = [&#39;Alan&#39;, &#39;Adam&#39;, &#39;Wes&#39;, &#39;Will&#39;, &#39;Albert&#39;, &#39;Steven&#39;]

In [196]: for letter, names in itertools.groupby(names, first_letter):
   .....:     print(letter, list(names)) # names is a generator
A [&#39;Alan&#39;, &#39;Adam&#39;]
W [&#39;Wes&#39;, &#39;Will&#39;]
A [&#39;Albert&#39;]
S [&#39;Steven&#39;]

76 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

See Table 3-2 for a list of a few other itertools functions Ive frequently found help
ful.  You  may  like  to  check  out  the  official  Python  documentation  for  more  on  this
useful built-in utility module.

Table 3-2. Some useful itertools functions

Function
combinations(iterable, k)

permutations(iterable, k)

groupby(iterable[, keyfunc])

Description
Generates a sequence of all possible k-tuples of elements in the iterable,
ignoring order and without replacement (see also the companion function
combinations_with_replacement)
Generates a sequence of all possible k-tuples of elements in the iterable,
respecting order
Generates (key, sub-iterator) for each unique key

product(*iterables, repeat=1) Generates the Cartesian product of the input iterables as tuples, similar to a 

nested for loop

Errors and Exception Handling
Handling  Python  errors  or  exceptions  gracefully  is  an  important  part  of  building
robust programs. In data analysis applications, many functions only work on certain
kinds of input. As an example, Pythons float function is capable of casting a string
to a floating-point number, but fails with ValueError on improper inputs:

In [197]: float(&#39;1.2345&#39;)
Out[197]: 1.2345

In [198]: float(&#39;something&#39;)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-198-439904410854&gt; in &lt;module&gt;()
----&gt; 1 float(&#39;something&#39;)
ValueError: could not convert string to float: &#39;something&#39;

Suppose we wanted a version of float that fails gracefully, returning the input argu
ment. We can do this by writing a function that encloses the call to float in a try/
except block:

def attempt_float(x):
    try:
        return float(x)
    except:
        return x

The code in the except part of the block will only be executed if float(x) raises an
exception:

In [200]: attempt_float(&#39;1.2345&#39;)
Out[200]: 1.2345

3.2 Functions 

| 

77

In [201]: attempt_float(&#39;something&#39;)
Out[201]: &#39;something&#39;

You might notice that float can raise exceptions other than ValueError:

In [202]: float((1, 2))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-202-842079ebb635&gt; in &lt;module&gt;()
----&gt; 1 float((1, 2))
TypeError: float() argument must be a string or a number, not &#39;tuple&#39;

You might want to only suppress ValueError, since a TypeError (the input was not a
string or numeric value) might indicate a legitimate bug in your program. To do that,
write the exception type after except:

def attempt_float(x):
    try:
        return float(x)
    except ValueError:
        return x

We have then:

In [204]: attempt_float((1, 2))
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-204-9bdfd730cead&gt; in &lt;module&gt;()
----&gt; 1 attempt_float((1, 2))
&lt;ipython-input-203-3e06b8379b6b&gt; in attempt_float(x)
      1 def attempt_float(x):
      2     try:
----&gt; 3         return float(x)
      4     except ValueError:
      5         return x
TypeError: float() argument must be a string or a number, not &#39;tuple&#39;

You can catch multiple exception types by writing a tuple of exception types instead
(the parentheses are required):

def attempt_float(x):
    try:
        return float(x)
    except (TypeError, ValueError):
        return x

In some cases, you may not want to suppress an exception, but you want some code
to be executed regardless of whether the code in the try block succeeds or not. To do
this, use finally:

f = open(path, &#39;w&#39;)

try:
    write_to_file(f)

78 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

finally:
    f.close()

Here, the file handle f will always get closed. Similarly, you can have code that exe
cutes only if the try: block succeeds using else:

f = open(path, &#39;w&#39;)

try:
    write_to_file(f)
except:
    print(&#39;Failed&#39;)
else:
    print(&#39;Succeeded&#39;)
finally:
    f.close()

Exceptions in IPython

If an exception is raised while you are %run-ing a script or executing any statement,
IPython will by default print a full call stack trace (traceback) with a few lines of con
text around the position at each point in the stack:

In [10]: %run examples/ipython_bug.py
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
/home/wesm/code/pydata-book/examples/ipython_bug.py in &lt;module&gt;()
     13     throws_an_exception()
     14
---&gt; 15 calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py in calling_things()
     11 def calling_things():
     12     works_fine()
---&gt; 13     throws_an_exception()
     14
     15 calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py in throws_an_exception()
      7     a = 5
      8     b = 6
----&gt; 9     assert(a + b == 10)
     10
     11 def calling_things():

AssertionError:

Having additional context by itself is a big advantage over the standard Python inter
preter (which does not provide any additional context). You can control the amount
of context shown using the %xmode magic command, from Plain (same as the stan
dard  Python  interpreter)  to  Verbose  (which  inlines  function  argument  values  and

3.2 Functions 

| 

79

more).  As  you  will  see  later  in  the  chapter,  you  can  step  into  the  stack  (using  the
%debug  or  %pdb  magics)  after  an  error  has  occurred  for  interactive  post-mortem
debugging.

3.3 Files and the Operating System
Most of this book uses high-level tools like pandas.read_csv to read data files from
disk into Python data structures. However, its important to understand the basics of
how  to  work  with  files  in  Python.  Fortunately,  its  very  simple,  which  is  one  reason
why Python is so popular for text and file munging.

To open a file for reading or writing, use the built-in open function with either a rela
tive or absolute file path:

In [207]: path = &#39;examples/segismundo.txt&#39;

In [208]: f = open(path)

By default, the file is opened in read-only mode &#39;r&#39;. We can then treat the file handle
f like a list and iterate over the lines like so:

for line in f:
    pass

The  lines  come  out  of  the  file  with  the  end-of-line  (EOL)  markers  intact,  so  youll
often see code to get an EOL-free list of lines in a file like:

In [209]: lines = [x.rstrip() for x in open(path)]

In [210]: lines
Out[210]: 
[&#39;Suea el rico en su riqueza,&#39;,
 &#39;que ms cuidados le ofrece;&#39;,
 &#39;&#39;,
 &#39;suea el pobre que padece&#39;,
 &#39;su miseria y su pobreza;&#39;,
 &#39;&#39;,
 &#39;suea el que a medrar empieza,&#39;,
 &#39;suea el que afana y pretende,&#39;,
 &#39;suea el que agravia y ofende,&#39;,
 &#39;&#39;,
 &#39;y en el mundo, en conclusin,&#39;,
 &#39;todos suean lo que son,&#39;,
 &#39;aunque ninguno lo entiende.&#39;,
 &#39;&#39;]

When  you  use  open  to  create  file  objects,  it  is  important  to  explicitly  close  the  file
when you are finished with it. Closing the file releases its resources back to the oper
ating system:

In [211]: f.close()

80 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

One of the ways to make it easier to clean up open files is to use the with statement:

In [212]: with open(path) as f:
   .....:     lines = [x.rstrip() for x in f]

This will automatically close the file f when exiting the with block.

If we had typed f = open(path, &#39;w&#39;), a new file at examples/segismundo.txt would
have been created (be careful!), overwriting any one in its place. There is also the &#39;x&#39;
file  mode,  which  creates  a  writable  file  but  fails  if  the  file  path  already  exists.  See
Table 3-3 for a list of all valid file read/write modes.

For  readable  files,  some  of  the  most  commonly  used  methods  are  read,  seek,  and
tell.  read  returns  a  certain  number  of  characters  from  the  file.  What  constitutes  a
character  is  determined  by  the  files  encoding  (e.g.,  UTF-8)  or  simply  raw  bytes  if
the file is opened in binary mode:

In [213]: f = open(path)

In [214]: f.read(10)
Out[214]: &#39;Suea el r&#39;

In [215]: f2 = open(path, &#39;rb&#39;)  # Binary mode

In [216]: f2.read(10)
Out[216]: b&#39;Sue\xc3\xb1a el &#39;

The  read  method  advances  the  file  handles  position  by  the  number  of  bytes  read.
tell gives you the current position:

In [217]: f.tell()
Out[217]: 11

In [218]: f2.tell()
Out[218]: 10

Even  though  we  read  10  characters  from  the  file,  the  position  is  11  because  it  took
that  many  bytes  to  decode  10  characters  using  the  default  encoding.  You  can  check
the default encoding in the sys module:

In [219]: import sys

In [220]: sys.getdefaultencoding()
Out[220]: &#39;utf-8&#39;

seek changes the file position to the indicated byte in the file:

In [221]: f.seek(3)
Out[221]: 3

In [222]: f.read(1)
Out[222]: &#39;&#39;

3.3 Files and the Operating System 

| 

81

Lastly, we remember to close the files:

In [223]: f.close()

In [224]: f2.close()

Table 3-3. Python file modes

Mode Description
r

w

x

a

r+

b

t

Read-only mode
Write-only mode; creates a new file (erasing the data for any file with the same name)
Write-only mode; creates a new file, but fails if the file path already exists
Append to existing file (create the file if it does not already exist)
Read and write
Add to mode for binary files (i.e., &#39;rb&#39; or &#39;wb&#39;)
Text mode for files (automatically decoding bytes to Unicode). This is the default if not specified. Add t to other
modes to use this (i.e., &#39;rt&#39; or &#39;xt&#39;)

To write text to a file, you can use the files write or writelines methods. For exam
ple, we could create a version of prof_mod.py with no blank lines like so:

In [225]: with open(&#39;tmp.txt&#39;, &#39;w&#39;) as handle:
   .....:     handle.writelines(x for x in open(path) if len(x) &gt; 1)

In [226]: with open(&#39;tmp.txt&#39;) as f:
   .....:     lines = f.readlines()

In [227]: lines
Out[227]: 
[&#39;Suea el rico en su riqueza,\n&#39;,
 &#39;que ms cuidados le ofrece;\n&#39;,
 &#39;suea el pobre que padece\n&#39;,
 &#39;su miseria y su pobreza;\n&#39;,
 &#39;suea el que a medrar empieza,\n&#39;,
 &#39;suea el que afana y pretende,\n&#39;,
 &#39;suea el que agravia y ofende,\n&#39;,
 &#39;y en el mundo, en conclusin,\n&#39;,
 &#39;todos suean lo que son,\n&#39;,
 &#39;aunque ninguno lo entiende.\n&#39;]

See Table 3-4 for many of the most commonly used file methods.

Table 3-4. Important Python file methods or attributes

Method
read([size])

readlines([size])

write(str)

Description
Return data from file as a string, with optional size argument indicating the number of
bytes to read
Return list of lines in the file, with optional size argument
Write passed string to file

82 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

Method
Description
writelines(strings) Write passed sequence of strings to the file
close()

flush()

seek(pos)

tell()

closed

Close the handle
Flush the internal I/O buffer to disk
Move to indicated file position (integer)
Return current file position as integer
True if the file is closed

Bytes and Unicode with Files
The  default  behavior  for  Python  files  (whether  readable  or  writable)  is  text  mode,
which means that you intend to work with Python strings (i.e., Unicode). This con
trasts  with  binary  mode,  which  you  can  obtain  by  appending  b  onto  the  file  mode.
Lets  look  at  the  file  (which  contains  non-ASCII  characters  with  UTF-8  encoding)
from the previous section:

In [230]: with open(path) as f:
   .....:     chars = f.read(10)

In [231]: chars
Out[231]: &#39;Suea el r&#39;

UTF-8 is a variable-length Unicode encoding, so when I requested some number of
characters from the file, Python reads enough bytes (which could be as few as 10 or as
many as 40 bytes) from the file to decode that many characters. If I open the file in
&#39;rb&#39; mode instead, read requests exact numbers of bytes:

In [232]: with open(path, &#39;rb&#39;) as f:
   .....:     data = f.read(10)

In [233]: data
Out[233]: b&#39;Sue\xc3\xb1a el &#39;

Depending on the text encoding, you may be able to decode the bytes to a str object
yourself, but only if each of the encoded Unicode characters is fully formed:

In [234]: data.decode(&#39;utf8&#39;)
Out[234]: &#39;Suea el &#39;

In [235]: data[:4].decode(&#39;utf8&#39;)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
&lt;ipython-input-235-300e0af10bb7&gt; in &lt;module&gt;()
----&gt; 1 data[:4].decode(&#39;utf8&#39;)
UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0xc3 in position 3: unexpecte
d end of data

Text mode, combined with the encoding option of open, provides a convenient way
to convert from one Unicode encoding to another:

3.3 Files and the Operating System 

| 

83

In [236]: sink_path = &#39;sink.txt&#39;

In [237]: with open(path) as source:
   .....:     with open(sink_path, &#39;xt&#39;, encoding=&#39;iso-8859-1&#39;) as sink:
   .....:         sink.write(source.read())

In [238]: with open(sink_path, encoding=&#39;iso-8859-1&#39;) as f:
   .....:     print(f.read(10))
Suea el r

Beware using seek when opening files in any mode other than binary. If the file posi
tion  falls  in  the  middle  of  the  bytes  defining  a  Unicode  character,  then  subsequent
reads will result in an error:

In [240]: f = open(path)

In [241]: f.read(5)
Out[241]: &#39;Suea&#39;

In [242]: f.seek(4)
Out[242]: 4

In [243]: f.read(1)
---------------------------------------------------------------------------
UnicodeDecodeError                        Traceback (most recent call last)
&lt;ipython-input-243-7841103e33f5&gt; in &lt;module&gt;()
----&gt; 1 f.read(1)
/miniconda/envs/book-env/lib/python3.6/codecs.py in decode(self, input, final)
    319         # decode input (taking the buffer into account)
    320         data = self.buffer + input
--&gt; 321         (result, consumed) = self._buffer_decode(data, self.errors, final
)
    322         # keep undecoded input until the next call
    323         self.buffer = data[consumed:]
UnicodeDecodeError: &#39;utf-8&#39; codec can&#39;t decode byte 0xb1 in position 0: invalid s
tart byte

In [244]: f.close()

If you find yourself regularly doing data analysis on non-ASCII text data, mastering
Pythons  Unicode  functionality  will  prove  valuable.  See  Pythons  online  documenta
tion for much more.

3.4 Conclusion
With some of the basics and the Python environment and language now under our
belt, its time to move on and learn about NumPy and array-oriented computing in
Python.

84 

| 

Chapter 3: Built-in Data Structures, Functions, and Files

CHAPTER 4
NumPy Basics: Arrays and
Vectorized Computation

NumPy, short for Numerical Python, is one of the most important foundational pack
ages  for  numerical  computing  in  Python.  Most  computational  packages  providing
scientific  functionality  use  NumPys  array  objects  as  the  lingua  franca  for  data
exchange.

Here are some of the things youll find in NumPy:

 ndarray, an efficient multidimensional array providing fast array-oriented arith

metic operations and flexible broadcasting capabilities.

 Mathematical functions for fast operations on entire arrays of data without hav

ing to write loops.

 Tools for reading/writing array data to disk and working with memory-mapped

files.

 Linear algebra, random number generation, and Fourier transform capabilities.

 A C API for connecting NumPy with libraries written in C, C++, or FORTRAN.

Because NumPy provides an easy-to-use C API, it is straightforward to pass data to
external  libraries  written  in  a  low-level  language  and  also  for  external  libraries  to
return data to Python as NumPy arrays. This feature has made Python a language of
choice for wrapping legacy C/C++/Fortran codebases and giving them a dynamic and
easy-to-use interface.

While NumPy by itself does not provide modeling or scientific functionality, having
an understanding of NumPy arrays and array-oriented computing will help you use
tools  with  array-oriented  semantics,  like  pandas,  much  more  effectively.  Since

85

NumPy is a large topic, I will cover many advanced NumPy features like broadcasting
in more depth later (see Appendix A).

For most data analysis applications, the main areas of functionality Ill focus on are:

 Fast  vectorized  array  operations  for  data  munging  and  cleaning,  subsetting  and

filtering, transformation, and any other kinds of computations

 Common array algorithms like sorting, unique, and set operations

 Efficient descriptive statistics and aggregating/summarizing data

 Data  alignment  and  relational  data  manipulations  for  merging  and  joining

together heterogeneous datasets

 Expressing conditional logic as array expressions instead of loops with if-elif-

else branches

 Group-wise  data  manipulations  (aggregation,  transformation,  function  applica

tion)

While NumPy provides a computational foundation for general numerical data pro
cessing, many readers will want to use pandas as the basis for most kinds of statistics
or  analytics,  especially  on  tabular  data.  pandas  also  provides  some  more  domain-
specific functionality like time series manipulation, which is not present in NumPy.

Array-oriented computing in Python traces its roots back to 1995,
when Jim Hugunin created the Numeric library. Over the next 10
years,  many  scientific  programming  communities  began  doing
array  programming  in  Python,  but  the  library  ecosystem  had
become  fragmented  in  the  early  2000s.  In  2005,  Travis  Oliphant
was  able  to  forge  the  NumPy  project  from  the  then  Numeric  and
Numarray projects to bring the community together around a sin
gle array computing framework.

One of the reasons NumPy is so important for numerical computations in Python is
because  it  is  designed  for  efficiency  on  large  arrays  of  data.  There  are  a  number  of
reasons for this:

 NumPy internally stores data in a contiguous block of memory, independent of
other built-in Python objects. NumPys library of algorithms written in the C lan
guage can operate on this memory without any type checking or other overhead.
NumPy arrays also use much less memory than built-in Python sequences.

 NumPy operations perform complex computations on entire arrays without the

need for Python for loops.

86 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

To  give  you  an  idea  of  the  performance  difference,  consider  a  NumPy  array  of  one
million integers, and the equivalent Python list:

In [7]: import numpy as np

In [8]: my_arr = np.arange(1000000)

In [9]: my_list = list(range(1000000))

Now lets multiply each sequence by 2:

In [10]: %time for _ in range(10): my_arr2 = my_arr * 2
CPU times: user 20 ms, sys: 50 ms, total: 70 ms
Wall time: 72.4 ms

In [11]: %time for _ in range(10): my_list2 = [x * 2 for x in my_list]
CPU times: user 760 ms, sys: 290 ms, total: 1.05 s
Wall time: 1.05 s

NumPy-based  algorithms  are  generally  10  to  100  times  faster  (or  more)  than  their
pure Python counterparts and use significantly less memory.

4.1 The NumPy ndarray: A Multidimensional Array Object
One  of  the  key  features  of  NumPy  is  its  N-dimensional  array  object,  or  ndarray,
which is a fast, flexible container for large datasets in Python. Arrays enable you to
perform mathematical operations on whole blocks of data using similar syntax to the
equivalent operations between scalar elements.

To give you a flavor of how NumPy enables batch computations with similar syntax
to scalar values on built-in Python objects, I first import NumPy and generate a small
array of random data:

In [12]: import numpy as np

# Generate some random data
In [13]: data = np.random.randn(2, 3)

In [14]: data
Out[14]: 
array([[-0.2047,  0.4789, -0.5194],
       [-0.5557,  1.9658,  1.3934]])

I then write mathematical operations with data:

In [15]: data * 10
Out[15]: 
array([[ -2.0471,   4.7894,  -5.1944],
       [ -5.5573,  19.6578,  13.9341]])

In [16]: data + data
Out[16]: 

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

87

array([[-0.4094,  0.9579, -1.0389],
       [-1.1115,  3.9316,  2.7868]])

In the first example, all of the elements have been multiplied by 10. In the second, the
corresponding values in each cell in the array have been added to each other.

In  this  chapter  and  throughout  the  book,  I  use  the  standard
NumPy convention of always using import numpy as np. You are,
of course, welcome to put  from numpy import * in your code to
avoid  having  to  write  np.,  but  I  advise  against  making  a  habit  of
this. The numpy namespace is large and contains a number of func
tions whose names conflict with built-in Python functions (like min
and max).

An ndarray is a generic multidimensional container for homogeneous data; that is, all
of the elements must be the same type. Every array has a shape, a tuple indicating the
size of each dimension, and a dtype, an object describing the data type of the array:

In [17]: data.shape
Out[17]: (2, 3)

In [18]: data.dtype
Out[18]: dtype(&#39;float64&#39;)

This chapter will introduce you to the basics of using NumPy arrays, and should be
sufficient  for  following  along  with  the  rest  of  the  book.  While  its  not  necessary  to
have a deep understanding of NumPy for many data analytical applications, becom
ing  proficient  in  array-oriented  programming  and  thinking  is  a  key  step  along  the
way to becoming a scientific Python guru.

Whenever you see array, NumPy array, or ndarray in the text,
with  few  exceptions  they  all  refer  to  the  same  thing:  the  ndarray
object.

Creating ndarrays
The  easiest  way  to  create  an  array  is  to  use  the  array  function.  This  accepts  any
sequence-like object (including other arrays) and produces a new NumPy array con
taining the passed data. For example, a list is a good candidate for conversion:

In [19]: data1 = [6, 7.5, 8, 0, 1]

In [20]: arr1 = np.array(data1)

In [21]: arr1
Out[21]: array([ 6. ,  7.5,  8. ,  0. ,  1. ])

88 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Nested sequences, like a list of equal-length lists, will be converted into a multidimen
sional array:

In [22]: data2 = [[1, 2, 3, 4], [5, 6, 7, 8]]

In [23]: arr2 = np.array(data2)

In [24]: arr2
Out[24]: 
array([[1, 2, 3, 4],
       [5, 6, 7, 8]])

Since data2 was a list of lists, the NumPy array arr2 has two dimensions with shape
inferred  from  the  data.  We  can  confirm  this  by  inspecting  the  ndim  and  shape
attributes:

In [25]: arr2.ndim
Out[25]: 2

In [26]: arr2.shape
Out[26]: (2, 4)

Unless  explicitly  specified  (more  on  this  later),  np.array  tries  to  infer  a  good  data
type for the array that it creates. The data type is stored in a special dtype metadata
object; for example, in the previous two examples we have:

In [27]: arr1.dtype
Out[27]: dtype(&#39;float64&#39;)

In [28]: arr2.dtype
Out[28]: dtype(&#39;int64&#39;)

In  addition  to  np.array,  there  are  a  number  of  other  functions  for  creating  new
arrays.  As  examples,  zeros  and  ones  create  arrays  of  0s  or  1s,  respectively,  with  a
given length or shape. empty creates an array without initializing its values to any par
ticular value. To create a higher dimensional array with these methods, pass a tuple
for the shape:

In [29]: np.zeros(10)
Out[29]: array([ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.])

In [30]: np.zeros((3, 6))
Out[30]: 
array([[ 0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.]])

In [31]: np.empty((2, 3, 2))
Out[31]: 
array([[[ 0.,  0.],
        [ 0.,  0.],
        [ 0.,  0.]],

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

89

       [[ 0.,  0.],
        [ 0.,  0.],
        [ 0.,  0.]]])

Its  not  safe  to  assume  that  np.empty  will  return  an  array  of  all
zeros. In some cases, it may return uninitialized garbage values.

arange is an array-valued version of the built-in Python range function:

In [32]: np.arange(15)
Out[32]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])

See  Table  4-1  for  a  short  list  of  standard  array  creation  functions.  Since  NumPy  is
focused on numerical computing, the data type, if not specified, will in many cases be
float64 (floating point).

Table 4-1. Array creation functions

Function
array

asarray

arange

ones, 
ones_like

zeros, 
zeros_like

empty, 
empty_like

full, 
full_like

eye, identity

Description
Convert input data (list, tuple, array, or other sequence type) to an ndarray either by inferring a dtype
or explicitly specifying a dtype; copies the input data by default
Convert input to ndarray, but do not copy if the input is already an ndarray
Like the built-in range but returns an ndarray instead of a list
Produce an array of all 1s with the given shape and dtype; ones_like takes another array and
produces a ones array of the same shape and dtype
Like ones and ones_like but producing arrays of 0s instead

Create new arrays by allocating new memory, but do not populate with any values like ones and
zeros

Produce an array of the given shape and dtype with all values set to the indicated fill value
full_like takes another array and produces a filled array of the same shape and dtype
Create a square N  N identity matrix (1s on the diagonal and 0s elsewhere)

Data Types for ndarrays
The  data  type  or  dtype  is  a  special  object  containing  the  information  (or  metadata,
data  about  data)  the  ndarray  needs  to  interpret  a  chunk  of  memory  as  a  particular
type of data:

In [33]: arr1 = np.array([1, 2, 3], dtype=np.float64)

In [34]: arr2 = np.array([1, 2, 3], dtype=np.int32)

In [35]: arr1.dtype
Out[35]: dtype(&#39;float64&#39;)

90 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

In [36]: arr2.dtype
Out[36]: dtype(&#39;int32&#39;)

dtypes are a source of NumPys flexibility for interacting with data coming from other
systems.  In  most  cases  they  provide  a  mapping  directly  onto  an  underlying  disk  or
memory representation, which makes it easy to read and write binary streams of data
to disk and also to connect to code written in a low-level language like C or Fortran.
The numerical dtypes are named the same way: a type name, like float or int, fol
lowed  by  a  number  indicating  the  number  of  bits  per  element.  A  standard  double-
precision floating-point value (whats used under the hood in Pythons float object)
takes  up  8  bytes  or  64  bits.  Thus,  this  type  is  known  in  NumPy  as  float64.  See
Table 4-2 for a full listing of NumPys supported data types.

Dont  worry  about  memorizing  the  NumPy  dtypes,  especially  if
youre a new user. Its often only necessary to care about the general
kind  of  data  youre  dealing  with,  whether  floating  point,  complex,
integer, boolean, string, or general Python object. When you need
more  control  over  how  data  are  stored  in  memory  and  on  disk,
especially  large  datasets,  it  is  good  to  know  that  you  have  control
over the storage type.

Table 4-2. NumPy data types

Type
int8, uint8

int16, uint16

int32, uint32

int64, uint64

float16

float32

float64

float128
complex64,
complex128,
complex256

bool

object

string_

unicode_

Type code
i1, u1

i2, u2

i4, u4

i8, u8

f2

f4 or f

f8 or d

f16 or g

c8, c16, 
c32

?
O
S

U

Description
Signed and unsigned 8-bit (1 byte) integer types
Signed and unsigned 16-bit integer types
Signed and unsigned 32-bit integer types
Signed and unsigned 64-bit integer types
Half-precision floating point
Standard single-precision floating point; compatible with C float
Standard double-precision floating point; compatible with C double and
Python float object
Extended-precision floating point
Complex numbers represented by two 32, 64, or 128 floats, respectively

Boolean type storing True and False values
Python object type; a value can be any Python object
Fixed-length ASCII string type (1 byte per character); for example, to create a
string dtype with length 10, use &#39;S10&#39;
Fixed-length Unicode type (number of bytes platform specific); same
specification semantics as string_ (e.g., &#39;U10&#39;)

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

91

You can explicitly convert or cast an array from one dtype to another using ndarrays
astype method:

In [37]: arr = np.array([1, 2, 3, 4, 5])

In [38]: arr.dtype
Out[38]: dtype(&#39;int64&#39;)

In [39]: float_arr = arr.astype(np.float64)

In [40]: float_arr.dtype
Out[40]: dtype(&#39;float64&#39;)

In  this  example,  integers  were  cast  to  floating  point.  If  I  cast  some  floating-point
numbers to be of integer dtype, the decimal part will be truncated:

In [41]: arr = np.array([3.7, -1.2, -2.6, 0.5, 12.9, 10.1])

In [42]: arr
Out[42]: array([  3.7,  -1.2,  -2.6,   0.5,  12.9,  10.1])

In [43]: arr.astype(np.int32)
Out[43]: array([ 3, -1, -2,  0, 12, 10], dtype=int32)

If you have an array of strings representing numbers, you can use astype to convert
them to numeric form:

In [44]: numeric_strings = np.array([&#39;1.25&#39;, &#39;-9.6&#39;, &#39;42&#39;], dtype=np.string_)

In [45]: numeric_strings.astype(float)
Out[45]: array([  1.25,  -9.6 ,  42.  ])

Its  important  to  be  cautious  when  using  the  numpy.string_  type,
as  string  data  in  NumPy  is  fixed  size  and  may  truncate  input
without warning. pandas has more intuitive out-of-the-box behav
ior on non-numeric data.

If  casting  were  to  fail  for  some  reason  (like  a  string  that  cannot  be  converted  to
float64), a ValueError will be raised. Here I was a bit lazy and wrote float instead
of np.float64; NumPy aliases the Python types to its own equivalent data dtypes.

You can also use another arrays dtype attribute:

In [46]: int_array = np.arange(10)

In [47]: calibers = np.array([.22, .270, .357, .380, .44, .50], dtype=np.float64)

In [48]: int_array.astype(calibers.dtype)
Out[48]: array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])

92 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

There are shorthand type code strings you can also use to refer to a dtype:

In [49]: empty_uint32 = np.empty(8, dtype=&#39;u4&#39;)

In [50]: empty_uint32
Out[50]: 
array([         0, 1075314688,          0, 1075707904,          0,
       1075838976,          0, 1072693248], dtype=uint32)

Calling astype always creates a new array (a copy of the data), even
if the new dtype is the same as the old dtype.

Arithmetic with NumPy Arrays
Arrays  are  important  because  they  enable  you  to  express  batch  operations  on  data
without  writing  any  for  loops.  NumPy  users  call  this  vectorization.  Any  arithmetic
operations between equal-size arrays applies the operation element-wise:

In [51]: arr = np.array([[1., 2., 3.], [4., 5., 6.]])

In [52]: arr
Out[52]: 
array([[ 1.,  2.,  3.],
       [ 4.,  5.,  6.]])

In [53]: arr * arr
Out[53]: 
array([[  1.,   4.,   9.],
       [ 16.,  25.,  36.]])

In [54]: arr - arr
Out[54]: 
array([[ 0.,  0.,  0.],
       [ 0.,  0.,  0.]])

Arithmetic operations with scalars propagate the scalar argument to each element in
the array:

In [55]: 1 / arr
Out[55]: 
array([[ 1.    ,  0.5   ,  0.3333],
       [ 0.25  ,  0.2   ,  0.1667]])

In [56]: arr ** 0.5
Out[56]: 
array([[ 1.    ,  1.4142,  1.7321],
       [ 2.    ,  2.2361,  2.4495]])

Comparisons between arrays of the same size yield boolean arrays:

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

93

In [57]: arr2 = np.array([[0., 4., 1.], [7., 2., 12.]])

In [58]: arr2
Out[58]: 
array([[  0.,   4.,   1.],
       [  7.,   2.,  12.]])

In [59]: arr2 &gt; arr
Out[59]: 
array([[False,  True, False],
       [ True, False,  True]], dtype=bool)

Operations  between  differently  sized  arrays  is  called  broadcasting  and  will  be  dis
cussed in more detail in Appendix A. Having a deep understanding of broadcasting is
not necessary for most of this book.

Basic Indexing and Slicing
NumPy array indexing is a rich topic, as there are many ways you may want to select
a subset of your data or individual elements. One-dimensional arrays are simple; on
the surface they act similarly to Python lists:

In [60]: arr = np.arange(10)

In [61]: arr
Out[61]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

In [62]: arr[5]
Out[62]: 5

In [63]: arr[5:8]
Out[63]: array([5, 6, 7])

In [64]: arr[5:8] = 12

In [65]: arr
Out[65]: array([ 0,  1,  2,  3,  4, 12, 12, 12,  8,  9])

As you can see, if you assign a scalar value to a slice, as in arr[5:8] = 12, the value is
propagated (or broadcasted henceforth) to the entire selection. An important first dis
tinction from Pythons built-in lists is that array slices are views on the original array.
This  means  that  the  data  is  not  copied,  and  any  modifications  to  the  view  will  be
reflected in the source array.

To give an example of this, I first create a slice of arr:

In [66]: arr_slice = arr[5:8]

In [67]: arr_slice
Out[67]: array([12, 12, 12])

94 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Now, when I change values in arr_slice, the mutations are reflected in the original
array arr:

In [68]: arr_slice[1] = 12345

In [69]: arr
Out[69]: array([    0,     1,     2,     3,     4,    12, 12345,    12,     8,   
  9])

The bare slice [:] will assign to all values in an array:

In [70]: arr_slice[:] = 64

In [71]: arr
Out[71]: array([ 0,  1,  2,  3,  4, 64, 64, 64,  8,  9])

If you are new to NumPy, you might be surprised by this, especially if you have used
other array programming languages that copy data more eagerly. As NumPy has been
designed to be able to work with very large arrays, you could imagine performance
and memory problems if NumPy insisted on always copying data.

If  you  want  a  copy  of  a  slice  of  an  ndarray  instead  of  a  view,  you
will  need 
example,
copy 
to 
arr[5:8].copy().

arrayfor 

explicitly 

the 

With higher dimensional arrays, you have many more options. In a two-dimensional
array,  the  elements  at  each  index  are  no  longer  scalars  but  rather  one-dimensional
arrays:

In [72]: arr2d = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])

In [73]: arr2d[2]
Out[73]: array([7, 8, 9])

Thus,  individual  elements  can  be  accessed  recursively.  But  that  is  a  bit  too  much
work, so you can pass a comma-separated list of indices to select individual elements.
So these are equivalent:

In [74]: arr2d[0][2]
Out[74]: 3

In [75]: arr2d[0, 2]
Out[75]: 3

See  Figure  4-1  for  an  illustration  of  indexing  on  a  two-dimensional  array.  I  find  it
helpful to think of axis 0 as the rows of the array and axis 1 as the columns.

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

95

Figure 4-1. Indexing elements in a NumPy array

In  multidimensional  arrays,  if  you  omit  later  indices,  the  returned  object  will  be  a
lower dimensional ndarray consisting of all the data along the higher dimensions. So
in the 2  2  3 array arr3d:

In [76]: arr3d = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])

In [77]: arr3d
Out[77]: 
array([[[ 1,  2,  3],
        [ 4,  5,  6]],
       [[ 7,  8,  9],
        [10, 11, 12]]])

arr3d[0] is a 2  3 array:

In [78]: arr3d[0]
Out[78]: 
array([[1, 2, 3],
       [4, 5, 6]])

Both scalar values and arrays can be assigned to arr3d[0]:

In [79]: old_values = arr3d[0].copy()

In [80]: arr3d[0] = 42

In [81]: arr3d
Out[81]: 
array([[[42, 42, 42],
        [42, 42, 42]],
       [[ 7,  8,  9],
        [10, 11, 12]]])

In [82]: arr3d[0] = old_values

96 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

In [83]: arr3d
Out[83]: 
array([[[ 1,  2,  3],
        [ 4,  5,  6]],
       [[ 7,  8,  9],
        [10, 11, 12]]])

Similarly,  arr3d[1,  0]  gives  you  all  of  the  values  whose  indices  start  with  (1,  0),
forming a 1-dimensional array:

In [84]: arr3d[1, 0]
Out[84]: array([7, 8, 9])

This expression is the same as though we had indexed in two steps:

In [85]: x = arr3d[1]

In [86]: x
Out[86]: 
array([[ 7,  8,  9],
       [10, 11, 12]])

In [87]: x[0]
Out[87]: array([7, 8, 9])

Note that in all of these cases where subsections of the array have been selected, the
returned arrays are views.

Indexing with slices

Like  one-dimensional  objects  such  as  Python  lists,  ndarrays  can  be  sliced  with  the
familiar syntax:

In [88]: arr
Out[88]: array([ 0,  1,  2,  3,  4, 64, 64, 64,  8,  9])

In [89]: arr[1:6]
Out[89]: array([ 1,  2,  3,  4, 64])

Consider  the  two-dimensional  array  from  before,  arr2d.  Slicing  this  array  is  a  bit
different:

In [90]: arr2d
Out[90]: 
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])

In [91]: arr2d[:2]
Out[91]: 
array([[1, 2, 3],
       [4, 5, 6]])

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

97

As  you  can  see,  it  has  sliced  along  axis  0,  the  first  axis.  A  slice,  therefore,  selects  a
range of elements along an axis. It can be helpful to read the expression arr2d[:2] as
select the first two rows of arr2d.

You can pass multiple slices just like you can pass multiple indexes:

In [92]: arr2d[:2, 1:]
Out[92]: 
array([[2, 3],
       [5, 6]])

When slicing like this, you always obtain array views of the same number of dimen
sions. By mixing integer indexes and slices, you get lower dimensional slices.

For example, I can select the second row but only the first two columns like so:

In [93]: arr2d[1, :2]
Out[93]: array([4, 5])

Similarly, I can select the third column but only the first two rows like so:

In [94]: arr2d[:2, 2]
Out[94]: array([3, 6])

See Figure 4-2 for an illustration. Note that a colon by itself means to take the entire
axis, so you can slice only higher dimensional axes by doing:

In [95]: arr2d[:, :1]
Out[95]: 
array([[1],
       [4],
       [7]])

Of course, assigning to a slice expression assigns to the whole selection:

In [96]: arr2d[:2, 1:] = 0

In [97]: arr2d
Out[97]: 
array([[1, 0, 0],
       [4, 0, 0],
       [7, 8, 9]])

98 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Figure 4-2. Two-dimensional array slicing

Boolean Indexing
Lets consider an example where we have some data in an array and an array of names
with duplicates. Im going to use here the randn function in numpy.random to generate
some random normally distributed data:

In [98]: names = np.array([&#39;Bob&#39;, &#39;Joe&#39;, &#39;Will&#39;, &#39;Bob&#39;, &#39;Will&#39;, &#39;Joe&#39;, &#39;Joe&#39;])

In [99]: data = np.random.randn(7, 4)

In [100]: names
Out[100]: 
array([&#39;Bob&#39;, &#39;Joe&#39;, &#39;Will&#39;, &#39;Bob&#39;, &#39;Will&#39;, &#39;Joe&#39;, &#39;Joe&#39;],
      dtype=&#39;&lt;U4&#39;)

In [101]: data
Out[101]: 
array([[ 0.0929,  0.2817,  0.769 ,  1.2464],
       [ 1.0072, -1.2962,  0.275 ,  0.2289],
       [ 1.3529,  0.8864, -2.0016, -0.3718],
       [ 1.669 , -0.4386, -0.5397,  0.477 ],
       [ 3.2489, -1.0212, -0.5771,  0.1241],

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

99

       [ 0.3026,  0.5238,  0.0009,  1.3438],
       [-0.7135, -0.8312, -2.3702, -1.8608]])

Suppose each name corresponds to a row in the data array and we wanted to select
all  the  rows  with  corresponding  name  &#39;Bob&#39;.  Like  arithmetic  operations,  compari
sons  (such  as  ==)  with  arrays  are  also  vectorized.  Thus,  comparing  names  with  the
string &#39;Bob&#39; yields a boolean array:

In [102]: names == &#39;Bob&#39;
Out[102]: array([ True, False, False,  True, False, False, False], dtype=bool)

This boolean array can be passed when indexing the array:

In [103]: data[names == &#39;Bob&#39;]
Out[103]: 
array([[ 0.0929,  0.2817,  0.769 ,  1.2464],
       [ 1.669 , -0.4386, -0.5397,  0.477 ]])

The boolean array must be of the same length as the array axis its indexing. You can
even mix and match boolean arrays with slices or integers (or sequences of integers;
more on this later).

Boolean selection will not fail if the boolean array is not the correct
length, so I recommend care when using this feature.

In these examples, I select from the rows where names == &#39;Bob&#39; and index the col
umns, too:

In [104]: data[names == &#39;Bob&#39;, 2:]
Out[104]: 
array([[ 0.769 ,  1.2464],
       [-0.5397,  0.477 ]])

In [105]: data[names == &#39;Bob&#39;, 3]
Out[105]: array([ 1.2464,  0.477 ])

To select everything but &#39;Bob&#39;, you can either use != or negate the condition using ~:

In [106]: names != &#39;Bob&#39;
Out[106]: array([False,  True,  True, False,  True,  True,  True], dtype=bool)

In [107]: data[~(names == &#39;Bob&#39;)]
Out[107]: 
array([[ 1.0072, -1.2962,  0.275 ,  0.2289],
       [ 1.3529,  0.8864, -2.0016, -0.3718],
       [ 3.2489, -1.0212, -0.5771,  0.1241],
       [ 0.3026,  0.5238,  0.0009,  1.3438],
       [-0.7135, -0.8312, -2.3702, -1.8608]])

100 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

The ~ operator can be useful when you want to invert a general condition:

In [108]: cond = names == &#39;Bob&#39;

In [109]: data[~cond]
Out[109]: 
array([[ 1.0072, -1.2962,  0.275 ,  0.2289],
       [ 1.3529,  0.8864, -2.0016, -0.3718],
       [ 3.2489, -1.0212, -0.5771,  0.1241],
       [ 0.3026,  0.5238,  0.0009,  1.3438],
       [-0.7135, -0.8312, -2.3702, -1.8608]])

Selecting  two  of  the  three  names  to  combine  multiple  boolean  conditions,  use
boolean arithmetic operators like &amp; (and) and | (or):

In [110]: mask = (names == &#39;Bob&#39;) | (names == &#39;Will&#39;)

In [111]: mask
Out[111]: array([ True, False,  True,  True,  True, False, False], dtype=bool)

In [112]: data[mask]
Out[112]: 
array([[ 0.0929,  0.2817,  0.769 ,  1.2464],
       [ 1.3529,  0.8864, -2.0016, -0.3718],
       [ 1.669 , -0.4386, -0.5397,  0.477 ],
       [ 3.2489, -1.0212, -0.5771,  0.1241]])

Selecting data from an array by boolean indexing always creates a copy of the data,
even if the returned array is unchanged.

The Python keywords and and or do not work with boolean arrays.
Use &amp; (and) and | (or) instead.

Setting  values  with  boolean  arrays  works  in  a  common-sense  way.  To  set  all  of  the
negative values in data to 0 we need only do:

In [113]: data[data &lt; 0] = 0

In [114]: data
Out[114]: 
array([[ 0.0929,  0.2817,  0.769 ,  1.2464],
       [ 1.0072,  0.    ,  0.275 ,  0.2289],
       [ 1.3529,  0.8864,  0.    ,  0.    ],
       [ 1.669 ,  0.    ,  0.    ,  0.477 ],
       [ 3.2489,  0.    ,  0.    ,  0.1241],
       [ 0.3026,  0.5238,  0.0009,  1.3438],
       [ 0.    ,  0.    ,  0.    ,  0.    ]])

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

101

Setting whole rows or columns using a one-dimensional boolean array is also easy:

In [115]: data[names != &#39;Joe&#39;] = 7

In [116]: data
Out[116]: 
array([[ 7.    ,  7.    ,  7.    ,  7.    ],
       [ 1.0072,  0.    ,  0.275 ,  0.2289],
       [ 7.    ,  7.    ,  7.    ,  7.    ],
       [ 7.    ,  7.    ,  7.    ,  7.    ],
       [ 7.    ,  7.    ,  7.    ,  7.    ],
       [ 0.3026,  0.5238,  0.0009,  1.3438],
       [ 0.    ,  0.    ,  0.    ,  0.    ]])

As we will see later, these types of operations on two-dimensional data are convenient
to do with pandas.

Fancy Indexing
Fancy indexing is a term adopted by NumPy to describe indexing using integer arrays.
Suppose we had an 8  4 array:

In [117]: arr = np.empty((8, 4))

In [118]: for i in range(8):
   .....:     arr[i] = i

In [119]: arr
Out[119]: 
array([[ 0.,  0.,  0.,  0.],
       [ 1.,  1.,  1.,  1.],
       [ 2.,  2.,  2.,  2.],
       [ 3.,  3.,  3.,  3.],
       [ 4.,  4.,  4.,  4.],
       [ 5.,  5.,  5.,  5.],
       [ 6.,  6.,  6.,  6.],
       [ 7.,  7.,  7.,  7.]])

To select out a subset of the rows in a particular order, you can simply pass a list or
ndarray of integers specifying the desired order:

In [120]: arr[[4, 3, 0, 6]]
Out[120]: 
array([[ 4.,  4.,  4.,  4.],
       [ 3.,  3.,  3.,  3.],
       [ 0.,  0.,  0.,  0.],
       [ 6.,  6.,  6.,  6.]])

Hopefully this code did what you expected! Using negative indices selects rows from
the end:

In [121]: arr[[-3, -5, -7]]
Out[121]: 

102 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

array([[ 5.,  5.,  5.,  5.],
       [ 3.,  3.,  3.,  3.],
       [ 1.,  1.,  1.,  1.]])

Passing  multiple  index  arrays  does  something  slightly  different;  it  selects  a  one-
dimensional array of elements corresponding to each tuple of indices:

In [122]: arr = np.arange(32).reshape((8, 4))

In [123]: arr
Out[123]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23],
       [24, 25, 26, 27],
       [28, 29, 30, 31]])

In [124]: arr[[1, 5, 7, 2], [0, 3, 1, 2]]
Out[124]: array([ 4, 23, 29, 10])

Well look at the reshape method in more detail in Appendix A.

Here the elements (1, 0), (5, 3), (7, 1), and (2, 2) were selected. Regardless of
how  many  dimensions  the  array  has  (here,  only  2),  the  result  of  fancy  indexing  is
always one-dimensional.

The  behavior  of  fancy  indexing  in  this  case  is  a  bit  different  from  what  some  users
might  have  expected  (myself  included),  which  is  the  rectangular  region  formed  by
selecting a subset of the matrixs rows and columns. Here is one way to get that:

In [125]: arr[[1, 5, 7, 2]][:, [0, 3, 1, 2]]
Out[125]: 
array([[ 4,  7,  5,  6],
       [20, 23, 21, 22],
       [28, 31, 29, 30],
       [ 8, 11,  9, 10]])

Keep  in  mind  that  fancy  indexing,  unlike  slicing,  always  copies  the  data  into  a  new
array.

Transposing Arrays and Swapping Axes
Transposing is a special form of reshaping that similarly returns a view on the under
lying data without copying anything. Arrays have the transpose method and also the 
special T attribute:

In [126]: arr = np.arange(15).reshape((3, 5))

In [127]: arr

4.1 The NumPy ndarray: A Multidimensional Array Object 

| 

103

Out[127]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])

In [128]: arr.T
Out[128]: 
array([[ 0,  5, 10],
       [ 1,  6, 11],
       [ 2,  7, 12],
       [ 3,  8, 13],
       [ 4,  9, 14]])

When  doing  matrix  computations,  you  may  do  this  very  oftenfor  example,  when
computing the inner matrix product using np.dot:

In [129]: arr = np.random.randn(6, 3)

In [130]: arr
Out[130]: 
array([[-0.8608,  0.5601, -1.2659],
       [ 0.1198, -1.0635,  0.3329],
       [-2.3594, -0.1995, -1.542 ],
       [-0.9707, -1.307 ,  0.2863],
       [ 0.378 , -0.7539,  0.3313],
       [ 1.3497,  0.0699,  0.2467]])

In [131]: np.dot(arr.T, arr)
Out[131]: 
array([[ 9.2291,  0.9394,  4.948 ],
       [ 0.9394,  3.7662, -1.3622],
       [ 4.948 , -1.3622,  4.3437]])

For higher dimensional arrays, transpose will accept a tuple of axis numbers to per
mute the axes (for extra mind bending):

In [132]: arr = np.arange(16).reshape((2, 2, 4))

In [133]: arr
Out[133]: 
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7]],
       [[ 8,  9, 10, 11],
        [12, 13, 14, 15]]])

In [134]: arr.transpose((1, 0, 2))
Out[134]: 
array([[[ 0,  1,  2,  3],
        [ 8,  9, 10, 11]],
       [[ 4,  5,  6,  7],
        [12, 13, 14, 15]]])

104 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Here,  the  axes  have  been  reordered  with  the  second  axis  first,  the  first  axis  second,
and the last axis unchanged.

Simple transposing with .T is a special case of swapping axes. ndarray has the method
swapaxes, which takes a pair of axis numbers and switches the indicated axes to rear
range the data:

In [135]: arr
Out[135]: 
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7]],
       [[ 8,  9, 10, 11],
        [12, 13, 14, 15]]])

In [136]: arr.swapaxes(1, 2)
Out[136]: 
array([[[ 0,  4],
        [ 1,  5],
        [ 2,  6],
        [ 3,  7]],
       [[ 8, 12],
        [ 9, 13],
        [10, 14],
        [11, 15]]])

swapaxes similarly returns a view on the data without making a copy.

4.2 Universal Functions: Fast Element-Wise Array
Functions
A  universal  function,  or  ufunc,  is  a  function  that  performs  element-wise  operations
on  data  in  ndarrays.  You  can  think  of  them  as  fast  vectorized  wrappers  for  simple
functions that take one or more scalar values and produce one or more scalar results.

Many ufuncs are simple element-wise transformations, like sqrt or exp:

In [137]: arr = np.arange(10)

In [138]: arr
Out[138]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

In [139]: np.sqrt(arr)
Out[139]: 
array([ 0.    ,  1.    ,  1.4142,  1.7321,  2.    ,  2.2361,  2.4495,
        2.6458,  2.8284,  3.    ])

In [140]: np.exp(arr)
Out[140]: 
array([    1.    ,     2.7183,     7.3891,    20.0855,    54.5982,
         148.4132,   403.4288,  1096.6332,  2980.958 ,  8103.0839])

4.2 Universal Functions: Fast Element-Wise Array Functions 

| 

105

These are referred to as unary ufuncs. Others, such as add or maximum, take two arrays
(thus, binary ufuncs) and return a single array as the result:

In [141]: x = np.random.randn(8)

In [142]: y = np.random.randn(8)

In [143]: x
Out[143]: 
array([-0.0119,  1.0048,  1.3272, -0.9193, -1.5491,  0.0222,  0.7584,
       -0.6605])

In [144]: y
Out[144]: 
array([ 0.8626, -0.01  ,  0.05  ,  0.6702,  0.853 , -0.9559, -0.0235,
       -2.3042])

In [145]: np.maximum(x, y)
Out[145]: 
array([ 0.8626,  1.0048,  1.3272,  0.6702,  0.853 ,  0.0222,  0.7584,
       -0.6605])

Here, numpy.maximum computed the element-wise maximum of the elements in x and
y.

While not common, a ufunc can return multiple arrays. modf is one example, a vec
torized  version  of  the  built-in  Python  divmod;  it  returns  the  fractional  and  integral
parts of a floating-point array:

In [146]: arr = np.random.randn(7) * 5

In [147]: arr
Out[147]: array([-3.2623, -6.0915, -6.663 ,  5.3731,  3.6182,  3.45  ,  5.0077])

In [148]: remainder, whole_part = np.modf(arr)

In [149]: remainder
Out[149]: array([-0.2623, -0.0915, -0.663 ,  0.3731,  0.6182,  0.45  ,  0.0077])

In [150]: whole_part
Out[150]: array([-3., -6., -6.,  5.,  3.,  3.,  5.])

Ufuncs  accept  an  optional  out  argument  that  allows  them  to  operate  in-place  on
arrays:

In [151]: arr
Out[151]: array([-3.2623, -6.0915, -6.663 ,  5.3731,  3.6182,  3.45  ,  5.0077])

In [152]: np.sqrt(arr)
Out[152]: array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])

In [153]: np.sqrt(arr, arr)

106 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Out[153]: array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])

In [154]: arr
Out[154]: array([    nan,     nan,     nan,  2.318 ,  1.9022,  1.8574,  2.2378])

See Tables 4-3 and 4-4 for a listing of available ufuncs.

Table 4-3. Unary ufuncs

Function
abs, fabs

sqrt

square

exp

log, log10, 
log2, log1p

sign

ceil

floor

rint

modf

isnan

isfinite, isinf

cos, cosh, sin, 
sinh, tan, tanh

arccos, arccosh, 
arcsin, arcsinh, 
arctan, arctanh

Description
Compute the absolute value element-wise for integer, floating-point, or complex values
Compute the square root of each element (equivalent to arr ** 0.5)
Compute the square of each element (equivalent to arr ** 2)
Compute the exponent ex of each element
Natural logarithm (base e), log base 10, log base 2, and log(1 + x), respectively

Compute the sign of each element: 1 (positive), 0 (zero), or 1 (negative)
Compute the ceiling of each element (i.e., the smallest integer greater than or equal to that
number)
Compute the floor of each element (i.e., the largest integer less than or equal to each element)
Round elements to the nearest integer, preserving the dtype
Return fractional and integral parts of array as a separate array
Return boolean array indicating whether each value is NaN (Not a Number)
Return boolean array indicating whether each element is finite (non-inf, non-NaN) or infinite,
respectively
Regular and hyperbolic trigonometric functions

Inverse trigonometric functions

logical_not

Compute truth value of not x element-wise (equivalent to ~arr).

Table 4-4. Binary universal functions

Function
add

subtract

multiply

divide, floor_divide

power

maximum, fmax

minimum, fmin

mod

copysign

Description
Add corresponding elements in arrays
Subtract elements in second array from first array
Multiply array elements
Divide or floor divide (truncating the remainder)
Raise elements in first array to powers indicated in second array
Element-wise maximum; fmax ignores NaN
Element-wise minimum; fmin ignores NaN
Element-wise modulus (remainder of division)
Copy sign of values in second argument to values in first argument

4.2 Universal Functions: Fast Element-Wise Array Functions 

| 

107

Function
greater, greater_equal, 
less, less_equal, 
equal, not_equal

Description
Perform element-wise comparison, yielding boolean array (equivalent to infix 
operators &gt;, &gt;=, &lt;, &lt;=, ==, !=)

logical_and, 
logical_or, logical_xor

Compute element-wise truth value of logical operation (equivalent to infix operators
&amp; |, ^)

4.3 Array-Oriented Programming with Arrays
Using NumPy arrays enables you to express many kinds of data processing tasks as
concise array expressions that might otherwise require writing loops. This practice of
replacing explicit loops with array expressions is commonly referred to as vectoriza
tion. In general, vectorized array operations will often be one or two (or more) orders
of  magnitude  faster  than  their  pure  Python  equivalents,  with  the  biggest  impact  in
any kind of numerical computations. Later, in Appendix A, I explain broadcasting, a
powerful method for vectorizing computations.

As a simple example, suppose we wished to evaluate the function sqrt(x^2 + y^2)
across  a  regular  grid  of  values.  The  np.meshgrid  function  takes  two  1D  arrays  and
produces two 2D matrices corresponding to all pairs of (x, y) in the two arrays:

In [155]: points = np.arange(-5, 5, 0.01) # 1000 equally spaced points

In [156]: xs, ys = np.meshgrid(points, points)

In [157]: ys
Out[157]: 
array([[-5.  , -5.  , -5.  , ..., -5.  , -5.  , -5.  ],
       [-4.99, -4.99, -4.99, ..., -4.99, -4.99, -4.99],
       [-4.98, -4.98, -4.98, ..., -4.98, -4.98, -4.98],
       ..., 
       [ 4.97,  4.97,  4.97, ...,  4.97,  4.97,  4.97],
       [ 4.98,  4.98,  4.98, ...,  4.98,  4.98,  4.98],
       [ 4.99,  4.99,  4.99, ...,  4.99,  4.99,  4.99]])

Now,  evaluating  the  function  is  a  matter  of  writing  the  same  expression  you  would
write with two points:

In [158]: z = np.sqrt(xs ** 2 + ys ** 2)

In [159]: z
Out[159]: 
array([[ 7.0711,  7.064 ,  7.0569, ...,  7.0499,  7.0569,  7.064 ],
       [ 7.064 ,  7.0569,  7.0499, ...,  7.0428,  7.0499,  7.0569],
       [ 7.0569,  7.0499,  7.0428, ...,  7.0357,  7.0428,  7.0499],
       ..., 
       [ 7.0499,  7.0428,  7.0357, ...,  7.0286,  7.0357,  7.0428],
       [ 7.0569,  7.0499,  7.0428, ...,  7.0357,  7.0428,  7.0499],
       [ 7.064 ,  7.0569,  7.0499, ...,  7.0428,  7.0499,  7.0569]])

108 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

As  a  preview  of  Chapter  9,  I  use  matplotlib  to  create  visualizations  of  this  two-
dimensional array:

In [160]: import matplotlib.pyplot as plt

In [161]: plt.imshow(z, cmap=plt.cm.gray); plt.colorbar()
Out[161]: &lt;matplotlib.colorbar.Colorbar at 0x7f715e3fa630&gt;

In [162]: plt.title(&#34;Image plot of $\sqrt{x^2 + y^2}$ for a grid of values&#34;)
Out[162]: &lt;matplotlib.text.Text at 0x7f715d2de748&gt;

See  Figure  4-3.  Here  I  used  the  matplotlib  function  imshow  to  create  an  image  plot
from a two-dimensional array of function values.

Figure 4-3. Plot of function evaluated on grid

Expressing Conditional Logic as Array Operations
The numpy.where function is a vectorized version of the ternary expression x if con
dition else y. Suppose we had a boolean array and two arrays of values:

4.3 Array-Oriented Programming with Arrays 

| 

109

In [165]: xarr = np.array([1.1, 1.2, 1.3, 1.4, 1.5])

In [166]: yarr = np.array([2.1, 2.2, 2.3, 2.4, 2.5])

In [167]: cond = np.array([True, False, True, True, False])

Suppose we wanted to take a value from xarr whenever the corresponding value in
cond  is  True,  and  otherwise  take  the  value  from  yarr.  A  list  comprehension  doing
this might look like:

In [168]: result = [(x if c else y)
   .....:           for x, y, c in zip(xarr, yarr, cond)]

In [169]: result
Out[169]: [1.1000000000000001, 2.2000000000000002, 1.3, 1.3999999999999999, 2.5]

This has multiple problems. First, it will not be very fast for large arrays (because all
the  work  is  being  done  in  interpreted  Python  code).  Second,  it  will  not  work  with
multidimensional arrays. With np.where you can write this very concisely:

In [170]: result = np.where(cond, xarr, yarr)

In [171]: result
Out[171]: array([ 1.1,  2.2,  1.3,  1.4,  2.5])

The second and third arguments to np.where dont need to be arrays; one or both of
them can be scalars. A typical use of where in data analysis is to produce a new array
of values based on another array. Suppose you had a matrix of randomly generated
data and you wanted to replace all positive values with 2 and all negative values with
2. This is very easy to do with np.where:

In [172]: arr = np.random.randn(4, 4)

In [173]: arr
Out[173]: 
array([[-0.5031, -0.6223, -0.9212, -0.7262],
       [ 0.2229,  0.0513, -1.1577,  0.8167],
       [ 0.4336,  1.0107,  1.8249, -0.9975],
       [ 0.8506, -0.1316,  0.9124,  0.1882]])

In [174]: arr &gt; 0
Out[174]: 
array([[False, False, False, False],
       [ True,  True, False,  True],
       [ True,  True,  True, False],
       [ True, False,  True,  True]], dtype=bool)

In [175]: np.where(arr &gt; 0, 2, -2)
Out[175]: 
array([[-2, -2, -2, -2],
       [ 2,  2, -2,  2],

110 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

       [ 2,  2,  2, -2],
       [ 2, -2,  2,  2]])

You can combine scalars and arrays when using np.where. For example, I can replace
all positive values in arr with the constant 2 like so:

In [176]: np.where(arr &gt; 0, 2, arr) # set only positive values to 2
Out[176]: 
array([[-0.5031, -0.6223, -0.9212, -0.7262],
       [ 2.    ,  2.    , -1.1577,  2.    ],
       [ 2.    ,  2.    ,  2.    , -0.9975],
       [ 2.    , -0.1316,  2.    ,  2.    ]])

The arrays passed to np.where can be more than just equal-sized arrays or scalars.

Mathematical and Statistical Methods
A set of mathematical functions that compute statistics about an entire array or about
the data along an axis are accessible as methods of the array class. You can use aggre
gations (often called reductions) like sum, mean, and std (standard deviation) either by
calling the array instance method or using the top-level NumPy function.

Here I generate some normally distributed random data and compute some aggregate
statistics:

In [177]: arr = np.random.randn(5, 4)

In [178]: arr
Out[178]: 
array([[ 2.1695, -0.1149,  2.0037,  0.0296],
       [ 0.7953,  0.1181, -0.7485,  0.585 ],
       [ 0.1527, -1.5657, -0.5625, -0.0327],
       [-0.929 , -0.4826, -0.0363,  1.0954],
       [ 0.9809, -0.5895,  1.5817, -0.5287]])

In [179]: arr.mean()
Out[179]: 0.19607051119998253

In [180]: np.mean(arr)
Out[180]: 0.19607051119998253

In [181]: arr.sum()
Out[181]: 3.9214102239996507

Functions like mean and sum take an optional axis argument that computes the statis
tic over the given axis, resulting in an array with one fewer dimension:

In [182]: arr.mean(axis=1)
Out[182]: array([ 1.022 ,  0.1875, -0.502 , -0.0881,  0.3611])

In [183]: arr.sum(axis=0)
Out[183]: array([ 3.1693, -2.6345,  2.2381,  1.1486])

4.3 Array-Oriented Programming with Arrays 

| 

111

Here,  arr.mean(1)  means  compute  mean  across  the  columns  where  arr.sum(0)
means compute sum down the rows.

Other methods like cumsum and cumprod do not aggregate, instead producing an array
of the intermediate results:

In [184]: arr = np.array([0, 1, 2, 3, 4, 5, 6, 7])

In [185]: arr.cumsum()
Out[185]: array([ 0,  1,  3,  6, 10, 15, 21, 28])

In  multidimensional  arrays,  accumulation  functions  like  cumsum  return  an  array  of
the  same  size,  but  with  the  partial  aggregates  computed  along  the  indicated  axis
according to each lower dimensional slice:

In [186]: arr = np.array([[0, 1, 2], [3, 4, 5], [6, 7, 8]])

In [187]: arr
Out[187]: 
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])

In [188]: arr.cumsum(axis=0)
Out[188]: 
array([[ 0,  1,  2],
       [ 3,  5,  7],
       [ 9, 12, 15]])

In [189]: arr.cumprod(axis=1)
Out[189]: 
array([[  0,   0,   0],
       [  3,  12,  60],
       [  6,  42, 336]])

See Table 4-5 for a full listing. Well see many examples of these methods in action in
later chapters.

Table 4-5. Basic array statistical methods

Method
sum

mean

std, var

min, max

Description
Sum of all the elements in the array or along an axis; zero-length arrays have sum 0
Arithmetic mean; zero-length arrays have NaN mean
Standard deviation and variance, respectively, with optional degrees of freedom adjustment (default
denominator n)
Minimum and maximum

argmin, argmax Indices of minimum and maximum elements, respectively
cumsum

Cumulative sum of elements starting from 0
Cumulative product of elements starting from 1

cumprod

112 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

Methods for Boolean Arrays
Boolean values are coerced to 1 (True) and 0 (False) in the preceding methods. Thus,
sum is often used as a means of counting True values in a boolean array:

In [190]: arr = np.random.randn(100)

In [191]: (arr &gt; 0).sum() # Number of positive values
Out[191]: 42

There are two additional methods, any and all, useful especially for boolean arrays.
any tests whether one or more values in an array is  True, while  all checks if every
value is True:

In [192]: bools = np.array([False, False, True, False])

In [193]: bools.any()
Out[193]: True

In [194]: bools.all()
Out[194]: False

These methods also work with non-boolean arrays, where non-zero elements evalu
ate to True.

Sorting
Like  Pythons  built-in  list  type,  NumPy  arrays  can  be  sorted  in-place  with  the  sort
method:

In [195]: arr = np.random.randn(6)

In [196]: arr
Out[196]: array([ 0.6095, -0.4938,  1.24  , -0.1357,  1.43  , -0.8469])

In [197]: arr.sort()

In [198]: arr
Out[198]: array([-0.8469, -0.4938, -0.1357,  0.6095,  1.24  ,  1.43  ])

You can sort each one-dimensional section of values in a multidimensional array in-
place along an axis by passing the axis number to sort:

In [199]: arr = np.random.randn(5, 3)

In [200]: arr
Out[200]: 
array([[ 0.6033,  1.2636, -0.2555],
       [-0.4457,  0.4684, -0.9616],
       [-1.8245,  0.6254,  1.0229],
       [ 1.1074,  0.0909, -0.3501],
       [ 0.218 , -0.8948, -1.7415]])

4.3 Array-Oriented Programming with Arrays 

| 

113

In [201]: arr.sort(1)

In [202]: arr
Out[202]: 
array([[-0.2555,  0.6033,  1.2636],
       [-0.9616, -0.4457,  0.4684],
       [-1.8245,  0.6254,  1.0229],
       [-0.3501,  0.0909,  1.1074],
       [-1.7415, -0.8948,  0.218 ]])

The top-level method np.sort returns a sorted copy of an array instead of modifying
the array in-place. A quick-and-dirty way to compute the quantiles of an array is to
sort it and select the value at a particular rank:

In [203]: large_arr = np.random.randn(1000)

In [204]: large_arr.sort()

In [205]: large_arr[int(0.05 * len(large_arr))] # 5% quantile
Out[205]: -1.5311513550102103

For more details on using NumPys sorting methods, and more advanced techniques
like indirect sorts, see Appendix A. Several other kinds of data manipulations related
to sorting (e.g., sorting a table of data by one or more columns) can also be found in
pandas.

Unique and Other Set Logic
NumPy  has  some  basic  set  operations  for  one-dimensional  ndarrays.  A  commonly
used one is np.unique, which returns the sorted unique values in an array:

In [206]: names = np.array([&#39;Bob&#39;, &#39;Joe&#39;, &#39;Will&#39;, &#39;Bob&#39;, &#39;Will&#39;, &#39;Joe&#39;, &#39;Joe&#39;])

In [207]: np.unique(names)
Out[207]: 
array([&#39;Bob&#39;, &#39;Joe&#39;, &#39;Will&#39;],
      dtype=&#39;&lt;U4&#39;)

In [208]: ints = np.array([3, 3, 3, 2, 2, 1, 1, 4, 4])

In [209]: np.unique(ints)
Out[209]: array([1, 2, 3, 4])

Contrast np.unique with the pure Python alternative:

In [210]: sorted(set(names))
Out[210]: [&#39;Bob&#39;, &#39;Joe&#39;, &#39;Will&#39;]

Another function, np.in1d, tests membership of the values in one array in another,
returning a boolean array:

114 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

In [211]: values = np.array([6, 0, 0, 3, 2, 5, 6])

In [212]: np.in1d(values, [2, 3, 6])
Out[212]: array([ True, False, False,  True,  True, False,  True], dtype=bool)

See Table 4-6 for a listing of set functions in NumPy.

Table 4-6. Array set operations

Method
unique(x)
intersect1d(x, y) Compute the sorted, common elements in x and y
union1d(x, y)

Description
Compute the sorted, unique elements in x

in1d(x, y)

setdiff1d(x, y)

setxor1d(x, y)

Compute the sorted union of elements
Compute a boolean array indicating whether each element of x is contained in y
Set difference, elements in x that are not in y
Set symmetric differences; elements that are in either of the arrays, but not both

4.4 File Input and Output with Arrays
NumPy is able to save and load data to and from disk either in text or binary format.
In  this  section  I  only  discuss  NumPys  built-in  binary  format,  since  most  users  will
prefer pandas and other tools for loading text or tabular data (see Chapter 6 for much
more).

np.save and np.load are the two workhorse functions for efficiently saving and load
ing  array  data  on  disk.  Arrays  are  saved  by  default  in  an  uncompressed  raw  binary
format with file extension .npy:

In [213]: arr = np.arange(10)

In [214]: np.save(&#39;some_array&#39;, arr)

If the file path does not already end in .npy, the extension will be appended. The array
on disk can then be loaded with np.load:

In [215]: np.load(&#39;some_array.npy&#39;)
Out[215]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

You save multiple arrays in an uncompressed archive using np.savez and passing the
arrays as keyword arguments:

In [216]: np.savez(&#39;array_archive.npz&#39;, a=arr, b=arr)

When  loading  an  .npz  file,  you  get  back  a  dict-like  object  that  loads  the  individual
arrays lazily:

In [217]: arch = np.load(&#39;array_archive.npz&#39;)

In [218]: arch[&#39;b&#39;]
Out[218]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

4.4 File Input and Output with Arrays 

| 

115

If your data compresses well, you may wish to use numpy.savez_compressed instead:

In [219]: np.savez_compressed(&#39;arrays_compressed.npz&#39;, a=arr, b=arr)

4.5 Linear Algebra
Linear  algebra,  like  matrix  multiplication,  decompositions,  determinants,  and  other
square matrix math, is an important part of any array library. Unlike some languages
like  MATLAB,  multiplying  two  two-dimensional  arrays  with  *  is  an  element-wise
product instead of a matrix dot product. Thus, there is a function dot, both an array 
method and a function in the numpy namespace, for matrix multiplication:

In [223]: x = np.array([[1., 2., 3.], [4., 5., 6.]])

In [224]: y = np.array([[6., 23.], [-1, 7], [8, 9]])

In [225]: x
Out[225]: 
array([[ 1.,  2.,  3.],
       [ 4.,  5.,  6.]])

In [226]: y
Out[226]: 
array([[  6.,  23.],
       [ -1.,   7.],
       [  8.,   9.]])

In [227]: x.dot(y)
Out[227]: 
array([[  28.,   64.],
       [  67.,  181.]])

x.dot(y) is equivalent to np.dot(x, y):

In [228]: np.dot(x, y)
Out[228]: 
array([[  28.,   64.],
       [  67.,  181.]])

A  matrix  product  between  a  two-dimensional  array  and  a  suitably  sized  one-
dimensional array results in a one-dimensional array:

In [229]: np.dot(x, np.ones(3))
Out[229]: array([  6.,  15.])

The @ symbol (as of Python 3.5) also works as an infix operator that performs matrix
multiplication:

In [230]: x @ np.ones(3)
Out[230]: array([  6.,  15.])

116 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

numpy.linalg  has  a  standard  set  of  matrix  decompositions  and  things  like  inverse
and  determinant.  These  are  implemented  under  the  hood  via  the  same  industry-
standard linear algebra libraries used in other languages like MATLAB and R, such as
BLAS, LAPACK, or possibly (depending on your NumPy build) the proprietary Intel
MKL (Math Kernel Library):

In [231]: from numpy.linalg import inv, qr

In [232]: X = np.random.randn(5, 5)

In [233]: mat = X.T.dot(X)

In [234]: inv(mat)
Out[234]: 
array([[  933.1189,   871.8258, -1417.6902, -1460.4005,  1782.1391],
       [  871.8258,   815.3929, -1325.9965, -1365.9242,  1666.9347],
       [-1417.6902, -1325.9965,  2158.4424,  2222.0191, -2711.6822],
       [-1460.4005, -1365.9242,  2222.0191,  2289.0575, -2793.422 ],
       [ 1782.1391,  1666.9347, -2711.6822, -2793.422 ,  3409.5128]])

In [235]: mat.dot(inv(mat))
Out[235]: 
array([[ 1.,  0., -0., -0., -0.],
       [-0.,  1.,  0.,  0.,  0.],
       [ 0.,  0.,  1.,  0.,  0.],
       [-0.,  0.,  0.,  1., -0.],
       [-0.,  0.,  0.,  0.,  1.]])

In [236]: q, r = qr(mat)

In [237]: r
Out[237]: 
array([[-1.6914,  4.38  ,  0.1757,  0.4075, -0.7838],
       [ 0.    , -2.6436,  0.1939, -3.072 , -1.0702],
       [ 0.    ,  0.    , -0.8138,  1.5414,  0.6155],
       [ 0.    ,  0.    ,  0.    , -2.6445, -2.1669],
       [ 0.    ,  0.    ,  0.    ,  0.    ,  0.0002]])

The expression X.T.dot(X) computes the dot product of X with its transpose X.T.

See Table 4-7 for a list of some of the most commonly used linear algebra functions.

Table 4-7. Commonly used numpy.linalg functions

Function Description
diag

Return the diagonal (or off-diagonal) elements of a square matrix as a 1D array, or convert a 1D array into a
square matrix with zeros on the off-diagonal
Matrix multiplication
Compute the sum of the diagonal elements
Compute the matrix determinant

dot

trace

det

4.5 Linear Algebra 

| 

117

Function Description
eig

Compute the eigenvalues and eigenvectors of a square matrix
Compute the inverse of a square matrix
Compute the Moore-Penrose pseudo-inverse of a matrix
Compute the QR decomposition
Compute the singular value decomposition (SVD)
Solve the linear system Ax = b for x, where A is a square matrix
Compute the least-squares solution to Ax = b

inv

pinv

qr

svd

solve

lstsq

4.6 Pseudorandom Number Generation
The  numpy.random  module  supplements  the  built-in  Python  random  with  functions
for efficiently generating whole arrays of sample values from many kinds of probabil
ity distributions. For example, you can get a 4  4 array of samples from the standard
normal distribution using normal:

In [238]: samples = np.random.normal(size=(4, 4))

In [239]: samples
Out[239]: 
array([[ 0.5732,  0.1933,  0.4429,  1.2796],
       [ 0.575 ,  0.4339, -0.7658, -1.237 ],
       [-0.5367,  1.8545, -0.92  , -0.1082],
       [ 0.1525,  0.9435, -1.0953, -0.144 ]])

Pythons  built-in  random  module,  by  contrast,  only  samples  one  value  at  a  time.  As
you can see from this benchmark, numpy.random is well over an order of magnitude
faster for generating very large samples:

In [240]: from random import normalvariate

In [241]: N = 1000000

In [242]: %timeit samples = [normalvariate(0, 1) for _ in range(N)]
1.77 s +- 126 ms per loop (mean +- std. dev. of 7 runs, 1 loop each)

In [243]: %timeit np.random.normal(size=N)
61.7 ms +- 1.32 ms per loop (mean +- std. dev. of 7 runs, 10 loops each)

We say that these are pseudorandom numbers because they are generated by an algo
rithm with deterministic behavior based on the seed of the random number genera
tor.  You  can  change  NumPys 
seed  using
np.random.seed:

random  number  generation 

In [244]: np.random.seed(1234)

118 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

The data generation functions in numpy.random use a global random seed. To avoid
global  state,  you  can  use  numpy.random.RandomState  to  create  a  random  number
generator isolated from others:

In [245]: rng = np.random.RandomState(1234)

In [246]: rng.randn(10)
Out[246]: 
array([ 0.4714, -1.191 ,  1.4327, -0.3127, -0.7206,  0.8872,  0.8596,
       -0.6365,  0.0157, -2.2427])

See Table 4-8 for a partial list of functions available in numpy.random. Ill give some
examples of leveraging these functions ability to generate large arrays of samples all
at once in the next section.

Table 4-8. Partial list of numpy.random functions

Function
seed

Description
Seed the random number generator

permutation Return a random permutation of a sequence, or return a permuted range
shuffle

rand

randint

randn

binomial

normal

beta

chisquare

gamma

uniform

Randomly permute a sequence in-place
Draw samples from a uniform distribution
Draw random integers from a given low-to-high range
Draw samples from a normal distribution with mean 0 and standard deviation 1 (MATLAB-like interface)
Draw samples from a binomial distribution
Draw samples from a normal (Gaussian) distribution
Draw samples from a beta distribution
Draw samples from a chi-square distribution
Draw samples from a gamma distribution
Draw samples from a uniform [0, 1) distribution

4.7 Example: Random Walks
The simulation of random walks provides an illustrative application of utilizing array
operations. Lets first consider a simple random walk starting at 0 with steps of 1 and
1 occurring with equal probability.

Here is a pure Python way to implement a single random walk with 1,000 steps using
the built-in random module:

In [247]: import random
   .....: position = 0
   .....: walk = [position]
   .....: steps = 1000
   .....: for i in range(steps):
   .....:     step = 1 if random.randint(0, 1) else -1
   .....:     position += step

4.7 Example: Random Walks 

| 

119

   .....:     walk.append(position)
   .....:

See  Figure  4-4  for  an  example  plot  of  the  first  100  values  on  one  of  these  random
walks:

In [249]: plt.plot(walk[:100])

Figure 4-4. A simple random walk

You might make the observation that walk is simply the cumulative sum of the ran
dom steps and could be evaluated as an array expression. Thus, I use the np.random
module  to  draw  1,000  coin  flips  at  once,  set  these  to  1  and  1,  and  compute  the
cumulative sum:

In [251]: nsteps = 1000

In [252]: draws = np.random.randint(0, 2, size=nsteps)

In [253]: steps = np.where(draws &gt; 0, 1, -1)

In [254]: walk = steps.cumsum()

From  this  we  can  begin  to  extract  statistics  like  the  minimum  and  maximum  value
along the walks trajectory:

In [255]: walk.min()
Out[255]: -3

120 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

In [256]: walk.max()
Out[256]: 31

A more complicated statistic is the first crossing time, the step at which the random
walk  reaches  a  particular  value.  Here  we  might  want  to  know  how  long  it  took  the
random  walk  to  get  at  least  10  steps  away  from  the  origin  0  in  either  direction.
np.abs(walk) &gt;= 10 gives us a boolean array indicating where the walk has reached
or exceeded 10, but we want the index of the first 10 or 10. Turns out, we can com
pute  this  using  argmax,  which  returns  the  first  index  of  the  maximum  value  in  the
boolean array (True is the maximum value):

In [257]: (np.abs(walk) &gt;= 10).argmax()
Out[257]: 37

Note that using argmax here is not always efficient because it always makes a full scan
of the array. In this special case, once a True is observed we know it to be the maxi
mum value.

Simulating Many Random Walks at Once
If your goal was to simulate many random walks, say 5,000 of them, you can generate
all of the random walks with minor modifications to the preceding code. If passed a
2-tuple, the numpy.random functions will generate a two-dimensional array of draws,
and we can compute the cumulative sum across the rows to compute all 5,000 ran
dom walks in one shot:

In [258]: nwalks = 5000

In [259]: nsteps = 1000

In [260]: draws = np.random.randint(0, 2, size=(nwalks, nsteps)) # 0 or 1

In [261]: steps = np.where(draws &gt; 0, 1, -1)

In [262]: walks = steps.cumsum(1)

In [263]: walks
Out[263]: 
array([[  1,   0,   1, ...,   8,   7,   8],
       [  1,   0,  -1, ...,  34,  33,  32],
       [  1,   0,  -1, ...,   4,   5,   4],
       ..., 
       [  1,   2,   1, ...,  24,  25,  26],
       [  1,   2,   3, ...,  14,  13,  14],
       [ -1,  -2,  -3, ..., -24, -23, -22]])

Now,  we  can  compute  the  maximum  and  minimum  values  obtained  over  all  of  the
walks:

4.7 Example: Random Walks 

| 

121

In [264]: walks.max()
Out[264]: 138

In [265]: walks.min()
Out[265]: -133

Out  of  these  walks,  lets  compute  the  minimum  crossing  time  to  30  or  30.  This  is
slightly tricky because not all 5,000 of them reach 30. We can check this using the any
method:

In [266]: hits30 = (np.abs(walks) &gt;= 30).any(1)

In [267]: hits30
Out[267]: array([False,  True, False, ..., False,  True, False], dtype=bool)

In [268]: hits30.sum() # Number that hit 30 or -30
Out[268]: 3410

We can use this boolean array to select out the rows of walks that actually cross the
absolute 30 level and call argmax across axis 1 to get the crossing times:

In [269]: crossing_times = (np.abs(walks[hits30]) &gt;= 30).argmax(1)

In [270]: crossing_times.mean()
Out[270]: 498.88973607038122

Feel free to experiment with other distributions for the steps other than equal-sized
coin  flips.  You  need  only  use  a  different  random  number  generation  function,  like
normal  to  generate  normally  distributed  steps  with  some  mean  and  standard 
deviation:

In [271]: steps = np.random.normal(loc=0, scale=0.25,
   .....:                          size=(nwalks, nsteps))

4.8 Conclusion
While much of the rest of the book will focus on building data wrangling skills with
pandas,  we  will  continue  to  work  in  a  similar  array-based  style.  In  Appendix  A,  we
will dig deeper into NumPy features to help you further develop your array comput
ing skills.

122 

| 

Chapter 4: NumPy Basics: Arrays and Vectorized Computation

CHAPTER 5
Getting Started with pandas

pandas  will  be  a  major  tool  of  interest  throughout  much  of  the  rest  of  the  book.  It
contains data structures and data manipulation tools designed to make data cleaning
and analysis fast and easy in Python. pandas is often used in tandem with numerical
computing  tools  like  NumPy  and  SciPy,  analytical  libraries  like  statsmodels  and
scikit-learn, and data visualization libraries like matplotlib. pandas adopts significant
parts  of  NumPys  idiomatic  style  of  array-based  computing,  especially  array-based
functions and a preference for data processing without for loops.

While pandas adopts many coding idioms from NumPy, the biggest difference is that
pandas is designed for working with tabular or heterogeneous data. NumPy, by con
trast, is best suited for working with homogeneous numerical array data.

Since  becoming  an  open  source  project  in  2010,  pandas  has  matured  into  a  quite
large  library  thats  applicable  in  a  broad  set  of  real-world  use  cases.  The  developer
community  has  grown  to  over  800  distinct  contributors,  whove  been  helping  build
the project as theyve used it to solve their day-to-day data problems.

Throughout the rest of the book, I use the following import convention for pandas:

In [1]: import pandas as pd

Thus, whenever you see pd. in code, its referring to pandas. You may also find it eas
ier  to  import  Series  and  DataFrame  into  the  local  namespace  since  they  are  so  fre
quently used:

In [2]: from pandas import Series, DataFrame

123

5.1 Introduction to pandas Data Structures
To get started with pandas, you will need to get comfortable with its two workhorse
data  structures:  Series  and  DataFrame.  While  they  are  not  a  universal  solution  for
every problem, they provide a solid, easy-to-use basis for most applications.

Series
A  Series  is  a  one-dimensional  array-like  object  containing  a  sequence  of  values  (of
similar types to NumPy types) and an associated array of data labels, called its index.
The simplest Series is formed from only an array of data:

In [11]: obj = pd.Series([4, 7, -5, 3])

In [12]: obj
Out[12]: 
0    4
1    7
2   -5
3    3
dtype: int64

The  string  representation  of  a  Series  displayed  interactively  shows  the  index  on  the
left  and  the  values  on  the  right.  Since  we  did  not  specify  an  index  for  the  data,  a
default one consisting of the integers 0 through N - 1 (where N is the length of the
data) is created. You can get the array representation and index object of the Series via
its values and index attributes, respectively:

In [13]: obj.values
Out[13]: array([ 4,  7, -5,  3])

In [14]: obj.index  # like range(4)
Out[14]: RangeIndex(start=0, stop=4, step=1)

Often it will be desirable to create a Series with an index identifying each data point
with a label:

In [15]: obj2 = pd.Series([4, 7, -5, 3], index=[&#39;d&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;])

In [16]: obj2
Out[16]: 
d    4
b    7
a   -5
c    3
dtype: int64

In [17]: obj2.index
Out[17]: Index([&#39;d&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;], dtype=&#39;object&#39;)

124 

| 

Chapter 5: Getting Started with pandas

Compared with NumPy arrays, you can use labels in the index when selecting single
values or a set of values:

In [18]: obj2[&#39;a&#39;]
Out[18]: -5

In [19]: obj2[&#39;d&#39;] = 6

In [20]: obj2[[&#39;c&#39;, &#39;a&#39;, &#39;d&#39;]]
Out[20]: 
c    3
a   -5
d    6
dtype: int64

Here  [&#39;c&#39;,  &#39;a&#39;,  &#39;d&#39;]  is  interpreted  as  a  list  of  indices,  even  though  it  contains
strings instead of integers.

Using NumPy functions or NumPy-like operations, such as filtering with a boolean
array, scalar multiplication, or applying math functions, will preserve the index-value
link:

In [21]: obj2[obj2 &gt; 0]
Out[21]: 
d    6
b    7
c    3
dtype: int64

In [22]: obj2 * 2
Out[22]: 
d    12
b    14
a   -10
c     6
dtype: int64

In [23]: np.exp(obj2)
Out[23]: 
d     403.428793
b    1096.633158
a       0.006738
c      20.085537
dtype: float64

Another way to think about a Series is as a fixed-length, ordered dict, as it is a map
ping of index values to data values. It can be used in many contexts where you might
use a dict:

In [24]: &#39;b&#39; in obj2
Out[24]: True

5.1 Introduction to pandas Data Structures 

| 

125

In [25]: &#39;e&#39; in obj2
Out[25]: False

Should you have data contained in a Python dict, you can create a Series from it by
passing the dict:

In [26]: sdata = {&#39;Ohio&#39;: 35000, &#39;Texas&#39;: 71000, &#39;Oregon&#39;: 16000, &#39;Utah&#39;: 5000}

In [27]: obj3 = pd.Series(sdata)

In [28]: obj3
Out[28]: 
Ohio      35000
Oregon    16000
Texas     71000
Utah       5000
dtype: int64

When you are only passing a dict, the index in the resulting Series will have the dicts
keys in sorted order. You can override this by passing the dict keys in the order you
want them to appear in the resulting Series:

In [29]: states = [&#39;California&#39;, &#39;Ohio&#39;, &#39;Oregon&#39;, &#39;Texas&#39;]

In [30]: obj4 = pd.Series(sdata, index=states)

In [31]: obj4
Out[31]: 
California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
dtype: float64

Here, three values found in sdata were placed in the appropriate locations, but since
no value for &#39;California&#39; was found, it appears as NaN (not a number), which is con
sidered  in  pandas  to  mark  missing  or  NA  values.  Since  &#39;Utah&#39;  was  not  included  in
states, it is excluded from the resulting object.

I will use the terms missing or NA interchangeably to refer to missing data. The
isnull and notnull functions in pandas should be used to detect missing data:

In [32]: pd.isnull(obj4)
Out[32]: 
California     True
Ohio          False
Oregon        False
Texas         False
dtype: bool

In [33]: pd.notnull(obj4)
Out[33]: 

126 

| 

Chapter 5: Getting Started with pandas

California    False
Ohio           True
Oregon         True
Texas          True
dtype: bool

Series also has these as instance methods:

In [34]: obj4.isnull()
Out[34]: 
California     True
Ohio          False
Oregon        False
Texas         False
dtype: bool

I discuss working with missing data in more detail in Chapter 7.

A useful Series feature for many applications is that it automatically aligns by index
label in arithmetic operations:

In [35]: obj3
Out[35]: 
Ohio      35000
Oregon    16000
Texas     71000
Utah       5000
dtype: int64

In [36]: obj4
Out[36]: 
California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
dtype: float64

In [37]: obj3 + obj4
Out[37]: 
California         NaN
Ohio           70000.0
Oregon         32000.0
Texas         142000.0
Utah               NaN
dtype: float64

Data alignment features will be addressed in more detail later. If you have experience
with databases, you can think about this as being similar to a join operation.

Both the Series object itself and its index have a name attribute, which integrates with
other key areas of pandas functionality:

5.1 Introduction to pandas Data Structures 

| 

127

In [38]: obj4.name = &#39;population&#39;

In [39]: obj4.index.name = &#39;state&#39;

In [40]: obj4
Out[40]: 
state
California        NaN
Ohio          35000.0
Oregon        16000.0
Texas         71000.0
Name: population, dtype: float64

A Seriess index can be altered in-place by assignment:

In [41]: obj
Out[41]: 
0    4
1    7
2   -5
3    3
dtype: int64

In [42]: obj.index = [&#39;Bob&#39;, &#39;Steve&#39;, &#39;Jeff&#39;, &#39;Ryan&#39;]

In [43]: obj
Out[43]: 
Bob      4
Steve    7
Jeff    -5
Ryan     3
dtype: int64

DataFrame
A DataFrame represents a rectangular table of data and contains an ordered collec
tion  of  columns,  each  of  which  can  be  a  different  value  type  (numeric,  string,
boolean, etc.). The DataFrame has both a row and column index; it can be thought of
as a dict of Series all sharing the same index. Under the hood, the data is stored as one
or more two-dimensional blocks rather than a list, dict, or some other collection of
one-dimensional  arrays.  The  exact  details  of  DataFrames  internals  are  outside  the
scope of this book.

While a DataFrame is physically two-dimensional, you can use it to
represent  higher  dimensional  data  in  a  tabular  format  using  hier
archical  indexing,  a  subject  we  will  discuss  in  Chapter  8  and  an
ingredient in some of the more advanced data-handling features in
pandas.

128 

| 

Chapter 5: Getting Started with pandas

There are many ways to construct a DataFrame, though one of the most common is
from a dict of equal-length lists or NumPy arrays:

data = {&#39;state&#39;: [&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Nevada&#39;, &#39;Nevada&#39;, &#39;Nevada&#39;],
        &#39;year&#39;: [2000, 2001, 2002, 2001, 2002, 2003],
        &#39;pop&#39;: [1.5, 1.7, 3.6, 2.4, 2.9, 3.2]}
frame = pd.DataFrame(data)

The resulting DataFrame will have its index assigned automatically as with Series, and
the columns are placed in sorted order:

In [45]: frame
Out[45]: 
   pop   state  year
0  1.5    Ohio  2000
1  1.7    Ohio  2001
2  3.6    Ohio  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002
5  3.2  Nevada  2003

If you are using the Jupyter notebook, pandas DataFrame objects will be displayed as
a more browser-friendly HTML table.

For large DataFrames, the head method selects only the first five rows:

In [46]: frame.head()
Out[46]: 
   pop   state  year
0  1.5    Ohio  2000
1  1.7    Ohio  2001
2  3.6    Ohio  2002
3  2.4  Nevada  2001
4  2.9  Nevada  2002

If  you  specify  a  sequence  of  columns,  the  DataFrames  columns  will  be  arranged  in
that order:

In [47]: pd.DataFrame(data, columns=[&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;])
Out[47]: 
   year   state  pop
0  2000    Ohio  1.5
1  2001    Ohio  1.7
2  2002    Ohio  3.6
3  2001  Nevada  2.4
4  2002  Nevada  2.9
5  2003  Nevada  3.2

If you pass a column that isnt contained in the dict, it will appear with missing values
in the result:

In [48]: frame2 = pd.DataFrame(data, columns=[&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;, &#39;debt&#39;],
   ....:                       index=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;,
   ....:                              &#39;five&#39;, &#39;six&#39;])

5.1 Introduction to pandas Data Structures 

| 

129

In [49]: frame2
Out[49]: 
       year   state  pop debt
one    2000    Ohio  1.5  NaN
two    2001    Ohio  1.7  NaN
three  2002    Ohio  3.6  NaN
four   2001  Nevada  2.4  NaN
five   2002  Nevada  2.9  NaN
six    2003  Nevada  3.2  NaN

In [50]: frame2.columns
Out[50]: Index([&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;, &#39;debt&#39;], dtype=&#39;object&#39;)

A column in a DataFrame can be retrieved as a Series either by dict-like notation or
by attribute:

In [51]: frame2[&#39;state&#39;]
Out[51]: 
one        Ohio
two        Ohio
three      Ohio
four     Nevada
five     Nevada
six      Nevada
Name: state, dtype: object

In [52]: frame2.year
Out[52]: 
one      2000
two      2001
three    2002
four     2001
five     2002
six      2003
Name: year, dtype: int64

Attribute-like access (e.g., frame2.year) and tab completion of col
umn names in IPython is provided as a convenience.
frame2[column] works for any column name, but  frame2.column
only  works  when  the  column  name  is  a  valid  Python  variable
name.

Note that the returned Series have the same index as the DataFrame, and their name
attribute has been appropriately set.

Rows can also be retrieved by position or name with the special loc attribute (much
more on this later):

130 

| 

Chapter 5: Getting Started with pandas

In [53]: frame2.loc[&#39;three&#39;]
Out[53]: 
year     2002
state    Ohio
pop       3.6
debt      NaN
Name: three, dtype: object

Columns  can  be  modified  by  assignment.  For  example,  the  empty  &#39;debt&#39;  column
could be assigned a scalar value or an array of values:

In [54]: frame2[&#39;debt&#39;] = 16.5

In [55]: frame2
Out[55]: 
       year   state  pop  debt
one    2000    Ohio  1.5  16.5
two    2001    Ohio  1.7  16.5
three  2002    Ohio  3.6  16.5
four   2001  Nevada  2.4  16.5
five   2002  Nevada  2.9  16.5
six    2003  Nevada  3.2  16.5

In [56]: frame2[&#39;debt&#39;] = np.arange(6.)

In [57]: frame2
Out[57]: 
       year   state  pop  debt
one    2000    Ohio  1.5   0.0
two    2001    Ohio  1.7   1.0
three  2002    Ohio  3.6   2.0
four   2001  Nevada  2.4   3.0
five   2002  Nevada  2.9   4.0
six    2003  Nevada  3.2   5.0

When you are assigning lists or arrays to a column, the values length must match the
length of the DataFrame. If you assign a Series, its labels will be realigned exactly to
the DataFrames index, inserting missing values in any holes:

In [58]: val = pd.Series([-1.2, -1.5, -1.7], index=[&#39;two&#39;, &#39;four&#39;, &#39;five&#39;])

In [59]: frame2[&#39;debt&#39;] = val

In [60]: frame2
Out[60]: 
       year   state  pop  debt
one    2000    Ohio  1.5   NaN
two    2001    Ohio  1.7  -1.2
three  2002    Ohio  3.6   NaN
four   2001  Nevada  2.4  -1.5
five   2002  Nevada  2.9  -1.7
six    2003  Nevada  3.2   NaN

5.1 Introduction to pandas Data Structures 

| 

131

Assigning a column that doesnt exist will create a new column. The del keyword will
delete columns as with a dict.

As  an  example  of  del,  I  first  add  a  new  column  of  boolean  values  where  the  state
column equals &#39;Ohio&#39;:

In [61]: frame2[&#39;eastern&#39;] = frame2.state == &#39;Ohio&#39;

In [62]: frame2
Out[62]: 
       year   state  pop  debt  eastern
one    2000    Ohio  1.5   NaN     True
two    2001    Ohio  1.7  -1.2     True
three  2002    Ohio  3.6   NaN     True
four   2001  Nevada  2.4  -1.5    False
five   2002  Nevada  2.9  -1.7    False
six    2003  Nevada  3.2   NaN    False

New columns cannot be created with the frame2.eastern syntax.

The del method can then be used to remove this column:

In [63]: del frame2[&#39;eastern&#39;]

In [64]: frame2.columns
Out[64]: Index([&#39;year&#39;, &#39;state&#39;, &#39;pop&#39;, &#39;debt&#39;], dtype=&#39;object&#39;)

The column returned from indexing a DataFrame is a view on the
underlying data, not a copy. Thus, any in-place modifications to the
Series  will  be  reflected  in  the  DataFrame.  The  column  can  be
explicitly copied with the Seriess copy method.

Another common form of data is a nested dict of dicts:

In [65]: pop = {&#39;Nevada&#39;: {2001: 2.4, 2002: 2.9},
   ....:        &#39;Ohio&#39;: {2000: 1.5, 2001: 1.7, 2002: 3.6}}

If the nested dict is passed to the DataFrame, pandas will interpret the outer dict keys
as the columns and the inner keys as the row indices:

In [66]: frame3 = pd.DataFrame(pop)

In [67]: frame3
Out[67]: 
      Nevada  Ohio
2000     NaN   1.5

132 

| 

Chapter 5: Getting Started with pandas

2001     2.4   1.7
2002     2.9   3.6

You can transpose the DataFrame (swap rows and columns) with similar syntax to a
NumPy array:

In [68]: frame3.T
Out[68]: 
        2000  2001  2002
Nevada   NaN   2.4   2.9
Ohio     1.5   1.7   3.6

The keys in the inner dicts are combined and sorted to form the index in the result.
This isnt true if an explicit index is specified:

In [69]: pd.DataFrame(pop, index=[2001, 2002, 2003])
Out[69]: 
      Nevada  Ohio
2001     2.4   1.7
2002     2.9   3.6
2003     NaN   NaN

Dicts of Series are treated in much the same way:

In [70]: pdata = {&#39;Ohio&#39;: frame3[&#39;Ohio&#39;][:-1],
   ....:          &#39;Nevada&#39;: frame3[&#39;Nevada&#39;][:2]}

In [71]: pd.DataFrame(pdata)
Out[71]: 
      Nevada  Ohio
2000     NaN   1.5
2001     2.4   1.7

For a complete list of things you can pass the DataFrame constructor, see Table 5-1.

If a DataFrames index and columns have their name attributes set, these will also be
displayed:

In [72]: frame3.index.name = &#39;year&#39;; frame3.columns.name = &#39;state&#39;

In [73]: frame3
Out[73]: 
state  Nevada  Ohio
year               
2000      NaN   1.5
2001      2.4   1.7
2002      2.9   3.6

As with Series, the values attribute returns the data contained in the DataFrame as a
two-dimensional ndarray:

In [74]: frame3.values
Out[74]: 
array([[ nan,  1.5],

5.1 Introduction to pandas Data Structures 

| 

133

       [ 2.4,  1.7],
       [ 2.9,  3.6]])

If the DataFrames columns are different dtypes, the dtype of the values array will be
chosen to accommodate all of the columns:

In [75]: frame2.values
Out[75]: 
array([[2000, &#39;Ohio&#39;, 1.5, nan],
       [2001, &#39;Ohio&#39;, 1.7, -1.2],
       [2002, &#39;Ohio&#39;, 3.6, nan],
       [2001, &#39;Nevada&#39;, 2.4, -1.5],
       [2002, &#39;Nevada&#39;, 2.9, -1.7],
       [2003, &#39;Nevada&#39;, 3.2, nan]], dtype=object)

Table 5-1. Possible data inputs to DataFrame constructor

Type
2D ndarray

Notes
A matrix of data, passing optional row and column labels

dict of arrays, lists, or tuples

Each sequence becomes a column in the DataFrame; all sequences must be the same length

NumPy structured/record
array

Treated as the dict of arrays case

dict of Series

dict of dicts

List of dicts or Series

List of lists or tuples

Another DataFrame

NumPy MaskedArray

Each value becomes a column; indexes from each Series are unioned together to form the
results row index if no explicit index is passed
Each inner dict becomes a column; keys are unioned to form the row index as in the dict of
Series case
Each item becomes a row in the DataFrame; union of dict keys or Series indexes become the
DataFrames column labels
Treated as the 2D ndarray case

The DataFrames indexes are used unless different ones are passed

Like the 2D ndarray case except masked values become NA/missing in the DataFrame result

Index Objects
pandass Index objects are responsible for holding the axis labels and other metadata
(like  the  axis  name  or  names).  Any  array  or  other  sequence  of  labels  you  use  when
constructing a Series or DataFrame is internally converted to an Index:

In [76]: obj = pd.Series(range(3), index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])

In [77]: index = obj.index

In [78]: index
Out[78]: Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], dtype=&#39;object&#39;)

In [79]: index[1:]
Out[79]: Index([&#39;b&#39;, &#39;c&#39;], dtype=&#39;object&#39;)

Index objects are immutable and thus cant be modified by the user:

134 

| 

Chapter 5: Getting Started with pandas

index[1] = &#39;d&#39;  # TypeError

Immutability makes it safer to share Index objects among data structures:

In [80]: labels = pd.Index(np.arange(3))

In [81]: labels
Out[81]: Int64Index([0, 1, 2], dtype=&#39;int64&#39;)

In [82]: obj2 = pd.Series([1.5, -2.5, 0], index=labels)

In [83]: obj2
Out[83]: 
0    1.5
1   -2.5
2    0.0
dtype: float64

In [84]: obj2.index is labels
Out[84]: True

Some  users  will  not  often  take  advantage  of  the  capabilities  pro
vided  by  indexes,  but  because  some  operations  will  yield  results
containing  indexed  data,  its  important  to  understand  how  they
work.

In addition to being array-like, an Index also behaves like a fixed-size set:

In [85]: frame3
Out[85]: 
state  Nevada  Ohio
year               
2000      NaN   1.5
2001      2.4   1.7
2002      2.9   3.6

In [86]: frame3.columns
Out[86]: Index([&#39;Nevada&#39;, &#39;Ohio&#39;], dtype=&#39;object&#39;, name=&#39;state&#39;)

In [87]: &#39;Ohio&#39; in frame3.columns
Out[87]: True

In [88]: 2003 in frame3.index
Out[88]: False

Unlike Python sets, a pandas Index can contain duplicate labels:

In [89]: dup_labels = pd.Index([&#39;foo&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;])

In [90]: dup_labels
Out[90]: Index([&#39;foo&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;], dtype=&#39;object&#39;)

5.1 Introduction to pandas Data Structures 

| 

135

Selections with duplicate labels will select all occurrences of that label.

Each Index has a number of methods and properties for set logic, which answer other
common questions about the data it contains. Some useful ones are summarized in
Table 5-2.

Table 5-2. Some Index methods and properties

Method
append

difference

Description
Concatenate with additional Index objects, producing a new Index
Compute set difference as an Index

intersection Compute set intersection
union

isin

delete

drop

Compute set union
Compute boolean array indicating whether each value is contained in the passed collection
Compute new Index with element at index i deleted
Compute new Index by deleting passed values
Compute new Index by inserting element at index i

insert
is_monotonic Returns True if each element is greater than or equal to the previous element
is_unique

Returns True if the Index has no duplicate values
Compute the array of unique values in the Index

unique

5.2 Essential Functionality
This section will walk you through the fundamental mechanics of interacting with the
data contained in a Series or DataFrame. In the chapters to come, we will delve more
deeply  into  data  analysis  and  manipulation  topics  using  pandas.  This  book  is  not
intended to serve as exhaustive documentation for the pandas library; instead, well
focus  on  the  most  important  features,  leaving  the  less  common  (i.e.,  more  esoteric)
things for you to explore on your own.

Reindexing
An  important  method  on  pandas  objects  is  reindex,  which  means  to  create  a  new
object with the data conformed to a new index. Consider an example:

In [91]: obj = pd.Series([4.5, 7.2, -5.3, 3.6], index=[&#39;d&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;])

In [92]: obj
Out[92]: 
d    4.5
b    7.2
a   -5.3
c    3.6
dtype: float64

136 

| 

Chapter 5: Getting Started with pandas

Calling reindex on this Series rearranges the data according to the new index, intro
ducing missing values if any index values were not already present:

In [93]: obj2 = obj.reindex([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])

In [94]: obj2
Out[94]: 
a   -5.3
b    7.2
c    3.6
d    4.5
e    NaN
dtype: float64

For ordered data like time series, it may be desirable to do some interpolation or fill
ing  of  values  when  reindexing.  The  method  option  allows  us  to  do  this,  using  a
method such as ffill, which forward-fills the values:

In [95]: obj3 = pd.Series([&#39;blue&#39;, &#39;purple&#39;, &#39;yellow&#39;], index=[0, 2, 4])

In [96]: obj3
Out[96]: 
0      blue
2    purple
4    yellow
dtype: object

In [97]: obj3.reindex(range(6), method=&#39;ffill&#39;)
Out[97]: 
0      blue
1      blue
2    purple
3    purple
4    yellow
5    yellow
dtype: object

With DataFrame, reindex can alter either the (row) index, columns, or both. When
passed only a sequence, it reindexes the rows in the result:

In [98]: frame = pd.DataFrame(np.arange(9).reshape((3, 3)),
   ....:                      index=[&#39;a&#39;, &#39;c&#39;, &#39;d&#39;],
   ....:                      columns=[&#39;Ohio&#39;, &#39;Texas&#39;, &#39;California&#39;])

In [99]: frame
Out[99]: 
   Ohio  Texas  California
a     0      1           2
c     3      4           5
d     6      7           8

In [100]: frame2 = frame.reindex([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])

5.2 Essential Functionality 

| 

137

In [101]: frame2
Out[101]: 
   Ohio  Texas  California
a   0.0    1.0         2.0
b   NaN    NaN         NaN
c   3.0    4.0         5.0
d   6.0    7.0         8.0

The columns can be reindexed with the columns keyword:

In [102]: states = [&#39;Texas&#39;, &#39;Utah&#39;, &#39;California&#39;]

In [103]: frame.reindex(columns=states)
Out[103]: 
   Texas  Utah  California
a      1   NaN           2
c      4   NaN           5
d      7   NaN           8

See Table 5-3 for more about the arguments to reindex.

As  well  explore  in  more  detail,  you  can  reindex  more  succinctly  by  label-indexing
with loc, and many users prefer to use it exclusively:

In [104]: frame.loc[[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], states]
Out[104]: 
   Texas  Utah  California
a    1.0   NaN         2.0
b    NaN   NaN         NaN
c    4.0   NaN         5.0
d    7.0   NaN         8.0

Table 5-3. reindex function arguments

Argument
index

method

Description
New sequence to use as index. Can be Index instance or any other sequence-like Python data structure. An
Index will be used exactly as is without any copying.
Interpolation (fill) method; &#39;ffill&#39; fills forward, while &#39;bfill&#39; fills backward.

fill_value Substitute value to use when introducing missing data by reindexing.
limit

When forward- or backfilling, maximum size gap (in number of elements) to fill.

tolerance When forward- or backfilling, maximum size gap (in absolute numeric distance) to fill for inexact matches.
level

Match simple Index on level of MultiIndex; otherwise select subset of.
If True, always copy underlying data even if new index is equivalent to old index; if False, do not copy
the data when the indexes are equivalent.

copy

Dropping Entries from an Axis
Dropping one or more entries from an axis is easy if you already have an index array
or list without those entries. As that can require a bit of munging and set logic, the

138 

| 

Chapter 5: Getting Started with pandas

drop method will return a new object with the indicated value or values deleted from
an axis:

In [105]: obj = pd.Series(np.arange(5.), index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])

In [106]: obj
Out[106]: 
a    0.0
b    1.0
c    2.0
d    3.0
e    4.0
dtype: float64

In [107]: new_obj = obj.drop(&#39;c&#39;)

In [108]: new_obj
Out[108]: 
a    0.0
b    1.0
d    3.0
e    4.0
dtype: float64

In [109]: obj.drop([&#39;d&#39;, &#39;c&#39;])
Out[109]: 
a    0.0
b    1.0
e    4.0
dtype: float64

With DataFrame, index values can be deleted from either axis. To illustrate this, we
first create an example DataFrame:

In [110]: data = pd.DataFrame(np.arange(16).reshape((4, 4)),
   .....:                     index=[&#39;Ohio&#39;, &#39;Colorado&#39;, &#39;Utah&#39;, &#39;New York&#39;],
   .....:                     columns=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;])

In [111]: data
Out[111]: 
          one  two  three  four
Ohio        0    1      2     3
Colorado    4    5      6     7
Utah        8    9     10    11
New York   12   13     14    15

Calling drop with a sequence of labels will drop values from the row labels (axis 0):

In [112]: data.drop([&#39;Colorado&#39;, &#39;Ohio&#39;])
Out[112]: 
          one  two  three  four
Utah        8    9     10    11
New York   12   13     14    15

5.2 Essential Functionality 

| 

139

You can drop values from the columns by passing axis=1 or axis=&#39;columns&#39;:

In [113]: data.drop(&#39;two&#39;, axis=1)
Out[113]: 
          one  three  four
Ohio        0      2     3
Colorado    4      6     7
Utah        8     10    11
New York   12     14    15

In [114]: data.drop([&#39;two&#39;, &#39;four&#39;], axis=&#39;columns&#39;)
Out[114]: 
          one  three
Ohio        0      2
Colorado    4      6
Utah        8     10
New York   12     14

Many functions, like drop, which modify the size or shape of a Series or DataFrame,
can manipulate an object in-place without returning a new object:

In [115]: obj.drop(&#39;c&#39;, inplace=True)

In [116]: obj
Out[116]: 
a    0.0
b    1.0
d    3.0
e    4.0
dtype: float64

Be careful with the inplace, as it destroys any data that is dropped.

Indexing, Selection, and Filtering
Series indexing (obj[...]) works analogously to NumPy array indexing, except you
can use the Seriess index values instead of only integers. Here are some examples of
this:

In [117]: obj = pd.Series(np.arange(4.), index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])

In [118]: obj
Out[118]: 
a    0.0
b    1.0
c    2.0
d    3.0
dtype: float64

In [119]: obj[&#39;b&#39;]
Out[119]: 1.0

140 

| 

Chapter 5: Getting Started with pandas

In [120]: obj[1]
Out[120]: 1.0

In [121]: obj[2:4]
Out[121]: 
c    2.0
d    3.0
dtype: float64

In [122]: obj[[&#39;b&#39;, &#39;a&#39;, &#39;d&#39;]]
Out[122]: 
b    1.0
a    0.0
d    3.0
dtype: float64

In [123]: obj[[1, 3]]
Out[123]: 
b    1.0
d    3.0
dtype: float64

In [124]: obj[obj &lt; 2]
Out[124]: 
a    0.0
b    1.0
dtype: float64

Slicing  with  labels  behaves  differently  than  normal  Python  slicing  in  that  the  end
point is inclusive:

In [125]: obj[&#39;b&#39;:&#39;c&#39;]
Out[125]: 
b    1.0
c    2.0
dtype: float64

Setting using these methods modifies the corresponding section of the Series:

In [126]: obj[&#39;b&#39;:&#39;c&#39;] = 5

In [127]: obj
Out[127]: 
a    0.0
b    5.0
c    5.0
d    3.0
dtype: float64

Indexing into a DataFrame is for retrieving one or more columns either with a single
value or sequence:

5.2 Essential Functionality 

| 

141

In [128]: data = pd.DataFrame(np.arange(16).reshape((4, 4)),
   .....:                     index=[&#39;Ohio&#39;, &#39;Colorado&#39;, &#39;Utah&#39;, &#39;New York&#39;],
   .....:                     columns=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;])

In [129]: data
Out[129]: 
          one  two  three  four
Ohio        0    1      2     3
Colorado    4    5      6     7
Utah        8    9     10    11
New York   12   13     14    15

In [130]: data[&#39;two&#39;]
Out[130]: 
Ohio         1
Colorado     5
Utah         9
New York    13
Name: two, dtype: int64

In [131]: data[[&#39;three&#39;, &#39;one&#39;]]
Out[131]: 
          three  one
Ohio          2    0
Colorado      6    4
Utah         10    8
New York     14   12

Indexing like this has a few special cases. First, slicing or selecting data with a boolean
array:

In [132]: data[:2]
Out[132]: 
          one  two  three  four
Ohio        0    1      2     3
Colorado    4    5      6     7

In [133]: data[data[&#39;three&#39;] &gt; 5]
Out[133]: 
          one  two  three  four
Colorado    4    5      6     7
Utah        8    9     10    11
New York   12   13     14    15

The row selection syntax data[:2] is provided as a convenience. Passing a single ele
ment or a list to the [] operator selects columns.

Another use case is in indexing with a boolean DataFrame, such as one produced by a
scalar comparison:

142 

| 

Chapter 5: Getting Started with pandas

In [134]: data &lt; 5
Out[134]: 
            one    two  three   four
Ohio       True   True   True   True
Colorado   True  False  False  False
Utah      False  False  False  False
New York  False  False  False  False

In [135]: data[data &lt; 5] = 0

In [136]: data
Out[136]: 
          one  two  three  four
Ohio        0    0      0     0
Colorado    0    5      6     7
Utah        8    9     10    11
New York   12   13     14    15

This  makes  DataFrame  syntactically  more  like  a  two-dimensional  NumPy  array  in
this particular case.

Selection with loc and iloc

For DataFrame label-indexing on the rows, I introduce the special indexing operators
loc  and  iloc.  They  enable  you  to  select  a  subset  of  the  rows  and  columns  from  a
DataFrame  with  NumPy-like  notation  using  either  axis  labels  (loc)  or  integers
(iloc).

As a preliminary example, lets select a single row and multiple columns by label:

In [137]: data.loc[&#39;Colorado&#39;, [&#39;two&#39;, &#39;three&#39;]]
Out[137]: 
two      5
three    6
Name: Colorado, dtype: int64

Well then perform some similar selections with integers using iloc:

In [138]: data.iloc[2, [3, 0, 1]]
Out[138]: 
four    11
one      8
two      9
Name: Utah, dtype: int64

In [139]: data.iloc[2]
Out[139]: 
one       8
two       9
three    10
four     11
Name: Utah, dtype: int64

5.2 Essential Functionality 

| 

143

In [140]: data.iloc[[1, 2], [3, 0, 1]]
Out[140]: 
          four  one  two
Colorado     7    0    5
Utah        11    8    9

Both indexing functions work with slices in addition to single labels or lists of labels:

In [141]: data.loc[:&#39;Utah&#39;, &#39;two&#39;]
Out[141]: 
Ohio        0
Colorado    5
Utah        9
Name: two, dtype: int64

In [142]: data.iloc[:, :3][data.three &gt; 5]
Out[142]: 
          one  two  three
Colorado    0    5      6
Utah        8    9     10
New York   12   13     14

So there are many ways to select and rearrange the data contained in a pandas object.
For DataFrame, Table 5-4 provides a short summary of many of them. As youll see
later, there are a number of additional options for working with hierarchical indexes.

When  originally  designing  pandas,  I  felt  that  having  to  type
frame[:,  col]  to  select  a  column  was  too  verbose  (and  error-
prone), since column selection is one of the most common opera
tions. I made the design trade-off to push all of the fancy indexing
behavior (both labels and integers) into the ix operator. In practice,
this led to many edge cases in data with integer axis labels, so the
pandas team decided to create the loc and iloc operators to deal
with strictly label-based and integer-based indexing, respectively.
The ix indexing operator still exists, but it is deprecated. I do not
recommend using it.

Table 5-4. Indexing options with DataFrame

Type
df[val]

df.loc[val]

df.loc[:, val]

df.loc[val1, val2]

df.iloc[where]

Notes
Select single column or sequence of columns from the DataFrame; special case
conveniences: boolean array (filter rows), slice (slice rows), or boolean DataFrame
(set values based on some criterion)
Selects single row or subset of rows from the DataFrame by label
Selects single column or subset of columns by label
Select both rows and columns by label
Selects single row or subset of rows from the DataFrame by integer position

144 

| 

Chapter 5: Getting Started with pandas

Type
df.iloc[:, where]

df.iloc[where_i, where_j]

df.at[label_i, label_j]

df.iat[i, j]
reindex method
get_value, set_value methods

Notes
Selects single column or subset of columns by integer position
Select both rows and columns by integer position
Select a single scalar value by row and column label
Select a single scalar value by row and column position (integers)
Select either rows or columns by labels
Select single value by row and column label

Integer Indexes
Working  with  pandas  objects  indexed  by  integers  is  something  that  often  trips  up
new users due to some differences with indexing semantics on built-in Python data
structures like lists and tuples. For example, you might not expect the following code
to generate an error:

ser = pd.Series(np.arange(3.))
ser
ser[-1]

In this case, pandas could fall back on integer indexing, but its difficult to do this in
general  without  introducing  subtle  bugs.  Here  we  have  an  index  containing  0,  1,  2,
but inferring what the user wants (label-based indexing or position-based) is difficult:

In [144]: ser
Out[144]: 
0    0.0
1    1.0
2    2.0
dtype: float64

On the other hand, with a non-integer index, there is no potential for ambiguity:

In [145]: ser2 = pd.Series(np.arange(3.), index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])

In [146]: ser2[-1]
Out[146]: 2.0

To keep things consistent, if you have an axis index containing integers, data selection
will always be label-oriented. For more precise handling, use loc (for labels) or iloc
(for integers):

In [147]: ser[:1]
Out[147]: 
0    0.0
dtype: float64

In [148]: ser.loc[:1]
Out[148]: 
0    0.0
1    1.0

5.2 Essential Functionality 

| 

145

dtype: float64

In [149]: ser.iloc[:1]
Out[149]: 
0    0.0
dtype: float64

Arithmetic and Data Alignment
An  important  pandas  feature  for  some  applications  is  the  behavior  of  arithmetic
between objects with different indexes. When you are adding together objects, if any
index pairs are not the same, the respective index in the result will be the union of the
index pairs. For users with database experience, this is similar to an automatic outer
join on the index labels. Lets look at an example:

In [150]: s1 = pd.Series([7.3, -2.5, 3.4, 1.5], index=[&#39;a&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;])

In [151]: s2 = pd.Series([-2.1, 3.6, -1.5, 4, 3.1],
   .....:                index=[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39;])

In [152]: s1
Out[152]: 
a    7.3
c   -2.5
d    3.4
e    1.5
dtype: float64

In [153]: s2
Out[153]: 
a   -2.1
c    3.6
e   -1.5
f    4.0
g    3.1
dtype: float64

Adding these together yields:

In [154]: s1 + s2
Out[154]: 
a    5.2
c    1.1
d    NaN
e    0.0
f    NaN
g    NaN
dtype: float64

The internal data alignment introduces missing values in the label locations that dont
overlap. Missing values will then propagate in further arithmetic computations.

146 

| 

Chapter 5: Getting Started with pandas

In the case of DataFrame, alignment is performed on both the rows and the columns:

In [155]: df1 = pd.DataFrame(np.arange(9.).reshape((3, 3)), columns=list(&#39;bcd&#39;),
   .....:                    index=[&#39;Ohio&#39;, &#39;Texas&#39;, &#39;Colorado&#39;])

In [156]: df2 = pd.DataFrame(np.arange(12.).reshape((4, 3)), columns=list(&#39;bde&#39;),
   .....:                    index=[&#39;Utah&#39;, &#39;Ohio&#39;, &#39;Texas&#39;, &#39;Oregon&#39;])

In [157]: df1
Out[157]: 
            b    c    d
Ohio      0.0  1.0  2.0
Texas     3.0  4.0  5.0
Colorado  6.0  7.0  8.0

In [158]: df2
Out[158]: 
          b     d     e
Utah    0.0   1.0   2.0
Ohio    3.0   4.0   5.0
Texas   6.0   7.0   8.0
Oregon  9.0  10.0  11.0

Adding these together returns a DataFrame whose index and columns are the unions
of the ones in each DataFrame:

In [159]: df1 + df2
Out[159]: 
            b   c     d   e
Colorado  NaN NaN   NaN NaN
Ohio      3.0 NaN   6.0 NaN
Oregon    NaN NaN   NaN NaN
Texas     9.0 NaN  12.0 NaN
Utah      NaN NaN   NaN NaN

Since the &#39;c&#39; and &#39;e&#39; columns are not found in both DataFrame objects, they appear
as all missing in the result. The same holds for the rows whose labels are not common
to both objects.

If you add DataFrame objects with no column or row labels in common, the result
will contain all nulls:

In [160]: df1 = pd.DataFrame({&#39;A&#39;: [1, 2]})

In [161]: df2 = pd.DataFrame({&#39;B&#39;: [3, 4]})

In [162]: df1
Out[162]: 
   A
0  1
1  2

In [163]: df2

5.2 Essential Functionality 

| 

147

Out[163]: 
   B
0  3
1  4

In [164]: df1 - df2
Out[164]: 
    A   B
0 NaN NaN
1 NaN NaN

Arithmetic methods with fill values

In arithmetic operations between differently indexed objects, you might want to fill
with a special value, like 0, when an axis label is found in one object but not the other:

In [165]: df1 = pd.DataFrame(np.arange(12.).reshape((3, 4)),
   .....:                    columns=list(&#39;abcd&#39;))

In [166]: df2 = pd.DataFrame(np.arange(20.).reshape((4, 5)),
   .....:                    columns=list(&#39;abcde&#39;))

In [167]: df2.loc[1, &#39;b&#39;] = np.nan

In [168]: df1
Out[168]: 
     a    b     c     d
0  0.0  1.0   2.0   3.0
1  4.0  5.0   6.0   7.0
2  8.0  9.0  10.0  11.0

In [169]: df2
Out[169]: 
      a     b     c     d     e
0   0.0   1.0   2.0   3.0   4.0
1   5.0   NaN   7.0   8.0   9.0
2  10.0  11.0  12.0  13.0  14.0
3  15.0  16.0  17.0  18.0  19.0

Adding these together results in NA values in the locations that dont overlap:

In [170]: df1 + df2
Out[170]: 
      a     b     c     d   e
0   0.0   2.0   4.0   6.0 NaN
1   9.0   NaN  13.0  15.0 NaN
2  18.0  20.0  22.0  24.0 NaN
3   NaN   NaN   NaN   NaN NaN

Using the add method on df1, I pass df2 and an argument to fill_value:

In [171]: df1.add(df2, fill_value=0)
Out[171]: 

148 

| 

Chapter 5: Getting Started with pandas

      a     b     c     d     e
0   0.0   2.0   4.0   6.0   4.0
1   9.0   5.0  13.0  15.0   9.0
2  18.0  20.0  22.0  24.0  14.0
3  15.0  16.0  17.0  18.0  19.0

See Table 5-5 for a listing of Series and DataFrame methods for arithmetic. Each of
them has a counterpart, starting with the letter r, that has arguments flipped. So these
two statements are equivalent:

In [172]: 1 / df1
Out[172]: 
          a         b         c         d
0       inf  1.000000  0.500000  0.333333
1  0.250000  0.200000  0.166667  0.142857
2  0.125000  0.111111  0.100000  0.090909

In [173]: df1.rdiv(1)
Out[173]: 
          a         b         c         d
0       inf  1.000000  0.500000  0.333333
1  0.250000  0.200000  0.166667  0.142857
2  0.125000  0.111111  0.100000  0.090909

Relatedly, when reindexing a Series or DataFrame, you can also specify a different fill
value:

In [174]: df1.reindex(columns=df2.columns, fill_value=0)
Out[174]: 
     a    b     c     d  e
0  0.0  1.0   2.0   3.0  0
1  4.0  5.0   6.0   7.0  0
2  8.0  9.0  10.0  11.0  0

Table 5-5. Flexible arithmetic methods

Method
add, radd

sub, rsub

div, rdiv

Description
Methods for addition (+)
Methods for subtraction (-)
Methods for division (/)

floordiv, rfloordiv Methods for floor division (//)
mul, rmul
Methods for multiplication (*)
Methods for exponentiation (**)

pow, rpow

Operations between DataFrame and Series

As  with  NumPy  arrays  of  different  dimensions,  arithmetic  between  DataFrame  and
Series is also defined. First, as a motivating example, consider the difference between
a two-dimensional array and one of its rows:

5.2 Essential Functionality 

| 

149

In [175]: arr = np.arange(12.).reshape((3, 4))

In [176]: arr
Out[176]: 
array([[  0.,   1.,   2.,   3.],
       [  4.,   5.,   6.,   7.],
       [  8.,   9.,  10.,  11.]])

In [177]: arr[0]
Out[177]: array([ 0.,  1.,  2.,  3.])

In [178]: arr - arr[0]
Out[178]: 
array([[ 0.,  0.,  0.,  0.],
       [ 4.,  4.,  4.,  4.],
       [ 8.,  8.,  8.,  8.]])

When we subtract arr[0] from arr, the subtraction is performed once for each row.
This is referred to as broadcasting and is explained in more detail as it relates to gen
eral NumPy arrays in Appendix A. Operations between a DataFrame and a Series are
similar:

In [179]: frame = pd.DataFrame(np.arange(12.).reshape((4, 3)),
   .....:                      columns=list(&#39;bde&#39;),
   .....:                      index=[&#39;Utah&#39;, &#39;Ohio&#39;, &#39;Texas&#39;, &#39;Oregon&#39;])

In [180]: series = frame.iloc[0]

In [181]: frame
Out[181]: 
          b     d     e
Utah    0.0   1.0   2.0
Ohio    3.0   4.0   5.0
Texas   6.0   7.0   8.0
Oregon  9.0  10.0  11.0

In [182]: series
Out[182]: 
b    0.0
d    1.0
e    2.0
Name: Utah, dtype: float64

By default, arithmetic between DataFrame and Series matches the index of the Series
on the DataFrames columns, broadcasting down the rows:

In [183]: frame - series
Out[183]: 
          b    d    e
Utah    0.0  0.0  0.0
Ohio    3.0  3.0  3.0
Texas   6.0  6.0  6.0
Oregon  9.0  9.0  9.0

150 

| 

Chapter 5: Getting Started with pandas

If an index value is not found in either the DataFrames columns or the Seriess index,
the objects will be reindexed to form the union:

In [184]: series2 = pd.Series(range(3), index=[&#39;b&#39;, &#39;e&#39;, &#39;f&#39;])

In [185]: frame + series2
Out[185]: 
          b   d     e   f
Utah    0.0 NaN   3.0 NaN
Ohio    3.0 NaN   6.0 NaN
Texas   6.0 NaN   9.0 NaN
Oregon  9.0 NaN  12.0 NaN

If you want to instead broadcast over the columns, matching on the rows, you have to
use one of the arithmetic methods. For example:

In [186]: series3 = frame[&#39;d&#39;]

In [187]: frame
Out[187]: 
          b     d     e
Utah    0.0   1.0   2.0
Ohio    3.0   4.0   5.0
Texas   6.0   7.0   8.0
Oregon  9.0  10.0  11.0

In [188]: series3
Out[188]: 
Utah       1.0
Ohio       4.0
Texas      7.0
Oregon    10.0
Name: d, dtype: float64

In [189]: frame.sub(series3, axis=&#39;index&#39;)
Out[189]: 
          b    d    e
Utah   -1.0  0.0  1.0
Ohio   -1.0  0.0  1.0
Texas  -1.0  0.0  1.0
Oregon -1.0  0.0  1.0

The axis number that you pass is the axis to match on. In this case we mean to match
on the DataFrames row index (axis=&#39;index&#39; or axis=0) and broadcast across.

Function Application and Mapping
NumPy ufuncs (element-wise array methods) also work with pandas objects:

In [190]: frame = pd.DataFrame(np.random.randn(4, 3), columns=list(&#39;bde&#39;),
   .....:                      index=[&#39;Utah&#39;, &#39;Ohio&#39;, &#39;Texas&#39;, &#39;Oregon&#39;])

5.2 Essential Functionality 

| 

151

In [191]: frame
Out[191]: 
               b         d         e
Utah   -0.204708  0.478943 -0.519439
Ohio   -0.555730  1.965781  1.393406
Texas   0.092908  0.281746  0.769023
Oregon  1.246435  1.007189 -1.296221

In [192]: np.abs(frame)
Out[192]: 
               b         d         e
Utah    0.204708  0.478943  0.519439
Ohio    0.555730  1.965781  1.393406
Texas   0.092908  0.281746  0.769023
Oregon  1.246435  1.007189  1.296221

Another frequent operation is applying a function on one-dimensional arrays to each
column or row. DataFrames apply method does exactly this:

In [193]: f = lambda x: x.max() - x.min()

In [194]: frame.apply(f)
Out[194]: 
b    1.802165
d    1.684034
e    2.689627
dtype: float64

Here the function f, which computes the difference between the maximum and mini
mum of a Series, is invoked once on each column in frame. The result is a Series hav
ing the columns of frame as its index.

If  you  pass  axis=&#39;columns&#39;  to  apply,  the  function  will  be  invoked  once  per  row
instead:

In [195]: frame.apply(f, axis=&#39;columns&#39;)
Out[195]: 
Utah      0.998382
Ohio      2.521511
Texas     0.676115
Oregon    2.542656
dtype: float64

Many of the most common array statistics (like sum and mean) are DataFrame meth
ods, so using apply is not necessary.

The function passed to apply need not return a scalar value; it can also return a Series
with multiple values:

In [196]: def f(x):
   .....:     return pd.Series([x.min(), x.max()], index=[&#39;min&#39;, &#39;max&#39;])

In [197]: frame.apply(f)

152 

| 

Chapter 5: Getting Started with pandas

Out[197]: 
            b         d         e
min -0.555730  0.281746 -1.296221
max  1.246435  1.965781  1.393406

Element-wise Python functions can be used, too. Suppose you wanted to compute a
formatted string from each floating-point value in frame. You can do this with apply
map:

In [198]: format = lambda x: &#39;%.2f&#39; % x

In [199]: frame.applymap(format)
Out[199]: 
            b     d      e
Utah    -0.20  0.48  -0.52
Ohio    -0.56  1.97   1.39
Texas    0.09  0.28   0.77
Oregon   1.25  1.01  -1.30

The  reason  for  the  name  applymap  is  that  Series  has  a  map  method  for  applying  an
element-wise function:

In [200]: frame[&#39;e&#39;].map(format)
Out[200]: 
Utah      -0.52
Ohio       1.39
Texas      0.77
Oregon    -1.30
Name: e, dtype: object

Sorting and Ranking
Sorting  a  dataset  by  some  criterion  is  another  important  built-in  operation.  To  sort
lexicographically by row or column index, use the sort_index method, which returns
a new, sorted object:

In [201]: obj = pd.Series(range(4), index=[&#39;d&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;])

In [202]: obj.sort_index()
Out[202]: 
a    1
b    2
c    3
d    0
dtype: int64

With a DataFrame, you can sort by index on either axis:

In [203]: frame = pd.DataFrame(np.arange(8).reshape((2, 4)),
   .....:                      index=[&#39;three&#39;, &#39;one&#39;],
   .....:                      columns=[&#39;d&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;])

In [204]: frame.sort_index()

5.2 Essential Functionality 

| 

153

Out[204]: 
       d  a  b  c
one    4  5  6  7
three  0  1  2  3

In [205]: frame.sort_index(axis=1)
Out[205]: 
       a  b  c  d
three  1  2  3  0
one    5  6  7  4

The  data  is  sorted  in  ascending  order  by  default,  but  can  be  sorted  in  descending
order, too:

In [206]: frame.sort_index(axis=1, ascending=False)
Out[206]: 
       d  c  b  a
three  0  3  2  1
one    4  7  6  5

To sort a Series by its values, use its sort_values method:

In [207]: obj = pd.Series([4, 7, -3, 2])

In [208]: obj.sort_values()
Out[208]: 
2   -3
3    2
0    4
1    7
dtype: int64

Any missing values are sorted to the end of the Series by default:

In [209]: obj = pd.Series([4, np.nan, 7, np.nan, -3, 2])

In [210]: obj.sort_values()
Out[210]: 
4   -3.0
5    2.0
0    4.0
2    7.0
1    NaN
3    NaN
dtype: float64

When sorting a DataFrame, you can use the data in one or more columns as the sort
keys. To do so, pass one or more column names to the by option of sort_values:

In [211]: frame = pd.DataFrame({&#39;b&#39;: [4, 7, -3, 2], &#39;a&#39;: [0, 1, 0, 1]})

In [212]: frame
Out[212]: 
   a  b

154 

| 

Chapter 5: Getting Started with pandas

0  0  4
1  1  7
2  0 -3
3  1  2

In [213]: frame.sort_values(by=&#39;b&#39;)
Out[213]: 
   a  b
2  0 -3
3  1  2
0  0  4
1  1  7

To sort by multiple columns, pass a list of names:

In [214]: frame.sort_values(by=[&#39;a&#39;, &#39;b&#39;])
Out[214]: 
   a  b
2  0 -3
0  0  4
3  1  2
1  1  7

Ranking assigns ranks from one through the number of valid data points in an array. 
The  rank  methods  for  Series  and  DataFrame  are  the  place  to  look;  by  default  rank
breaks ties by assigning each group the mean rank:

In [215]: obj = pd.Series([7, -5, 7, 4, 2, 0, 4])

In [216]: obj.rank()
Out[216]: 
0    6.5
1    1.0
2    6.5
3    4.5
4    3.0
5    2.0
6    4.5
dtype: float64

Ranks can also be assigned according to the order in which theyre observed in the
data:

In [217]: obj.rank(method=&#39;first&#39;)
Out[217]: 
0    6.0
1    1.0
2    7.0
3    4.0
4    3.0
5    2.0
6    5.0
dtype: float64

5.2 Essential Functionality 

| 

155

Here, instead of using the average rank 6.5 for the entries 0 and 2, they instead have
been set to 6 and 7 because label 0 precedes label 2 in the data.

You can rank in descending order, too:

# Assign tie values the maximum rank in the group
In [218]: obj.rank(ascending=False, method=&#39;max&#39;)
Out[218]: 
0    2.0
1    7.0
2    2.0
3    4.0
4    5.0
5    6.0
6    4.0
dtype: float64

See Table 5-6 for a list of tie-breaking methods available.

DataFrame can compute ranks over the rows or the columns:

In [219]: frame = pd.DataFrame({&#39;b&#39;: [4.3, 7, -3, 2], &#39;a&#39;: [0, 1, 0, 1],
   .....:                       &#39;c&#39;: [-2, 5, 8, -2.5]})

In [220]: frame
Out[220]: 
   a    b    c
0  0  4.3 -2.0
1  1  7.0  5.0
2  0 -3.0  8.0
3  1  2.0 -2.5

In [221]: frame.rank(axis=&#39;columns&#39;)
Out[221]: 
     a    b    c
0  2.0  3.0  1.0
1  1.0  3.0  2.0
2  2.0  1.0  3.0
3  2.0  3.0  1.0

Table 5-6. Tie-breaking methods with rank

Description

Method
&#39;average&#39; Default: assign the average rank to each entry in the equal group
&#39;min&#39;

&#39;max&#39;

&#39;first&#39;

&#39;dense&#39;

Use the minimum rank for the whole group
Use the maximum rank for the whole group
Assign ranks in the order the values appear in the data
Like method=&#39;min&#39;, but ranks always increase by 1 in between groups rather than the number of equal
elements in a group

156 

| 

Chapter 5: Getting Started with pandas

Axis Indexes with Duplicate Labels
Up until now all of the examples weve looked at have had unique axis labels (index
values).  While  many  pandas  functions  (like  reindex)  require  that  the  labels  be
unique, its not mandatory. Lets consider a small Series with duplicate indices:

In [222]: obj = pd.Series(range(5), index=[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;])

In [223]: obj
Out[223]: 
a    0
a    1
b    2
b    3
c    4
dtype: int64

The indexs is_unique property can tell you whether its labels are unique or not:

In [224]: obj.index.is_unique
Out[224]: False

Data  selection  is  one  of  the  main  things  that  behaves  differently  with  duplicates.
Indexing  a  label  with  multiple  entries  returns  a  Series,  while  single  entries  return  a
scalar value:

In [225]: obj[&#39;a&#39;]
Out[225]: 
a    0
a    1
dtype: int64

In [226]: obj[&#39;c&#39;]
Out[226]: 4

This  can  make  your  code  more  complicated,  as  the  output  type  from  indexing  can
vary based on whether a label is repeated or not.

The same logic extends to indexing rows in a DataFrame:

In [227]: df = pd.DataFrame(np.random.randn(4, 3), index=[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;])

In [228]: df
Out[228]: 
          0         1         2
a  0.274992  0.228913  1.352917
a  0.886429 -2.001637 -0.371843
b  1.669025 -0.438570 -0.539741
b  0.476985  3.248944 -1.021228

In [229]: df.loc[&#39;b&#39;]
Out[229]: 
          0         1         2

5.2 Essential Functionality 

| 

157

b  1.669025 -0.438570 -0.539741
b  0.476985  3.248944 -1.021228

5.3 Summarizing and Computing Descriptive Statistics
pandas objects are equipped with a set of common mathematical and statistical meth
ods. Most of these fall into the category of reductions or summary statistics, methods
that extract a single value (like the sum or mean) from a Series or a Series of values
from  the  rows  or  columns  of  a  DataFrame.  Compared  with  the  similar  methods
found  on  NumPy  arrays,  they  have  built-in  handling  for  missing  data.  Consider  a
small DataFrame:

In [230]: df = pd.DataFrame([[1.4, np.nan], [7.1, -4.5],
   .....:                    [np.nan, np.nan], [0.75, -1.3]],
   .....:                   index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;],
   .....:                   columns=[&#39;one&#39;, &#39;two&#39;])

In [231]: df
Out[231]: 
    one  two
a  1.40  NaN
b  7.10 -4.5
c   NaN  NaN
d  0.75 -1.3

Calling DataFrames sum method returns a Series containing column sums:

In [232]: df.sum()
Out[232]: 
one    9.25
two   -5.80
dtype: float64

Passing axis=&#39;columns&#39; or axis=1 sums across the columns instead:

In [233]: df.sum(axis=&#39;columns&#39;)
Out[233]: 
a    1.40
b    2.60
c     NaN
d   -0.55
dtype: float64

NA  values  are  excluded  unless  the  entire  slice  (row  or  column  in  this  case)  is  NA.
This can be disabled with the skipna option:

In [234]: df.mean(axis=&#39;columns&#39;, skipna=False)
Out[234]: 
a      NaN
b    1.300
c      NaN

158 

| 

Chapter 5: Getting Started with pandas

d   -0.275
dtype: float64

See Table 5-7 for a list of common options for each reduction method.

Table 5-7. Options for reduction methods

Description
Axis to reduce over; 0 for DataFrames rows and 1 for columns

Method
axis
skipna Exclude missing values; True by default
level

Reduce grouped by level if the axis is hierarchically indexed (MultiIndex)

Some methods, like idxmin and idxmax, return indirect statistics like the index value
where the minimum or maximum values are attained:

In [235]: df.idxmax()
Out[235]: 
one    b
two    d
dtype: object

Other methods are accumulations:

In [236]: df.cumsum()
Out[236]: 
    one  two
a  1.40  NaN
b  8.50 -4.5
c   NaN  NaN
d  9.25 -5.8

Another type of method is neither a reduction nor an accumulation. describe is one
such example, producing multiple summary statistics in one shot:

In [237]: df.describe()
Out[237]: 
            one       two
count  3.000000  2.000000
mean   3.083333 -2.900000
std    3.493685  2.262742
min    0.750000 -4.500000
25%    1.075000 -3.700000
50%    1.400000 -2.900000
75%    4.250000 -2.100000
max    7.100000 -1.300000

On non-numeric data, describe produces alternative summary statistics:

In [238]: obj = pd.Series([&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;] * 4)

In [239]: obj.describe()
Out[239]: 
count     16

5.3 Summarizing and Computing Descriptive Statistics 

| 

159

unique     3
top        a
freq       8
dtype: object

See Table 5-8 for a full list of summary statistics and related methods.

Table 5-8. Descriptive and summary statistics

Method
count

describe

min, max

Description
Number of non-NA values
Compute set of summary statistics for Series or each DataFrame column
Compute minimum and maximum values

argmin, argmax Compute index locations (integers) at which minimum or maximum value obtained, respectively
idxmin, idxmax Compute index labels at which minimum or maximum value obtained, respectively
quantile

sum

mean

median

mad

prod

var

std

skew

kurt

cumsum

Compute sample quantile ranging from 0 to 1
Sum of values
Mean of values
Arithmetic median (50% quantile) of values
Mean absolute deviation from mean value
Product of all values
Sample variance of values
Sample standard deviation of values
Sample skewness (third moment) of values
Sample kurtosis (fourth moment) of values
Cumulative sum of values

cummin, cummax Cumulative minimum or maximum of values, respectively
cumprod

Cumulative product of values
Compute first arithmetic difference (useful for time series)
Compute percent changes

diff

pct_change

Correlation and Covariance
Some summary statistics, like correlation and covariance, are computed from pairs of
arguments.  Lets  consider  some  DataFrames  of  stock  prices  and  volumes  obtained
from  Yahoo!  Finance  using  the  add-on  pandas-datareader  package.  If  you  dont
have it installed already, it can be obtained via conda or pip:

conda install pandas-datareader

I use the pandas_datareader module to download some data for a few stock tickers:

import pandas_datareader.data as web
all_data = {ticker: web.get_data_yahoo(ticker)
            for ticker in [&#39;AAPL&#39;, &#39;IBM&#39;, &#39;MSFT&#39;, &#39;GOOG&#39;]}

160 

| 

Chapter 5: Getting Started with pandas

price = pd.DataFrame({ticker: data[&#39;Adj Close&#39;]
                     for ticker, data in all_data.items()})
volume = pd.DataFrame({ticker: data[&#39;Volume&#39;]
                      for ticker, data in all_data.items()})

Its possible by the time you are reading this that Yahoo! Finance no
longer exists since Yahoo! was acquired by Verizon in 2017. Refer
to  the  pandas-datareader  documentation  online  for  the  latest
functionality.

I  now  compute  percent  changes  of  the  prices,  a  time  series  operation  which  will  be
explored further in Chapter 11:

In [242]: returns = price.pct_change()

In [243]: returns.tail()
Out[243]: 
                AAPL      GOOG       IBM      MSFT
Date                                              
2016-10-17 -0.000680  0.001837  0.002072 -0.003483
2016-10-18 -0.000681  0.019616 -0.026168  0.007690
2016-10-19 -0.002979  0.007846  0.003583 -0.002255
2016-10-20 -0.000512 -0.005652  0.001719 -0.004867
2016-10-21 -0.003930  0.003011 -0.012474  0.042096

The  corr  method  of  Series  computes  the  correlation  of  the  overlapping,  non-NA,
aligned-by-index values in two Series. Relatedly, cov computes the covariance:

In [244]: returns[&#39;MSFT&#39;].corr(returns[&#39;IBM&#39;])
Out[244]: 0.49976361144151144

In [245]: returns[&#39;MSFT&#39;].cov(returns[&#39;IBM&#39;])
Out[245]: 8.8706554797035462e-05

Since  MSFT is a valid Python attribute, we can also select these columns using more
concise syntax:

In [246]: returns.MSFT.corr(returns.IBM)
Out[246]: 0.49976361144151144

DataFrames  corr  and  cov  methods,  on  the  other  hand,  return  a  full  correlation  or
covariance matrix as a DataFrame, respectively:

In [247]: returns.corr()
Out[247]: 
          AAPL      GOOG       IBM      MSFT
AAPL  1.000000  0.407919  0.386817  0.389695
GOOG  0.407919  1.000000  0.405099  0.465919
IBM   0.386817  0.405099  1.000000  0.499764
MSFT  0.389695  0.465919  0.499764  1.000000

5.3 Summarizing and Computing Descriptive Statistics 

| 

161

In [248]: returns.cov()
Out[248]: 
          AAPL      GOOG       IBM      MSFT
AAPL  0.000277  0.000107  0.000078  0.000095
GOOG  0.000107  0.000251  0.000078  0.000108
IBM   0.000078  0.000078  0.000146  0.000089
MSFT  0.000095  0.000108  0.000089  0.000215

Using  DataFrames  corrwith  method,  you  can  compute  pairwise  correlations
between a DataFrames columns or rows with another Series or DataFrame. Passing a
Series returns a Series with the correlation value computed for each column:

In [249]: returns.corrwith(returns.IBM)
Out[249]: 
AAPL    0.386817
GOOG    0.405099
IBM     1.000000
MSFT    0.499764
dtype: float64

Passing  a  DataFrame  computes  the  correlations  of  matching  column  names.  Here  I
compute correlations of percent changes with volume:

In [250]: returns.corrwith(volume)
Out[250]: 
AAPL   -0.075565
GOOG   -0.007067
IBM    -0.204849
MSFT   -0.092950
dtype: float64

Passing axis=&#39;columns&#39; does things row-by-row instead. In all cases, the data points
are aligned by label before the correlation is computed.

Unique Values, Value Counts, and Membership
Another class of related methods extracts information about the values contained in a
one-dimensional Series. To illustrate these, consider this example:

In [251]: obj = pd.Series([&#39;c&#39;, &#39;a&#39;, &#39;d&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;, &#39;c&#39;])

The first function is unique, which gives you an array of the unique values in a Series:

In [252]: uniques = obj.unique()

In [253]: uniques
Out[253]: array([&#39;c&#39;, &#39;a&#39;, &#39;d&#39;, &#39;b&#39;], dtype=object)

The  unique  values  are  not  necessarily  returned  in  sorted  order,  but  could  be  sorted
after the fact if needed (uniques.sort()). Relatedly, value_counts computes a Series
containing value frequencies:

162 

| 

Chapter 5: Getting Started with pandas

In [254]: obj.value_counts()
Out[254]: 
c    3
a    3
b    2
d    1
dtype: int64

The Series is sorted by value in descending order as a convenience. value_counts is
also  available  as  a  top-level  pandas  method  that  can  be  used  with  any  array  or
sequence:

In [255]: pd.value_counts(obj.values, sort=False)
Out[255]: 
a    3
b    2
c    3
d    1
dtype: int64

isin  performs  a  vectorized  set  membership  check  and  can  be  useful  in  filtering  a
dataset down to a subset of values in a Series or column in a DataFrame:

In [256]: obj
Out[256]: 
0    c
1    a
2    d
3    a
4    a
5    b
6    b
7    c
8    c
dtype: object

In [257]: mask = obj.isin([&#39;b&#39;, &#39;c&#39;])

In [258]: mask
Out[258]: 
0     True
1    False
2    False
3    False
4    False
5     True
6     True
7     True
8     True
dtype: bool

In [259]: obj[mask]
Out[259]: 

5.3 Summarizing and Computing Descriptive Statistics 

| 

163

0    c
5    b
6    b
7    c
8    c
dtype: object

Related  to  isin  is  the  Index.get_indexer  method,  which  gives  you  an  index  array
from an array of possibly non-distinct values into another array of distinct values:

In [260]: to_match = pd.Series([&#39;c&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;, &#39;a&#39;])

In [261]: unique_vals = pd.Series([&#39;c&#39;, &#39;b&#39;, &#39;a&#39;])

In [262]: pd.Index(unique_vals).get_indexer(to_match)
Out[262]: array([0, 2, 1, 1, 0, 2])

See Table 5-9 for a reference on these methods.

Table 5-9. Unique, value counts, and set membership methods

Method
isin

match

unique

Description
Compute boolean array indicating whether each Series value is contained in the passed sequence of
values
Compute integer indices for each value in an array into another array of distinct values; helpful for data
alignment and join-type operations
Compute array of unique values in a Series, returned in the order observed

value_counts Return a Series containing unique values as its index and frequencies as its values, ordered count in

descending order

In some cases, you may want to compute a histogram on multiple related columns in
a DataFrame. Heres an example:

In [263]: data = pd.DataFrame({&#39;Qu1&#39;: [1, 3, 4, 3, 4],
   .....:                      &#39;Qu2&#39;: [2, 3, 1, 2, 3],
   .....:                      &#39;Qu3&#39;: [1, 5, 2, 4, 4]})

In [264]: data
Out[264]: 
   Qu1  Qu2  Qu3
0    1    2    1
1    3    3    5
2    4    1    2
3    3    2    4
4    4    3    4

Passing pandas.value_counts to this DataFrames apply function gives:

In [265]: result = data.apply(pd.value_counts).fillna(0)

In [266]: result
Out[266]: 

164 

| 

Chapter 5: Getting Started with pandas

   Qu1  Qu2  Qu3
1  1.0  1.0  1.0
2  0.0  2.0  1.0
3  2.0  2.0  0.0
4  2.0  0.0  2.0
5  0.0  0.0  1.0

Here,  the  row  labels  in  the  result  are  the  distinct  values  occurring  in  all  of  the  col
umns. The values are the respective counts of these values in each column.

5.4 Conclusion
In  the  next  chapter,  well  discuss  tools  for  reading  (or  loading)  and  writing  datasets
with pandas. After that, well dig deeper into data cleaning, wrangling, analysis, and
visualization tools using pandas.

5.4 Conclusion 

| 

165

CHAPTER 6
Data Loading, Storage, and File Formats

Accessing  data  is  a  necessary  first  step  for  using  most  of  the  tools  in  this  book.  Im
going to be focused on data input and output using pandas, though there are numer
ous tools in other libraries to help with reading and writing data in various formats.

Input and output typically falls into a few main categories: reading text files and other
more efficient on-disk formats, loading data from databases, and interacting with net
work sources like web APIs.

6.1 Reading and Writing Data in Text Format
pandas  features  a  number  of  functions  for  reading  tabular  data  as  a  DataFrame
object.  Table  6-1  summarizes  some  of  them,  though  read_csv  and  read_table  are
likely the ones youll use the most.

Table 6-1. Parsing functions in pandas

Function
read_csv

read_table

Description
Load delimited data from a file, URL, or file-like object; use comma as default delimiter
Load delimited data from a file, URL, or file-like object; use tab (&#39;\t&#39;) as default delimiter
Read data in fixed-width column format (i.e., no delimiters)

read_fwf
read_clipboard Version of read_table that reads data from the clipboard; useful for converting tables from web

read_excel

read_hdf

read_html

read_json

read_msgpack

read_pickle

pages
Read tabular data from an Excel XLS or XLSX file
Read HDF5 files written by pandas
Read all tables found in the given HTML document
Read data from a JSON (JavaScript Object Notation) string representation
Read pandas data encoded using the MessagePack binary format
Read an arbitrary object stored in Python pickle format

167

Function
read_sas

read_sql

read_stata

read_feather

Description
Read a SAS dataset stored in one of the SAS systems custom storage formats
Read the results of a SQL query (using SQLAlchemy) as a pandas DataFrame
Read a dataset from Stata file format
Read the Feather binary file format

Ill give an overview of the mechanics of these functions, which are meant to convert
text data into a DataFrame. The optional arguments for these functions may fall into
a few categories:

Indexing

Can treat one or more columns as the returned DataFrame, and whether to get
column names from the file, the user, or not at all.

Type inference and data conversion

This includes the user-defined value conversions and custom list of missing value
markers.

Datetime parsing

Includes  combining  capability,  including  combining  date  and  time  information
spread over multiple columns into a single column in the result.

Iterating

Support for iterating over chunks of very large files.

Unclean data issues

Skipping  rows  or  a  footer,  comments,  or  other  minor  things  like  numeric  data
with thousands separated by commas.

Because of how messy data in the real world can be, some of the data loading func
tions (especially read_csv) have grown very complex in their options over time. Its
normal  to  feel  overwhelmed  by  the  number  of  different  parameters  (read_csv  has
over  50  as  of  this  writing).  The  online  pandas  documentation  has  many  examples
about how each of them works, so if youre struggling to read a particular file, there
might be a similar enough example to help you find the right parameters.

Some  of  these  functions,  like  pandas.read_csv,  perform  type  inference,  because  the
column data types are not part of the data format. That means you dont necessarily
have  to  specify  which  columns  are  numeric,  integer,  boolean,  or  string.  Other  data
formats, like HDF5, Feather, and msgpack, have the data types stored in the format.

Handling  dates  and  other  custom  types  can  require  extra  effort.  Lets  start  with  a
small comma-separated (CSV) text file:

In [8]: !cat examples/ex1.csv
a,b,c,d,message
1,2,3,4,hello

168 

| 

Chapter 6: Data Loading, Storage, and File Formats

5,6,7,8,world
9,10,11,12,foo

Here I used the Unix cat shell command to print the raw contents
of  the  file  to  the  screen.  If  youre  on  Windows,  you  can  use  type
instead of cat to achieve the same effect.

Since this is comma-delimited, we can use read_csv to read it into a DataFrame:

In [9]: df = pd.read_csv(&#39;examples/ex1.csv&#39;)

In [10]: df
Out[10]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

We could also have used read_table and specified the delimiter:

In [11]: pd.read_table(&#39;examples/ex1.csv&#39;, sep=&#39;,&#39;)
Out[11]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

A file will not always have a header row. Consider this file:

In [12]: !cat examples/ex2.csv
1,2,3,4,hello
5,6,7,8,world
9,10,11,12,foo

To read this file, you have a couple of options. You can allow pandas to assign default
column names, or you can specify names yourself:

In [13]: pd.read_csv(&#39;examples/ex2.csv&#39;, header=None)
Out[13]: 
   0   1   2   3      4
0  1   2   3   4  hello
1  5   6   7   8  world
2  9  10  11  12    foo

In [14]: pd.read_csv(&#39;examples/ex2.csv&#39;, names=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;message&#39;])
Out[14]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

6.1 Reading and Writing Data in Text Format 

| 

169

Suppose you wanted the message column to be the index of the returned DataFrame.
You can either indicate you want the column at index 4 or named &#39;message&#39; using
the index_col argument:

In [15]: names = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;message&#39;]

In [16]: pd.read_csv(&#39;examples/ex2.csv&#39;, names=names, index_col=&#39;message&#39;)
Out[16]: 
         a   b   c   d
message               
hello    1   2   3   4
world    5   6   7   8
foo      9  10  11  12

In the event that you want to form a hierarchical index from multiple columns, pass a
list of column numbers or names:

In [17]: !cat examples/csv_mindex.csv
key1,key2,value1,value2
one,a,1,2
one,b,3,4
one,c,5,6
one,d,7,8
two,a,9,10
two,b,11,12
two,c,13,14
two,d,15,16

In [18]: parsed = pd.read_csv(&#39;examples/csv_mindex.csv&#39;,
   ....:                      index_col=[&#39;key1&#39;, &#39;key2&#39;])

In [19]: parsed
Out[19]: 
           value1  value2
key1 key2                
one  a          1       2
     b          3       4
     c          5       6
     d          7       8
two  a          9      10
     b         11      12
     c         13      14
     d         15      16

In  some  cases,  a  table  might  not  have  a  fixed  delimiter,  using  whitespace  or  some
other pattern to separate fields. Consider a text file that looks like this:

In [20]: list(open(&#39;examples/ex3.txt&#39;))
Out[20]: 
[&#39;            A         B         C\n&#39;,
 &#39;aaa -0.264438 -1.026059 -0.619500\n&#39;,
 &#39;bbb  0.927272  0.302904 -0.032399\n&#39;,

170 

| 

Chapter 6: Data Loading, Storage, and File Formats

 &#39;ccc -0.264273 -0.386314 -0.217601\n&#39;,
 &#39;ddd -0.871858 -0.348382  1.100491\n&#39;]

While you could do some munging by hand, the fields here are separated by a vari
able  amount  of  whitespace.  In  these  cases,  you  can  pass  a  regular  expression  as  a
delimiter for read_table. This can be expressed by the regular expression \s+, so we
have then:

In [21]: result = pd.read_table(&#39;examples/ex3.txt&#39;, sep=&#39;\s+&#39;)

In [22]: result
Out[22]: 
            A         B         C
aaa -0.264438 -1.026059 -0.619500
bbb  0.927272  0.302904 -0.032399
ccc -0.264273 -0.386314 -0.217601
ddd -0.871858 -0.348382  1.100491

Because  there  was  one  fewer  column  name  than  the  number  of  data  rows,
read_table infers that the first column should be the DataFrames index in this spe
cial case.

The  parser  functions  have  many  additional  arguments  to  help  you  handle  the  wide
variety  of  exception  file  formats  that  occur  (see  a  partial  listing  in  Table  6-2).  For
example, you can skip the first, third, and fourth rows of a file with skiprows:

In [23]: !cat examples/ex4.csv
# hey!
a,b,c,d,message
# just wanted to make things more difficult for you
# who reads CSV files with computers, anyway?
1,2,3,4,hello
5,6,7,8,world
9,10,11,12,foo
In [24]: pd.read_csv(&#39;examples/ex4.csv&#39;, skiprows=[0, 2, 3])
Out[24]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

Handling missing values is an important and frequently nuanced part of the file pars
ing  process.  Missing  data  is  usually  either  not  present  (empty  string)  or  marked  by
some  sentinel  value.  By  default,  pandas  uses  a  set  of  commonly  occurring  sentinels,
such as NA and NULL:

In [25]: !cat examples/ex5.csv
something,a,b,c,d,message
one,1,2,3,4,NA
two,5,6,,8,world
three,9,10,11,12,foo
In [26]: result = pd.read_csv(&#39;examples/ex5.csv&#39;)

6.1 Reading and Writing Data in Text Format 

| 

171

In [27]: result
Out[27]: 
  something  a   b     c   d message
0       one  1   2   3.0   4     NaN
1       two  5   6   NaN   8   world
2     three  9  10  11.0  12     foo

In [28]: pd.isnull(result)
Out[28]: 
   something      a      b      c      d  message
0      False  False  False  False  False     True
1      False  False  False   True  False    False
2      False  False  False  False  False    False

The  na_values  option  can  take  either  a  list  or  set  of  strings  to  consider  missing
values:

In [29]: result = pd.read_csv(&#39;examples/ex5.csv&#39;, na_values=[&#39;NULL&#39;])

In [30]: result
Out[30]: 
  something  a   b     c   d message
0       one  1   2   3.0   4     NaN
1       two  5   6   NaN   8   world
2     three  9  10  11.0  12     foo

Different NA sentinels can be specified for each column in a dict:

In [31]: sentinels = {&#39;message&#39;: [&#39;foo&#39;, &#39;NA&#39;], &#39;something&#39;: [&#39;two&#39;]}

In [32]: pd.read_csv(&#39;examples/ex5.csv&#39;, na_values=sentinels)
Out[32]: 
  something  a   b     c   d message
0       one  1   2   3.0   4     NaN
1       NaN  5   6   NaN   8   world
2     three  9  10  11.0  12     NaN

Table  6-2  lists  some  frequently  used  options  in  pandas.read_csv  and  pan
das.read_table.

Table 6-2. Some read_csv/read_table function arguments

Description
String indicating filesystem location, URL, or file-like object

Argument
path
sep or delimiter Character sequence or regular expression to use to split fields in each row
header

Row number to use as column names; defaults to 0 (first row), but should be None if there is no
header row
Column numbers or names to use as the row index in the result; can be a single name/number or a
list of them for a hierarchical index
List of column names for result, combine with header=None

index_col

names

172 

| 

Chapter 6: Data Loading, Storage, and File Formats

Argument
skiprows

na_values

comment

parse_dates

keep_date_col

converters

dayfirst

date_parser

nrows

iterator

chunksize

skip_footer

verbose

encoding

squeeze

thousands

Description
Number of rows at beginning of file to ignore or list of row numbers (starting from 0) to skip.
Sequence of values to replace with NA.
Character(s) to split comments off the end of lines.
Attempt to parse data to datetime; False by default. If True, will attempt to parse all columns.
Otherwise can specify a list of column numbers or name to parse. If element of list is tuple or list, will
combine multiple columns together and parse to date (e.g., if date/time split across two columns).
If joining columns to parse date, keep the joined columns; False by default.
Dict containing column number of name mapping to functions (e.g., {&#39;foo&#39;: f} would apply the
function f to all values in the &#39;foo&#39; column).
When parsing potentially ambiguous dates, treat as international format (e.g., 7/6/2012 -&gt; June 7,
2012); False by default.
Function to use to parse dates.
Number of rows to read from beginning of file.
Return a TextParser object for reading file piecemeal.
For iteration, size of file chunks.
Number of lines to ignore at end of file.
Print various parser output information, like the number of missing values placed in non-numeric
columns.
Text encoding for Unicode (e.g., &#39;utf-8&#39; for UTF-8 encoded text).
If the parsed data only contains one column, return a Series.
Separator for thousands (e.g., &#39;,&#39; or &#39;.&#39;).

Reading Text Files in Pieces
When  processing  very  large  files  or  figuring  out  the  right  set  of  arguments  to  cor
rectly process a large file, you may only want to read in a small piece of a file or iterate
through smaller chunks of the file.

Before we look at a large file, we make the pandas display settings more compact:

In [33]: pd.options.display.max_rows = 10

Now we have:

In [34]: result = pd.read_csv(&#39;examples/ex6.csv&#39;)

In [35]: result
Out[35]: 
           one       two     three      four key
0     0.467976 -0.038649 -0.295344 -1.824726   L
1    -0.358893  1.404453  0.704965 -0.200638   B
2    -0.501840  0.659254 -0.421691 -0.057688   G
3     0.204886  1.074134  1.388361 -0.982404   R
4     0.354628 -0.133116  0.283763 -0.837063   Q
...        ...       ...       ...       ...  ..
9995  2.311896 -0.417070 -1.409599 -0.515821   L

6.1 Reading and Writing Data in Text Format 

| 

173

9996 -0.479893 -0.650419  0.745152 -0.646038   E
9997  0.523331  0.787112  0.486066  1.093156   K
9998 -0.362559  0.598894 -1.843201  0.887292   G
9999 -0.096376 -1.012999 -0.657431 -0.573315   0
[10000 rows x 5 columns]

If  you  want  to  only  read  a  small  number  of  rows  (avoiding  reading  the  entire  file),
specify that with nrows:

In [36]: pd.read_csv(&#39;examples/ex6.csv&#39;, nrows=5)
Out[36]: 
        one       two     three      four key
0  0.467976 -0.038649 -0.295344 -1.824726   L
1 -0.358893  1.404453  0.704965 -0.200638   B
2 -0.501840  0.659254 -0.421691 -0.057688   G
3  0.204886  1.074134  1.388361 -0.982404   R
4  0.354628 -0.133116  0.283763 -0.837063   Q

To read a file in pieces, specify a chunksize as a number of rows:

In [37]: chunker = pd.read_csv(&#39;examples/ex6.csv&#39;, chunksize=1000)

In [38]: chunker
Out[38]: &lt;pandas.io.parsers.TextFileReader at 0x7f6b1e2672e8&gt;

The TextParser object returned by read_csv allows you to iterate over the parts of
the file according to the chunksize. For example, we can iterate over ex6.csv, aggre
gating the value counts in the &#39;key&#39; column like so:

chunker = pd.read_csv(&#39;examples/ex6.csv&#39;, chunksize=1000)

tot = pd.Series([])
for piece in chunker:
    tot = tot.add(piece[&#39;key&#39;].value_counts(), fill_value=0)

tot = tot.sort_values(ascending=False)

We have then:

In [40]: tot[:10]
Out[40]: 
E    368.0
X    364.0
L    346.0
O    343.0
Q    340.0
M    338.0
J    337.0
F    335.0
K    334.0
H    330.0
dtype: float64

174 

| 

Chapter 6: Data Loading, Storage, and File Formats

TextParser  is  also  equipped  with  a  get_chunk  method  that  enables  you  to  read
pieces of an arbitrary size.

Writing Data to Text Format
Data can also be exported to a delimited format. Lets consider one of the CSV files
read before:

In [41]: data = pd.read_csv(&#39;examples/ex5.csv&#39;)

In [42]: data
Out[42]: 
  something  a   b     c   d message
0       one  1   2   3.0   4     NaN
1       two  5   6   NaN   8   world
2     three  9  10  11.0  12     foo

Using DataFrames to_csv method, we can write the data out to a comma-separated
file:

In [43]: data.to_csv(&#39;examples/out.csv&#39;)

In [44]: !cat examples/out.csv
,something,a,b,c,d,message
0,one,1,2,3.0,4,
1,two,5,6,,8,world
2,three,9,10,11.0,12,foo

Other  delimiters  can  be  used,  of  course  (writing  to  sys.stdout  so  it  prints  the  text
result to the console):

In [45]: import sys

In [46]: data.to_csv(sys.stdout, sep=&#39;|&#39;)
|something|a|b|c|d|message
0|one|1|2|3.0|4|
1|two|5|6||8|world
2|three|9|10|11.0|12|foo

Missing values appear as empty strings in the output. You might want to denote them
by some other sentinel value:

In [47]: data.to_csv(sys.stdout, na_rep=&#39;NULL&#39;)
,something,a,b,c,d,message
0,one,1,2,3.0,4,NULL
1,two,5,6,NULL,8,world
2,three,9,10,11.0,12,foo

With no other options specified, both the row and column labels are written. Both of
these can be disabled:

6.1 Reading and Writing Data in Text Format 

| 

175

In [48]: data.to_csv(sys.stdout, index=False, header=False)
one,1,2,3.0,4,
two,5,6,,8,world
three,9,10,11.0,12,foo

You can also write only a subset of the columns, and in an order of your choosing:

In [49]: data.to_csv(sys.stdout, index=False, columns=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;])
a,b,c
1,2,3.0
5,6,
9,10,11.0

Series also has a to_csv method:

In [50]: dates = pd.date_range(&#39;1/1/2000&#39;, periods=7)

In [51]: ts = pd.Series(np.arange(7), index=dates)

In [52]: ts.to_csv(&#39;examples/tseries.csv&#39;)

In [53]: !cat examples/tseries.csv
2000-01-01,0
2000-01-02,1
2000-01-03,2
2000-01-04,3
2000-01-05,4
2000-01-06,5
2000-01-07,6

Working with Delimited Formats
Its  possible  to  load  most  forms  of  tabular  data  from  disk  using  functions  like  pan
das.read_table. In some cases, however, some manual processing may be necessary.
Its  not  uncommon  to  receive  a  file  with  one  or  more  malformed  lines  that  trip  up
read_table. To illustrate the basic tools, consider a small CSV file:

In [54]: !cat examples/ex7.csv
&#34;a&#34;,&#34;b&#34;,&#34;c&#34;
&#34;1&#34;,&#34;2&#34;,&#34;3&#34;
&#34;1&#34;,&#34;2&#34;,&#34;3&#34;

For any file with a single-character delimiter, you can use Pythons built-in csv mod
ule. To use it, pass any open file or file-like object to csv.reader:

import csv
f = open(&#39;examples/ex7.csv&#39;)

reader = csv.reader(f)

Iterating through the reader like a file yields tuples of values with any quote charac
ters removed:

176 

| 

Chapter 6: Data Loading, Storage, and File Formats

In [56]: for line in reader:
   ....:     print(line)
[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]
[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]
[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;]

From there, its up to you to do the wrangling necessary to put the data in the form
that you need it. Lets take this step by step. First, we read the file into a list of lines:

In [57]: with open(&#39;examples/ex7.csv&#39;) as f:
   ....:     lines = list(csv.reader(f))

Then, we split the lines into the header line and the data lines:

In [58]: header, values = lines[0], lines[1:]

Then we can create a dictionary of data columns using a dictionary comprehension
and the expression zip(*values), which transposes rows to columns:

In [59]: data_dict = {h: v for h, v in zip(header, zip(*values))}

In [60]: data_dict
Out[60]: {&#39;a&#39;: (&#39;1&#39;, &#39;1&#39;), &#39;b&#39;: (&#39;2&#39;, &#39;2&#39;), &#39;c&#39;: (&#39;3&#39;, &#39;3&#39;)}

CSV  files  come  in  many  different  flavors.  To  define  a  new  format  with  a  different
delimiter, string quoting convention, or line terminator, we define a simple subclass
of csv.Dialect:

class my_dialect(csv.Dialect):
    lineterminator = &#39;\n&#39;
    delimiter = &#39;;&#39;
    quotechar = &#39;&#34;&#39;
    quoting = csv.QUOTE_MINIMAL

reader = csv.reader(f, dialect=my_dialect)

We  can  also  give  individual  CSV  dialect  parameters  as  keywords  to  csv.reader
without having to define a subclass:

reader = csv.reader(f, delimiter=&#39;|&#39;)

The possible options (attributes of csv.Dialect) and what they do can be found in
Table 6-3.

Table 6-3. CSV dialect options

Argument
delimiter

lineterminator

quotechar

Description
One-character string to separate fields; defaults to &#39;,&#39;.
Line terminator for writing; defaults to &#39;\r\n&#39;. Reader ignores this and recognizes cross-platform
line terminators.
Quote character for fields with special characters (like a delimiter); default is &#39;&#34;&#39;.

6.1 Reading and Writing Data in Text Format 

| 

177

Argument
quoting

Description
Quoting convention. Options include csv.QUOTE_ALL (quote all fields), csv.QUOTE_MINI
MAL (only fields with special characters like the delimiter), csv.QUOTE_NONNUMERIC, and
csv.QUOTE_NONE (no quoting). See Pythons documentation for full details. Defaults to
QUOTE_MINIMAL.

skipinitialspace Ignore whitespace after each delimiter; default is False.
doublequote

How to handle quoting character inside a field; if True, it is doubled (see online documentation
for full detail and behavior).
String to escape the delimiter if quoting is set to csv.QUOTE_NONE; disabled by default.

escapechar

For files with more complicated or fixed multicharacter delimiters,
you  will  not  be  able  to  use  the  csv  module.  In  those  cases,  youll
have to do the line splitting and other cleanup using strings split
method or the regular expression method re.split.

To write delimited files manually, you can use csv.writer. It accepts an open, writa
ble file object and the same dialect and format options as csv.reader:

with open(&#39;mydata.csv&#39;, &#39;w&#39;) as f:
    writer = csv.writer(f, dialect=my_dialect)
    writer.writerow((&#39;one&#39;, &#39;two&#39;, &#39;three&#39;))
    writer.writerow((&#39;1&#39;, &#39;2&#39;, &#39;3&#39;))
    writer.writerow((&#39;4&#39;, &#39;5&#39;, &#39;6&#39;))
    writer.writerow((&#39;7&#39;, &#39;8&#39;, &#39;9&#39;))

JSON Data
JSON (short for JavaScript Object Notation) has become one of the standard formats
for sending data by HTTP request between web browsers and other applications. It is
a  much  more  free-form  data  format  than  a  tabular  text  form  like  CSV.  Here  is  an
example:

obj = &#34;&#34;&#34;
{&#34;name&#34;: &#34;Wes&#34;,
 &#34;places_lived&#34;: [&#34;United States&#34;, &#34;Spain&#34;, &#34;Germany&#34;],
 &#34;pet&#34;: null,
 &#34;siblings&#34;: [{&#34;name&#34;: &#34;Scott&#34;, &#34;age&#34;: 30, &#34;pets&#34;: [&#34;Zeus&#34;, &#34;Zuko&#34;]},
              {&#34;name&#34;: &#34;Katie&#34;, &#34;age&#34;: 38,
               &#34;pets&#34;: [&#34;Sixes&#34;, &#34;Stache&#34;, &#34;Cisco&#34;]}]
}
&#34;&#34;&#34;

JSON is very nearly valid Python code with the exception of its null value null and
some  other  nuances  (such  as  disallowing  trailing  commas  at  the  end  of  lists).  The
basic types are objects (dicts), arrays (lists), strings, numbers, booleans, and nulls. All
of the keys in an object must be strings. There are several Python libraries for reading

178 

| 

Chapter 6: Data Loading, Storage, and File Formats

and  writing  JSON  data.  Ill  use  json  here,  as  it  is  built  into  the  Python  standard
library. To convert a JSON string to Python form, use json.loads:

In [62]: import json

In [63]: result = json.loads(obj)

In [64]: result
Out[64]: 
{&#39;name&#39;: &#39;Wes&#39;,
 &#39;pet&#39;: None,
 &#39;places_lived&#39;: [&#39;United States&#39;, &#39;Spain&#39;, &#39;Germany&#39;],
 &#39;siblings&#39;: [{&#39;age&#39;: 30, &#39;name&#39;: &#39;Scott&#39;, &#39;pets&#39;: [&#39;Zeus&#39;, &#39;Zuko&#39;]},
  {&#39;age&#39;: 38, &#39;name&#39;: &#39;Katie&#39;, &#39;pets&#39;: [&#39;Sixes&#39;, &#39;Stache&#39;, &#39;Cisco&#39;]}]}

json.dumps, on the other hand, converts a Python object back to JSON:

In [65]: asjson = json.dumps(result)

How you convert a JSON object or list of objects to a DataFrame or some other data
structure  for  analysis  will  be  up  to  you.  Conveniently,  you  can  pass  a  list  of  dicts
(which were previously JSON objects) to the DataFrame constructor and select a sub
set of the data fields:

In [66]: siblings = pd.DataFrame(result[&#39;siblings&#39;], columns=[&#39;name&#39;, &#39;age&#39;])

In [67]: siblings
Out[67]: 
    name  age
0  Scott   30
1  Katie   38

The pandas.read_json can automatically convert JSON datasets in specific arrange
ments into a Series or DataFrame. For example:

In [68]: !cat examples/example.json
[{&#34;a&#34;: 1, &#34;b&#34;: 2, &#34;c&#34;: 3},
 {&#34;a&#34;: 4, &#34;b&#34;: 5, &#34;c&#34;: 6},
 {&#34;a&#34;: 7, &#34;b&#34;: 8, &#34;c&#34;: 9}]

The default options for pandas.read_json assume that each object in the JSON array
is a row in the table:

In [69]: data = pd.read_json(&#39;examples/example.json&#39;)

In [70]: data
Out[70]: 
   a  b  c
0  1  2  3
1  4  5  6
2  7  8  9

6.1 Reading and Writing Data in Text Format 

| 

179

For an extended example of reading and manipulating JSON data (including nested
records), see the USDA Food Database example in Chapter 7.

If you need to export data from pandas to JSON, one way is to use the to_json meth
ods on Series and DataFrame:

In [71]: print(data.to_json())
{&#34;a&#34;:{&#34;0&#34;:1,&#34;1&#34;:4,&#34;2&#34;:7},&#34;b&#34;:{&#34;0&#34;:2,&#34;1&#34;:5,&#34;2&#34;:8},&#34;c&#34;:{&#34;0&#34;:3,&#34;1&#34;:6,&#34;2&#34;:9}}

In [72]: print(data.to_json(orient=&#39;records&#39;))
[{&#34;a&#34;:1,&#34;b&#34;:2,&#34;c&#34;:3},{&#34;a&#34;:4,&#34;b&#34;:5,&#34;c&#34;:6},{&#34;a&#34;:7,&#34;b&#34;:8,&#34;c&#34;:9}]

XML and HTML: Web Scraping
Python has many libraries for reading and writing data in the ubiquitous HTML and
XML  formats.  Examples  include  lxml,  Beautiful  Soup,  and  html5lib.  While  lxml  is
comparatively much faster in general, the other libraries can better handle malformed
HTML or XML files.

pandas has a built-in function, read_html, which uses libraries like lxml and Beauti
ful  Soup  to  automatically  parse  tables  out  of  HTML  files  as  DataFrame  objects.  To
show how this works, I downloaded an HTML file (used in the pandas documenta
tion) from the United States FDIC government agency showing bank failures.1 First,
you must install some additional libraries used by read_html:

conda install lxml
pip install beautifulsoup4 html5lib

If you are not using conda, pip install lxml will likely also work.

The pandas.read_html function has a number of options, but by default it searches
for and attempts to parse all tabular data contained within &lt;table&gt; tags. The result is
a list of DataFrame objects:

In [73]: tables = pd.read_html(&#39;examples/fdic_failed_bank_list.html&#39;)

In [74]: len(tables)
Out[74]: 1

In [75]: failures = tables[0]

In [76]: failures.head()
Out[76]: 
                      Bank Name             City  ST   CERT  \
0                   Allied Bank         Mulberry  AR     91   
1  The Woodbury Banking Company         Woodbury  GA  11297   
2        First CornerStone Bank  King of Prussia  PA  35312   

1 For the full list, see https://www.fdic.gov/bank/individual/failed/banklist.html.

180 

| 

Chapter 6: Data Loading, Storage, and File Formats

3            Trust Company Bank          Memphis  TN   9956   
4    North Milwaukee State Bank        Milwaukee  WI  20364   
                 Acquiring Institution        Closing Date       Updated Date  
0                         Today&#39;s Bank  September 23, 2016  November 17, 2016  
1                          United Bank     August 19, 2016  November 17, 2016  
2  First-Citizens Bank &amp; Trust Company         May 6, 2016  September 6, 2016  
3           The Bank of Fayette County      April 29, 2016  September 6, 2016  
4  First-Citizens Bank &amp; Trust Company      March 11, 2016      June 16, 2016  

Because failures has many columns, pandas inserts a line break character \.

As  you  will  learn  in  later  chapters,  from  here  we  could  proceed  to  do  some  data
cleaning and analysis, like computing the number of bank failures by year:

In [77]: close_timestamps = pd.to_datetime(failures[&#39;Closing Date&#39;])

In [78]: close_timestamps.dt.year.value_counts()
Out[78]: 
2010    157
2009    140
2011     92
2012     51
2008     25
       ... 
2004      4
2001      4
2007      3
2003      3
2000      2
Name: Closing Date, Length: 15, dtype: int64

Parsing XML with lxml.objectify

XML (eXtensible Markup Language) is another common structured data format sup
porting hierarchical, nested data with metadata. The book you are currently reading
was actually created from a series of large XML documents.

Earlier, I showed the pandas.read_html function, which uses either lxml or Beautiful
Soup  under  the  hood  to  parse  data  from  HTML.  XML  and  HTML  are  structurally
similar, but XML is more general. Here, I will show an example of how to use lxml to
parse data from a more general XML format.

The New York Metropolitan Transportation Authority (MTA) publishes a number of
data series about its bus and train services. Here well look at the performance data,
which is contained in a set of XML files. Each train or bus service has a different file
(like Performance_MNR.xml for the Metro-North Railroad) containing monthly data
as a series of XML records that look like this:

&lt;INDICATOR&gt;
  &lt;INDICATOR_SEQ&gt;373889&lt;/INDICATOR_SEQ&gt;
  &lt;PARENT_SEQ&gt;&lt;/PARENT_SEQ&gt;

6.1 Reading and Writing Data in Text Format 

| 

181

  &lt;AGENCY_NAME&gt;Metro-North Railroad&lt;/AGENCY_NAME&gt;
  &lt;INDICATOR_NAME&gt;Escalator Availability&lt;/INDICATOR_NAME&gt;
  &lt;DESCRIPTION&gt;Percent of the time that escalators are operational
  systemwide. The availability rate is based on physical observations performed
  the morning of regular business days only. This is a new indicator the agency
  began reporting in 2009.&lt;/DESCRIPTION&gt;
  &lt;PERIOD_YEAR&gt;2011&lt;/PERIOD_YEAR&gt;
  &lt;PERIOD_MONTH&gt;12&lt;/PERIOD_MONTH&gt;
  &lt;CATEGORY&gt;Service Indicators&lt;/CATEGORY&gt;
  &lt;FREQUENCY&gt;M&lt;/FREQUENCY&gt;
  &lt;DESIRED_CHANGE&gt;U&lt;/DESIRED_CHANGE&gt;
  &lt;INDICATOR_UNIT&gt;%&lt;/INDICATOR_UNIT&gt;
  &lt;DECIMAL_PLACES&gt;1&lt;/DECIMAL_PLACES&gt;
  &lt;YTD_TARGET&gt;97.00&lt;/YTD_TARGET&gt;
  &lt;YTD_ACTUAL&gt;&lt;/YTD_ACTUAL&gt;
  &lt;MONTHLY_TARGET&gt;97.00&lt;/MONTHLY_TARGET&gt;
  &lt;MONTHLY_ACTUAL&gt;&lt;/MONTHLY_ACTUAL&gt;
&lt;/INDICATOR&gt;

Using lxml.objectify, we parse the file and get a reference to the root node of the
XML file with getroot:

from lxml import objectify

path = &#39;examples/mta_perf/Performance_MNR.xml&#39;
parsed = objectify.parse(open(path))
root = parsed.getroot()

root.INDICATOR  returns  a  generator  yielding  each  &lt;INDICATOR&gt;  XML  element.  For
each  record,  we  can  populate  a  dict  of  tag  names  (like  YTD_ACTUAL)  to  data  values
(excluding a few tags):

data = []

skip_fields = [&#39;PARENT_SEQ&#39;, &#39;INDICATOR_SEQ&#39;,
               &#39;DESIRED_CHANGE&#39;, &#39;DECIMAL_PLACES&#39;]

for elt in root.INDICATOR:
    el_data = {}
    for child in elt.getchildren():
        if child.tag in skip_fields:
            continue
        el_data[child.tag] = child.pyval
    data.append(el_data)

Lastly, convert this list of dicts into a DataFrame:

In [81]: perf = pd.DataFrame(data)

In [82]: perf.head()
Out[82]: 
Empty DataFrame

182 

| 

Chapter 6: Data Loading, Storage, and File Formats

Columns: []
Index: []

XML  data  can  get  much  more  complicated  than  this  example.  Each  tag  can  have
metadata, too. Consider an HTML link tag, which is also valid XML:

from io import StringIO
tag = &#39;&lt;a href=&#34;http://www.google.com&#34;&gt;Google&lt;/a&gt;&#39;
root = objectify.parse(StringIO(tag)).getroot()

You can now access any of the fields (like href) in the tag or the link text:

In [84]: root
Out[84]: &lt;Element a at 0x7f6b15817748&gt;

In [85]: root.get(&#39;href&#39;)
Out[85]: &#39;http://www.google.com&#39;

In [86]: root.text
Out[86]: &#39;Google&#39;

6.2 Binary Data Formats
One of the easiest ways to store data (also known as serialization) efficiently in binary
format  is  using  Pythons  built-in  pickle  serialization.  pandas  objects  all  have  a
to_pickle method that writes the data to disk in pickle format:

In [87]: frame = pd.read_csv(&#39;examples/ex1.csv&#39;)

In [88]: frame
Out[88]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

In [89]: frame.to_pickle(&#39;examples/frame_pickle&#39;)

You can read any pickled object stored in a file by using the built-in pickle directly,
or even more conveniently using pandas.read_pickle:

In [90]: pd.read_pickle(&#39;examples/frame_pickle&#39;)
Out[90]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

6.2 Binary Data Formats 

| 

183

pickle is only recommended as a short-term storage format. The
problem is that it is hard to guarantee that the format will be stable
over  time;  an  object  pickled  today  may  not  unpickle  with  a  later
version of a library. We have tried to maintain backward compati
bility when possible, but at some point in the future it may be nec
essary to break the pickle format.

pandas has built-in support for two more binary data formats: HDF5 and Message
Pack.  I  will  give  some  HDF5  examples  in  the  next  section,  but  I  encourage  you  to
explore different file formats to see how fast they are and how well they work for your
analysis. Some other storage formats for pandas or NumPy data include:

bcolz

A compressable column-oriented binary format based on the Blosc compression
library.

Feather

A  cross-language  column-oriented  file  format  I  designed  with  the  R  program
ming communitys Hadley Wickham. Feather uses the Apache Arrow columnar
memory format.

Using HDF5 Format
HDF5 is a well-regarded file format intended for storing large quantities of scientific
array data. It is available as a C library, and it has interfaces available in many other
languages, including Java, Julia, MATLAB, and Python. The HDF in HDF5 stands
for hierarchical data format. Each HDF5 file can store multiple datasets and support
ing metadata. Compared with simpler formats, HDF5 supports on-the-fly compres
sion with a variety of compression modes, enabling data with repeated patterns to be
stored more efficiently. HDF5 can be a good choice for working with very large data
sets that dont fit into memory, as you can efficiently read and write small sections of
much larger arrays.

While  its  possible  to  directly  access  HDF5  files  using  either  the  PyTables  or  h5py
libraries,  pandas  provides  a  high-level  interface  that  simplifies  storing  Series  and
DataFrame  object.  The  HDFStore  class  works  like  a  dict  and  handles  the  low-level
details:

In [92]: frame = pd.DataFrame({&#39;a&#39;: np.random.randn(100)})

In [93]: store = pd.HDFStore(&#39;mydata.h5&#39;)

In [94]: store[&#39;obj1&#39;] = frame

In [95]: store[&#39;obj1_col&#39;] = frame[&#39;a&#39;]

In [96]: store

184 

| 

Chapter 6: Data Loading, Storage, and File Formats

Out[96]: 
&lt;class &#39;pandas.io.pytables.HDFStore&#39;&gt;
File path: mydata.h5
/obj1                frame        (shape-&gt;[100,1])                               

/obj1_col            series       (shape-&gt;[100])                                 

/obj2                frame_table  (typ-&gt;appendable,nrows-&gt;100,ncols-&gt;1,indexers-&gt;
[index])
/obj3                frame_table  (typ-&gt;appendable,nrows-&gt;100,ncols-&gt;1,indexers-&gt;
[index])

Objects contained in the HDF5 file can then be retrieved with the same dict-like API:

In [97]: store[&#39;obj1&#39;]
Out[97]: 
           a
0  -0.204708
1   0.478943
2  -0.519439
3  -0.555730
4   1.965781
..       ...
95  0.795253
96  0.118110
97 -0.748532
98  0.584970
99  0.152677
[100 rows x 1 columns]

HDFStore supports two storage schemas, &#39;fixed&#39; and &#39;table&#39;. The latter is generally
slower, but it supports query operations using a special syntax:

In [98]: store.put(&#39;obj2&#39;, frame, format=&#39;table&#39;)

In [99]: store.select(&#39;obj2&#39;, where=[&#39;index &gt;= 10 and index &lt;= 15&#39;])
Out[99]: 
           a
10  1.007189
11 -1.296221
12  0.274992
13  0.228913
14  1.352917
15  0.886429

In [100]: store.close()

The put is an explicit version of the store[&#39;obj2&#39;] = frame method but allows us to
set other options like the storage format.

The pandas.read_hdf function gives you a shortcut to these tools:

In [101]: frame.to_hdf(&#39;mydata.h5&#39;, &#39;obj3&#39;, format=&#39;table&#39;)

6.2 Binary Data Formats 

| 

185

        
        
In [102]: pd.read_hdf(&#39;mydata.h5&#39;, &#39;obj3&#39;, where=[&#39;index &lt; 5&#39;])
Out[102]: 
          a
0 -0.204708
1  0.478943
2 -0.519439
3 -0.555730
4  1.965781

If  you  are  processing  data  that  is  stored  on  remote  servers,  like
Amazon S3 or HDFS, using a different binary format designed for
distributed  storage  like  Apache  Parquet  may  be  more  suitable.
Python for Parquet and other such storage formats is still develop
ing, so I do not write about them in this book.

If  you  work  with  large  quantities  of  data  locally,  I  would  encourage  you  to  explore
PyTables  and  h5py  to  see  how  they  can  suit  your  needs.  Since  many  data  analysis
problems are I/O-bound (rather than CPU-bound), using a tool like HDF5 can mas
sively accelerate your applications.

HDF5 is not a database. It is best suited for write-once, read-many
datasets. While data can be added to a file at any time, if multiple
writers do so simultaneously, the file can become corrupted.

Reading Microsoft Excel Files
pandas  also  supports  reading  tabular  data  stored  in  Excel  2003  (and  higher)  files
using  either  the  ExcelFile  class  or  pandas.read_excel  function.  Internally  these
tools use the add-on packages xlrd and openpyxl to read XLS and XLSX files, respec
tively. You may need to install these manually with pip or conda.

To use ExcelFile, create an instance by passing a path to an xls or xlsx file:

In [104]: xlsx = pd.ExcelFile(&#39;examples/ex1.xlsx&#39;)

Data stored in a sheet can then be read into DataFrame with parse:

In [105]: pd.read_excel(xlsx, &#39;Sheet1&#39;)
Out[105]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

If you are reading multiple sheets in a file, then it is faster to create the  ExcelFile,
but you can also simply pass the filename to pandas.read_excel:

186 

| 

Chapter 6: Data Loading, Storage, and File Formats

In [106]: frame = pd.read_excel(&#39;examples/ex1.xlsx&#39;, &#39;Sheet1&#39;)

In [107]: frame
Out[107]: 
   a   b   c   d message
0  1   2   3   4   hello
1  5   6   7   8   world
2  9  10  11  12     foo

To  write  pandas  data  to  Excel  format,  you  must  first  create  an  ExcelWriter,  then
write data to it using pandas objects to_excel method:

In [108]: writer = pd.ExcelWriter(&#39;examples/ex2.xlsx&#39;)

In [109]: frame.to_excel(writer, &#39;Sheet1&#39;)

In [110]: writer.save()

You can also pass a file path to to_excel and avoid the ExcelWriter:

In [111]: frame.to_excel(&#39;examples/ex2.xlsx&#39;)

6.3 Interacting with Web APIs
Many websites have public APIs providing data feeds via JSON or some other format.
There  are  a  number  of  ways  to  access  these  APIs  from  Python;  one  easy-to-use
method that I recommend is the requests package.

To find the last 30 GitHub issues for pandas on GitHub, we can make a  GET HTTP
request using the add-on requests library:

In [113]: import requests

In [114]: url = &#39;https://api.github.com/repos/pandas-dev/pandas/issues&#39;

In [115]: resp = requests.get(url)

In [116]: resp
Out[116]: &lt;Response [200]&gt;

The Response objects json method will return a dictionary containing JSON parsed
into native Python objects:

In [117]: data = resp.json()

In [118]: data[0][&#39;title&#39;]
Out[118]: &#39;Period does not round down for frequencies less that 1 hour&#39;

Each  element  in  data  is  a  dictionary  containing  all  of  the  data  found  on  a  GitHub
issue page (except for the comments). We can pass  data directly to DataFrame and
extract fields of interest:

6.3 Interacting with Web APIs 

| 

187

In [119]: issues = pd.DataFrame(data, columns=[&#39;number&#39;, &#39;title&#39;,
   .....:                                      &#39;labels&#39;, &#39;state&#39;])

In [120]: issues
Out[120]: 
    number                                              title  \
0    17666  Period does not round down for frequencies les...   
1    17665           DOC: improve docstring of function where   
2    17664               COMPAT: skip 32-bit test on int repr   
3    17662                          implement Delegator class   
4    17654  BUG: Fix series rename called with str alterin...   
..     ...                                                ...   
25   17603  BUG: Correctly localize naive datetime strings...   
26   17599                     core.dtypes.generic --&gt; cython   
27   17596   Merge cdate_range functionality into bdate_range   
28   17587  Time Grouper bug fix when applied for list gro...   
29   17583  BUG: fix tz-aware DatetimeIndex + TimedeltaInd...   
                                               labels state  
0                                                  []  open  
1   [{&#39;id&#39;: 134699, &#39;url&#39;: &#39;https://api.github.com...  open  
2   [{&#39;id&#39;: 563047854, &#39;url&#39;: &#39;https://api.github....  open  
3                                                  []  open  
4   [{&#39;id&#39;: 76811, &#39;url&#39;: &#39;https://api.github.com/...  open  
..                                                ...   ...  
25  [{&#39;id&#39;: 76811, &#39;url&#39;: &#39;https://api.github.com/...  open  
26  [{&#39;id&#39;: 49094459, &#39;url&#39;: &#39;https://api.github.c...  open  
27  [{&#39;id&#39;: 35818298, &#39;url&#39;: &#39;https://api.github.c...  open  
28  [{&#39;id&#39;: 233160, &#39;url&#39;: &#39;https://api.github.com...  open  
29  [{&#39;id&#39;: 76811, &#39;url&#39;: &#39;https://api.github.com/...  open  
[30 rows x 4 columns]

With  a  bit  of  elbow  grease,  you  can  create  some  higher-level  interfaces  to  common
web APIs that return DataFrame objects for easy analysis.

6.4 Interacting with Databases
In  a  business  setting,  most  data  may  not  be  stored  in  text  or  Excel  files.  SQL-based
relational databases (such as SQL Server, PostgreSQL, and MySQL) are in wide use,
and many alternative databases have become quite popular. The choice of database is
usually  dependent  on  the  performance,  data  integrity,  and  scalability  needs  of  an
application.

Loading  data  from  SQL  into  a  DataFrame  is  fairly  straightforward,  and  pandas  has
some functions to simplify the process. As an example, Ill create a SQLite database
using Pythons built-in sqlite3 driver:

In [121]: import sqlite3

In [122]: query = &#34;&#34;&#34;
   .....: CREATE TABLE test

188 

| 

Chapter 6: Data Loading, Storage, and File Formats

   .....: (a VARCHAR(20), b VARCHAR(20),
   .....:  c REAL,        d INTEGER
   .....: );&#34;&#34;&#34;

In [123]: con = sqlite3.connect(&#39;mydata.sqlite&#39;)

In [124]: con.execute(query)
Out[124]: &lt;sqlite3.Cursor at 0x7f6b12a50f10&gt;

In [125]: con.commit()

Then, insert a few rows of data:

In [126]: data = [(&#39;Atlanta&#39;, &#39;Georgia&#39;, 1.25, 6),
   .....:         (&#39;Tallahassee&#39;, &#39;Florida&#39;, 2.6, 3),
   .....:         (&#39;Sacramento&#39;, &#39;California&#39;, 1.7, 5)]

In [127]: stmt = &#34;INSERT INTO test VALUES(?, ?, ?, ?)&#34;

In [128]: con.executemany(stmt, data)
Out[128]: &lt;sqlite3.Cursor at 0x7f6b15c66ce0&gt;

In [129]: con.commit()

Most Python SQL drivers (PyODBC, psycopg2, MySQLdb, pymssql, etc.) return a list
of tuples when selecting data from a table:

In [130]: cursor = con.execute(&#39;select * from test&#39;)

In [131]: rows = cursor.fetchall()

In [132]: rows
Out[132]: 
[(&#39;Atlanta&#39;, &#39;Georgia&#39;, 1.25, 6),
 (&#39;Tallahassee&#39;, &#39;Florida&#39;, 2.6, 3),
 (&#39;Sacramento&#39;, &#39;California&#39;, 1.7, 5)]

You  can  pass  the  list  of  tuples  to  the  DataFrame  constructor,  but  you  also  need  the
column names, contained in the cursors description attribute:

In [133]: cursor.description
Out[133]: 
((&#39;a&#39;, None, None, None, None, None, None),
 (&#39;b&#39;, None, None, None, None, None, None),
 (&#39;c&#39;, None, None, None, None, None, None),
 (&#39;d&#39;, None, None, None, None, None, None))

In [134]: pd.DataFrame(rows, columns=[x[0] for x in cursor.description])
Out[134]: 
             a           b     c  d
0      Atlanta     Georgia  1.25  6
1  Tallahassee     Florida  2.60  3
2   Sacramento  California  1.70  5

6.4 Interacting with Databases 

| 

189

This  is  quite  a  bit  of  munging  that  youd  rather  not  repeat  each  time  you  query  the
database.  The  SQLAlchemy  project  is  a  popular  Python  SQL  toolkit  that  abstracts
away  many  of  the  common  differences  between  SQL  databases.  pandas  has  a
read_sql function that enables you to read data easily from a general SQLAlchemy
connection. Here, well connect to the same SQLite database with SQLAlchemy and
read data from the table created before:

In [135]: import sqlalchemy as sqla

In [136]: db = sqla.create_engine(&#39;sqlite:///mydata.sqlite&#39;)

In [137]: pd.read_sql(&#39;select * from test&#39;, db)
Out[137]: 
             a           b     c  d
0      Atlanta     Georgia  1.25  6
1  Tallahassee     Florida  2.60  3
2   Sacramento  California  1.70  5

6.5 Conclusion
Getting access to data is frequently the first step in the data analysis process. We have
looked at a number of useful tools in this chapter that should help you get started. In
the  upcoming  chapters  we  will  dig  deeper  into  data  wrangling,  data  visualization,
time series analysis, and other topics.

190 

| 

Chapter 6: Data Loading, Storage, and File Formats

CHAPTER 7
Data Cleaning and Preparation

During the course of doing data analysis and modeling, a significant amount of time
is spent on data preparation: loading, cleaning, transforming, and rearranging. Such
tasks are often reported to take up 80% or more of an analysts time. Sometimes the
way that data is stored in files or databases is not in the right format for a particular
task.  Many  researchers  choose  to  do  ad  hoc  processing  of  data  from  one  form  to
another using a general-purpose programming language, like Python, Perl, R, or Java,
or  Unix  text-processing  tools  like  sed  or  awk.  Fortunately,  pandas,  along  with  the
built-in Python language features, provides you with a high-level, flexible, and fast set
of tools to enable you to manipulate data into the right form.

If  you  identify  a  type  of  data  manipulation  that  isnt  anywhere  in  this  book  or  else
where  in  the  pandas  library,  feel  free  to  share  your  use  case  on  one  of  the  Python
mailing  lists  or  on  the  pandas  GitHub  site.  Indeed,  much  of  the  design  and  imple
mentation of pandas has been driven by the needs of real-world applications.

In  this  chapter  I  discuss  tools  for  missing  data,  duplicate  data,  string  manipulation,
and some other analytical data transformations. In the next chapter, I focus on com
bining and rearranging datasets in various ways.

7.1 Handling Missing Data
Missing data occurs commonly in many data analysis applications. One of the goals
of pandas is to make working with missing data as painless as possible. For example,
all of the descriptive statistics on pandas objects exclude missing data by default.

The  way  that  missing  data  is  represented  in  pandas  objects  is  somewhat  imperfect,
but it is functional for a lot of users. For numeric data, pandas uses the floating-point 
value NaN (Not a Number) to represent missing data. We call this a sentinel value that
can be easily detected:

191

In [10]: string_data = pd.Series([&#39;aardvark&#39;, &#39;artichoke&#39;, np.nan, &#39;avocado&#39;])

In [11]: string_data
Out[11]: 
0     aardvark
1    artichoke
2          NaN
3      avocado
dtype: object

In [12]: string_data.isnull()
Out[12]: 
0    False
1    False
2     True
3    False
dtype: bool

In pandas, weve adopted a convention used in the R programming language by refer
ring to missing data as NA, which stands for not available. In statistics applications, 
NA  data  may  either  be  data  that  does  not  exist  or  that  exists  but  was  not  observed
(through  problems  with  data  collection,  for  example).  When  cleaning  up  data  for
analysis, it is often important to do analysis on the missing data itself to identify data
collection problems or potential biases in the data caused by missing data.

The built-in Python None value is also treated as NA in object arrays:

In [13]: string_data[0] = None

In [14]: string_data.isnull()
Out[14]: 
0     True
1    False
2     True
3    False
dtype: bool

There is work ongoing in the pandas project to improve the internal details of how
missing  data  is  handled,  but  the  user  API  functions,  like  pandas.isnull,  abstract 
away many of the annoying details. See Table 7-1 for a list of some functions related
to missing data handling.

Table 7-1. NA handling methods

Argument Description
dropna

fillna

isnull
notnull Negation of isnull.

Filter axis labels based on whether values for each label have missing data, with varying thresholds for how
much missing data to tolerate.
Fill in missing data with some value or using an interpolation method such as &#39;ffill&#39; or &#39;bfill&#39;.
Return boolean values indicating which values are missing/NA.

192 

| 

Chapter 7: Data Cleaning and Preparation

Filtering Out Missing Data
There are a few ways to filter out missing data. While you always have the option to
do it by hand using pandas.isnull and boolean indexing, the dropna can be helpful.
On a Series, it returns the Series with only the non-null data and index values:

In [15]: from numpy import nan as NA

In [16]: data = pd.Series([1, NA, 3.5, NA, 7])

In [17]: data.dropna()
Out[17]: 
0    1.0
2    3.5
4    7.0
dtype: float64

This is equivalent to:

In [18]: data[data.notnull()]
Out[18]: 
0    1.0
2    3.5
4    7.0
dtype: float64

With DataFrame objects, things are a bit more complex. You may want to drop rows
or columns that are all NA or only those containing any NAs. dropna by default drops
any row containing a missing value:

In [19]: data = pd.DataFrame([[1., 6.5, 3.], [1., NA, NA],
   ....:                      [NA, NA, NA], [NA, 6.5, 3.]])

In [20]: cleaned = data.dropna()

In [21]: data
Out[21]: 
     0    1    2
0  1.0  6.5  3.0
1  1.0  NaN  NaN
2  NaN  NaN  NaN
3  NaN  6.5  3.0

In [22]: cleaned
Out[22]: 
     0    1    2
0  1.0  6.5  3.0

Passing how=&#39;all&#39; will only drop rows that are all NA:

In [23]: data.dropna(how=&#39;all&#39;)
Out[23]: 
     0    1    2

7.1 Handling Missing Data 

| 

193

0  1.0  6.5  3.0
1  1.0  NaN  NaN
3  NaN  6.5  3.0

To drop columns in the same way, pass axis=1:

In [24]: data[4] = NA

In [25]: data
Out[25]: 
     0    1    2   4
0  1.0  6.5  3.0 NaN
1  1.0  NaN  NaN NaN
2  NaN  NaN  NaN NaN
3  NaN  6.5  3.0 NaN

In [26]: data.dropna(axis=1, how=&#39;all&#39;)
Out[26]: 
     0    1    2
0  1.0  6.5  3.0
1  1.0  NaN  NaN
2  NaN  NaN  NaN
3  NaN  6.5  3.0

A related way to filter out DataFrame rows tends to concern time series data. Suppose
you  want  to  keep  only  rows  containing  a  certain  number  of  observations.  You  can
indicate this with the thresh argument:

In [27]: df = pd.DataFrame(np.random.randn(7, 3))

In [28]: df.iloc[:4, 1] = NA

In [29]: df.iloc[:2, 2] = NA

In [30]: df
Out[30]: 
          0         1         2
0 -0.204708       NaN       NaN
1 -0.555730       NaN       NaN
2  0.092908       NaN  0.769023
3  1.246435       NaN -1.296221
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

In [31]: df.dropna()
Out[31]: 
          0         1         2
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

In [32]: df.dropna(thresh=2)

194 

| 

Chapter 7: Data Cleaning and Preparation

Out[32]: 
          0         1         2
2  0.092908       NaN  0.769023
3  1.246435       NaN -1.296221
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

Filling In Missing Data
Rather  than  filtering  out  missing  data  (and  potentially  discarding  other  data  along
with  it),  you  may  want  to  fill  in  the  holes  in  any  number  of  ways.  For  most  pur
poses,  the  fillna  method  is  the  workhorse  function  to  use.  Calling  fillna  with  a
constant replaces missing values with that value:

In [33]: df.fillna(0)
Out[33]: 
          0         1         2
0 -0.204708  0.000000  0.000000
1 -0.555730  0.000000  0.000000
2  0.092908  0.000000  0.769023
3  1.246435  0.000000 -1.296221
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

Calling fillna with a dict, you can use a different fill value for each column:

In [34]: df.fillna({1: 0.5, 2: 0})
Out[34]: 
          0         1         2
0 -0.204708  0.500000  0.000000
1 -0.555730  0.500000  0.000000
2  0.092908  0.500000  0.769023
3  1.246435  0.500000 -1.296221
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

fillna returns a new object, but you can modify the existing object in-place:

In [35]: _ = df.fillna(0, inplace=True)

In [36]: df
Out[36]: 
          0         1         2
0 -0.204708  0.000000  0.000000
1 -0.555730  0.000000  0.000000
2  0.092908  0.000000  0.769023
3  1.246435  0.000000 -1.296221
4  0.274992  0.228913  1.352917
5  0.886429 -2.001637 -0.371843
6  1.669025 -0.438570 -0.539741

7.1 Handling Missing Data 

| 

195

The same interpolation methods available for reindexing can be used with fillna:

In [37]: df = pd.DataFrame(np.random.randn(6, 3))

In [38]: df.iloc[2:, 1] = NA

In [39]: df.iloc[4:, 2] = NA

In [40]: df
Out[40]: 
          0         1         2
0  0.476985  3.248944 -1.021228
1 -0.577087  0.124121  0.302614
2  0.523772       NaN  1.343810
3 -0.713544       NaN -2.370232
4 -1.860761       NaN       NaN
5 -1.265934       NaN       NaN

In [41]: df.fillna(method=&#39;ffill&#39;)
Out[41]: 
          0         1         2
0  0.476985  3.248944 -1.021228
1 -0.577087  0.124121  0.302614
2  0.523772  0.124121  1.343810
3 -0.713544  0.124121 -2.370232
4 -1.860761  0.124121 -2.370232
5 -1.265934  0.124121 -2.370232

In [42]: df.fillna(method=&#39;ffill&#39;, limit=2)
Out[42]: 
          0         1         2
0  0.476985  3.248944 -1.021228
1 -0.577087  0.124121  0.302614
2  0.523772  0.124121  1.343810
3 -0.713544  0.124121 -2.370232
4 -1.860761       NaN -2.370232
5 -1.265934       NaN -2.370232

With fillna you can do lots of other things with a little creativity. For example, you
might pass the mean or median value of a Series:

In [43]: data = pd.Series([1., NA, 3.5, NA, 7])

In [44]: data.fillna(data.mean())
Out[44]: 
0    1.000000
1    3.833333
2    3.500000
3    3.833333
4    7.000000
dtype: float64

See Table 7-2 for a reference on fillna.

196 

| 

Chapter 7: Data Cleaning and Preparation

Table 7-2. fillna function arguments

Argument Description
value

method

axis

Scalar value or dict-like object to use to fill missing values
Interpolation; by default &#39;ffill&#39; if function called with no other arguments
Axis to fill on; default axis=0

inplace Modify the calling object without producing a copy
limit

For forward and backward filling, maximum number of consecutive periods to fill

7.2 Data Transformation
So far in this chapter weve been concerned with rearranging data. Filtering, cleaning,
and other transformations are another class of important operations.

Removing Duplicates
Duplicate rows may be found in a DataFrame for any number of reasons. Here is an
example:

In [45]: data = pd.DataFrame({&#39;k1&#39;: [&#39;one&#39;, &#39;two&#39;] * 3 + [&#39;two&#39;],
   ....:                      &#39;k2&#39;: [1, 1, 2, 3, 3, 4, 4]})

In [46]: data
Out[46]: 
    k1  k2
0  one   1
1  two   1
2  one   2
3  two   3
4  one   3
5  two   4
6  two   4

The DataFrame method duplicated returns a boolean Series indicating whether each
row is a duplicate (has been observed in a previous row) or not:

In [47]: data.duplicated()
Out[47]: 
0    False
1    False
2    False
3    False
4    False
5    False
6     True
dtype: bool

Relatedly,  drop_duplicates  returns  a  DataFrame  where  the  duplicated  array  is
False:

7.2 Data Transformation 

| 

197

In [48]: data.drop_duplicates()
Out[48]: 
    k1  k2
0  one   1
1  two   1
2  one   2
3  two   3
4  one   3
5  two   4

Both of these methods by default consider all of the columns; alternatively, you can
specify any subset of them to detect duplicates. Suppose we had an additional column
of values and wanted to filter duplicates only based on the &#39;k1&#39; column:

In [49]: data[&#39;v1&#39;] = range(7)

In [50]: data.drop_duplicates([&#39;k1&#39;])
Out[50]: 
    k1  k2  v1
0  one   1   0
1  two   1   1

duplicated and drop_duplicates by default keep the first observed value combina
tion. Passing keep=&#39;last&#39; will return the last one:

In [51]: data.drop_duplicates([&#39;k1&#39;, &#39;k2&#39;], keep=&#39;last&#39;)
Out[51]: 
    k1  k2  v1
0  one   1   0
1  two   1   1
2  one   2   2
3  two   3   3
4  one   3   4
6  two   4   6

Transforming Data Using a Function or Mapping
For many datasets, you may wish to perform some transformation based on the val
ues in an array, Series, or column in a DataFrame. Consider the following hypotheti
cal data collected about various kinds of meat:

In [52]: data = pd.DataFrame({&#39;food&#39;: [&#39;bacon&#39;, &#39;pulled pork&#39;, &#39;bacon&#39;,
   ....:                               &#39;Pastrami&#39;, &#39;corned beef&#39;, &#39;Bacon&#39;,
   ....:                               &#39;pastrami&#39;, &#39;honey ham&#39;, &#39;nova lox&#39;],
   ....:                      &#39;ounces&#39;: [4, 3, 12, 6, 7.5, 8, 3, 5, 6]})

In [53]: data
Out[53]: 
          food  ounces
0        bacon     4.0
1  pulled pork     3.0
2        bacon    12.0

198 

| 

Chapter 7: Data Cleaning and Preparation

3     Pastrami     6.0
4  corned beef     7.5
5        Bacon     8.0
6     pastrami     3.0
7    honey ham     5.0
8     nova lox     6.0

Suppose  you  wanted  to  add  a  column  indicating  the  type  of  animal  that  each  food
came  from.  Lets  write  down  a  mapping  of  each  distinct  meat  type  to  the  kind  of
animal:

meat_to_animal = {
  &#39;bacon&#39;: &#39;pig&#39;,
  &#39;pulled pork&#39;: &#39;pig&#39;,
  &#39;pastrami&#39;: &#39;cow&#39;,
  &#39;corned beef&#39;: &#39;cow&#39;,
  &#39;honey ham&#39;: &#39;pig&#39;,
  &#39;nova lox&#39;: &#39;salmon&#39;
}

The map method on a Series accepts a function or dict-like object containing a map
ping, but here we have a small problem in that some of the meats are capitalized and
others are not. Thus, we need to convert each value to lowercase using the str.lower
Series method:

In [55]: lowercased = data[&#39;food&#39;].str.lower()

In [56]: lowercased
Out[56]: 
0          bacon
1    pulled pork
2          bacon
3       pastrami
4    corned beef
5          bacon
6       pastrami
7      honey ham
8       nova lox
Name: food, dtype: object

In [57]: data[&#39;animal&#39;] = lowercased.map(meat_to_animal)

In [58]: data
Out[58]: 
          food  ounces  animal
0        bacon     4.0     pig
1  pulled pork     3.0     pig
2        bacon    12.0     pig
3     Pastrami     6.0     cow
4  corned beef     7.5     cow
5        Bacon     8.0     pig
6     pastrami     3.0     cow

7.2 Data Transformation 

| 

199

7    honey ham     5.0     pig
8     nova lox     6.0  salmon

We could also have passed a function that does all the work:

In [59]: data[&#39;food&#39;].map(lambda x: meat_to_animal[x.lower()])
Out[59]: 
0       pig
1       pig
2       pig
3       cow
4       cow
5       pig
6       cow
7       pig
8    salmon
Name: food, dtype: object

Using  map  is  a  convenient  way  to  perform  element-wise  transformations  and  other
data cleaningrelated operations.

Replacing Values
Filling in missing data with the fillna method is a special case of more general value
replacement. As youve already seen, map can be used to modify a subset of values in
an object but replace provides a simpler and more flexible way to do so. Lets con
sider this Series:

In [60]: data = pd.Series([1., -999., 2., -999., -1000., 3.])

In [61]: data
Out[61]: 
0       1.0
1    -999.0
2       2.0
3    -999.0
4   -1000.0
5       3.0
dtype: float64

The -999 values might be sentinel values for missing data. To replace these with NA
values that pandas understands, we can use replace, producing a new Series (unless
you pass inplace=True):

In [62]: data.replace(-999, np.nan)
Out[62]: 
0       1.0
1       NaN
2       2.0
3       NaN
4   -1000.0

200 

| 

Chapter 7: Data Cleaning and Preparation

5       3.0
dtype: float64

If  you  want  to  replace  multiple  values  at  once,  you  instead  pass  a  list  and  then  the
substitute value:

In [63]: data.replace([-999, -1000], np.nan)
Out[63]: 
0    1.0
1    NaN
2    2.0
3    NaN
4    NaN
5    3.0
dtype: float64

To use a different replacement for each value, pass a list of substitutes:

In [64]: data.replace([-999, -1000], [np.nan, 0])
Out[64]: 
0    1.0
1    NaN
2    2.0
3    NaN
4    0.0
5    3.0
dtype: float64

The argument passed can also be a dict:

In [65]: data.replace({-999: np.nan, -1000: 0})
Out[65]: 
0    1.0
1    NaN
2    2.0
3    NaN
4    0.0
5    3.0
dtype: float64

The  data.replace  method  is  distinct  from  data.str.replace,
which performs string substitution element-wise. We look at these
string methods on Series later in the chapter.

Renaming Axis Indexes
Like values in a Series, axis labels can be similarly transformed by a function or map
ping of some form to produce new, differently labeled objects. You can also modify
the axes in-place without creating a new data structure. Heres a simple example:

7.2 Data Transformation 

| 

201

In [66]: data = pd.DataFrame(np.arange(12).reshape((3, 4)),
   ....:                     index=[&#39;Ohio&#39;, &#39;Colorado&#39;, &#39;New York&#39;],
   ....:                     columns=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;])

Like a Series, the axis indexes have a map method:

In [67]: transform = lambda x: x[:4].upper()

In [68]: data.index.map(transform)
Out[68]: Index([&#39;OHIO&#39;, &#39;COLO&#39;, &#39;NEW &#39;], dtype=&#39;object&#39;)

You can assign to index, modifying the DataFrame in-place:

In [69]: data.index = data.index.map(transform)

In [70]: data
Out[70]: 
      one  two  three  four
OHIO    0    1      2     3
COLO    4    5      6     7
NEW     8    9     10    11

If you want to create a transformed version of a dataset without modifying the origi
nal, a useful method is rename:

In [71]: data.rename(index=str.title, columns=str.upper)
Out[71]: 
      ONE  TWO  THREE  FOUR
Ohio    0    1      2     3
Colo    4    5      6     7
New     8    9     10    11

Notably, rename can be used in conjunction with a dict-like object providing new val
ues for a subset of the axis labels:

In [72]: data.rename(index={&#39;OHIO&#39;: &#39;INDIANA&#39;},
   ....:             columns={&#39;three&#39;: &#39;peekaboo&#39;})
Out[72]: 
         one  two  peekaboo  four
INDIANA    0    1         2     3
COLO       4    5         6     7
NEW        8    9        10    11

rename saves you from the chore of copying the DataFrame manually and assigning
to  its  index  and  columns  attributes.  Should  you  wish  to  modify  a  dataset  in-place,
pass inplace=True:

In [73]: data.rename(index={&#39;OHIO&#39;: &#39;INDIANA&#39;}, inplace=True)

In [74]: data
Out[74]: 
         one  two  three  four
INDIANA    0    1      2     3

202 

| 

Chapter 7: Data Cleaning and Preparation

COLO       4    5      6     7
NEW        8    9     10    11

Discretization and Binning
Continuous  data  is  often  discretized  or  otherwise  separated  into  bins  for  analysis.
Suppose  you  have  data  about  a  group  of  people  in  a  study,  and  you  want  to  group
them into discrete age buckets:

In [75]: ages = [20, 22, 25, 27, 21, 23, 37, 31, 61, 45, 41, 32]

Lets divide these into bins of 18 to 25, 26 to 35, 36 to 60, and finally 61 and older. To
do so, you have to use cut, a function in pandas:

In [76]: bins = [18, 25, 35, 60, 100]

In [77]: cats = pd.cut(ages, bins)

In [78]: cats
Out[78]: 
[(18, 25], (18, 25], (18, 25], (25, 35], (18, 25], ..., (25, 35], (60, 100], (35,
 60], (35, 60], (25, 35]]
Length: 12
Categories (4, interval[int64]): [(18, 25] &lt; (25, 35] &lt; (35, 60] &lt; (60, 100]]

The  object  pandas  returns  is  a  special  Categorical  object.  The  output  you  see
describes the bins computed by pandas.cut. You can treat it like an array of strings
indicating the bin name; internally it contains a categories array specifying the dis
tinct category names along with a labeling for the ages data in the codes attribute:

In [79]: cats.codes
Out[79]: array([0, 0, 0, 1, 0, 0, 2, 1, 3, 2, 2, 1], dtype=int8)

In [80]: cats.categories
Out[80]: 
IntervalIndex([(18, 25], (25, 35], (35, 60], (60, 100]]
              closed=&#39;right&#39;,
              dtype=&#39;interval[int64]&#39;)

In [81]: pd.value_counts(cats)
Out[81]: 
(18, 25]     5
(35, 60]     3
(25, 35]     3
(60, 100]    1
dtype: int64

Note that pd.value_counts(cats) are the bin counts for the result of pandas.cut.

Consistent with mathematical notation for intervals, a parenthesis means that the side
is open, while the square bracket means it is closed (inclusive). You can change which
side is closed by passing right=False:

7.2 Data Transformation 

| 

203

In [82]: pd.cut(ages, [18, 26, 36, 61, 100], right=False)
Out[82]: 
[[18, 26), [18, 26), [18, 26), [26, 36), [18, 26), ..., [26, 36), [61, 100), [36,
 61), [36, 61), [26, 36)]
Length: 12
Categories (4, interval[int64]): [[18, 26) &lt; [26, 36) &lt; [36, 61) &lt; [61, 100)]

You can also pass your own bin names by passing a list or array to the labels option:

In [83]: group_names = [&#39;Youth&#39;, &#39;YoungAdult&#39;, &#39;MiddleAged&#39;, &#39;Senior&#39;]

In [84]: pd.cut(ages, bins, labels=group_names)
Out[84]: 
[Youth, Youth, Youth, YoungAdult, Youth, ..., YoungAdult, Senior, MiddleAged, Mid
dleAged, YoungAdult]
Length: 12
Categories (4, object): [Youth &lt; YoungAdult &lt; MiddleAged &lt; Senior]

If you pass an integer number of bins to cut instead of explicit bin edges, it will com
pute  equal-length  bins  based  on  the  minimum  and  maximum  values  in  the  data.
Consider the case of some uniformly distributed data chopped into fourths:

In [85]: data = np.random.rand(20)

In [86]: pd.cut(data, 4, precision=2)
Out[86]: 
[(0.34, 0.55], (0.34, 0.55], (0.76, 0.97], (0.76, 0.97], (0.34, 0.55], ..., (0.34
, 0.55], (0.34, 0.55], (0.55, 0.76], (0.34, 0.55], (0.12, 0.34]]
Length: 20
Categories (4, interval[float64]): [(0.12, 0.34] &lt; (0.34, 0.55] &lt; (0.55, 0.76] &lt; 
(0.76, 0.97]]

The precision=2 option limits the decimal precision to two digits.

A closely related function, qcut, bins the data based on sample quantiles. Depending
on the distribution of the data, using cut will not usually result in each bin having the
same number of data points. Since qcut uses sample quantiles instead, by definition
you will obtain roughly equal-size bins:

In [87]: data = np.random.randn(1000)  # Normally distributed

In [88]: cats = pd.qcut(data, 4)  # Cut into quartiles

In [89]: cats
Out[89]: 
[(-0.0265, 0.62], (0.62, 3.928], (-0.68, -0.0265], (0.62, 3.928], (-0.0265, 0.62]
, ..., (-0.68, -0.0265], (-0.68, -0.0265], (-2.95, -0.68], (0.62, 3.928], (-0.68,
 -0.0265]]
Length: 1000
Categories (4, interval[float64]): [(-2.95, -0.68] &lt; (-0.68, -0.0265] &lt; (-0.0265,
 0.62] &lt;
                                    (0.62, 3.928]]

204 

| 

Chapter 7: Data Cleaning and Preparation

In [90]: pd.value_counts(cats)
Out[90]: 
(0.62, 3.928]       250
(-0.0265, 0.62]     250
(-0.68, -0.0265]    250
(-2.95, -0.68]      250
dtype: int64

Similar to cut you can pass your own quantiles (numbers between 0 and 1, inclusive):

In [91]: pd.qcut(data, [0, 0.1, 0.5, 0.9, 1.])
Out[91]: 
[(-0.0265, 1.286], (-0.0265, 1.286], (-1.187, -0.0265], (-0.0265, 1.286], (-0.026
5, 1.286], ..., (-1.187, -0.0265], (-1.187, -0.0265], (-2.95, -1.187], (-0.0265, 
1.286], (-1.187, -0.0265]]
Length: 1000
Categories (4, interval[float64]): [(-2.95, -1.187] &lt; (-1.187, -0.0265] &lt; (-0.026
5, 1.286] &lt;
                                    (1.286, 3.928]]

Well return to cut and qcut later in the chapter during our discussion of aggregation
and group operations, as these discretization functions are especially useful for quan
tile and group analysis.

Detecting and Filtering Outliers
Filtering  or  transforming  outliers  is  largely  a  matter  of  applying  array  operations.
Consider a DataFrame with some normally distributed data:

In [92]: data = pd.DataFrame(np.random.randn(1000, 4))

In [93]: data.describe()
Out[93]: 
                 0            1            2            3
count  1000.000000  1000.000000  1000.000000  1000.000000
mean      0.049091     0.026112    -0.002544    -0.051827
std       0.996947     1.007458     0.995232     0.998311
min      -3.645860    -3.184377    -3.745356    -3.428254
25%      -0.599807    -0.612162    -0.687373    -0.747478
50%       0.047101    -0.013609    -0.022158    -0.088274
75%       0.756646     0.695298     0.699046     0.623331
max       2.653656     3.525865     2.735527     3.366626

Suppose  you  wanted  to  find  values  in  one  of  the  columns  exceeding  3  in  absolute
value:

In [94]: col = data[2]

In [95]: col[np.abs(col) &gt; 3]
Out[95]: 
41    -3.399312
136   -3.745356
Name: 2, dtype: float64

7.2 Data Transformation 

| 

205

To select all rows having a value exceeding 3 or 3, you can use the any method on a
boolean DataFrame:

In [96]: data[(np.abs(data) &gt; 3).any(1)]
Out[96]: 
            0         1         2         3
41   0.457246 -0.025907 -3.399312 -0.974657
60   1.951312  3.260383  0.963301  1.201206
136  0.508391 -0.196713 -3.745356 -1.520113
235 -0.242459 -3.056990  1.918403 -0.578828
258  0.682841  0.326045  0.425384 -3.428254
322  1.179227 -3.184377  1.369891 -1.074833
544 -3.548824  1.553205 -2.186301  1.277104
635 -0.578093  0.193299  1.397822  3.366626
782 -0.207434  3.525865  0.283070  0.544635
803 -3.645860  0.255475 -0.549574 -1.907459

Values can be set based on these criteria. Here is code to cap values outside the inter
val 3 to 3:

In [97]: data[np.abs(data) &gt; 3] = np.sign(data) * 3

In [98]: data.describe()
Out[98]: 
                 0            1            2            3
count  1000.000000  1000.000000  1000.000000  1000.000000
mean      0.050286     0.025567    -0.001399    -0.051765
std       0.992920     1.004214     0.991414     0.995761
min      -3.000000    -3.000000    -3.000000    -3.000000
25%      -0.599807    -0.612162    -0.687373    -0.747478
50%       0.047101    -0.013609    -0.022158    -0.088274
75%       0.756646     0.695298     0.699046     0.623331
max       2.653656     3.000000     2.735527     3.000000

The statement np.sign(data) produces 1 and 1 values based on whether the values
in data are positive or negative:

In [99]: np.sign(data).head()
Out[99]: 
     0    1    2    3
0 -1.0  1.0 -1.0  1.0
1  1.0 -1.0  1.0 -1.0
2  1.0  1.0  1.0 -1.0
3 -1.0 -1.0  1.0 -1.0
4 -1.0  1.0 -1.0 -1.0

Permutation and Random Sampling
Permuting (randomly reordering) a Series or the rows in a DataFrame is easy to do
using the numpy.random.permutation function. Calling permutation with the length
of  the  axis  you  want  to  permute  produces  an  array  of  integers  indicating  the  new
ordering:

206 

| 

Chapter 7: Data Cleaning and Preparation

In [100]: df = pd.DataFrame(np.arange(5 * 4).reshape((5, 4)))

In [101]: sampler = np.random.permutation(5)

In [102]: sampler
Out[102]: array([3, 1, 4, 2, 0])

That array can then be used in iloc-based indexing or the equivalent take function:

In [103]: df
Out[103]: 
    0   1   2   3
0   0   1   2   3
1   4   5   6   7
2   8   9  10  11
3  12  13  14  15
4  16  17  18  19

In [104]: df.take(sampler)
Out[104]: 
    0   1   2   3
3  12  13  14  15
1   4   5   6   7
4  16  17  18  19
2   8   9  10  11
0   0   1   2   3

To select a random subset without replacement, you can use the sample method on
Series and DataFrame:

In [105]: df.sample(n=3)
Out[105]: 
    0   1   2   3
3  12  13  14  15
4  16  17  18  19
2   8   9  10  11

To generate a sample with replacement (to allow repeat choices), pass replace=True
to sample:

In [106]: choices = pd.Series([5, 7, -1, 6, 4])

In [107]: draws = choices.sample(n=10, replace=True)

In [108]: draws
Out[108]: 
4    4
1    7
4    4
2   -1
0    5
3    6
1    7

7.2 Data Transformation 

| 

207

4    4
0    5
4    4
dtype: int64

Computing Indicator/Dummy Variables
Another type of transformation for statistical modeling or machine learning applica
tions  is  converting  a  categorical  variable  into  a  dummy  or  indicator  matrix.  If  a
column  in  a  DataFrame  has  k  distinct  values,  you  would  derive  a  matrix  or  Data
Frame with k columns containing all 1s and 0s. pandas has a get_dummies function
for doing this, though devising one yourself is not difficult. Lets return to an earlier
example DataFrame:

In [109]: df = pd.DataFrame({&#39;key&#39;: [&#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;a&#39;, &#39;b&#39;],
   .....:                    &#39;data1&#39;: range(6)})

In [110]: pd.get_dummies(df[&#39;key&#39;])
Out[110]: 
   a  b  c
0  0  1  0
1  0  1  0
2  1  0  0
3  0  0  1
4  1  0  0
5  0  1  0

In  some  cases,  you  may  want  to  add  a  prefix  to  the  columns  in  the  indicator  Data
Frame, which can then be merged with the other data. get_dummies has a prefix argu
ment for doing this:

In [111]: dummies = pd.get_dummies(df[&#39;key&#39;], prefix=&#39;key&#39;)

In [112]: df_with_dummy = df[[&#39;data1&#39;]].join(dummies)

In [113]: df_with_dummy
Out[113]: 
   data1  key_a  key_b  key_c
0      0      0      1      0
1      1      0      1      0
2      2      1      0      0
3      3      0      0      1
4      4      1      0      0
5      5      0      1      0

If a row in a DataFrame belongs to multiple categories, things are a bit more compli
cated. Lets look at the MovieLens 1M dataset, which is investigated in more detail in
Chapter 14:

208 

| 

Chapter 7: Data Cleaning and Preparation

In [114]: mnames = [&#39;movie_id&#39;, &#39;title&#39;, &#39;genres&#39;]

In [115]: movies = pd.read_table(&#39;datasets/movielens/movies.dat&#39;, sep=&#39;::&#39;,
   .....:                        header=None, names=mnames)

In [116]: movies[:10]
Out[116]: 
   movie_id                               title                        genres
0         1                    Toy Story (1995)   Animation|Children&#39;s|Comedy
1         2                      Jumanji (1995)  Adventure|Children&#39;s|Fantasy
2         3             Grumpier Old Men (1995)                Comedy|Romance
3         4            Waiting to Exhale (1995)                  Comedy|Drama
4         5  Father of the Bride Part II (1995)                        Comedy
5         6                         Heat (1995)         Action|Crime|Thriller
6         7                      Sabrina (1995)                Comedy|Romance
7         8                 Tom and Huck (1995)          Adventure|Children&#39;s
8         9                 Sudden Death (1995)                        Action
9        10                    GoldenEye (1995)     Action|Adventure|Thriller

Adding indicator variables for each genre requires a little bit of wrangling. First, we
extract the list of unique genres in the dataset:

In [117]: all_genres = []

In [118]: for x in movies.genres:
   .....:     all_genres.extend(x.split(&#39;|&#39;))

In [119]: genres = pd.unique(all_genres)

Now we have:

In [120]: genres
Out[120]: 
array([&#39;Animation&#39;, &#34;Children&#39;s&#34;, &#39;Comedy&#39;, &#39;Adventure&#39;, &#39;Fantasy&#39;,
       &#39;Romance&#39;, &#39;Drama&#39;, &#39;Action&#39;, &#39;Crime&#39;, &#39;Thriller&#39;, &#39;Horror&#39;,
       &#39;Sci-Fi&#39;, &#39;Documentary&#39;, &#39;War&#39;, &#39;Musical&#39;, &#39;Mystery&#39;, &#39;Film-Noir&#39;,
       &#39;Western&#39;], dtype=object)

One  way  to  construct  the  indicator  DataFrame  is  to  start  with  a  DataFrame  of  all
zeros:

In [121]: zero_matrix = np.zeros((len(movies), len(genres)))

In [122]: dummies = pd.DataFrame(zero_matrix, columns=genres)

Now, iterate through each movie and set entries in each row of dummies to 1. To do
this, we use the dummies.columns to compute the column indices for each genre:

7.2 Data Transformation 

| 

209

In [123]: gen = movies.genres[0]

In [124]: gen.split(&#39;|&#39;)
Out[124]: [&#39;Animation&#39;, &#34;Children&#39;s&#34;, &#39;Comedy&#39;]

In [125]: dummies.columns.get_indexer(gen.split(&#39;|&#39;))
Out[125]: array([0, 1, 2])

Then, we can use .iloc to set values based on these indices:

In [126]: for i, gen in enumerate(movies.genres):
   .....:     indices = dummies.columns.get_indexer(gen.split(&#39;|&#39;))
   .....:     dummies.iloc[i, indices] = 1
   .....:

Then, as before, you can combine this with movies:

In [127]: movies_windic = movies.join(dummies.add_prefix(&#39;Genre_&#39;))

In [128]: movies_windic.iloc[0]
Out[128]: 
movie_id                                       1
title                           Toy Story (1995)
genres               Animation|Children&#39;s|Comedy
Genre_Animation                                1
Genre_Children&#39;s                               1
Genre_Comedy                                   1
Genre_Adventure                                0
Genre_Fantasy                                  0
Genre_Romance                                  0
Genre_Drama                                    0
                                ...             
Genre_Crime                                    0
Genre_Thriller                                 0
Genre_Horror                                   0
Genre_Sci-Fi                                   0
Genre_Documentary                              0
Genre_War                                      0
Genre_Musical                                  0
Genre_Mystery                                  0
Genre_Film-Noir                                0
Genre_Western                                  0
Name: 0, Length: 21, dtype: object

For  much  larger  data,  this  method  of  constructing  indicator  vari
ables  with  multiple  membership  is  not  especially  speedy.  It  would
be  better  to  write  a  lower-level  function  that  writes  directly  to  a
NumPy array, and then wrap the result in a DataFrame.

A useful recipe for statistical applications is to combine get_dummies with a discreti
zation function like cut:

210 

| 

Chapter 7: Data Cleaning and Preparation

In [129]: np.random.seed(12345)

In [130]: values = np.random.rand(10)

In [131]: values
Out[131]: 
array([ 0.9296,  0.3164,  0.1839,  0.2046,  0.5677,  0.5955,  0.9645,
        0.6532,  0.7489,  0.6536])

In [132]: bins = [0, 0.2, 0.4, 0.6, 0.8, 1]

In [133]: pd.get_dummies(pd.cut(values, bins))
Out[133]: 
   (0.0, 0.2]  (0.2, 0.4]  (0.4, 0.6]  (0.6, 0.8]  (0.8, 1.0]
0           0           0           0           0           1
1           0           1           0           0           0
2           1           0           0           0           0
3           0           1           0           0           0
4           0           0           1           0           0
5           0           0           1           0           0
6           0           0           0           0           1
7           0           0           0           1           0
8           0           0           0           1           0
9           0           0           0           1           0

We set the random seed with numpy.random.seed to make the example deterministic.
We will look again at pandas.get_dummies later in the book.

7.3 String Manipulation
Python  has  long  been  a  popular  raw  data  manipulation  language  in  part  due  to  its
ease of use for string and text processing. Most text operations are made simple with
the  string  objects  built-in  methods.  For  more  complex  pattern  matching  and  text
manipulations,  regular  expressions  may  be  needed.  pandas  adds  to  the  mix  by  ena
bling you to apply string and regular expressions concisely on whole arrays of data,
additionally handling the annoyance of missing data.

String Object Methods
In many string munging and scripting applications, built-in string methods are suffi
cient.  As  an  example,  a  comma-separated  string  can  be  broken  into  pieces  with
split:

In [134]: val = &#39;a,b,  guido&#39;

In [135]: val.split(&#39;,&#39;)
Out[135]: [&#39;a&#39;, &#39;b&#39;, &#39;  guido&#39;]

split is often combined with strip to trim whitespace (including line breaks):

7.3 String Manipulation 

| 

211

In [136]: pieces = [x.strip() for x in val.split(&#39;,&#39;)]

In [137]: pieces
Out[137]: [&#39;a&#39;, &#39;b&#39;, &#39;guido&#39;]

These  substrings  could  be  concatenated  together  with  a  two-colon  delimiter  using
addition:

In [138]: first, second, third = pieces

In [139]: first + &#39;::&#39; + second + &#39;::&#39; + third
Out[139]: &#39;a::b::guido&#39;

But this isnt a practical generic method. A faster and more Pythonic way is to pass a
list or tuple to the join method on the string &#39;::&#39;:

In [140]: &#39;::&#39;.join(pieces)
Out[140]: &#39;a::b::guido&#39;

Other methods are concerned with locating substrings. Using Pythons in keyword is
the best way to detect a substring, though index and find can also be used:

In [141]: &#39;guido&#39; in val
Out[141]: True

In [142]: val.index(&#39;,&#39;)
Out[142]: 1

In [143]: val.find(&#39;:&#39;)
Out[143]: -1

Note the difference between find and index is that index raises an exception if the
string isnt found (versus returning 1):

In [144]: val.index(&#39;:&#39;)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-144-280f8b2856ce&gt; in &lt;module&gt;()
----&gt; 1 val.index(&#39;:&#39;)
ValueError: substring not found

Relatedly, count returns the number of occurrences of a particular substring:

In [145]: val.count(&#39;,&#39;)
Out[145]: 2

replace will substitute occurrences of one pattern for another. It is commonly used
to delete patterns, too, by passing an empty string:

In [146]: val.replace(&#39;,&#39;, &#39;::&#39;)
Out[146]: &#39;a::b::  guido&#39;

In [147]: val.replace(&#39;,&#39;, &#39;&#39;)
Out[147]: &#39;ab  guido&#39;

212 

| 

Chapter 7: Data Cleaning and Preparation

See Table 7-3 for a listing of some of Pythons string methods.

Regular expressions can also be used with many of these operations, as youll see.

Table 7-3. Python built-in string methods

Argument
count

endswith

startswith

join

index

find

rfind

replace

strip, 
rstrip, 
lstrip

split

lower

upper

casefold

ljust, 
rjust

Description
Return the number of non-overlapping occurrences of substring in the string.
Returns True if string ends with suffix.
Returns True if string starts with prefix.
Use string as delimiter for concatenating a sequence of other strings.
Return position of first character in substring if found in the string; raises ValueError if not found.
Return position of first character of first occurrence of substring in the string; like index, but returns 1
if not found.
Return position of first character of last occurrence of substring in the string; returns 1 if not found.
Replace occurrences of string with another string.
Trim whitespace, including newlines; equivalent to x.strip() (and rstrip, lstrip, respectively)
for each element.

Break string into list of substrings using passed delimiter.
Convert alphabet characters to lowercase.
Convert alphabet characters to uppercase.
Convert characters to lowercase, and convert any region-specific variable character combinations to a
common comparable form.
Left justify or right justify, respectively; pad opposite side of string with spaces (or some other fill
character) to return a string with a minimum width.

Regular Expressions
Regular expressions provide a flexible way to search or match (often more complex)
string  patterns  in  text.  A  single  expression,  commonly  called  a  regex,  is  a  string
formed according to the regular expression language. Pythons built-in re module is
responsible for applying regular expressions to strings; Ill give a number of examples
of its use here.

The art of writing regular expressions could be a chapter of its own
and thus is outside the books scope. There are many excellent tuto
rials and references available on the internet and in other books.

The  re  module  functions  fall  into  three  categories:  pattern  matching,  substitution,
and splitting. Naturally these are all related; a regex describes a pattern to locate in the
text,  which  can  then  be  used  for  many  purposes.  Lets  look  at  a  simple  example:

7.3 String Manipulation 

| 

213

suppose we wanted to split a string with a variable number of whitespace characters
(tabs, spaces, and newlines). The regex describing one or more whitespace characters
is \s+:

In [148]: import re

In [149]: text = &#34;foo    bar\t baz  \tqux&#34;

In [150]: re.split(&#39;\s+&#39;, text)
Out[150]: [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;qux&#39;]

When you call re.split(&#39;\s+&#39;, text), the regular expression is first compiled, and
then its split method is called on the passed text. You can compile the regex yourself 
with re.compile, forming a reusable regex object:

In [151]: regex = re.compile(&#39;\s+&#39;)

In [152]: regex.split(text)
Out[152]: [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;qux&#39;]

If, instead, you wanted to get a list of all patterns matching the regex, you can use the
findall method:

In [153]: regex.findall(text)
Out[153]: [&#39;    &#39;, &#39;\t &#39;, &#39;  \t&#39;]

To avoid unwanted escaping with \ in a regular expression, use raw
string literals like r&#39;C:\x&#39; instead of the equivalent &#39;C:\\x&#39;.

Creating  a  regex  object  with  re.compile  is  highly  recommended  if  you  intend  to
apply the same expression to many strings; doing so will save CPU cycles.

match and search are closely related to findall. While findall returns all matches
in a string, search returns only the first match. More rigidly, match only matches at
the beginning of the string. As a less trivial example, lets consider a block of text and
a regular expression capable of identifying most email addresses:

text = &#34;&#34;&#34;Dave dave@google.com
Steve steve@gmail.com
Rob rob@gmail.com
Ryan ryan@yahoo.com
&#34;&#34;&#34;
pattern = r&#39;[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}&#39;

# re.IGNORECASE makes the regex case-insensitive
regex = re.compile(pattern, flags=re.IGNORECASE)

Using findall on the text produces a list of the email addresses:

214 

| 

Chapter 7: Data Cleaning and Preparation

In [155]: regex.findall(text)
Out[155]: 
[&#39;dave@google.com&#39;,
 &#39;steve@gmail.com&#39;,
 &#39;rob@gmail.com&#39;,
 &#39;ryan@yahoo.com&#39;]

search returns a special match object for the first email address in the text. For the
preceding  regex,  the  match  object  can  only  tell  us  the  start  and  end  position  of  the
pattern in the string:

In [156]: m = regex.search(text)

In [157]: m
Out[157]: &lt;_sre.SRE_Match object; span=(5, 20), match=&#39;dave@google.com&#39;&gt;

In [158]: text[m.start():m.end()]
Out[158]: &#39;dave@google.com&#39;

regex.match returns None, as it only will match if the pattern occurs at the start of the
string:

In [159]: print(regex.match(text))
None

Relatedly, sub will return a new string with occurrences of the pattern replaced by the
a new string:

In [160]: print(regex.sub(&#39;REDACTED&#39;, text))
Dave REDACTED
Steve REDACTED
Rob REDACTED
Ryan REDACTED

Suppose  you  wanted  to  find  email  addresses  and  simultaneously  segment  each
address  into  its  three  components:  username,  domain  name,  and  domain  suffix.  To
do this, put parentheses around the parts of the pattern to segment:

In [161]: pattern = r&#39;([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\.([A-Z]{2,4})&#39;

In [162]: regex = re.compile(pattern, flags=re.IGNORECASE)

A match object produced by this modified regex returns a tuple of the pattern com
ponents with its groups method:

In [163]: m = regex.match(&#39;wesm@bright.net&#39;)

In [164]: m.groups()
Out[164]: (&#39;wesm&#39;, &#39;bright&#39;, &#39;net&#39;)

findall returns a list of tuples when the pattern has groups:

In [165]: regex.findall(text)
Out[165]: 

7.3 String Manipulation 

| 

215

[(&#39;dave&#39;, &#39;google&#39;, &#39;com&#39;),
 (&#39;steve&#39;, &#39;gmail&#39;, &#39;com&#39;),
 (&#39;rob&#39;, &#39;gmail&#39;, &#39;com&#39;),
 (&#39;ryan&#39;, &#39;yahoo&#39;, &#39;com&#39;)]

sub also has access to groups in each match using special symbols like \1 and \2. The
symbol \1 corresponds to the first matched group, \2 corresponds to the second, and
so forth:

In [166]: print(regex.sub(r&#39;Username: \1, Domain: \2, Suffix: \3&#39;, text))
Dave Username: dave, Domain: google, Suffix: com
Steve Username: steve, Domain: gmail, Suffix: com
Rob Username: rob, Domain: gmail, Suffix: com
Ryan Username: ryan, Domain: yahoo, Suffix: com

There is much more to regular expressions in Python, most of which is outside the
books scope. Table 7-4 provides a brief summary.

Table 7-4. Regular expression methods

Argument
findall

finditer

match

search

Description
Return all non-overlapping matching patterns in a string as a list
Like findall, but returns an iterator
Match pattern at start of string and optionally segment pattern components into groups; if the pattern
matches, returns a match object, and otherwise None
Scan string for match to pattern; returning a match object if so; unlike match, the match can be anywhere in
the string as opposed to only at the beginning
Break string into pieces at each occurrence of pattern

split
sub, subn Replace all (sub) or first n occurrences (subn) of pattern in string with replacement expression; use symbols

\1, \2, ... to refer to match group elements in the replacement string

Vectorized String Functions in pandas
Cleaning up a messy dataset for analysis often requires a lot of string munging and
regularization.  To  complicate  matters,  a  column  containing  strings  will  sometimes
have missing data:

In [167]: data = {&#39;Dave&#39;: &#39;dave@google.com&#39;, &#39;Steve&#39;: &#39;steve@gmail.com&#39;,
   .....:         &#39;Rob&#39;: &#39;rob@gmail.com&#39;, &#39;Wes&#39;: np.nan}

In [168]: data = pd.Series(data)

In [169]: data
Out[169]: 
Dave     dave@google.com
Rob        rob@gmail.com
Steve    steve@gmail.com
Wes                  NaN
dtype: object

216 

| 

Chapter 7: Data Cleaning and Preparation

In [170]: data.isnull()
Out[170]: 
Dave     False
Rob      False
Steve    False
Wes       True
dtype: bool

You  can  apply  string  and  regular  expression  methods  can  be  applied  (passing  a
lambda  or  other  function)  to  each  value  using  data.map,  but  it  will  fail  on  the  NA
(null) values. To cope with this, Series has array-oriented methods for string opera
tions that skip NA values. These are accessed through Seriess str attribute; for exam
ple, we could check whether each email address has &#39;gmail&#39; in it with str.contains:

In [171]: data.str.contains(&#39;gmail&#39;)
Out[171]: 
Dave     False
Rob       True
Steve     True
Wes        NaN
dtype: object

Regular expressions can be used, too, along with any re options like IGNORECASE:

In [172]: pattern
Out[172]: &#39;([A-Z0-9._%+-]+)@([A-Z0-9.-]+)\\.([A-Z]{2,4})&#39;

In [173]: data.str.findall(pattern, flags=re.IGNORECASE)
Out[173]: 
Dave     [(dave, google, com)]
Rob        [(rob, gmail, com)]
Steve    [(steve, gmail, com)]
Wes                        NaN
dtype: object

There are a couple of ways to do vectorized element retrieval. Either use str.get or
index into the str attribute:

In [174]: matches = data.str.match(pattern, flags=re.IGNORECASE)

In [175]: matches
Out[175]: 
Dave     True
Rob      True
Steve    True
Wes       NaN
dtype: object

To  access  elements  in  the  embedded  lists,  we  can  pass  an  index  to  either  of  these
functions:

In [176]: matches.str.get(1)
Out[176]: 

7.3 String Manipulation 

| 

217

Dave    NaN
Rob     NaN
Steve   NaN
Wes     NaN
dtype: float64

In [177]: matches.str[0]
Out[177]: 
Dave    NaN
Rob     NaN
Steve   NaN
Wes     NaN
dtype: float64

You can similarly slice strings using this syntax:

In [178]: data.str[:5]
Out[178]: 
Dave     dave@
Rob      rob@g
Steve    steve
Wes        NaN
dtype: object

See Table 7-5 for more pandas string methods.

Table 7-5. Partial listing of vectorized string methods

Method
cat

contains

count

extract

endswith

startswith

findall

get

isalnum

isalpha

isdecimal

isdigit

islower

isnumeric

isupper

join

Description
Concatenate strings element-wise with optional delimiter
Return boolean array if each string contains pattern/regex
Count occurrences of pattern

Use a regular expression with groups to extract one or more strings from a Series of strings; the result
will be a DataFrame with one column per group
Equivalent to x.endswith(pattern) for each element
Equivalent to x.startswith(pattern) for each element
Compute list of all occurrences of pattern/regex for each string
Index into each element (retrieve i-th element)
Equivalent to built-in str.alnum
Equivalent to built-in str.isalpha
Equivalent to built-in str.isdecimal
Equivalent to built-in str.isdigit
Equivalent to built-in str.islower
Equivalent to built-in str.isnumeric
Equivalent to built-in str.isupper
Join strings in each element of the Series with passed separator
Compute length of each string

len
lower, upper Convert cases; equivalent to x.lower() or x.upper() for each element

218 

| 

Chapter 7: Data Cleaning and Preparation

Method
match

pad

center

repeat

replace

slice

split

strip

rstrip

lstrip

Description
Use re.match with the passed regular expression on each element, returning matched groups as list
Add whitespace to left, right, or both sides of strings
Equivalent to pad(side=&#39;both&#39;)
Duplicate values (e.g., s.str.repeat(3) is equivalent to x * 3 for each string)
Replace occurrences of pattern/regex with some other string
Slice each string in the Series
Split strings on delimiter or regular expression
Trim whitespace from both sides, including newlines
Trim whitespace on right side
Trim whitespace on left side

7.4 Conclusion
Effective  data  preparation  can  significantly  improve  productive  by  enabling  you  to
spend more time analyzing data and less time getting it ready for analysis. We have
explored a number of tools in this chapter, but the coverage here is by no means com
prehensive. In the next chapter, we will explore pandass joining and grouping func
tionality.

7.4 Conclusion 

| 

219

CHAPTER 8
Data Wrangling: Join, Combine,
and Reshape

In many applications, data may be spread across a number of files or databases or be
arranged in a form that is not easy to analyze. This chapter focuses on tools to help
combine, join, and rearrange data.

First, I introduce the concept of hierarchical indexing in pandas, which is used exten
sively in some of these operations. I then dig into the particular data manipulations.
You can see various applied usages of these tools in Chapter 14.

8.1 Hierarchical Indexing
Hierarchical indexing is an important feature of pandas that enables you to have mul
tiple (two or more) index levels on an axis. Somewhat abstractly, it provides a way for
you  to  work  with  higher  dimensional  data  in  a  lower  dimensional  form.  Lets  start
with a simple example; create a Series with a list of lists (or arrays) as the index:

In [9]: data = pd.Series(np.random.randn(9),
   ...:                  index=[[&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;c&#39;, &#39;c&#39;, &#39;d&#39;, &#39;d&#39;],
   ...:                         [1, 2, 3, 1, 3, 1, 2, 2, 3]])

In [10]: data
Out[10]: 
a  1   -0.204708
   2    0.478943
   3   -0.519439
b  1   -0.555730
   3    1.965781
c  1    1.393406
   2    0.092908
d  2    0.281746

221

   3    0.769023
dtype: float64

What youre seeing is a prettified view of a Series with a MultiIndex as its index. The
gaps in the index display mean use the label directly above:

In [11]: data.index
Out[11]: 
MultiIndex(levels=[[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], [1, 2, 3]],
           labels=[[0, 0, 0, 1, 1, 2, 2, 3, 3], [0, 1, 2, 0, 2, 0, 1, 1, 2]])

With a hierarchically indexed object, so-called partial indexing is possible, enabling
you to concisely select subsets of the data:

In [12]: data[&#39;b&#39;]
Out[12]: 
1   -0.555730
3    1.965781
dtype: float64

In [13]: data[&#39;b&#39;:&#39;c&#39;]
Out[13]: 
b  1   -0.555730
   3    1.965781
c  1    1.393406
   2    0.092908
dtype: float64

In [14]: data.loc[[&#39;b&#39;, &#39;d&#39;]]
Out[14]: 
b  1   -0.555730
   3    1.965781
d  2    0.281746
   3    0.769023
dtype: float64

Selection is even possible from an inner level:

In [15]: data.loc[:, 2]
Out[15]: 
a    0.478943
c    0.092908
d    0.281746
dtype: float64

Hierarchical  indexing  plays  an  important  role  in  reshaping  data  and  group-based
operations like forming a pivot table. For example, you could rearrange the data into
a DataFrame using its unstack method:

In [16]: data.unstack()
Out[16]: 
          1         2         3
a -0.204708  0.478943 -0.519439
b -0.555730       NaN  1.965781

222 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

c  1.393406  0.092908       NaN
d       NaN  0.281746  0.769023

The inverse operation of unstack is stack:

In [17]: data.unstack().stack()
Out[17]: 
a  1   -0.204708
   2    0.478943
   3   -0.519439
b  1   -0.555730
   3    1.965781
c  1    1.393406
   2    0.092908
d  2    0.281746
   3    0.769023
dtype: float64

stack and unstack will be explored in more detail later in this chapter.

With a DataFrame, either axis can have a hierarchical index:

In [18]: frame = pd.DataFrame(np.arange(12).reshape((4, 3)),
   ....:                      index=[[&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;], [1, 2, 1, 2]],
   ....:                      columns=[[&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Colorado&#39;],
   ....:                               [&#39;Green&#39;, &#39;Red&#39;, &#39;Green&#39;]])

In [19]: frame
Out[19]: 
     Ohio     Colorado
    Green Red    Green
a 1     0   1        2
  2     3   4        5
b 1     6   7        8
  2     9  10       11

The hierarchical levels can have names (as strings or any Python objects). If so, these
will show up in the console output:

In [20]: frame.index.names = [&#39;key1&#39;, &#39;key2&#39;]

In [21]: frame.columns.names = [&#39;state&#39;, &#39;color&#39;]

In [22]: frame
Out[22]: 
state      Ohio     Colorado
color     Green Red    Green
key1 key2                   
a    1        0   1        2
     2        3   4        5
b    1        6   7        8
     2        9  10       11

8.1 Hierarchical Indexing 

| 

223

Be  careful  to  distinguish  the  index  names  &#39;state&#39;  and  &#39;color&#39;
from the row labels.

With partial column indexing you can similarly select groups of columns:

In [23]: frame[&#39;Ohio&#39;]
Out[23]: 
color      Green  Red
key1 key2            
a    1         0    1
     2         3    4
b    1         6    7
     2         9   10

A MultiIndex can be created by itself and then reused; the columns in the preceding
DataFrame with level names could be created like this:

MultiIndex.from_arrays([[&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Colorado&#39;], [&#39;Green&#39;, &#39;Red&#39;, &#39;Green&#39;]],
                       names=[&#39;state&#39;, &#39;color&#39;])

Reordering and Sorting Levels
At times you will need to rearrange the order of the levels on an axis or sort the data
by the values in one specific level. The swaplevel takes two level numbers or names
and  returns  a  new  object  with  the  levels  interchanged  (but  the  data  is  otherwise
unaltered):

In [24]: frame.swaplevel(&#39;key1&#39;, &#39;key2&#39;)
Out[24]: 
state      Ohio     Colorado
color     Green Red    Green
key2 key1                   
1    a        0   1        2
2    a        3   4        5
1    b        6   7        8
2    b        9  10       11

sort_index, on the other hand, sorts the data using only the values in a single level.
When swapping levels, its not uncommon to also use sort_index so that the result is
lexicographically sorted by the indicated level:

In [25]: frame.sort_index(level=1)
Out[25]: 
state      Ohio     Colorado
color     Green Red    Green
key1 key2                   
a    1        0   1        2
b    1        6   7        8
a    2        3   4        5

224 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

b    2        9  10       11

In [26]: frame.swaplevel(0, 1).sort_index(level=0)
Out[26]: 
state      Ohio     Colorado
color     Green Red    Green
key2 key1                   
1    a        0   1        2
     b        6   7        8
2    a        3   4        5
     b        9  10       11

Data  selection  performance  is  much  better  on  hierarchically
indexed objects if the index is lexicographically sorted starting with
the 
calling
sort_index(level=0) or sort_index().

levelthat 

outermost 

result 

the 

is, 

of 

Summary Statistics by Level
Many  descriptive  and  summary  statistics  on  DataFrame  and  Series  have  a  level
option  in  which  you  can  specify  the  level  you  want  to  aggregate  by  on  a  particular
axis. Consider the above DataFrame; we can aggregate by level on either the rows or
columns like so:

In [27]: frame.sum(level=&#39;key2&#39;)
Out[27]: 
state  Ohio     Colorado
color Green Red    Green
key2                    
1         6   8       10
2        12  14       16

In [28]: frame.sum(level=&#39;color&#39;, axis=1)
Out[28]: 
color      Green  Red
key1 key2            
a    1         2    1
     2         8    4
b    1        14    7
     2        20   10

Under the hood, this utilizes pandass groupby machinery, which will be discussed in
more detail later in the book.

Indexing with a DataFrames columns
Its  not  unusual  to  want  to  use  one  or  more  columns  from  a  DataFrame  as  the  row
index; alternatively, you may wish to move the row index into the DataFrames col
umns. Heres an example DataFrame:

8.1 Hierarchical Indexing 

| 

225

In [29]: frame = pd.DataFrame({&#39;a&#39;: range(7), &#39;b&#39;: range(7, 0, -1),
   ....:                       &#39;c&#39;: [&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;,
   ....:                             &#39;two&#39;, &#39;two&#39;],
   ....:                       &#39;d&#39;: [0, 1, 2, 0, 1, 2, 3]})

In [30]: frame
Out[30]: 
   a  b    c  d
0  0  7  one  0
1  1  6  one  1
2  2  5  one  2
3  3  4  two  0
4  4  3  two  1
5  5  2  two  2
6  6  1  two  3

DataFrames set_index function will create a new DataFrame using one or more of
its columns as the index:

In [31]: frame2 = frame.set_index([&#39;c&#39;, &#39;d&#39;])

In [32]: frame2
Out[32]: 
       a  b
c   d      
one 0  0  7
    1  1  6
    2  2  5
two 0  3  4
    1  4  3
    2  5  2
    3  6  1

By default the columns are removed from the DataFrame, though you can leave them
in:

In [33]: frame.set_index([&#39;c&#39;, &#39;d&#39;], drop=False)
Out[33]: 
       a  b    c  d
c   d              
one 0  0  7  one  0
    1  1  6  one  1
    2  2  5  one  2
two 0  3  4  two  0
    1  4  3  two  1
    2  5  2  two  2
    3  6  1  two  3

reset_index,  on  the  other  hand,  does  the  opposite  of  set_index;  the  hierarchical
index levels are moved into the columns:

226 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

In [34]: frame2.reset_index()
Out[34]: 
     c  d  a  b
0  one  0  0  7
1  one  1  1  6
2  one  2  2  5
3  two  0  3  4
4  two  1  4  3
5  two  2  5  2
6  two  3  6  1

8.2 Combining and Merging Datasets
Data contained in pandas objects can be combined together in a number of ways:

 pandas.merge  connects  rows  in  DataFrames  based  on  one  or  more  keys.  This
will  be  familiar  to  users  of  SQL  or  other  relational  databases,  as  it  implements
database join operations.

 pandas.concat concatenates or stacks together objects along an axis.
 The combine_first instance method enables splicing together overlapping data

to fill in missing values in one object with values from another.

I  will  address  each  of  these  and  give  a  number  of  examples.  Theyll  be  utilized  in
examples throughout the rest of the book.

Database-Style DataFrame Joins
Merge  or  join  operations  combine  datasets  by  linking  rows  using  one  or  more  keys.
These  operations  are  central  to  relational  databases  (e.g.,  SQL-based).  The  merge
function in pandas is the main entry point for using these algorithms on your data.

Lets start with a simple example:

In [35]: df1 = pd.DataFrame({&#39;key&#39;: [&#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;],
   ....:                     &#39;data1&#39;: range(7)})

In [36]: df2 = pd.DataFrame({&#39;key&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;d&#39;],
   ....:                     &#39;data2&#39;: range(3)})

In [37]: df1
Out[37]: 
   data1 key
0      0   b
1      1   b
2      2   a
3      3   c
4      4   a
5      5   a

8.2 Combining and Merging Datasets 

| 

227

6      6   b

In [38]: df2
Out[38]: 
   data2 key
0      0   a
1      1   b
2      2   d

This is an example of a many-to-one join; the data in df1 has multiple rows labeled a
and b, whereas df2 has only one row for each value in the key column. Calling merge
with these objects we obtain:

In [39]: pd.merge(df1, df2)
Out[39]: 
   data1 key  data2
0      0   b      1
1      1   b      1
2      6   b      1
3      2   a      0
4      4   a      0
5      5   a      0

Note that I didnt specify which column to join on. If that information is not speci
fied,  merge  uses  the  overlapping  column  names  as  the  keys.  Its  a  good  practice  to
specify explicitly, though:

In [40]: pd.merge(df1, df2, on=&#39;key&#39;)
Out[40]: 
   data1 key  data2
0      0   b      1
1      1   b      1
2      6   b      1
3      2   a      0
4      4   a      0
5      5   a      0

If the column names are different in each object, you can specify them separately:

In [41]: df3 = pd.DataFrame({&#39;lkey&#39;: [&#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;],
   ....:                     &#39;data1&#39;: range(7)})

In [42]: df4 = pd.DataFrame({&#39;rkey&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;d&#39;],
   ....:                     &#39;data2&#39;: range(3)})

In [43]: pd.merge(df3, df4, left_on=&#39;lkey&#39;, right_on=&#39;rkey&#39;)
Out[43]: 
   data1 lkey  data2 rkey
0      0    b      1    b
1      1    b      1    b
2      6    b      1    b
3      2    a      0    a

228 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

4      4    a      0    a
5      5    a      0    a

You may notice that the &#39;c&#39; and &#39;d&#39; values and associated data are missing from the
result. By default merge does an &#39;inner&#39; join; the keys in the result are the intersec
tion,  or  the  common  set  found  in  both  tables.  Other  possible  options  are  &#39;left&#39;,
&#39;right&#39;,  and  &#39;outer&#39;.  The  outer  join  takes  the  union  of  the  keys,  combining  the
effect of applying both left and right joins:

In [44]: pd.merge(df1, df2, how=&#39;outer&#39;)
Out[44]: 
   data1 key  data2
0    0.0   b    1.0
1    1.0   b    1.0
2    6.0   b    1.0
3    2.0   a    0.0
4    4.0   a    0.0
5    5.0   a    0.0
6    3.0   c    NaN
7    NaN   d    2.0

See Table 8-1 for a summary of the options for how.

Table 8-1. Different join types with how argument

Option
&#39;inner&#39;

&#39;left&#39;

&#39;right&#39;

Behavior
Use only the key combinations observed in both tables
Use all key combinations found in the left table
Use all key combinations found in the right table

&#39;output&#39; Use all key combinations observed in both tables together

Many-to-many merges have well-defined, though not necessarily intuitive, behavior.
Heres an example:

In [45]: df1 = pd.DataFrame({&#39;key&#39;: [&#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;c&#39;, &#39;a&#39;, &#39;b&#39;],
   ....:                     &#39;data1&#39;: range(6)})

In [46]: df2 = pd.DataFrame({&#39;key&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;, &#39;b&#39;, &#39;d&#39;],
   ....:                     &#39;data2&#39;: range(5)})

In [47]: df1
Out[47]: 
   data1 key
0      0   b
1      1   b
2      2   a
3      3   c
4      4   a
5      5   b

8.2 Combining and Merging Datasets 

| 

229

In [48]: df2
Out[48]: 
   data2 key
0      0   a
1      1   b
2      2   a
3      3   b
4      4   d

In [49]: pd.merge(df1, df2, on=&#39;key&#39;, how=&#39;left&#39;)
Out[49]: 
    data1 key  data2
0       0   b    1.0
1       0   b    3.0
2       1   b    1.0
3       1   b    3.0
4       2   a    0.0
5       2   a    2.0
6       3   c    NaN
7       4   a    0.0
8       4   a    2.0
9       5   b    1.0
10      5   b    3.0

Many-to-many joins form the Cartesian product of the rows. Since there were three
&#39;b&#39; rows in the left DataFrame and two in the right one, there are six &#39;b&#39; rows in the
result. The join method only affects the distinct key values appearing in the result:

In [50]: pd.merge(df1, df2, how=&#39;inner&#39;)
Out[50]: 
   data1 key  data2
0      0   b      1
1      0   b      3
2      1   b      1
3      1   b      3
4      5   b      1
5      5   b      3
6      2   a      0
7      2   a      2
8      4   a      0
9      4   a      2

To merge with multiple keys, pass a list of column names:

In [51]: left = pd.DataFrame({&#39;key1&#39;: [&#39;foo&#39;, &#39;foo&#39;, &#39;bar&#39;],
   ....:                      &#39;key2&#39;: [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;],
   ....:                      &#39;lval&#39;: [1, 2, 3]})

In [52]: right = pd.DataFrame({&#39;key1&#39;: [&#39;foo&#39;, &#39;foo&#39;, &#39;bar&#39;, &#39;bar&#39;],
   ....:                       &#39;key2&#39;: [&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;],
   ....:                       &#39;rval&#39;: [4, 5, 6, 7]})

In [53]: pd.merge(left, right, on=[&#39;key1&#39;, &#39;key2&#39;], how=&#39;outer&#39;)

230 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

Out[53]: 
  key1 key2  lval  rval
0  foo  one   1.0   4.0
1  foo  one   1.0   5.0
2  foo  two   2.0   NaN
3  bar  one   3.0   6.0
4  bar  two   NaN   7.0

To  determine  which  key  combinations  will  appear  in  the  result  depending  on  the
choice of merge method, think of the multiple keys as forming an array of tuples to
be used as a single join key (even though its not actually implemented that way).

When  youre  joining  columns-on-columns,  the  indexes  on  the
passed DataFrame objects are discarded.

A last issue to consider in merge operations is the treatment of overlapping column
names.  While  you  can  address  the  overlap  manually  (see  the  earlier  section  on
renaming axis labels), merge has a suffixes option for specifying strings to append
to overlapping names in the left and right DataFrame objects:

In [54]: pd.merge(left, right, on=&#39;key1&#39;)
Out[54]: 
  key1 key2_x  lval key2_y  rval
0  foo    one     1    one     4
1  foo    one     1    one     5
2  foo    two     2    one     4
3  foo    two     2    one     5
4  bar    one     3    one     6
5  bar    one     3    two     7

In [55]: pd.merge(left, right, on=&#39;key1&#39;, suffixes=(&#39;_left&#39;, &#39;_right&#39;))
Out[55]: 
  key1 key2_left  lval key2_right  rval
0  foo       one     1        one     4
1  foo       one     1        one     5
2  foo       two     2        one     4
3  foo       two     2        one     5
4  bar       one     3        one     6
5  bar       one     3        two     7

See Table 8-2 for an argument reference on merge. Joining using the DataFrames row
index is the subject of the next section.

8.2 Combining and Merging Datasets 

| 

231

Table 8-2. merge function arguments

Argument
left

right

how

on

left_on

right_on

suffixes

copy

indicator

Description
DataFrame to be merged on the left side.
DataFrame to be merged on the right side.
One of &#39;inner&#39;, &#39;outer&#39;, &#39;left&#39;, or &#39;right&#39;; defaults to &#39;inner&#39;.
Column names to join on. Must be found in both DataFrame objects. If not specified and no other join keys
given, will use the intersection of the column names in left and right as the join keys.
Columns in left DataFrame to use as join keys.
Analogous to left_on for left DataFrame.
Use row index in left as its join key (or keys, if a MultiIndex).

Sort merged data lexicographically by join keys; True by default (disable to get better performance in
some cases on large datasets).
Tuple of string values to append to column names in case of overlap; defaults to (&#39;_x&#39;, &#39;_y&#39;) (e.g., if
&#39;data&#39; in both DataFrame objects, would appear as &#39;data_x&#39; and &#39;data_y&#39; in result).
If False, avoid copying data into resulting data structure in some exceptional cases; by default always
copies.
Adds a special column _merge that indicates the source of each row; values will be &#39;left_only&#39;,
&#39;right_only&#39;, or &#39;both&#39; based on the origin of the joined data in each row.

left_index
right_index Analogous to left_index.
sort

Merging on Index
In  some  cases,  the  merge  key(s)  in  a  DataFrame  will  be  found  in  its  index.  In  this
case, you can pass left_index=True or right_index=True (or both) to indicate that
the index should be used as the merge key:

In [56]: left1 = pd.DataFrame({&#39;key&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;],
   ....:                       &#39;value&#39;: range(6)})

In [57]: right1 = pd.DataFrame({&#39;group_val&#39;: [3.5, 7]}, index=[&#39;a&#39;, &#39;b&#39;])

In [58]: left1
Out[58]: 
  key  value
0   a      0
1   b      1
2   a      2
3   a      3
4   b      4
5   c      5

In [59]: right1
Out[59]: 
   group_val
a        3.5
b        7.0

232 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

In [60]: pd.merge(left1, right1, left_on=&#39;key&#39;, right_index=True)
Out[60]: 
  key  value  group_val
0   a      0        3.5
2   a      2        3.5
3   a      3        3.5
1   b      1        7.0
4   b      4        7.0

Since the default merge method is to intersect the join keys, you can instead form the
union of them with an outer join:

In [61]: pd.merge(left1, right1, left_on=&#39;key&#39;, right_index=True, how=&#39;outer&#39;)
Out[61]: 
  key  value  group_val
0   a      0        3.5
2   a      2        3.5
3   a      3        3.5
1   b      1        7.0
4   b      4        7.0
5   c      5        NaN

With hierarchically indexed data, things are more complicated, as joining on index is
implicitly a multiple-key merge:

In [62]: lefth = pd.DataFrame({&#39;key1&#39;: [&#39;Ohio&#39;, &#39;Ohio&#39;, &#39;Ohio&#39;,
   ....:                                &#39;Nevada&#39;, &#39;Nevada&#39;],
   ....:                       &#39;key2&#39;: [2000, 2001, 2002, 2001, 2002],
   ....:                       &#39;data&#39;: np.arange(5.)})

In [63]: righth = pd.DataFrame(np.arange(12).reshape((6, 2)),
   ....:                       index=[[&#39;Nevada&#39;, &#39;Nevada&#39;, &#39;Ohio&#39;, &#39;Ohio&#39;,
   ....:                               &#39;Ohio&#39;, &#39;Ohio&#39;],
   ....:                              [2001, 2000, 2000, 2000, 2001, 2002]],
   ....:                       columns=[&#39;event1&#39;, &#39;event2&#39;])

In [64]: lefth
Out[64]: 
   data    key1  key2
0   0.0    Ohio  2000
1   1.0    Ohio  2001
2   2.0    Ohio  2002
3   3.0  Nevada  2001
4   4.0  Nevada  2002

In [65]: righth
Out[65]: 
             event1  event2
Nevada 2001       0       1
       2000       2       3
Ohio   2000       4       5
       2000       6       7

8.2 Combining and Merging Datasets 

| 

233

       2001       8       9
       2002      10      11

In  this  case,  you  have  to  indicate  multiple  columns  to  merge  on  as  a  list  (note  the
handling of duplicate index values with how=&#39;outer&#39;):

In [66]: pd.merge(lefth, righth, left_on=[&#39;key1&#39;, &#39;key2&#39;], right_index=True)
Out[66]: 
   data    key1  key2  event1  event2
0   0.0    Ohio  2000       4       5
0   0.0    Ohio  2000       6       7
1   1.0    Ohio  2001       8       9
2   2.0    Ohio  2002      10      11
3   3.0  Nevada  2001       0       1

In [67]: pd.merge(lefth, righth, left_on=[&#39;key1&#39;, &#39;key2&#39;],
   ....:          right_index=True, how=&#39;outer&#39;)
Out[67]: 
   data    key1  key2  event1  event2
0   0.0    Ohio  2000     4.0     5.0
0   0.0    Ohio  2000     6.0     7.0
1   1.0    Ohio  2001     8.0     9.0
2   2.0    Ohio  2002    10.0    11.0
3   3.0  Nevada  2001     0.0     1.0
4   4.0  Nevada  2002     NaN     NaN
4   NaN  Nevada  2000     2.0     3.0

Using the indexes of both sides of the merge is also possible:

In [68]: left2 = pd.DataFrame([[1., 2.], [3., 4.], [5., 6.]],
   ....:                      index=[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;],
   ....:                      columns=[&#39;Ohio&#39;, &#39;Nevada&#39;])

In [69]: right2 = pd.DataFrame([[7., 8.], [9., 10.], [11., 12.], [13, 14]],
   ....:                       index=[&#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;],
   ....:                       columns=[&#39;Missouri&#39;, &#39;Alabama&#39;])

In [70]: left2
Out[70]: 
   Ohio  Nevada
a   1.0     2.0
c   3.0     4.0
e   5.0     6.0

In [71]: right2
Out[71]: 
   Missouri  Alabama
b       7.0      8.0
c       9.0     10.0
d      11.0     12.0
e      13.0     14.0

In [72]: pd.merge(left2, right2, how=&#39;outer&#39;, left_index=True, right_index=True)

234 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

Out[72]: 
   Ohio  Nevada  Missouri  Alabama
a   1.0     2.0       NaN      NaN
b   NaN     NaN       7.0      8.0
c   3.0     4.0       9.0     10.0
d   NaN     NaN      11.0     12.0
e   5.0     6.0      13.0     14.0

DataFrame has a convenient join instance for merging by index. It can also be used
to combine together many DataFrame objects having the same or similar indexes but
non-overlapping columns. In the prior example, we could have written:

In [73]: left2.join(right2, how=&#39;outer&#39;)
Out[73]: 
   Ohio  Nevada  Missouri  Alabama
a   1.0     2.0       NaN      NaN
b   NaN     NaN       7.0      8.0
c   3.0     4.0       9.0     10.0
d   NaN     NaN      11.0     12.0
e   5.0     6.0      13.0     14.0

In  part  for  legacy  reasons  (i.e.,  much  earlier  versions  of  pandas),  DataFrames  join
method performs a left join on the join keys, exactly preserving the left frames row
index. It also supports joining the index of the passed DataFrame on one of the col
umns of the calling DataFrame:

In [74]: left1.join(right1, on=&#39;key&#39;)
Out[74]: 
  key  value  group_val
0   a      0        3.5
1   b      1        7.0
2   a      2        3.5
3   a      3        3.5
4   b      4        7.0
5   c      5        NaN

Lastly, for simple index-on-index merges, you can pass a list of DataFrames to join as
an  alternative  to  using  the  more  general  concat  function  described  in  the  next 
section:

In [75]: another = pd.DataFrame([[7., 8.], [9., 10.], [11., 12.], [16., 17.]],
   ....:                        index=[&#39;a&#39;, &#39;c&#39;, &#39;e&#39;, &#39;f&#39;],
   ....:                        columns=[&#39;New York&#39;, &#39;Oregon&#39;])

In [76]: another
Out[76]: 
   New York  Oregon
a       7.0     8.0
c       9.0    10.0
e      11.0    12.0
f      16.0    17.0

8.2 Combining and Merging Datasets 

| 

235

In [77]: left2.join([right2, another])
Out[77]: 
   Ohio  Nevada  Missouri  Alabama  New York  Oregon
a   1.0     2.0       NaN      NaN       7.0     8.0
c   3.0     4.0       9.0     10.0       9.0    10.0
e   5.0     6.0      13.0     14.0      11.0    12.0

In [78]: left2.join([right2, another], how=&#39;outer&#39;)
Out[78]: 
   Ohio  Nevada  Missouri  Alabama  New York  Oregon
a   1.0     2.0       NaN      NaN       7.0     8.0
b   NaN     NaN       7.0      8.0       NaN     NaN
c   3.0     4.0       9.0     10.0       9.0    10.0
d   NaN     NaN      11.0     12.0       NaN     NaN
e   5.0     6.0      13.0     14.0      11.0    12.0
f   NaN     NaN       NaN      NaN      16.0    17.0

Concatenating Along an Axis
Another kind of data combination operation is referred to interchangeably as concat
enation,  binding,  or  stacking.  NumPys  concatenate  function  can  do  this  with
NumPy arrays:

In [79]: arr = np.arange(12).reshape((3, 4))

In [80]: arr
Out[80]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])

In [81]: np.concatenate([arr, arr], axis=1)
Out[81]: 
array([[ 0,  1,  2,  3,  0,  1,  2,  3],
       [ 4,  5,  6,  7,  4,  5,  6,  7],
       [ 8,  9, 10, 11,  8,  9, 10, 11]])

In  the  context  of  pandas  objects  such  as  Series  and  DataFrame,  having  labeled  axes
enable you to further generalize array concatenation. In particular, you have a num
ber of additional things to think about:

 If  the  objects  are  indexed  differently  on  the  other  axes,  should  we  combine  the
distinct elements in these axes or use only the shared values (the intersection)?

 Do  the  concatenated  chunks  of  data  need  to  be  identifiable  in  the  resulting

object?

 Does the concatenation axis contain data that needs to be preserved? In many
cases,  the  default  integer  labels  in  a  DataFrame  are  best  discarded  during
concatenation.

236 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

The  concat  function  in  pandas  provides  a  consistent  way  to  address  each  of  these
concerns. Ill give a number of examples to illustrate how it works. Suppose we have
three Series with no index overlap:

In [82]: s1 = pd.Series([0, 1], index=[&#39;a&#39;, &#39;b&#39;])

In [83]: s2 = pd.Series([2, 3, 4], index=[&#39;c&#39;, &#39;d&#39;, &#39;e&#39;])

In [84]: s3 = pd.Series([5, 6], index=[&#39;f&#39;, &#39;g&#39;])

Calling concat with these objects in a list glues together the values and indexes:

In [85]: pd.concat([s1, s2, s3])
Out[85]: 
a    0
b    1
c    2
d    3
e    4
f    5
g    6
dtype: int64

By default concat works along axis=0, producing another Series. If you pass axis=1,
the result will instead be a DataFrame (axis=1 is the columns):

In [86]: pd.concat([s1, s2, s3], axis=1)
Out[86]: 
     0    1    2
a  0.0  NaN  NaN
b  1.0  NaN  NaN
c  NaN  2.0  NaN
d  NaN  3.0  NaN
e  NaN  4.0  NaN
f  NaN  NaN  5.0
g  NaN  NaN  6.0

In this case there is no overlap on the other axis, which as you can see is the sorted
union  (the  &#39;outer&#39;  join)  of  the  indexes.  You  can  instead  intersect  them  by  passing
join=&#39;inner&#39;:

In [87]: s4 = pd.concat([s1, s3])

In [88]: s4
Out[88]: 
a    0
b    1
f    5
g    6
dtype: int64

In [89]: pd.concat([s1, s4], axis=1)
Out[89]: 

8.2 Combining and Merging Datasets 

| 

237

     0  1
a  0.0  0
b  1.0  1
f  NaN  5
g  NaN  6

In [90]: pd.concat([s1, s4], axis=1, join=&#39;inner&#39;)
Out[90]: 
   0  1
a  0  0
b  1  1

In this last example, the &#39;f&#39; and &#39;g&#39; labels disappeared because of the join=&#39;inner&#39;
option.

You can even specify the axes to be used on the other axes with join_axes:

In [91]: pd.concat([s1, s4], axis=1, join_axes=[[&#39;a&#39;, &#39;c&#39;, &#39;b&#39;, &#39;e&#39;]])
Out[91]: 
     0    1
a  0.0  0.0
c  NaN  NaN
b  1.0  1.0
e  NaN  NaN

A potential issue is that the concatenated pieces are not identifiable in the result. Sup
pose instead you wanted to create a hierarchical index on the concatenation axis. To
do this, use the keys argument:

In [92]: result = pd.concat([s1, s1, s3], keys=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;])

In [93]: result
Out[93]: 
one    a    0
       b    1
two    a    0
       b    1
three  f    5
       g    6
dtype: int64

In [94]: result.unstack()
Out[94]: 
         a    b    f    g
one    0.0  1.0  NaN  NaN
two    0.0  1.0  NaN  NaN
three  NaN  NaN  5.0  6.0

In the case of combining Series along axis=1, the keys become the DataFrame col
umn headers:

In [95]: pd.concat([s1, s2, s3], axis=1, keys=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;])
Out[95]: 

238 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

   one  two  three
a  0.0  NaN    NaN
b  1.0  NaN    NaN
c  NaN  2.0    NaN
d  NaN  3.0    NaN
e  NaN  4.0    NaN
f  NaN  NaN    5.0
g  NaN  NaN    6.0

The same logic extends to DataFrame objects:

In [96]: df1 = pd.DataFrame(np.arange(6).reshape(3, 2), index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;],
   ....:                    columns=[&#39;one&#39;, &#39;two&#39;])

In [97]: df2 = pd.DataFrame(5 + np.arange(4).reshape(2, 2), index=[&#39;a&#39;, &#39;c&#39;],
   ....:                    columns=[&#39;three&#39;, &#39;four&#39;])

In [98]: df1
Out[98]: 
   one  two
a    0    1
b    2    3
c    4    5

In [99]: df2
Out[99]: 
   three  four
a      5     6
c      7     8

In [100]: pd.concat([df1, df2], axis=1, keys=[&#39;level1&#39;, &#39;level2&#39;])
Out[100]: 
  level1     level2     
     one two  three four
a      0   1    5.0  6.0
b      2   3    NaN  NaN
c      4   5    7.0  8.0

If you pass a dict of objects instead of a list, the dicts keys will be used for the keys
option:

In [101]: pd.concat({&#39;level1&#39;: df1, &#39;level2&#39;: df2}, axis=1)
Out[101]: 
  level1     level2     
     one two  three four
a      0   1    5.0  6.0
b      2   3    NaN  NaN
c      4   5    7.0  8.0

There are additional arguments governing how the hierarchical index is created (see
Table  8-3).  For  example,  we  can  name  the  created  axis  levels  with  the  names
argument:

8.2 Combining and Merging Datasets 

| 

239

In [102]: pd.concat([df1, df2], axis=1, keys=[&#39;level1&#39;, &#39;level2&#39;],
   .....:           names=[&#39;upper&#39;, &#39;lower&#39;])
Out[102]: 
upper level1     level2     
lower    one two  three four
a          0   1    5.0  6.0
b          2   3    NaN  NaN
c          4   5    7.0  8.0

A last consideration concerns DataFrames in which the row index does not contain
any relevant data:

In [103]: df1 = pd.DataFrame(np.random.randn(3, 4), columns=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])

In [104]: df2 = pd.DataFrame(np.random.randn(2, 3), columns=[&#39;b&#39;, &#39;d&#39;, &#39;a&#39;])

In [105]: df1
Out[105]: 
          a         b         c         d
0  1.246435  1.007189 -1.296221  0.274992
1  0.228913  1.352917  0.886429 -2.001637
2 -0.371843  1.669025 -0.438570 -0.539741

In [106]: df2
Out[106]: 
          b         d         a
0  0.476985  3.248944 -1.021228
1 -0.577087  0.124121  0.302614

In this case, you can pass ignore_index=True:

In [107]: pd.concat([df1, df2], ignore_index=True)
Out[107]: 
          a         b         c         d
0  1.246435  1.007189 -1.296221  0.274992
1  0.228913  1.352917  0.886429 -2.001637
2 -0.371843  1.669025 -0.438570 -0.539741
3 -1.021228  0.476985       NaN  3.248944
4  0.302614 -0.577087       NaN  0.124121

Table 8-3. concat function arguments

Argument
objs

axis

join

join_axes

keys

Description
List or dict of pandas objects to be concatenated; this is the only required argument
Axis to concatenate along; defaults to 0 (along rows)
Either &#39;inner&#39; or &#39;outer&#39; (&#39;outer&#39; by default); whether to intersection (inner) or union
(outer) together indexes along the other axes
Specific indexes to use for the other n1 axes instead of performing union/intersection logic
Values to associate with objects being concatenated, forming a hierarchical index along the
concatenation axis; can either be a list or array of arbitrary values, an array of tuples, or a list of
arrays (if multiple-level arrays passed in levels)

240 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

Argument
levels

Description
Specific indexes to use as hierarchical index level or levels if keys passed
names
Names for created hierarchical levels if keys and/or levels passed
verify_integrity Check new axis in concatenated object for duplicates and raise exception if so; by default (False)

ignore_index

allows duplicates
Do not preserve indexes along concatenation axis, instead producing a new
range(total_length) index

Combining Data with Overlap
There is another data combination situation that cant be expressed as either a merge
or concatenation operation. You may have two datasets whose indexes overlap in full
or part. As a motivating example, consider NumPys where function, which performs
the array-oriented equivalent of an if-else expression:

In [108]: a = pd.Series([np.nan, 2.5, np.nan, 3.5, 4.5, np.nan],
   .....:               index=[&#39;f&#39;, &#39;e&#39;, &#39;d&#39;, &#39;c&#39;, &#39;b&#39;, &#39;a&#39;])

In [109]: b = pd.Series(np.arange(len(a), dtype=np.float64),
   .....:               index=[&#39;f&#39;, &#39;e&#39;, &#39;d&#39;, &#39;c&#39;, &#39;b&#39;, &#39;a&#39;])

In [110]: b[-1] = np.nan

In [111]: a
Out[111]: 
f    NaN
e    2.5
d    NaN
c    3.5
b    4.5
a    NaN
dtype: float64

In [112]: b
Out[112]: 
f    0.0
e    1.0
d    2.0
c    3.0
b    4.0
a    NaN
dtype: float64

In [113]: np.where(pd.isnull(a), b, a)
Out[113]: array([ 0. ,  2.5,  2. ,  3.5,  4.5,  nan])

Series has a combine_first method, which performs the equivalent of this operation
along with pandass usual data alignment logic:

8.2 Combining and Merging Datasets 

| 

241

In [114]: b[:-2].combine_first(a[2:])
Out[114]: 
a    NaN
b    4.5
c    3.0
d    2.0
e    1.0
f    0.0
dtype: float64

With  DataFrames,  combine_first  does  the  same  thing  column  by  column,  so  you
can  think  of  it  as  patching  missing  data  in  the  calling  object  with  data  from  the
object you pass:

In [115]: df1 = pd.DataFrame({&#39;a&#39;: [1., np.nan, 5., np.nan],
   .....:                     &#39;b&#39;: [np.nan, 2., np.nan, 6.],
   .....:                     &#39;c&#39;: range(2, 18, 4)})

In [116]: df2 = pd.DataFrame({&#39;a&#39;: [5., 4., np.nan, 3., 7.],
   .....:                     &#39;b&#39;: [np.nan, 3., 4., 6., 8.]})

In [117]: df1
Out[117]: 
     a    b   c
0  1.0  NaN   2
1  NaN  2.0   6
2  5.0  NaN  10
3  NaN  6.0  14

In [118]: df2
Out[118]: 
     a    b
0  5.0  NaN
1  4.0  3.0
2  NaN  4.0
3  3.0  6.0
4  7.0  8.0

In [119]: df1.combine_first(df2)
Out[119]: 
     a    b     c
0  1.0  NaN   2.0
1  4.0  2.0   6.0
2  5.0  4.0  10.0
3  3.0  6.0  14.0
4  7.0  8.0   NaN

8.3 Reshaping and Pivoting
There are a number of basic operations for rearranging tabular data. These are alter
natingly referred to as reshape or pivot operations.

242 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

Reshaping with Hierarchical Indexing
Hierarchical  indexing  provides  a  consistent  way  to  rearrange  data  in  a  DataFrame.
There are two primary actions:

stack

This rotates or pivots from the columns in the data to the rows

unstack

This pivots from the rows into the columns

Ill  illustrate  these  operations  through  a  series  of  examples.  Consider  a  small  Data
Frame with string arrays as row and column indexes:

In [120]: data = pd.DataFrame(np.arange(6).reshape((2, 3)),
   .....:                     index=pd.Index([&#39;Ohio&#39;, &#39;Colorado&#39;], name=&#39;state&#39;),
   .....:                     columns=pd.Index([&#39;one&#39;, &#39;two&#39;, &#39;three&#39;],
   .....:                     name=&#39;number&#39;))

In [121]: data
Out[121]: 
number    one  two  three
state                    
Ohio        0    1      2
Colorado    3    4      5

Using the stack method on this data pivots the columns into the rows, producing a
Series:

In [122]: result = data.stack()

In [123]: result
Out[123]: 
state     number
Ohio      one       0
          two       1
          three     2
Colorado  one       3
          two       4
          three     5
dtype: int64

From  a  hierarchically  indexed  Series,  you  can  rearrange  the  data  back  into  a  Data
Frame with unstack:

In [124]: result.unstack()
Out[124]: 
number    one  two  three
state                    
Ohio        0    1      2
Colorado    3    4      5

8.3 Reshaping and Pivoting 

| 

243

By default the innermost level is unstacked (same with stack). You can unstack a dif
ferent level by passing a level number or name:

In [125]: result.unstack(0)
Out[125]: 
state   Ohio  Colorado
number                
one        0         3
two        1         4
three      2         5

In [126]: result.unstack(&#39;state&#39;)
Out[126]: 
state   Ohio  Colorado
number                
one        0         3
two        1         4
three      2         5

Unstacking might introduce missing data if all of the values in the level arent found
in each of the subgroups:

In [127]: s1 = pd.Series([0, 1, 2, 3], index=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;])

In [128]: s2 = pd.Series([4, 5, 6], index=[&#39;c&#39;, &#39;d&#39;, &#39;e&#39;])

In [129]: data2 = pd.concat([s1, s2], keys=[&#39;one&#39;, &#39;two&#39;])

In [130]: data2
Out[130]: 
one  a    0
     b    1
     c    2
     d    3
two  c    4
     d    5
     e    6
dtype: int64

In [131]: data2.unstack()
Out[131]: 
       a    b    c    d    e
one  0.0  1.0  2.0  3.0  NaN
two  NaN  NaN  4.0  5.0  6.0

Stacking filters out missing data by default, so the operation is more easily invertible:

In [132]: data2.unstack()
Out[132]: 
       a    b    c    d    e
one  0.0  1.0  2.0  3.0  NaN
two  NaN  NaN  4.0  5.0  6.0

244 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

In [133]: data2.unstack().stack()
Out[133]: 
one  a    0.0
     b    1.0
     c    2.0
     d    3.0
two  c    4.0
     d    5.0
     e    6.0
dtype: float64

In [134]: data2.unstack().stack(dropna=False)
Out[134]: 
one  a    0.0
     b    1.0
     c    2.0
     d    3.0
     e    NaN
two  a    NaN
     b    NaN
     c    4.0
     d    5.0
     e    6.0
dtype: float64

When you unstack in a DataFrame, the level unstacked becomes the lowest level in
the result:

In [135]: df = pd.DataFrame({&#39;left&#39;: result, &#39;right&#39;: result + 5},
   .....:                   columns=pd.Index([&#39;left&#39;, &#39;right&#39;], name=&#39;side&#39;))

In [136]: df
Out[136]: 
side             left  right
state    number             
Ohio     one        0      5
         two        1      6
         three      2      7
Colorado one        3      8
         two        4      9
         three      5     10

In [137]: df.unstack(&#39;state&#39;)
Out[137]: 
side   left          right         
state  Ohio Colorado  Ohio Colorado
number                             
one       0        3     5        8
two       1        4     6        9
three     2        5     7       10

When calling stack, we can indicate the name of the axis to stack:

8.3 Reshaping and Pivoting 

| 

245

In [138]: df.unstack(&#39;state&#39;).stack(&#39;side&#39;)
Out[138]: 
state         Colorado  Ohio
number side                 
one    left          3     0
       right         8     5
two    left          4     1
       right         9     6
three  left          5     2
       right        10     7

Pivoting Long to Wide Format
A common way to store multiple time series in databases and CSV is in so-called long
or stacked format. Lets load some example data and do a small amount of time series
wrangling and other data cleaning:

In [139]: data = pd.read_csv(&#39;examples/macrodata.csv&#39;)

In [140]: data.head()
Out[140]: 
     year  quarter   realgdp  realcons  realinv  realgovt  realdpi    cpi  \
0  1959.0      1.0  2710.349    1707.4  286.898   470.045   1886.9  28.98   
1  1959.0      2.0  2778.801    1733.7  310.859   481.301   1919.7  29.15   
2  1959.0      3.0  2775.488    1751.8  289.226   491.260   1916.4  29.35   
3  1959.0      4.0  2785.204    1753.7  299.356   484.052   1931.3  29.37   
4  1960.0      1.0  2847.699    1770.5  331.722   462.199   1955.5  29.54   
      m1  tbilrate  unemp      pop  infl  realint  
0  139.7      2.82    5.8  177.146  0.00     0.00  
1  141.7      3.08    5.1  177.830  2.34     0.74  
2  140.5      3.82    5.3  178.657  2.74     1.09  
3  140.0      4.33    5.6  179.386  0.27     4.06  
4  139.6      3.50    5.2  180.007  2.31     1.19  

In [141]: periods = pd.PeriodIndex(year=data.year, quarter=data.quarter,
   .....:                          name=&#39;date&#39;)

In [142]: columns = pd.Index([&#39;realgdp&#39;, &#39;infl&#39;, &#39;unemp&#39;], name=&#39;item&#39;)

In [143]: data = data.reindex(columns=columns)

In [144]: data.index = periods.to_timestamp(&#39;D&#39;, &#39;end&#39;)

In [145]: ldata = data.stack().reset_index().rename(columns={0: &#39;value&#39;})

We will look at PeriodIndex a bit more closely in Chapter 11. In short, it combines
the year and quarter columns to create a kind of time interval type.

Now, ldata looks like:

In [146]: ldata[:10]
Out[146]: 

246 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

        date     item     value
0 1959-03-31  realgdp  2710.349
1 1959-03-31     infl     0.000
2 1959-03-31    unemp     5.800
3 1959-06-30  realgdp  2778.801
4 1959-06-30     infl     2.340
5 1959-06-30    unemp     5.100
6 1959-09-30  realgdp  2775.488
7 1959-09-30     infl     2.740
8 1959-09-30    unemp     5.300
9 1959-12-31  realgdp  2785.204

This is the so-called long format for multiple time series, or other observational data
with two or more keys (here, our keys are date and item). Each row in the table repre
sents a single observation.

Data  is  frequently  stored  this  way  in  relational  databases  like  MySQL,  as  a  fixed
schema  (column  names  and  data  types)  allows  the  number  of  distinct  values  in  the
item column to change as data is added to the table. In the previous example, date
and item would usually be the primary keys (in relational database parlance), offering
both relational integrity and easier joins. In some cases, the data may be more diffi
cult  to  work  with  in  this  format;  you  might  prefer  to  have  a  DataFrame  containing
one column per distinct item value indexed by timestamps in the date column. Data
Frames pivot method performs exactly this transformation:

In [147]: pivoted = ldata.pivot(&#39;date&#39;, &#39;item&#39;, &#39;value&#39;)

In [148]: pivoted
Out[148]: 
item        infl    realgdp  unemp
date                              
1959-03-31  0.00   2710.349    5.8
1959-06-30  2.34   2778.801    5.1
1959-09-30  2.74   2775.488    5.3
1959-12-31  0.27   2785.204    5.6
1960-03-31  2.31   2847.699    5.2
1960-06-30  0.14   2834.390    5.2
1960-09-30  2.70   2839.022    5.6
1960-12-31  1.21   2802.616    6.3
1961-03-31 -0.40   2819.264    6.8
1961-06-30  1.47   2872.005    7.0
...          ...        ...    ...
2007-06-30  2.75  13203.977    4.5
2007-09-30  3.45  13321.109    4.7
2007-12-31  6.38  13391.249    4.8
2008-03-31  2.82  13366.865    4.9
2008-06-30  8.53  13415.266    5.4
2008-09-30 -3.16  13324.600    6.0
2008-12-31 -8.79  13141.920    6.9
2009-03-31  0.94  12925.410    8.1
2009-06-30  3.37  12901.504    9.2

8.3 Reshaping and Pivoting 

| 

247

2009-09-30  3.56  12990.341    9.6
[203 rows x 3 columns]

The  first  two  values  passed  are  the  columns  to  be  used  respectively  as  the  row  and
column index, then finally an optional value column to fill the DataFrame. Suppose
you had two value columns that you wanted to reshape simultaneously:

In [149]: ldata[&#39;value2&#39;] = np.random.randn(len(ldata))

In [150]: ldata[:10]
Out[150]: 
        date     item     value    value2
0 1959-03-31  realgdp  2710.349  0.523772
1 1959-03-31     infl     0.000  0.000940
2 1959-03-31    unemp     5.800  1.343810
3 1959-06-30  realgdp  2778.801 -0.713544
4 1959-06-30     infl     2.340 -0.831154
5 1959-06-30    unemp     5.100 -2.370232
6 1959-09-30  realgdp  2775.488 -1.860761
7 1959-09-30     infl     2.740 -0.860757
8 1959-09-30    unemp     5.300  0.560145
9 1959-12-31  realgdp  2785.204 -1.265934

By omitting the last argument, you obtain a DataFrame with hierarchical columns:

In [151]: pivoted = ldata.pivot(&#39;date&#39;, &#39;item&#39;)

In [152]: pivoted[:5]
Out[152]: 
           value                    value2                    
item        infl   realgdp unemp      infl   realgdp     unemp
date                                                          
1959-03-31  0.00  2710.349   5.8  0.000940  0.523772  1.343810
1959-06-30  2.34  2778.801   5.1 -0.831154 -0.713544 -2.370232
1959-09-30  2.74  2775.488   5.3 -0.860757 -1.860761  0.560145
1959-12-31  0.27  2785.204   5.6  0.119827 -1.265934 -1.063512
1960-03-31  2.31  2847.699   5.2 -2.359419  0.332883 -0.199543

In [153]: pivoted[&#39;value&#39;][:5]
Out[153]: 
item        infl   realgdp  unemp
date                             
1959-03-31  0.00  2710.349    5.8
1959-06-30  2.34  2778.801    5.1
1959-09-30  2.74  2775.488    5.3
1959-12-31  0.27  2785.204    5.6
1960-03-31  2.31  2847.699    5.2

Note  that  pivot  is  equivalent  to  creating  a  hierarchical  index  using  set_index  fol
lowed by a call to unstack:

248 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

In [154]: unstacked = ldata.set_index([&#39;date&#39;, &#39;item&#39;]).unstack(&#39;item&#39;)

In [155]: unstacked[:7]
Out[155]: 
           value                    value2                    
item        infl   realgdp unemp      infl   realgdp     unemp
date                                                          
1959-03-31  0.00  2710.349   5.8  0.000940  0.523772  1.343810
1959-06-30  2.34  2778.801   5.1 -0.831154 -0.713544 -2.370232
1959-09-30  2.74  2775.488   5.3 -0.860757 -1.860761  0.560145
1959-12-31  0.27  2785.204   5.6  0.119827 -1.265934 -1.063512
1960-03-31  2.31  2847.699   5.2 -2.359419  0.332883 -0.199543
1960-06-30  0.14  2834.390   5.2 -0.970736 -1.541996 -1.307030
1960-09-30  2.70  2839.022   5.6  0.377984  0.286350 -0.753887

Pivoting Wide to Long Format
An  inverse  operation  to  pivot  for  DataFrames  is  pandas.melt.  Rather  than  trans
forming one column into many in a new DataFrame, it merges multiple columns into
one, producing a DataFrame that is longer than the input. Lets look at an example:

In [157]: df = pd.DataFrame({&#39;key&#39;: [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;],
   .....:                    &#39;A&#39;: [1, 2, 3],
   .....:                    &#39;B&#39;: [4, 5, 6],
   .....:                    &#39;C&#39;: [7, 8, 9]})

In [158]: df
Out[158]: 
   A  B  C  key
0  1  4  7  foo
1  2  5  8  bar
2  3  6  9  baz

The &#39;key&#39; column may be a group indicator, and the other columns are data values.
When using pandas.melt, we must indicate which columns (if any) are group indica
tors. Lets use &#39;key&#39; as the only group indicator here:

In [159]: melted = pd.melt(df, [&#39;key&#39;])

In [160]: melted
Out[160]: 
   key variable  value
0  foo        A      1
1  bar        A      2
2  baz        A      3
3  foo        B      4
4  bar        B      5
5  baz        B      6
6  foo        C      7
7  bar        C      8
8  baz        C      9

8.3 Reshaping and Pivoting 

| 

249

Using pivot, we can reshape back to the original layout:

In [161]: reshaped = melted.pivot(&#39;key&#39;, &#39;variable&#39;, &#39;value&#39;)

In [162]: reshaped
Out[162]: 
variable  A  B  C
key              
bar       2  5  8
baz       3  6  9
foo       1  4  7

Since the result of pivot creates an index from the column used as the row labels, we
may want to use reset_index to move the data back into a column:

In [163]: reshaped.reset_index()
Out[163]: 
variable  key  A  B  C
0         bar  2  5  8
1         baz  3  6  9
2         foo  1  4  7

You can also specify a subset of columns to use as value columns:

In [164]: pd.melt(df, id_vars=[&#39;key&#39;], value_vars=[&#39;A&#39;, &#39;B&#39;])
Out[164]: 
   key variable  value
0  foo        A      1
1  bar        A      2
2  baz        A      3
3  foo        B      4
4  bar        B      5
5  baz        B      6

pandas.melt can be used without any group identifiers, too:

In [165]: pd.melt(df, value_vars=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;])
Out[165]: 
  variable  value
0        A      1
1        A      2
2        A      3
3        B      4
4        B      5
5        B      6
6        C      7
7        C      8
8        C      9

In [166]: pd.melt(df, value_vars=[&#39;key&#39;, &#39;A&#39;, &#39;B&#39;])
Out[166]: 
  variable value
0      key   foo
1      key   bar

250 

| 

Chapter 8: Data Wrangling: Join, Combine, and Reshape

2      key   baz
3        A     1
4        A     2
5        A     3
6        B     4
7        B     5
8        B     6

8.4 Conclusion
Now that you have some pandas basics for data import, cleaning, and reorganization
under  your  belt,  we  are  ready  to  move  on  to  data  visualization  with  matplotlib.  We
will return to pandas later in the book when we discuss more advanced analytics.

8.4 Conclusion 

| 

251

CHAPTER 9
Plotting and Visualization

Making informative visualizations (sometimes called plots) is one of the most impor
tant tasks in data analysis. It may be a part of the exploratory processfor example,
to  help  identify  outliers  or  needed  data  transformations,  or  as  a  way  of  generating
ideas for models. For others, building an interactive visualization for the web may be
the end goal. Python has many add-on libraries for making static or dynamic visuali
zations, but Ill be mainly focused on matplotlib and libraries that build on top of it.

matplotlib  is  a  desktop  plotting  package  designed  for  creating  (mostly  two-
dimensional)  publication-quality  plots.  The  project  was  started  by  John  Hunter  in
2002 to enable a MATLAB-like plotting interface in Python. The matplotlib and IPy
thon communities have collaborated to simplify interactive plotting from the IPython
shell (and now, Jupyter notebook). matplotlib supports various GUI backends on all
operating  systems  and  additionally  can  export  visualizations  to  all  of  the  common
vector and raster graphics formats (PDF, SVG, JPG, PNG, BMP, GIF, etc.). With the
exception  of  a  few  diagrams,  nearly  all  of  the  graphics  in  this  book  were  produced
using matplotlib.

Over time, matplotlib has spawned a number of add-on toolkits for data visualization
that use matplotlib for their underlying plotting. One of these is seaborn, which we
explore later in this chapter.

The simplest way to follow the code examples in the chapter is to use interactive plot
ting  in  the  Jupyter  notebook.  To  set  this  up,  execute  the  following  statement  in  a
Jupyter notebook:

%matplotlib notebook

9.1 A Brief matplotlib API Primer
With matplotlib, we use the following import convention:

253

In [11]: import matplotlib.pyplot as plt

After  running  %matplotlib  notebook  in  Jupyter  (or  simply  %matplotlib  in  IPy
thon), we can try creating a simple plot. If everything is set up right, a line plot like
Figure 9-1 should appear:

In [12]: import numpy as np

In [13]: data = np.arange(10)

In [14]: data
Out[14]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])

In [15]: plt.plot(data)

Figure 9-1. Simple line plot

While  libraries  like  seaborn  and  pandass  built-in  plotting  functions  will  deal  with
many  of  the  mundane  details  of  making  plots,  should  you  wish  to  customize  them
beyond the function options provided, you will need to learn a bit about the matplot
lib API.

There  is  not  enough  room  in  the  book  to  give  a  comprehensive
treatment to the breadth and depth of functionality in matplotlib. It
should  be  enough  to  teach  you  the  ropes  to  get  up  and  running.
The matplotlib gallery and documentation are the best resource for
learning advanced features.

254 

| 

Chapter 9: Plotting and Visualization

Figures and Subplots
Plots  in  matplotlib  reside  within  a  Figure  object.  You  can  create  a  new  figure  with
plt.figure:

In [16]: fig = plt.figure()

In IPython, an empty plot window will appear, but in Jupyter nothing will be shown
until  we  use  a  few  more  commands.  plt.figure  has  a  number  of  options;  notably,
figsize will guarantee the figure has a certain size and aspect ratio if saved to disk.

You cant make a plot with a blank figure. You have to create one or more subplots
using add_subplot:

In [17]: ax1 = fig.add_subplot(2, 2, 1)

This  means  that  the  figure  should  be  2    2  (so  up  to  four  plots  in  total),  and  were
selecting the first of four subplots (numbered from 1). If you create the next two sub
plots, youll end up with a visualization that looks like Figure 9-2:

In [18]: ax2 = fig.add_subplot(2, 2, 2)

In [19]: ax3 = fig.add_subplot(2, 2, 3)

Figure 9-2. An empty matplotlib figure with three subplots

9.1 A Brief matplotlib API Primer 

| 

255

One nuance of using Jupyter notebooks is that plots are reset after
each cell is evaluated, so for more complex plots you must put all of
the plotting commands in a single notebook cell.

Here we run all of these commands in the same cell:

fig = plt.figure()
ax1 = fig.add_subplot(2, 2, 1)
ax2 = fig.add_subplot(2, 2, 2)
ax3 = fig.add_subplot(2, 2, 3)

When  you  issue  a  plotting  command  like  plt.plot([1.5,  3.5,  -2,  1.6]),  mat
plotlib draws on the last figure and subplot used (creating one if necessary), thus hid
ing the figure and subplot creation. So if we add the following command, youll get
something like Figure 9-3:

In [20]: plt.plot(np.random.randn(50).cumsum(), &#39;k--&#39;)

Figure 9-3. Data visualization after single plot

The  &#39;k--&#39;  is  a  style  option  instructing  matplotlib  to  plot  a  black  dashed  line.  The
objects  returned  by  fig.add_subplot  here  are  AxesSubplot  objects,  on  which  you
can directly plot on the other empty subplots by calling each ones instance method
(see Figure 9-4):

256 

| 

Chapter 9: Plotting and Visualization

In [21]: _ = ax1.hist(np.random.randn(100), bins=20, color=&#39;k&#39;, alpha=0.3)

In [22]: ax2.scatter(np.arange(30), np.arange(30) + 3 * np.random.randn(30))

Figure 9-4. Data visualization after additional plots

You can find a comprehensive catalog of plot types in the matplotlib documentation.

Creating  a  figure  with  a  grid  of  subplots  is  a  very  common  task,  so  matplotlib
includes a convenience method, plt.subplots, that creates a new figure and returns
a NumPy array containing the created subplot objects:

In [24]: fig, axes = plt.subplots(2, 3)

In [25]: axes
Out[25]: 
array([[&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb626374048&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb62625db00&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb6262f6c88&gt;],
       [&lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb6261a36a0&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb626181860&gt;,
        &lt;matplotlib.axes._subplots.AxesSubplot object at 0x7fb6260fd4e0&gt;]], dtype
=object)

This  is  very  useful,  as  the  axes  array  can  be  easily  indexed  like  a  two-dimensional
array; for example, axes[0, 1]. You can also indicate that subplots should have the
same  x-  or  y-axis  using  sharex  and  sharey,  respectively.  This  is  especially  useful
when youre comparing data on the same scale; otherwise, matplotlib autoscales plot
limits independently. See Table 9-1 for more on this method.

9.1 A Brief matplotlib API Primer 

| 

257

Table 9-1. pyplot.subplots options

Argument
nrows

ncols

sharex

Description
Number of rows of subplots
Number of columns of subplots
All subplots should use the same x-axis ticks (adjusting the xlim will affect all subplots)
All subplots should use the same y-axis ticks (adjusting the ylim will affect all subplots)

sharey
subplot_kw Dict of keywords passed to add_subplot call used to create each subplot
**fig_kw

Additional keywords to subplots are used when creating the figure, such as plt.subplots(2, 2, 
figsize=(8, 6))

Adjusting the spacing around subplots

By  default  matplotlib  leaves  a  certain  amount  of  padding  around  the  outside  of  the
subplots  and  spacing  between  subplots.  This  spacing  is  all  specified  relative  to  the
height and width of the plot, so that if you resize the plot either programmatically or
manually  using  the  GUI  window,  the  plot  will  dynamically  adjust  itself.  You  can
change the spacing using the subplots_adjust method on Figure objects, also avail
able as a top-level function:

subplots_adjust(left=None, bottom=None, right=None, top=None,
                wspace=None, hspace=None)

wspace and hspace controls the percent of the figure width and figure height, respec
tively, to use as spacing between subplots. Here is a small example where I shrink the
spacing all the way to zero (see Figure 9-5):

fig, axes = plt.subplots(2, 2, sharex=True, sharey=True)
for i in range(2):
    for j in range(2):
        axes[i, j].hist(np.random.randn(500), bins=50, color=&#39;k&#39;, alpha=0.5)
plt.subplots_adjust(wspace=0, hspace=0)

258 

| 

Chapter 9: Plotting and Visualization

Figure 9-5. Data visualization with no inter-subplot spacing

You  may  notice  that  the  axis  labels  overlap.  matplotlib  doesnt  check  whether  the
labels overlap, so in a case like this you would need to fix the labels yourself by speci
fying explicit tick locations and tick labels (well look at how to do this in the follow
ing sections).

Colors, Markers, and Line Styles
Matplotlibs main plot function accepts arrays of x and y coordinates and optionally a
string  abbreviation  indicating  color  and  line  style.  For  example,  to  plot  x  versus  y
with green dashes, you would execute:

ax.plot(x, y, &#39;g--&#39;)

This  way  of  specifying  both  color  and  line  style  in  a  string  is  provided  as  a  conve
nience; in practice if you were creating plots programmatically you might prefer not
to have to munge strings together to create plots with the desired style. The same plot
could also have been expressed more explicitly as:

ax.plot(x, y, linestyle=&#39;--&#39;, color=&#39;g&#39;)

There are a number of color abbreviations provided for commonly used colors, but
you can use any color on the spectrum by specifying its hex code (e.g., &#39;#CECECE&#39;).
You can see the full set of line styles by looking at the docstring for plot (use plot? in
IPython or Jupyter).

9.1 A Brief matplotlib API Primer 

| 

259

Line  plots  can  additionally  have  markers  to  highlight  the  actual  data  points.  Since
matplotlib  creates  a  continuous  line  plot,  interpolating  between  points,  it  can  occa
sionally  be  unclear  where  the  points  lie.  The  marker  can  be  part  of  the  style  string,
which must have color followed by marker type and line style (see Figure 9-6):

In [30]: from numpy.random import randn

In [31]: plt.plot(randn(30).cumsum(), &#39;ko--&#39;)

Figure 9-6. Line plot with markers

This could also have been written more explicitly as:

plot(randn(30).cumsum(), color=&#39;k&#39;, linestyle=&#39;dashed&#39;, marker=&#39;o&#39;)

For  line  plots,  you  will  notice  that  subsequent  points  are  linearly  interpolated  by
default. This can be altered with the drawstyle option (Figure 9-7):

In [33]: data = np.random.randn(30).cumsum()

In [34]: plt.plot(data, &#39;k--&#39;, label=&#39;Default&#39;)
Out[34]: [&lt;matplotlib.lines.Line2D at 0x7fb624d86160&gt;]

In [35]: plt.plot(data, &#39;k-&#39;, drawstyle=&#39;steps-post&#39;, label=&#39;steps-post&#39;)
Out[35]: [&lt;matplotlib.lines.Line2D at 0x7fb624d869e8&gt;]

In [36]: plt.legend(loc=&#39;best&#39;)

260 

| 

Chapter 9: Plotting and Visualization

Figure 9-7. Line plot with different drawstyle options

You may notice output like &lt;matplotlib.lines.Line2D at ...&gt; when you run this.
matplotlib returns objects that reference the plot subcomponent that was just added.
A lot of the time you can safely ignore this output. Here, since we passed the label
arguments  to  plot,  we  are  able  to  create  a  plot  legend  to  identify  each  line  using
plt.legend.

You must call plt.legend (or ax.legend, if you have a reference to
the axes) to create the legend, whether or not you passed the label
options when plotting the data.

Ticks, Labels, and Legends
For most kinds of plot decorations, there are two main ways to do things: using the 
procedural pyplot interface (i.e., matplotlib.pyplot) and the more object-oriented
native matplotlib API.

The  pyplot  interface,  designed  for  interactive  use,  consists  of  methods  like  xlim,
xticks, and xticklabels. These control the plot range, tick locations, and tick labels,
respectively. They can be used in two ways:

9.1 A Brief matplotlib API Primer 

| 

261

 Called with no arguments returns the current parameter value (e.g., plt.xlim()

returns the current x-axis plotting range)

 Called  with  parameters  sets  the  parameter  value  (e.g.,  plt.xlim([0,  10]),  sets

the x-axis range to 0 to 10)

All  such  methods  act  on  the  active  or  most  recently  created  AxesSubplot.  Each  of
them  corresponds  to  two  methods  on  the  subplot  object  itself;  in  the  case  of  xlim
these are ax.get_xlim and ax.set_xlim. I prefer to use the subplot instance methods
myself  in  the  interest  of  being  explicit  (and  especially  when  working  with  multiple
subplots), but you can certainly use whichever you find more convenient.

Setting the title, axis labels, ticks, and ticklabels

To  illustrate  customizing  the  axes,  Ill  create  a  simple  figure  and  plot  of  a  random
walk (see Figure 9-8):

In [37]: fig = plt.figure()

In [38]: ax = fig.add_subplot(1, 1, 1)

In [39]: ax.plot(np.random.randn(1000).cumsum())

Figure 9-8. Simple plot for illustrating xticks (with label)

To change the x-axis ticks, its easiest to use set_xticks and set_xticklabels. The
former instructs matplotlib where to place the ticks along the data range; by default

262 

| 

Chapter 9: Plotting and Visualization

these  locations  will  also  be  the  labels.  But  we  can  set  any  other  values  as  the  labels
using set_xticklabels:

In [40]: ticks = ax.set_xticks([0, 250, 500, 750, 1000])

In [41]: labels = ax.set_xticklabels([&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;],
   ....:                             rotation=30, fontsize=&#39;small&#39;)

The rotation option sets the x tick labels at a 30-degree rotation. Lastly, set_xlabel
gives  a  name  to  the  x-axis  and  set_title  the  subplot  title  (see  Figure  9-9  for  the
resulting figure):

In [42]: ax.set_title(&#39;My first matplotlib plot&#39;)
Out[42]: &lt;matplotlib.text.Text at 0x7fb624d055f8&gt;

In [43]: ax.set_xlabel(&#39;Stages&#39;)

Figure 9-9. Simple plot for illustrating xticks

Modifying the y-axis consists of the same process, substituting y for x in the above.
The axes class has a set method that allows batch setting of plot properties. From the
prior example, we could also have written:

props = {
    &#39;title&#39;: &#39;My first matplotlib plot&#39;,
    &#39;xlabel&#39;: &#39;Stages&#39;
}
ax.set(**props)

9.1 A Brief matplotlib API Primer 

| 

263

Adding legends

Legends are another critical element for identifying plot elements. There are a couple
of ways to add one. The easiest is to pass the label argument when adding each piece
of the plot:

In [44]: from numpy.random import randn

In [45]: fig = plt.figure(); ax = fig.add_subplot(1, 1, 1)

In [46]: ax.plot(randn(1000).cumsum(), &#39;k&#39;, label=&#39;one&#39;)
Out[46]: [&lt;matplotlib.lines.Line2D at 0x7fb624bdf860&gt;]

In [47]: ax.plot(randn(1000).cumsum(), &#39;k--&#39;, label=&#39;two&#39;)
Out[47]: [&lt;matplotlib.lines.Line2D at 0x7fb624be90f0&gt;]

In [48]: ax.plot(randn(1000).cumsum(), &#39;k.&#39;, label=&#39;three&#39;)
Out[48]: [&lt;matplotlib.lines.Line2D at 0x7fb624be9160&gt;]

Once youve done this, you can either call ax.legend() or plt.legend() to automat
ically create a legend. The resulting plot is in Figure 9-10:

In [49]: ax.legend(loc=&#39;best&#39;)

Figure 9-10. Simple plot with three lines and legend

The legend method has several other choices for the location loc argument. See the
docstring (with ax.legend?) for more information.

264 

| 

Chapter 9: Plotting and Visualization

The loc tells matplotlib where to place the plot. If you arent picky, &#39;best&#39; is a good
option, as it will choose a location that is most out of the way. To exclude one or more
elements from the legend, pass no label or label=&#39;_nolegend_&#39;.

Annotations and Drawing on a Subplot
In addition to the standard plot types, you may wish to draw your own plot annota
tions, which could consist of text, arrows, or other shapes. You can add annotations
and  text  using  the  text,  arrow,  and  annotate  functions.  text  draws  text  at  given
coordinates (x, y) on the plot with optional custom styling:

ax.text(x, y, &#39;Hello world!&#39;,
        family=&#39;monospace&#39;, fontsize=10)

Annotations can draw both text and arrows arranged appropriately. As an example,
lets plot the closing S&amp;P 500 index price since 2007 (obtained from Yahoo! Finance)
and annotate it with some of the important dates from the 20082009 financial crisis.
You  can  most  easily  reproduce  this  code  example  in  a  single  cell  in  a  Jupyter  note
book. See Figure 9-11 for the result:

from datetime import datetime

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

data = pd.read_csv(&#39;examples/spx.csv&#39;, index_col=0, parse_dates=True)
spx = data[&#39;SPX&#39;]

spx.plot(ax=ax, style=&#39;k-&#39;)

crisis_data = [
    (datetime(2007, 10, 11), &#39;Peak of bull market&#39;),
    (datetime(2008, 3, 12), &#39;Bear Stearns Fails&#39;),
    (datetime(2008, 9, 15), &#39;Lehman Bankruptcy&#39;)
]

for date, label in crisis_data:
    ax.annotate(label, xy=(date, spx.asof(date) + 75),
                xytext=(date, spx.asof(date) + 225),
                arrowprops=dict(facecolor=&#39;black&#39;, headwidth=4, width=2,
                                headlength=4),
                horizontalalignment=&#39;left&#39;, verticalalignment=&#39;top&#39;)

# Zoom in on 2007-2010
ax.set_xlim([&#39;1/1/2007&#39;, &#39;1/1/2011&#39;])
ax.set_ylim([600, 1800])

ax.set_title(&#39;Important dates in the 2008-2009 financial crisis&#39;)

9.1 A Brief matplotlib API Primer 

| 

265

Figure 9-11. Important dates in the 20082009 financial crisis

There  are  a  couple  of  important  points  to  highlight  in  this  plot:  the  ax.annotate
method  can  draw  labels  at  the  indicated  x  and  y  coordinates.  We  use  the  set_xlim
and  set_ylim  methods  to  manually  set  the  start  and  end  boundaries  for  the  plot
rather  than  using  matplotlibs  default.  Lastly,  ax.set_title  adds  a  main  title  to  the
plot.

See the online matplotlib gallery for many more annotation examples to learn from.

Drawing shapes requires some more care. matplotlib has objects that represent many
common shapes, referred to as patches. Some of these, like Rectangle and Circle, are
found in matplotlib.pyplot, but the full set is located in matplotlib.patches.

To add a shape to a plot, you create the patch object shp and add it to a subplot by
calling ax.add_patch(shp) (see Figure 9-12):

fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)

rect = plt.Rectangle((0.2, 0.75), 0.4, 0.15, color=&#39;k&#39;, alpha=0.3)
circ = plt.Circle((0.7, 0.2), 0.15, color=&#39;b&#39;, alpha=0.3)
pgon = plt.Polygon([[0.15, 0.15], [0.35, 0.4], [0.2, 0.6]],
                   color=&#39;g&#39;, alpha=0.5)

ax.add_patch(rect)
ax.add_patch(circ)
ax.add_patch(pgon)

266 

| 

Chapter 9: Plotting and Visualization

Figure 9-12. Data visualization composed from three different patches

If you look at the implementation of many familiar plot types, you will see that they
are assembled from patches.

Saving Plots to File
You can save the active figure to file using plt.savefig. This method is equivalent to
the figure objects savefig instance method. For example, to save an SVG version of a
figure, you need only type:

plt.savefig(&#39;figpath.svg&#39;)

The  file  type  is  inferred  from  the  file  extension.  So  if  you  used  .pdf  instead,  you
would  get  a  PDF.  There  are  a  couple  of  important  options  that  I  use  frequently  for
publishing  graphics:  dpi,  which  controls  the  dots-per-inch  resolution,  and
bbox_inches,  which  can  trim  the  whitespace  around  the  actual  figure.  To  get  the
same  plot  as  a  PNG  with  minimal  whitespace  around  the  plot  and  at  400  DPI,  you
would do:

plt.savefig(&#39;figpath.png&#39;, dpi=400, bbox_inches=&#39;tight&#39;)

savefig doesnt have to write to disk; it can also write to any file-like object, such as a
BytesIO:

from io import BytesIO
buffer = BytesIO()
plt.savefig(buffer)
plot_data = buffer.getvalue()

See Table 9-2 for a list of some other options for savefig.

9.1 A Brief matplotlib API Primer 

| 

267

Table 9-2. Figure.savefig options

Argument
fname

dpi

facecolor, 
edgecolor

format

bbox_inches

Description
String containing a filepath or a Python file-like object. The figure format is inferred from the file
extension (e.g., .pdf for PDF or .png for PNG)
The figure resolution in dots per inch; defaults to 100 out of the box but can be configured
The color of the figure background outside of the subplots; &#39;w&#39; (white), by default

The explicit file format to use (&#39;png&#39;, &#39;pdf&#39;, &#39;svg&#39;, &#39;ps&#39;, &#39;eps&#39;, ...)
The portion of the figure to save; if &#39;tight&#39; is passed, will attempt to trim the empty space around
the figure

matplotlib Configuration
matplotlib comes configured with color schemes and defaults that are geared primar
ily  toward  preparing  figures  for  publication.  Fortunately,  nearly  all  of  the  default
behavior can be customized via an extensive set of global parameters governing figure
size, subplot spacing, colors, font sizes, grid styles, and so on. One way to modify the
configuration programmatically from Python is to use the rc method; for example, to
set the global default figure size to be 10  10, you could enter:

plt.rc(&#39;figure&#39;, figsize=(10, 10))

The first argument to rc is the component you wish to customize, such as &#39;figure&#39;,
&#39;axes&#39;, &#39;xtick&#39;, &#39;ytick&#39;, &#39;grid&#39;, &#39;legend&#39;, or many others. After that can follow a
sequence of keyword arguments indicating the new parameters. An easy way to write
down the options in your program is as a dict:

font_options = {&#39;family&#39; : &#39;monospace&#39;,
                &#39;weight&#39; : &#39;bold&#39;,
                &#39;size&#39;   : &#39;small&#39;}
plt.rc(&#39;font&#39;, **font_options)

For more extensive customization and to see a list of all the options, matplotlib comes
with a configuration file matplotlibrc in the matplotlib/mpl-data directory. If you cus
tomize  this  file  and  place  it  in  your  home  directory  titled  .matplotlibrc,  it  will  be
loaded each time you use matplotlib.

As well see in the next section, the seaborn package has several built-in plot themes
or styles that use matplotlibs configuration system internally.

9.2 Plotting with pandas and seaborn
matplotlib  can  be  a  fairly  low-level  tool.  You  assemble  a  plot  from  its  base  compo
nents: the data display (i.e., the type of plot: line, bar, box, scatter, contour, etc.), leg
end, title, tick labels, and other annotations.

268 

| 

Chapter 9: Plotting and Visualization

In pandas we may have multiple columns of data, along with row and column labels.
pandas  itself  has  built-in  methods  that  simplify  creating  visualizations  from  Data
Frame and Series objects. Another library is seaborn, a statistical graphics library cre
ated  by  Michael  Waskom.  Seaborn  simplifies  creating  many  common  visualization
types.

Importing  seaborn  modifies  the  default  matplotlib  color  schemes
and plot styles to improve readability and aesthetics. Even if you do
not  use  the  seaborn  API,  you  may  prefer  to  import  seaborn  as  a
simple  way  to  improve  the  visual  aesthetics  of  general  matplotlib
plots.

Line Plots
Series and DataFrame each have a plot attribute for making some basic plot types. By
default, plot() makes line plots (see Figure 9-13):

In [60]: s = pd.Series(np.random.randn(10).cumsum(), index=np.arange(0, 100, 10))

In [61]: s.plot()

Figure 9-13. Simple Series plot

The Series objects index is passed to matplotlib for plotting on the x-axis, though you
can  disable  this  by  passing  use_index=False.  The  x-axis  ticks  and  limits  can  be
adjusted with the xticks and xlim options, and y-axis respectively with yticks and

9.2 Plotting with pandas and seaborn 

| 

269

ylim. See Table 9-3 for a full listing of plot options. Ill comment on a few more of
them throughout this section and leave the rest to you to explore.

Most of pandass plotting methods accept an optional ax parameter, which can be a
matplotlib subplot object. This gives you more flexible placement of subplots in a grid
layout.

DataFrames  plot  method  plots  each  of  its  columns  as  a  different  line  on  the  same
subplot, creating a legend automatically (see Figure 9-14):

In [62]: df = pd.DataFrame(np.random.randn(10, 4).cumsum(0),
   ....:                   columns=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;],
   ....:                   index=np.arange(0, 100, 10))

In [63]: df.plot()

Figure 9-14. Simple DataFrame plot

The plot attribute contains a family of methods for different plot types. For exam
ple, df.plot() is equivalent to df.plot.line(). Well explore some of these methods
next.

Additional  keyword  arguments  to  plot  are  passed  through  to  the
respective matplotlib plotting function, so you can further custom
ize these plots by learning more about the matplotlib API.

270 

| 

Chapter 9: Plotting and Visualization

Table 9-3. Series.plot method arguments

Argument
label

ax

style

alpha

kind

logy

Description
Label for plot legend
matplotlib subplot object to plot on; if nothing passed, uses active matplotlib subplot
Style string, like &#39;ko--&#39;, to be passed to matplotlib
The plot fill opacity (from 0 to 1)
Can be &#39;area&#39;, &#39;bar&#39;, &#39;barh&#39;, &#39;density&#39;, &#39;hist&#39;, &#39;kde&#39;, &#39;line&#39;, &#39;pie&#39;
Use logarithmic scaling on the y-axis

use_index Use the object index for tick labels
rot

xticks

yticks

xlim

ylim

grid

Rotation of tick labels (0 through 360)
Values to use for x-axis ticks
Values to use for y-axis ticks
x-axis limits (e.g., [0, 10])
y-axis limits
Display axis grid (on by default)

DataFrame has a number of options allowing some flexibility with how the columns
are handled; for example, whether to plot them all on the same subplot or to create
separate subplots. See Table 9-4 for more on these.

Table 9-4. DataFrame-specific plot arguments

Argument
subplots

sharex

sharey

figsize

title

legend

Description
Plot each DataFrame column in a separate subplot
If subplots=True, share the same x-axis, linking ticks and limits
If subplots=True, share the same y-axis
Size of figure to create as tuple
Plot title as string
Add a subplot legend (True by default)

sort_columns Plot columns in alphabetical order; by default uses existing column order

For time series plotting, see Chapter 11.

9.2 Plotting with pandas and seaborn 

| 

271

Bar Plots
The  plot.bar()  and  plot.barh()  make  vertical  and  horizontal  bar  plots,  respec
tively.  In  this  case,  the  Series  or  DataFrame  index  will  be  used  as  the  x  (bar)  or  y
(barh) ticks (see Figure 9-15):

In [64]: fig, axes = plt.subplots(2, 1)

In [65]: data = pd.Series(np.random.rand(16), index=list(&#39;abcdefghijklmnop&#39;))

In [66]: data.plot.bar(ax=axes[0], color=&#39;k&#39;, alpha=0.7)
Out[66]: &lt;matplotlib.axes._subplots.AxesSubplot at 0x7fb62493d470&gt;

In [67]: data.plot.barh(ax=axes[1], color=&#39;k&#39;, alpha=0.7)

Figure 9-15. Horizonal and vertical bar plot

The options color=&#39;k&#39; and alpha=0.7 set the color of the plots to black and use par
tial transparency on the filling.

272 

| 

Chapter 9: Plotting and Visualization

With a DataFrame, bar plots group the values in each row together in a group in bars,
side by side, for each value. See Figure 9-16:

In [69]: df = pd.DataFrame(np.random.rand(6, 4),
   ....:                   index=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;, &#39;six&#39;],
   ....:                   columns=pd.Index([&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;], name=&#39;Genus&#39;))

In [70]: df
Out[70]: 
Genus         A         B         C         D
one    0.370670  0.602792  0.229159  0.486744
two    0.420082  0.571653  0.049024  0.880592
three  0.814568  0.277160  0.880316  0.431326
four   0.374020  0.899420  0.460304  0.100843
five   0.433270  0.125107  0.494675  0.961825
six    0.601648  0.478576  0.205690  0.560547

In [71]: df.plot.bar()

Figure 9-16. DataFrame bar plot

Note that the name Genus on the DataFrames columns is used to title the legend.

9.2 Plotting with pandas and seaborn 

| 

273

We create stacked bar plots from a DataFrame by passing stacked=True, resulting in
the value in each row being stacked together (see Figure 9-17):

In [73]: df.plot.barh(stacked=True, alpha=0.5)

Figure 9-17. DataFrame stacked bar plot

A useful recipe for bar plots is to visualize a Seriess value frequency 
using value_counts: s.value_counts().plot.bar().

Returning to the tipping dataset used earlier in the book, suppose we wanted to make
a stacked bar plot showing the percentage of data points for each party size on each
day. I load the data using read_csv and make a cross-tabulation by day and party size:

In [75]: tips = pd.read_csv(&#39;examples/tips.csv&#39;)

In [76]: party_counts = pd.crosstab(tips[&#39;day&#39;], tips[&#39;size&#39;])

In [77]: party_counts
Out[77]: 
size  1   2   3   4  5  6
day                      
Fri   1  16   1   1  0  0
Sat   2  53  18  13  1  0
Sun   0  39  15  18  3  1
Thur  1  48   4   5  1  3

274 

| 

Chapter 9: Plotting and Visualization

# Not many 1- and 6-person parties
In [78]: party_counts = party_counts.loc[:, 2:5]

Then, normalize so that each row sums to 1 and make the plot (see Figure 9-18):

# Normalize to sum to 1
In [79]: party_pcts = party_counts.div(party_counts.sum(1), axis=0)

In [80]: party_pcts
Out[80]: 
size         2         3         4         5
day                                         
Fri   0.888889  0.055556  0.055556  0.000000
Sat   0.623529  0.211765  0.152941  0.011765
Sun   0.520000  0.200000  0.240000  0.040000
Thur  0.827586  0.068966  0.086207  0.017241

In [81]: party_pcts.plot.bar()

Figure 9-18. Fraction of parties by size on each day

So you can see that party sizes appear to increase on the weekend in this dataset.

With data that requires aggregation or summarization before making a plot, using the
seaborn  package  can  make  things  much  simpler.  Lets  look  now  at  the  tipping  per
centage by day with seaborn (see Figure 9-19 for the resulting plot):

9.2 Plotting with pandas and seaborn 

| 

275

In [83]: import seaborn as sns

In [84]: tips[&#39;tip_pct&#39;] = tips[&#39;tip&#39;] / (tips[&#39;total_bill&#39;] - tips[&#39;tip&#39;])

In [85]: tips.head()
Out[85]: 
   total_bill   tip smoker  day    time  size   tip_pct
0       16.99  1.01     No  Sun  Dinner     2  0.063204
1       10.34  1.66     No  Sun  Dinner     3  0.191244
2       21.01  3.50     No  Sun  Dinner     3  0.199886
3       23.68  3.31     No  Sun  Dinner     2  0.162494
4       24.59  3.61     No  Sun  Dinner     4  0.172069

In [86]: sns.barplot(x=&#39;tip_pct&#39;, y=&#39;day&#39;, data=tips, orient=&#39;h&#39;)

Figure 9-19. Tipping percentage by day with error bars

Plotting  functions  in  seaborn  take  a  data  argument,  which  can  be  a  pandas  Data
Frame.  The  other  arguments  refer  to  column  names.  Because  there  are  multiple
observations for each value in the day, the bars are the average value of tip_pct. The
black lines drawn on the bars represent the 95% confidence interval (this can be con
figured through optional arguments).

276 

| 

Chapter 9: Plotting and Visualization

seaborn.barplot has a hue option that enables us to split by an additional categorical
value (Figure 9-20):

In [88]: sns.barplot(x=&#39;tip_pct&#39;, y=&#39;day&#39;, hue=&#39;time&#39;, data=tips, orient=&#39;h&#39;)

Figure 9-20. Tipping percentage by day and time

Notice  that  seaborn  has  automatically  changed  the  aesthetics  of  plots:  the  default
color palette, plot background, and grid line colors. You can switch between different
plot appearances using seaborn.set:

In [90]: sns.set(style=&#34;whitegrid&#34;)

Histograms and Density Plots
A histogram is a kind of bar plot that gives a discretized display of value frequency.
The  data  points  are  split  into  discrete,  evenly  spaced  bins,  and  the  number  of  data
points in each bin is plotted. Using the tipping data from before, we can make a histo
gram  of  tip  percentages  of  the  total  bill  using  the  plot.hist  method  on  the  Series
(see Figure 9-21):

In [92]: tips[&#39;tip_pct&#39;].plot.hist(bins=50)

9.2 Plotting with pandas and seaborn 

| 

277

Figure 9-21. Histogram of tip percentages

A related plot type is a density plot, which is formed by computing an estimate of a
continuous probability distribution that might have generated the observed data. The
usual procedure is to approximate this distribution as a mixture of kernelsthat is,
simpler distributions like the normal distribution. Thus, density plots are also known
as  kernel  density  estimate  (KDE)  plots.  Using  plot.kde  makes  a  density  plot  using
the conventional mixture-of-normals estimate (see Figure 9-22):

In [94]: tips[&#39;tip_pct&#39;].plot.density()

278 

| 

Chapter 9: Plotting and Visualization

Figure 9-22. Density plot of tip percentages

Seaborn  makes  histograms  and  density  plots  even  easier  through  its  distplot
method, which can plot both a histogram and a continuous density estimate simulta
neously.  As  an  example,  consider  a  bimodal  distribution  consisting  of  draws  from
two different standard normal distributions (see Figure 9-23):

In [96]: comp1 = np.random.normal(0, 1, size=200)

In [97]: comp2 = np.random.normal(10, 2, size=200)

In [98]: values = pd.Series(np.concatenate([comp1, comp2]))

In [99]: sns.distplot(values, bins=100, color=&#39;k&#39;)

9.2 Plotting with pandas and seaborn 

| 

279

Figure 9-23. Normalized histogram of normal mixture with density estimate

Scatter or Point Plots
Point plots or scatter plots can be a useful way of examining the relationship between
two  one-dimensional  data  series.  For  example,  here  we  load  the  macrodata  dataset
from the statsmodels project, select a few variables, then compute log differences:

In [100]: macro = pd.read_csv(&#39;examples/macrodata.csv&#39;)

In [101]: data = macro[[&#39;cpi&#39;, &#39;m1&#39;, &#39;tbilrate&#39;, &#39;unemp&#39;]]

In [102]: trans_data = np.log(data).diff().dropna()

In [103]: trans_data[-5:]
Out[103]: 
          cpi        m1  tbilrate     unemp
198 -0.007904  0.045361 -0.396881  0.105361
199 -0.021979  0.066753 -2.277267  0.139762
200  0.002340  0.010286  0.606136  0.160343
201  0.008419  0.037461 -0.200671  0.127339
202  0.008894  0.012202 -0.405465  0.042560

280 

| 

Chapter 9: Plotting and Visualization

We can then use seaborns regplot method, which makes a scatter plot and fits a lin
ear regression line (see Figure 9-24):

In [105]: sns.regplot(&#39;m1&#39;, &#39;unemp&#39;, data=trans_data)
Out[105]: &lt;matplotlib.axes._subplots.AxesSubplot at 0x7fb613720be0&gt;

In [106]: plt.title(&#39;Changes in log %s versus log %s&#39; % (&#39;m1&#39;, &#39;unemp&#39;))

Figure 9-24. A seaborn regression/scatter plot

In exploratory data analysis its helpful to be able to look at all the scatter plots among
a group of variables; this is known as a pairs plot or scatter plot matrix. Making such a
plot  from  scratch  is  a  bit  of  work,  so  seaborn  has  a  convenient  pairplot  function,
which  supports  placing  histograms  or  density  estimates  of  each  variable  along  the
diagonal (see Figure 9-25 for the resulting plot):

In [107]: sns.pairplot(trans_data, diag_kind=&#39;kde&#39;, plot_kws={&#39;alpha&#39;: 0.2})

9.2 Plotting with pandas and seaborn 

| 

281

Figure 9-25. Pair plot matrix of statsmodels macro data

You may notice the plot_kws argument. This enables us to pass down configuration
options  to  the  individual  plotting  calls  on  the  off-diagonal  elements.  Check  out  the
seaborn.pairplot docstring for more granular configuration options.

282 

| 

Chapter 9: Plotting and Visualization

Facet Grids and Categorical Data
What about datasets where we have additional grouping dimensions? One way to vis
ualize data with many categorical variables is to use a facet grid. Seaborn has a useful
built-in function factorplot that simplifies making many kinds of faceted plots (see
Figure 9-26 for the resulting plot):

In [108]: sns.factorplot(x=&#39;day&#39;, y=&#39;tip_pct&#39;, hue=&#39;time&#39;, col=&#39;smoker&#39;,
   .....:                kind=&#39;bar&#39;, data=tips[tips.tip_pct &lt; 1])

Figure 9-26. Tipping percentage by day/time/smoker

Instead  of  grouping  by  &#39;time&#39;  by  different  bar  colors  within  a  facet,  we  can  also
expand the facet grid by adding one row per time value (Figure 9-27):

In [109]: sns.factorplot(x=&#39;day&#39;, y=&#39;tip_pct&#39;, row=&#39;time&#39;,
   .....:                col=&#39;smoker&#39;,
   .....:                kind=&#39;bar&#39;, data=tips[tips.tip_pct &lt; 1])

9.2 Plotting with pandas and seaborn 

| 

283

Figure 9-27. tip_pct by day; facet by time/smoker

factorplot supports other plot types that may be useful depending on what you are
trying to display. For example, box plots (which show the median, quartiles, and out
liers) can be an effective visualization type (Figure 9-28):

In [110]: sns.factorplot(x=&#39;tip_pct&#39;, y=&#39;day&#39;, kind=&#39;box&#39;,
   .....:                data=tips[tips.tip_pct &lt; 0.5])

284 

| 

Chapter 9: Plotting and Visualization

Figure 9-28. Box plot of tip_pct by day

You can create your own facet grid plots using the more general seaborn.FacetGrid
class. See the seaborn documentation for more.

9.3 Other Python Visualization Tools
As is common with open source, there are a plethora of options for creating graphics
in Python (too many to list). Since 2010, much development effort has been focused
on creating interactive graphics for publication on the web. With tools like Bokeh and
Plotly,  its  now  possible  to  specify  dynamic,  interactive  graphics  in  Python  that  are
destined for a web browser.

For  creating  static  graphics  for  print  or  web,  I  recommend  defaulting  to  matplotlib
and add-on libraries like pandas and seaborn for your needs. For other data visualiza
tion requirements, it may be useful to learn one of the other available tools out there.
I encourage you to explore the ecosystem as it continues to involve and innovate into
the future.

9.3 Other Python Visualization Tools 

| 

285

9.4 Conclusion
The goal of this chapter was to get your feet wet with some basic data visualization
using pandas, matplotlib, and seaborn. If visually communicating the results of data
analysis  is  important  in  your  work,  I  encourage  you  to  seek  out  resources  to  learn
more  about  effective  data  visualization.  It  is  an  active  field  of  research  and  you  can
practice with many excellent learning resources available online and in print form.

In the next chapter, we turn our attention to data aggregation and group operations
with pandas.

286 

| 

Chapter 9: Plotting and Visualization

CHAPTER 10
Data Aggregation and Group Operations

Categorizing a dataset and applying a function to each group, whether an aggregation
or  transformation,  is  often  a  critical  component  of  a  data  analysis  workflow.  After
loading, merging, and preparing a dataset, you may need to compute group statistics
or  possibly  pivot  tables  for  reporting  or  visualization  purposes.  pandas  provides  a
flexible  groupby  interface,  enabling  you  to  slice,  dice,  and  summarize  datasets  in  a
natural way.

One  reason  for  the  popularity  of  relational  databases  and  SQL  (which  stands  for
structured query language) is the ease with which data can be joined, filtered, trans
formed,  and  aggregated.  However,  query  languages  like  SQL  are  somewhat  con
strained in the kinds of group operations that can be performed. As you will see, with
the expressiveness of Python and pandas, we can perform quite complex group oper
ations by utilizing any function that accepts a pandas object or NumPy array. In this
chapter, you will learn how to:

 Split  a  pandas  object  into  pieces  using  one  or  more  keys  (in  the  form  of  func

tions, arrays, or DataFrame column names)

 Calculate group summary statistics, like count, mean, or standard deviation, or a

user-defined function

 Apply within-group transformations or other manipulations, like normalization,

linear regression, rank, or subset selection

 Compute pivot tables and cross-tabulations

 Perform quantile analysis and other statistical group analyses

287

Aggregation  of  time  series  data,  a  special  use  case  of  groupby,  is
referred  to  as  resampling  in  this  book  and  will  receive  separate
treatment in Chapter 11.

10.1 GroupBy Mechanics
Hadley Wickham, an author of many popular packages for the R programming lan
guage,  coined  the  term  split-apply-combine  for  describing  group  operations.  In  the
first stage of the process, data contained in a pandas object, whether a Series, Data
Frame, or otherwise, is split into groups based on one or more keys that you provide.
The splitting is performed on a particular axis of an object. For example, a DataFrame
can  be  grouped  on  its  rows  (axis=0)  or  its  columns  (axis=1).  Once  this  is  done,  a
function  is  applied  to  each  group,  producing  a  new  value.  Finally,  the  results  of  all
those function applications are combined into a result object. The form of the result
ing object will usually depend on whats being done to the data. See Figure 10-1 for a
mockup of a simple group aggregation.

Figure 10-1. Illustration of a group aggregation

Each  grouping  key  can  take  many  forms,  and  the  keys  do  not  have  to  be  all  of  the
same type:

 A list or array of values that is the same length as the axis being grouped

 A value indicating a column name in a DataFrame

288 

| 

Chapter 10: Data Aggregation and Group Operations

 A  dict  or  Series  giving  a  correspondence  between  the  values  on  the  axis  being

grouped and the group names

 A function to be invoked on the axis index or the individual labels in the index

Note that the latter three methods are shortcuts for producing an array of values to be
used  to  split  up  the  object.  Dont  worry  if  this  all  seems  abstract.  Throughout  this
chapter, I will give many examples of all these methods. To get started, here is a small
tabular dataset as a DataFrame:

In [10]: df = pd.DataFrame({&#39;key1&#39; : [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;],
   ....:                    &#39;key2&#39; : [&#39;one&#39;, &#39;two&#39;, &#39;one&#39;, &#39;two&#39;, &#39;one&#39;],
   ....:                    &#39;data1&#39; : np.random.randn(5),
   ....:                    &#39;data2&#39; : np.random.randn(5)})

In [11]: df
Out[11]: 
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
1  0.478943  0.092908    a  two
2 -0.519439  0.281746    b  one
3 -0.555730  0.769023    b  two
4  1.965781  1.246435    a  one

Suppose you wanted to compute the mean of the data1 column using the labels from
key1. There are a number of ways to do this. One is to access data1 and call groupby
with the column (a Series) at key1:

In [12]: grouped = df[&#39;data1&#39;].groupby(df[&#39;key1&#39;])

In [13]: grouped
Out[13]: &lt;pandas.core.groupby.SeriesGroupBy object at 0x7faa31537390&gt;

This grouped variable is now a GroupBy object. It has not actually computed anything
yet  except  for  some  intermediate  data  about  the  group  key  df[&#39;key1&#39;].  The  idea  is
that  this  object  has  all  of  the  information  needed  to  then  apply  some  operation  to
each of the groups. For example, to compute group means we can call the GroupBys
mean method:

In [14]: grouped.mean()
Out[14]: 
key1
a    0.746672
b   -0.537585
Name: data1, dtype: float64

Later,  Ill  explain  more  about  what  happens  when  you  call  .mean().  The  important
thing here is that the data (a Series) has been aggregated according to the group key,
producing a new Series that is now indexed by the unique values in the key1 column.

10.1 GroupBy Mechanics 

| 

289

The  result  index  has  the  name  &#39;key1&#39;  because  the  DataFrame  column  df[&#39;key1&#39;]
did.

If instead we had passed multiple arrays as a list, wed get something different:

In [15]: means = df[&#39;data1&#39;].groupby([df[&#39;key1&#39;], df[&#39;key2&#39;]]).mean()

In [16]: means
Out[16]: 
key1  key2
a     one     0.880536
      two     0.478943
b     one    -0.519439
      two    -0.555730
Name: data1, dtype: float64

Here  we  grouped  the  data  using  two  keys,  and  the  resulting  Series  now  has  a  hier
archical index consisting of the unique pairs of keys observed:

In [17]: means.unstack()
Out[17]: 
key2       one       two
key1                    
a     0.880536  0.478943
b    -0.519439 -0.555730

In this example, the group keys are all Series, though they could be any arrays of the
right length:

In [18]: states = np.array([&#39;Ohio&#39;, &#39;California&#39;, &#39;California&#39;, &#39;Ohio&#39;, &#39;Ohio&#39;])

In [19]: years = np.array([2005, 2005, 2006, 2005, 2006])

In [20]: df[&#39;data1&#39;].groupby([states, years]).mean()
Out[20]: 
California  2005    0.478943
            2006   -0.519439
Ohio        2005   -0.380219
            2006    1.965781
Name: data1, dtype: float64

Frequently the grouping information is found in the same DataFrame as the data you
want to work on. In that case, you can pass column names (whether those are strings,
numbers, or other Python objects) as the group keys:

In [21]: df.groupby(&#39;key1&#39;).mean()
Out[21]: 
         data1     data2
key1                    
a     0.746672  0.910916
b    -0.537585  0.525384

In [22]: df.groupby([&#39;key1&#39;, &#39;key2&#39;]).mean()

290 

| 

Chapter 10: Data Aggregation and Group Operations

Out[22]: 
              data1     data2
key1 key2                    
a    one   0.880536  1.319920
     two   0.478943  0.092908
b    one  -0.519439  0.281746
     two  -0.555730  0.769023

You may have noticed in the first case df.groupby(&#39;key1&#39;).mean() that there is no
key2 column in the result. Because df[&#39;key2&#39;] is not numeric data, it is said to be a
nuisance  column,  which  is  therefore  excluded  from  the  result.  By  default,  all  of  the
numeric  columns  are  aggregated,  though  it  is  possible  to  filter  down  to  a  subset,  as
youll see soon.

Regardless of the objective in using  groupby, a generally useful GroupBy method is
size, which returns a Series containing group sizes:

In [23]: df.groupby([&#39;key1&#39;, &#39;key2&#39;]).size()
Out[23]: 
key1  key2
a     one     2
      two     1
b     one     1
      two     1
dtype: int64

Take note that any missing values in a group key will be excluded from the result.

Iterating Over Groups
The GroupBy object supports iteration, generating a sequence of 2-tuples containing
the group name along with the chunk of data. Consider the following:

In [24]: for name, group in df.groupby(&#39;key1&#39;):
   ....:     print(name)
   ....:     print(group)
   ....:
a
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
1  0.478943  0.092908    a  two
4  1.965781  1.246435    a  one
b
      data1     data2 key1 key2
2 -0.519439  0.281746    b  one
3 -0.555730  0.769023    b  two

In the case of multiple keys, the first element in the tuple will be a tuple of key values:

In [25]: for (k1, k2), group in df.groupby([&#39;key1&#39;, &#39;key2&#39;]):
   ....:     print((k1, k2))
   ....:     print(group)

10.1 GroupBy Mechanics 

| 

291

   ....:
(&#39;a&#39;, &#39;one&#39;)
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
4  1.965781  1.246435    a  one
(&#39;a&#39;, &#39;two&#39;)
      data1     data2 key1 key2
1  0.478943  0.092908    a  two
(&#39;b&#39;, &#39;one&#39;)
      data1     data2 key1 key2
2 -0.519439  0.281746    b  one
(&#39;b&#39;, &#39;two&#39;)
     data1     data2 key1 key2
3 -0.55573  0.769023    b  two

Of course, you can choose to do whatever you want with the pieces of data. A recipe
you may find useful is computing a dict of the data pieces as a one-liner:

In [26]: pieces = dict(list(df.groupby(&#39;key1&#39;)))

In [27]: pieces[&#39;b&#39;]
Out[27]: 
      data1     data2 key1 key2
2 -0.519439  0.281746    b  one
3 -0.555730  0.769023    b  two

By  default  groupby  groups  on  axis=0,  but  you  can  group  on  any  of  the  other  axes.
For example, we could group the columns of our example df here by dtype like so:

In [28]: df.dtypes
Out[28]: 
data1    float64
data2    float64
key1      object
key2      object
dtype: object

In [29]: grouped = df.groupby(df.dtypes, axis=1)

We can print out the groups like so:

In [30]: for dtype, group in grouped:
   ....:     print(dtype)
   ....:     print(group)
   ....:
float64
      data1     data2
0 -0.204708  1.393406
1  0.478943  0.092908
2 -0.519439  0.281746
3 -0.555730  0.769023
4  1.965781  1.246435
object
  key1 key2

292 

| 

Chapter 10: Data Aggregation and Group Operations

0    a  one
1    a  two
2    b  one
3    b  two
4    a  one

Selecting a Column or Subset of Columns
Indexing a GroupBy object created from a DataFrame with a column name or array
of  column  names  has  the  effect  of  column  subsetting  for  aggregation.  This  means
that:

df.groupby(&#39;key1&#39;)[&#39;data1&#39;]
df.groupby(&#39;key1&#39;)[[&#39;data2&#39;]]

are syntactic sugar for:

df[&#39;data1&#39;].groupby(df[&#39;key1&#39;])
df[[&#39;data2&#39;]].groupby(df[&#39;key1&#39;])

Especially for large datasets, it may be desirable to aggregate only a few columns. For
example, in the preceding dataset, to compute means for just the data2 column and
get the result as a DataFrame, we could write:

In [31]: df.groupby([&#39;key1&#39;, &#39;key2&#39;])[[&#39;data2&#39;]].mean()
Out[31]: 
              data2
key1 key2          
a    one   1.319920
     two   0.092908
b    one   0.281746
     two   0.769023

The  object  returned  by  this  indexing  operation  is  a  grouped  DataFrame  if  a  list  or
array is passed or a grouped Series if only a single column name is passed as a scalar:

In [32]: s_grouped = df.groupby([&#39;key1&#39;, &#39;key2&#39;])[&#39;data2&#39;]

In [33]: s_grouped
Out[33]: &lt;pandas.core.groupby.SeriesGroupBy object at 0x7faa30c78da0&gt;

In [34]: s_grouped.mean()
Out[34]: 
key1  key2
a     one     1.319920
      two     0.092908
b     one     0.281746
      two     0.769023
Name: data2, dtype: float64

10.1 GroupBy Mechanics 

| 

293

Grouping with Dicts and Series
Grouping information may exist in a form other than an array. Lets consider another
example DataFrame:

In [35]: people = pd.DataFrame(np.random.randn(5, 5),
   ....:                       columns=[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;],
   ....:                       index=[&#39;Joe&#39;, &#39;Steve&#39;, &#39;Wes&#39;, &#39;Jim&#39;, &#39;Travis&#39;])

In [36]: people.iloc[2:3, [1, 2]] = np.nan # Add a few NA values

In [37]: people
Out[37]: 
               a         b         c         d         e
Joe     1.007189 -1.296221  0.274992  0.228913  1.352917
Steve   0.886429 -2.001637 -0.371843  1.669025 -0.438570
Wes    -0.539741       NaN       NaN -1.021228 -0.577087
Jim     0.124121  0.302614  0.523772  0.000940  1.343810
Travis -0.713544 -0.831154 -2.370232 -1.860761 -0.860757

Now,  suppose  I  have  a  group  correspondence  for  the  columns  and  want  to  sum
together the columns by group:

In [38]: mapping = {&#39;a&#39;: &#39;red&#39;, &#39;b&#39;: &#39;red&#39;, &#39;c&#39;: &#39;blue&#39;,
   ....:            &#39;d&#39;: &#39;blue&#39;, &#39;e&#39;: &#39;red&#39;, &#39;f&#39; : &#39;orange&#39;}

Now, you could construct an array from this dict to pass to groupby, but instead we
can just pass the dict (I included the key &#39;f&#39; to highlight that unused grouping keys
are OK):

In [39]: by_column = people.groupby(mapping, axis=1)

In [40]: by_column.sum()
Out[40]: 
            blue       red
Joe     0.503905  1.063885
Steve   1.297183 -1.553778
Wes    -1.021228 -1.116829
Jim     0.524712  1.770545
Travis -4.230992 -2.405455

The same functionality holds for Series, which can be viewed as a fixed-size mapping:

In [41]: map_series = pd.Series(mapping)

In [42]: map_series
Out[42]: 
a       red
b       red
c      blue
d      blue
e       red
f    orange

294 

| 

Chapter 10: Data Aggregation and Group Operations

dtype: object

In [43]: people.groupby(map_series, axis=1).count()
Out[43]: 
        blue  red
Joe        2    3
Steve      2    3
Wes        1    2
Jim        2    3
Travis     2    3

Grouping with Functions
Using Python functions is a more generic way of defining a group mapping compared
with a dict or Series. Any function passed as a group key will be called once per index
value, with the return values being used as the group names. More concretely, con
sider  the  example  DataFrame  from  the  previous  section,  which  has  peoples  first
names  as  index  values.  Suppose  you  wanted  to  group  by  the  length  of  the  names;
while you could compute an array of string lengths, its simpler to just pass the  len
function:

In [44]: people.groupby(len).sum()
Out[44]: 
          a         b         c         d         e
3  0.591569 -0.993608  0.798764 -0.791374  2.119639
5  0.886429 -2.001637 -0.371843  1.669025 -0.438570
6 -0.713544 -0.831154 -2.370232 -1.860761 -0.860757

Mixing functions with arrays, dicts, or Series is not a problem as everything gets con
verted to arrays internally:

In [45]: key_list = [&#39;one&#39;, &#39;one&#39;, &#39;one&#39;, &#39;two&#39;, &#39;two&#39;]

In [46]: people.groupby([len, key_list]).min()
Out[46]: 
              a         b         c         d         e
3 one -0.539741 -1.296221  0.274992 -1.021228 -0.577087
  two  0.124121  0.302614  0.523772  0.000940  1.343810
5 one  0.886429 -2.001637 -0.371843  1.669025 -0.438570
6 two -0.713544 -0.831154 -2.370232 -1.860761 -0.860757

Grouping by Index Levels
A  final  convenience  for  hierarchically  indexed  datasets  is  the  ability  to  aggregate
using one of the levels of an axis index. Lets look at an example:

In [47]: columns = pd.MultiIndex.from_arrays([[&#39;US&#39;, &#39;US&#39;, &#39;US&#39;, &#39;JP&#39;, &#39;JP&#39;],
   ....:                                     [1, 3, 5, 1, 3]],
   ....:                                     names=[&#39;cty&#39;, &#39;tenor&#39;])

In [48]: hier_df = pd.DataFrame(np.random.randn(4, 5), columns=columns)

10.1 GroupBy Mechanics 

| 

295

In [49]: hier_df
Out[49]: 
cty          US                            JP          
tenor         1         3         5         1         3
0      0.560145 -1.265934  0.119827 -1.063512  0.332883
1     -2.359419 -0.199543 -1.541996 -0.970736 -1.307030
2      0.286350  0.377984 -0.753887  0.331286  1.349742
3      0.069877  0.246674 -0.011862  1.004812  1.327195

To group by level, pass the level number or name using the level keyword:

In [50]: hier_df.groupby(level=&#39;cty&#39;, axis=1).count()
Out[50]: 
cty  JP  US
0     2   3
1     2   3
2     2   3
3     2   3

10.2 Data Aggregation
Aggregations  refer  to  any  data  transformation  that  produces  scalar  values  from
arrays.  The  preceding  examples  have  used  several  of  them,  including  mean,  count,
min,  and  sum.  You  may  wonder  what  is  going  on  when  you  invoke  mean()  on  a
GroupBy  object.  Many  common  aggregations,  such  as  those  found  in  Table  10-1,
have  optimized  implementations.  However,  you  are  not  limited  to  only  this  set  of
methods.

Table 10-1. Optimized groupby methods

Function name
count

sum

mean

median

std, var

min, max

prod

Description
Number of non-NA values in the group
Sum of non-NA values
Mean of non-NA values
Arithmetic median of non-NA values
Unbiased (n  1 denominator) standard deviation and variance
Minimum and maximum of non-NA values
Product of non-NA values

first, last First and last non-NA values

You can use aggregations of your own devising and additionally call any method that
is  also  defined  on  the  grouped  object.  For  example,  you  might  recall  that  quantile
computes sample quantiles of a Series or a DataFrames columns.

While quantile is not explicitly implemented for GroupBy, it is a Series method and
thus  available  for  use.  Internally,  GroupBy  efficiently  slices  up  the  Series,  calls

296 

| 

Chapter 10: Data Aggregation and Group Operations

piece.quantile(0.9) for each piece, and then assembles those results together into
the result object:

In [51]: df
Out[51]: 
      data1     data2 key1 key2
0 -0.204708  1.393406    a  one
1  0.478943  0.092908    a  two
2 -0.519439  0.281746    b  one
3 -0.555730  0.769023    b  two
4  1.965781  1.246435    a  one

In [52]: grouped = df.groupby(&#39;key1&#39;)

In [53]: grouped[&#39;data1&#39;].quantile(0.9)
Out[53]: 
key1
a    1.668413
b   -0.523068
Name: data1, dtype: float64

To use your own aggregation functions, pass any function that aggregates an array to
the aggregate or agg method:

In [54]: def peak_to_peak(arr):
   ....:     return arr.max() - arr.min()

In [55]: grouped.agg(peak_to_peak)
Out[55]: 
         data1     data2
key1                    
a     2.170488  1.300498
b     0.036292  0.487276

You may notice that some methods like describe also work, even though they are not
aggregations, strictly speaking:

In [56]: grouped.describe()
Out[56]: 
     data1                                                              \
     count      mean       std       min       25%       50%       75%   
key1                                                                     
a      3.0  0.746672  1.109736 -0.204708  0.137118  0.478943  1.222362   
b      2.0 -0.537585  0.025662 -0.555730 -0.546657 -0.537585 -0.528512   
               data2                                                    \
           max count      mean       std       min       25%       50%   
key1                                                                     
a     1.965781   3.0  0.910916  0.712217  0.092908  0.669671  1.246435   
b    -0.519439   2.0  0.525384  0.344556  0.281746  0.403565  0.525384   

           75%       max  
key1                      

10.2 Data Aggregation 

| 

297

                          
a     1.319920  1.393406  
b     0.647203  0.769023  

I will explain in more detail what has happened here in Section 10.3, Apply: General
split-apply-combine, on page 302.

Custom aggregation functions are generally much slower than the
optimized  functions  found  in  Table  10-1.  This  is  because  there  is
some  extra  overhead  (function  calls,  data  rearrangement)  in  con
structing the intermediate group data chunks.

Column-Wise and Multiple Function Application
Lets  return  to  the  tipping  dataset  from  earlier  examples.  After  loading  it  with
read_csv, we add a tipping percentage column tip_pct:

In [57]: tips = pd.read_csv(&#39;examples/tips.csv&#39;)

# Add tip percentage of total bill
In [58]: tips[&#39;tip_pct&#39;] = tips[&#39;tip&#39;] / tips[&#39;total_bill&#39;]

In [59]: tips[:6]
Out[59]: 
   total_bill   tip smoker  day    time  size   tip_pct
0       16.99  1.01     No  Sun  Dinner     2  0.059447
1       10.34  1.66     No  Sun  Dinner     3  0.160542
2       21.01  3.50     No  Sun  Dinner     3  0.166587
3       23.68  3.31     No  Sun  Dinner     2  0.139780
4       24.59  3.61     No  Sun  Dinner     4  0.146808
5       25.29  4.71     No  Sun  Dinner     4  0.186240

As youve already seen, aggregating a Series or all of the columns of a DataFrame is a
matter of using aggregate with the desired function or calling a method like mean or
std. However, you may want to aggregate using a different function depending on the
column,  or  multiple  functions  at  once.  Fortunately,  this  is  possible  to  do,  which  Ill
illustrate through a number of examples. First, Ill group the tips by day and smoker:

In [60]: grouped = tips.groupby([&#39;day&#39;, &#39;smoker&#39;])

Note that for descriptive statistics like those in Table 10-1, you can pass the name of
the function as a string:

In [61]: grouped_pct = grouped[&#39;tip_pct&#39;]

In [62]: grouped_pct.agg(&#39;mean&#39;)
Out[62]: 
day   smoker
Fri   No        0.151650
      Yes       0.174783
Sat   No        0.158048

298 

| 

Chapter 10: Data Aggregation and Group Operations

      Yes       0.147906
Sun   No        0.160113
      Yes       0.187250
Thur  No        0.160298
      Yes       0.163863
Name: tip_pct, dtype: float64

If you pass a list of functions or function names instead, you get back a DataFrame
with column names taken from the functions:

In [63]: grouped_pct.agg([&#39;mean&#39;, &#39;std&#39;, peak_to_peak])
Out[63]: 
                 mean       std  peak_to_peak
day  smoker                                  
Fri  No      0.151650  0.028123      0.067349
     Yes     0.174783  0.051293      0.159925
Sat  No      0.158048  0.039767      0.235193
     Yes     0.147906  0.061375      0.290095
Sun  No      0.160113  0.042347      0.193226
     Yes     0.187250  0.154134      0.644685
Thur No      0.160298  0.038774      0.193350
     Yes     0.163863  0.039389      0.151240

Here we passed a list of aggregation functions to agg to evaluate indepedently on the
data groups.

You  dont  need  to  accept  the  names  that  GroupBy  gives  to  the  columns;  notably,
lambda  functions  have  the  name  &#39;&lt;lambda&gt;&#39;,  which  makes  them  hard  to  identify
(you can see for yourself by looking at a functions __name__ attribute). Thus, if you
pass a list of (name, function) tuples, the first element of each tuple will be used as
the  DataFrame  column  names  (you  can  think  of  a  list  of  2-tuples  as  an  ordered
mapping):

In [64]: grouped_pct.agg([(&#39;foo&#39;, &#39;mean&#39;), (&#39;bar&#39;, np.std)])
Out[64]: 
                  foo       bar
day  smoker                    
Fri  No      0.151650  0.028123
     Yes     0.174783  0.051293
Sat  No      0.158048  0.039767
     Yes     0.147906  0.061375
Sun  No      0.160113  0.042347
     Yes     0.187250  0.154134
Thur No      0.160298  0.038774
     Yes     0.163863  0.039389

With  a  DataFrame  you  have  more  options,  as  you  can  specify  a  list  of  functions  to
apply  to  all  of  the  columns  or  different  functions  per  column.  To  start,  suppose  we
wanted  to  compute  the  same  three  statistics  for  the  tip_pct  and  total_bill
columns:

10.2 Data Aggregation 

| 

299

In [65]: functions = [&#39;count&#39;, &#39;mean&#39;, &#39;max&#39;]

In [66]: result = grouped[&#39;tip_pct&#39;, &#39;total_bill&#39;].agg(functions)

In [67]: result
Out[67]: 
            tip_pct                     total_bill                  
              count      mean       max      count       mean    max
day  smoker                                                         
Fri  No           4  0.151650  0.187735          4  18.420000  22.75
     Yes         15  0.174783  0.263480         15  16.813333  40.17
Sat  No          45  0.158048  0.291990         45  19.661778  48.33
     Yes         42  0.147906  0.325733         42  21.276667  50.81
Sun  No          57  0.160113  0.252672         57  20.506667  48.17
     Yes         19  0.187250  0.710345         19  24.120000  45.35
Thur No          45  0.160298  0.266312         45  17.113111  41.19
     Yes         17  0.163863  0.241255         17  19.190588  43.11

As you can see, the resulting DataFrame has hierarchical columns, the same as you
would  get  aggregating  each  column  separately  and  using  concat  to  glue  the  results
together using the column names as the keys argument:

In [68]: result[&#39;tip_pct&#39;]
Out[68]: 
             count      mean       max
day  smoker                           
Fri  No          4  0.151650  0.187735
     Yes        15  0.174783  0.263480
Sat  No         45  0.158048  0.291990
     Yes        42  0.147906  0.325733
Sun  No         57  0.160113  0.252672
     Yes        19  0.187250  0.710345
Thur No         45  0.160298  0.266312
     Yes        17  0.163863  0.241255

As before, a list of tuples with custom names can be passed:

In [69]: ftuples = [(&#39;Durchschnitt&#39;, &#39;mean&#39;), (&#39;Abweichung&#39;, np.var)]

In [70]: grouped[&#39;tip_pct&#39;, &#39;total_bill&#39;].agg(ftuples)
Out[70]: 
                 tip_pct              total_bill            
            Durchschnitt Abweichung Durchschnitt  Abweichung
day  smoker                                                 
Fri  No         0.151650   0.000791    18.420000   25.596333
     Yes        0.174783   0.002631    16.813333   82.562438
Sat  No         0.158048   0.001581    19.661778   79.908965
     Yes        0.147906   0.003767    21.276667  101.387535
Sun  No         0.160113   0.001793    20.506667   66.099980
     Yes        0.187250   0.023757    24.120000  109.046044
Thur No         0.160298   0.001503    17.113111   59.625081
     Yes        0.163863   0.001551    19.190588   69.808518

300 

| 

Chapter 10: Data Aggregation and Group Operations

Now, suppose you wanted to apply potentially different functions to one or more of
the columns. To do this, pass a dict to agg that contains a mapping of column names
to any of the function specifications listed so far:

In [71]: grouped.agg({&#39;tip&#39; : np.max, &#39;size&#39; : &#39;sum&#39;})
Out[71]: 
               tip  size
day  smoker             
Fri  No       3.50     9
     Yes      4.73    31
Sat  No       9.00   115
     Yes     10.00   104
Sun  No       6.00   167
     Yes      6.50    49
Thur No       6.70   112
     Yes      5.00    40

In [72]: grouped.agg({&#39;tip_pct&#39; : [&#39;min&#39;, &#39;max&#39;, &#39;mean&#39;, &#39;std&#39;],
   ....:              &#39;size&#39; : &#39;sum&#39;})
Out[72]: 
              tip_pct                               size
                  min       max      mean       std  sum
day  smoker                                             
Fri  No      0.120385  0.187735  0.151650  0.028123    9
     Yes     0.103555  0.263480  0.174783  0.051293   31
Sat  No      0.056797  0.291990  0.158048  0.039767  115
     Yes     0.035638  0.325733  0.147906  0.061375  104
Sun  No      0.059447  0.252672  0.160113  0.042347  167
     Yes     0.065660  0.710345  0.187250  0.154134   49
Thur No      0.072961  0.266312  0.160298  0.038774  112
     Yes     0.090014  0.241255  0.163863  0.039389   40

A DataFrame will have hierarchical columns only if multiple functions are applied to
at least one column.

Returning Aggregated Data Without Row Indexes
In  all  of  the  examples  up  until  now,  the  aggregated  data  comes  back  with  an  index,
potentially  hierarchical,  composed  from  the  unique  group  key  combinations.  Since
this  isnt  always  desirable,  you  can  disable  this  behavior  in  most  cases  by  passing
as_index=False to groupby:

In [73]: tips.groupby([&#39;day&#39;, &#39;smoker&#39;], as_index=False).mean()
Out[73]: 
    day smoker  total_bill       tip      size   tip_pct
0   Fri     No   18.420000  2.812500  2.250000  0.151650
1   Fri    Yes   16.813333  2.714000  2.066667  0.174783
2   Sat     No   19.661778  3.102889  2.555556  0.158048
3   Sat    Yes   21.276667  2.875476  2.476190  0.147906
4   Sun     No   20.506667  3.167895  2.929825  0.160113
5   Sun    Yes   24.120000  3.516842  2.578947  0.187250

10.2 Data Aggregation 

| 

301

6  Thur     No   17.113111  2.673778  2.488889  0.160298
7  Thur    Yes   19.190588  3.030000  2.352941  0.163863

Of  course,  its  always  possible  to  obtain  the  result  in  this  format  by  calling
reset_index on the result. Using the as_index=False method avoids some unneces
sary computations.

10.3 Apply: General split-apply-combine
The most general-purpose GroupBy method is apply, which is the subject of the rest
of this section. As illustrated in Figure 10-2, apply splits the object being manipulated
into pieces, invokes the passed function on each piece, and then attempts to concate
nate the pieces together.

Figure 10-2. Illustration of a group aggregation

Returning  to  the  tipping  dataset  from  before,  suppose  you  wanted  to  select  the  top
five  tip_pct  values  by  group.  First,  write  a  function  that  selects  the  rows  with  the
largest values in a particular column:

In [74]: def top(df, n=5, column=&#39;tip_pct&#39;):
   ....:     return df.sort_values(by=column)[-n:]

In [75]: top(tips, n=6)
Out[75]: 
     total_bill   tip smoker  day    time  size   tip_pct
109       14.31  4.00    Yes  Sat  Dinner     2  0.279525
183       23.17  6.50    Yes  Sun  Dinner     4  0.280535
232       11.61  3.39     No  Sat  Dinner     2  0.291990

302 

| 

Chapter 10: Data Aggregation and Group Operations

67         3.07  1.00    Yes  Sat  Dinner     1  0.325733
178        9.60  4.00    Yes  Sun  Dinner     2  0.416667
172        7.25  5.15    Yes  Sun  Dinner     2  0.710345

Now,  if  we  group  by  smoker,  say,  and  call  apply  with  this  function,  we  get  the
following:

In [76]: tips.groupby(&#39;smoker&#39;).apply(top)
Out[76]: 
            total_bill   tip smoker   day    time  size   tip_pct
smoker                                                           
No     88        24.71  5.85     No  Thur   Lunch     2  0.236746
       185       20.69  5.00     No   Sun  Dinner     5  0.241663
       51        10.29  2.60     No   Sun  Dinner     2  0.252672
       149        7.51  2.00     No  Thur   Lunch     2  0.266312
       232       11.61  3.39     No   Sat  Dinner     2  0.291990
Yes    109       14.31  4.00    Yes   Sat  Dinner     2  0.279525
       183       23.17  6.50    Yes   Sun  Dinner     4  0.280535
       67         3.07  1.00    Yes   Sat  Dinner     1  0.325733
       178        9.60  4.00    Yes   Sun  Dinner     2  0.416667
       172        7.25  5.15    Yes   Sun  Dinner     2  0.710345

What  has  happened  here?  The  top  function  is  called  on  each  row  group  from  the
DataFrame, and then the results are glued together using pandas.concat, labeling the
pieces  with  the  group  names.  The  result  therefore  has  a  hierarchical  index  whose
inner level contains index values from the original DataFrame.

If you pass a function to apply that takes other arguments or keywords, you can pass
these after the function:

In [77]: tips.groupby([&#39;smoker&#39;, &#39;day&#39;]).apply(top, n=1, column=&#39;total_bill&#39;)
Out[77]: 
                 total_bill    tip smoker   day    time  size   tip_pct
smoker day                                                             
No     Fri  94        22.75   3.25     No   Fri  Dinner     2  0.142857
       Sat  212       48.33   9.00     No   Sat  Dinner     4  0.186220
       Sun  156       48.17   5.00     No   Sun  Dinner     6  0.103799
       Thur 142       41.19   5.00     No  Thur   Lunch     5  0.121389
Yes    Fri  95        40.17   4.73    Yes   Fri  Dinner     4  0.117750
       Sat  170       50.81  10.00    Yes   Sat  Dinner     3  0.196812
       Sun  182       45.35   3.50    Yes   Sun  Dinner     3  0.077178
       Thur 197       43.11   5.00    Yes  Thur   Lunch     4  0.115982

Beyond these basic usage mechanics, getting the most out of apply
may  require  some  creativity.  What  occurs  inside  the  function
passed  is  up  to  you;  it  only  needs  to  return  a  pandas  object  or  a
scalar value. The rest of this chapter will mainly consist of examples
showing you how to solve various problems using groupby.

10.3 Apply: General split-apply-combine 

| 

303

You may recall that I earlier called describe on a GroupBy object:

In [78]: result = tips.groupby(&#39;smoker&#39;)[&#39;tip_pct&#39;].describe()

In [79]: result
Out[79]: 
        count      mean       std       min       25%       50%       75%  \
smoker                                                                      
No      151.0  0.159328  0.039910  0.056797  0.136906  0.155625  0.185014   
Yes      93.0  0.163196  0.085119  0.035638  0.106771  0.153846  0.195059   
             max  
smoker            
No      0.291990  
Yes     0.710345  

In [80]: result.unstack(&#39;smoker&#39;)
Out[80]: 
       smoker
count  No        151.000000
       Yes        93.000000
mean   No          0.159328
       Yes         0.163196
std    No          0.039910
       Yes         0.085119
min    No          0.056797
       Yes         0.035638
25%    No          0.136906
       Yes         0.106771
50%    No          0.155625
       Yes         0.153846
75%    No          0.185014
       Yes         0.195059
max    No          0.291990
       Yes         0.710345
dtype: float64

Inside GroupBy, when you invoke a method like describe, it is actually just a short
cut for:

f = lambda x: x.describe()
grouped.apply(f)

Suppressing the Group Keys
In the preceding examples, you see that the resulting object has a hierarchical index
formed  from  the  group  keys  along  with  the  indexes  of  each  piece  of  the  original
object. You can disable this by passing group_keys=False to groupby:

304 

| 

Chapter 10: Data Aggregation and Group Operations

In [81]: tips.groupby(&#39;smoker&#39;, group_keys=False).apply(top)
Out[81]: 
     total_bill   tip smoker   day    time  size   tip_pct
88        24.71  5.85     No  Thur   Lunch     2  0.236746
185       20.69  5.00     No   Sun  Dinner     5  0.241663
51        10.29  2.60     No   Sun  Dinner     2  0.252672
149        7.51  2.00     No  Thur   Lunch     2  0.266312
232       11.61  3.39     No   Sat  Dinner     2  0.291990
109       14.31  4.00    Yes   Sat  Dinner     2  0.279525
183       23.17  6.50    Yes   Sun  Dinner     4  0.280535
67         3.07  1.00    Yes   Sat  Dinner     1  0.325733
178        9.60  4.00    Yes   Sun  Dinner     2  0.416667
172        7.25  5.15    Yes   Sun  Dinner     2  0.710345

Quantile and Bucket Analysis
As you may recall from Chapter 8, pandas has some tools, in particular cut and qcut,
for  slicing  data  up  into  buckets  with  bins  of  your  choosing  or  by  sample  quantiles.
Combining these functions with groupby makes it convenient to perform bucket or
quantile analysis on a dataset. Consider a simple random dataset and an equal-length
bucket categorization using cut:

In [82]: frame = pd.DataFrame({&#39;data1&#39;: np.random.randn(1000),
   ....:                       &#39;data2&#39;: np.random.randn(1000)})

In [83]: quartiles = pd.cut(frame.data1, 4)

In [84]: quartiles[:10]
Out[84]: 
0     (-1.23, 0.489]
1    (-2.956, -1.23]
2     (-1.23, 0.489]
3     (0.489, 2.208]
4     (-1.23, 0.489]
5     (0.489, 2.208]
6     (-1.23, 0.489]
7     (-1.23, 0.489]
8     (0.489, 2.208]
9     (0.489, 2.208]
Name: data1, dtype: category
Categories (4, interval[float64]): [(-2.956, -1.23] &lt; (-1.23, 0.489] &lt; (0.489, 2.
208] &lt; (2.208, 3.928]]

The  Categorical  object  returned  by  cut  can  be  passed  directly  to  groupby.  So  we
could compute a set of statistics for the data2 column like so:

In [85]: def get_stats(group):
   ....:     return {&#39;min&#39;: group.min(), &#39;max&#39;: group.max(),
   ....:             &#39;count&#39;: group.count(), &#39;mean&#39;: group.mean()}

In [86]: grouped = frame.data2.groupby(quartiles)

10.3 Apply: General split-apply-combine 

| 

305

In [87]: grouped.apply(get_stats).unstack()
Out[87]: 
                 count       max      mean       min
data1                                               
(-2.956, -1.23]   95.0  1.670835 -0.039521 -3.399312
(-1.23, 0.489]   598.0  3.260383 -0.002051 -2.989741
(0.489, 2.208]   297.0  2.954439  0.081822 -3.745356
(2.208, 3.928]    10.0  1.765640  0.024750 -1.929776

These  were  equal-length  buckets;  to  compute  equal-size  buckets  based  on  sample
quantiles, use qcut. Ill pass labels=False to just get quantile numbers:

# Return quantile numbers
In [88]: grouping = pd.qcut(frame.data1, 10, labels=False)

In [89]: grouped = frame.data2.groupby(grouping)

In [90]: grouped.apply(get_stats).unstack()
Out[90]: 
       count       max      mean       min
data1                                     
0      100.0  1.670835 -0.049902 -3.399312
1      100.0  2.628441  0.030989 -1.950098
2      100.0  2.527939 -0.067179 -2.925113
3      100.0  3.260383  0.065713 -2.315555
4      100.0  2.074345 -0.111653 -2.047939
5      100.0  2.184810  0.052130 -2.989741
6      100.0  2.458842 -0.021489 -2.223506
7      100.0  2.954439 -0.026459 -3.056990
8      100.0  2.735527  0.103406 -3.745356
9      100.0  2.377020  0.220122 -2.064111

We will take a closer look at pandass Categorical type in Chapter 12.

Example: Filling Missing Values with Group-Specific Values
When  cleaning  up  missing  data,  in  some  cases  you  will  replace  data  observations
using  dropna,  but  in  others  you  may  want  to  impute  (fill  in)  the  null  (NA)  values
using a fixed value or some value derived from the data.  fillna is the right tool to
use; for example, here I fill in NA values with the mean:

In [91]: s = pd.Series(np.random.randn(6))

In [92]: s[::2] = np.nan

In [93]: s
Out[93]: 
0         NaN
1   -0.125921
2         NaN
3   -0.884475

306 

| 

Chapter 10: Data Aggregation and Group Operations

4         NaN
5    0.227290
dtype: float64

In [94]: s.fillna(s.mean())
Out[94]: 
0   -0.261035
1   -0.125921
2   -0.261035
3   -0.884475
4   -0.261035
5    0.227290
dtype: float64

Suppose you need the fill value to vary by group. One way to do this is to group the
data  and  use  apply  with  a  function  that  calls  fillna  on  each  data  chunk.  Here  is
some sample data on US states divided into eastern and western regions:

In [95]: states = [&#39;Ohio&#39;, &#39;New York&#39;, &#39;Vermont&#39;, &#39;Florida&#39;,
   ....:           &#39;Oregon&#39;, &#39;Nevada&#39;, &#39;California&#39;, &#39;Idaho&#39;]

In [96]: group_key = [&#39;East&#39;] * 4 + [&#39;West&#39;] * 4

In [97]: data = pd.Series(np.random.randn(8), index=states)

In [98]: data
Out[98]: 
Ohio          0.922264
New York     -2.153545
Vermont      -0.365757
Florida      -0.375842
Oregon        0.329939
Nevada        0.981994
California    1.105913
Idaho        -1.613716
dtype: float64

Note that the syntax [&#39;East&#39;] * 4 produces a list containing four copies of the ele
ments in [&#39;East&#39;]. Adding lists together concatenates them.

Lets set some values in the data to be missing:

In [99]: data[[&#39;Vermont&#39;, &#39;Nevada&#39;, &#39;Idaho&#39;]] = np.nan

In [100]: data
Out[100]: 
Ohio          0.922264
New York     -2.153545
Vermont            NaN
Florida      -0.375842
Oregon        0.329939
Nevada             NaN
California    1.105913

10.3 Apply: General split-apply-combine 

| 

307

Idaho              NaN
dtype: float64

In [101]: data.groupby(group_key).mean()
Out[101]: 
East   -0.535707
West    0.717926
dtype: float64

We can fill the NA values using the group means like so:

In [102]: fill_mean = lambda g: g.fillna(g.mean())

In [103]: data.groupby(group_key).apply(fill_mean)
Out[103]: 
Ohio          0.922264
New York     -2.153545
Vermont      -0.535707
Florida      -0.375842
Oregon        0.329939
Nevada        0.717926
California    1.105913
Idaho         0.717926
dtype: float64

In  another  case,  you  might  have  predefined  fill  values  in  your  code  that  vary  by
group. Since the groups have a name attribute set internally, we can use that:

In [104]: fill_values = {&#39;East&#39;: 0.5, &#39;West&#39;: -1}

In [105]: fill_func = lambda g: g.fillna(fill_values[g.name])

In [106]: data.groupby(group_key).apply(fill_func)
Out[106]: 
Ohio          0.922264
New York     -2.153545
Vermont       0.500000
Florida      -0.375842
Oregon        0.329939
Nevada       -1.000000
California    1.105913
Idaho        -1.000000
dtype: float64

Example: Random Sampling and Permutation
Suppose you wanted to draw a random sample (with or without replacement) from a
large dataset for Monte Carlo simulation purposes or some other application. There
are  a  number  of  ways  to  perform  the  draws;  here  we  use  the  sample  method  for
Series.

To demonstrate, heres a way to construct a deck of English-style playing cards:

308 

| 

Chapter 10: Data Aggregation and Group Operations

# Hearts, Spades, Clubs, Diamonds
suits = [&#39;H&#39;, &#39;S&#39;, &#39;C&#39;, &#39;D&#39;]
card_val = (list(range(1, 11)) + [10] * 3) * 4
base_names = [&#39;A&#39;] + list(range(2, 11)) + [&#39;J&#39;, &#39;K&#39;, &#39;Q&#39;]
cards = []
for suit in [&#39;H&#39;, &#39;S&#39;, &#39;C&#39;, &#39;D&#39;]:
    cards.extend(str(num) + suit for num in base_names)

deck = pd.Series(card_val, index=cards)

So now we have a Series of length 52 whose index contains card names and values are
the ones used in Blackjack and other games (to keep things simple, I just let the ace
&#39;A&#39; be 1):

In [108]: deck[:13]
Out[108]: 
AH      1
2H      2
3H      3
4H      4
5H      5
6H      6
7H      7
8H      8
9H      9
10H    10
JH     10
KH     10
QH     10
dtype: int64

Now, based on what I said before, drawing a hand of five cards from the deck could
be written as:

In [109]: def draw(deck, n=5):
   .....:     return deck.sample(n)

In [110]: draw(deck)
Out[110]: 
AD     1
8C     8
5H     5
KC    10
2C     2
dtype: int64

Suppose  you  wanted  two  random  cards  from  each  suit.  Because  the  suit  is  the  last
character of each card name, we can group based on this and use apply:

In [111]: get_suit = lambda card: card[-1] # last letter is suit

In [112]: deck.groupby(get_suit).apply(draw, n=2)
Out[112]: 

10.3 Apply: General split-apply-combine 

| 

309

C  2C     2
   3C     3
D  KD    10
   8D     8
H  KH    10
   3H     3
S  2S     2
   4S     4
dtype: int64

Alternatively, we could write:

In [113]: deck.groupby(get_suit, group_keys=False).apply(draw, n=2)
Out[113]: 
KC    10
JC    10
AD     1
5D     5
5H     5
6H     6
7S     7
KS    10
dtype: int64

Example: Group Weighted Average and Correlation
Under the split-apply-combine paradigm of groupby, operations between columns in
a  DataFrame  or  two  Series,  such  as  a  group  weighted  average,  are  possible.  As  an
example, take this dataset containing group keys, values, and some weights:

In [114]: df = pd.DataFrame({&#39;category&#39;: [&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;,
   .....:                                 &#39;b&#39;, &#39;b&#39;, &#39;b&#39;, &#39;b&#39;],
   .....:                    &#39;data&#39;: np.random.randn(8),
   .....:                    &#39;weights&#39;: np.random.rand(8)})

In [115]: df
Out[115]: 
  category      data   weights
0        a  1.561587  0.957515
1        a  1.219984  0.347267
2        a -0.482239  0.581362
3        a  0.315667  0.217091
4        b -0.047852  0.894406
5        b -0.454145  0.918564
6        b -0.556774  0.277825
7        b  0.253321  0.955905

The group weighted average by category would then be:

In [116]: grouped = df.groupby(&#39;category&#39;)

In [117]: get_wavg = lambda g: np.average(g[&#39;data&#39;], weights=g[&#39;weights&#39;])

310 

| 

Chapter 10: Data Aggregation and Group Operations

In [118]: grouped.apply(get_wavg)
Out[118]: 
category
a    0.811643
b   -0.122262
dtype: float64

As  another  example,  consider  a  financial  dataset  originally  obtained  from  Yahoo!
Finance containing end-of-day prices for a few stocks and the S&amp;P 500 index (the SPX
symbol):

In [119]: close_px = pd.read_csv(&#39;examples/stock_px_2.csv&#39;, parse_dates=True,
   .....:                        index_col=0)

In [120]: close_px.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
DatetimeIndex: 2214 entries, 2003-01-02 to 2011-10-14
Data columns (total 4 columns):
AAPL    2214 non-null float64
MSFT    2214 non-null float64
XOM     2214 non-null float64
SPX     2214 non-null float64
dtypes: float64(4)
memory usage: 86.5 KB

In [121]: close_px[-4:]
Out[121]: 
              AAPL   MSFT    XOM      SPX
2011-10-11  400.29  27.00  76.27  1195.54
2011-10-12  402.19  26.96  77.16  1207.25
2011-10-13  408.43  27.18  76.37  1203.66
2011-10-14  422.00  27.27  78.11  1224.58

One task of interest might be to compute a DataFrame consisting of the yearly corre
lations of daily returns (computed from percent changes) with SPX. As one way to do
this, we first create a function that computes the pairwise correlation of each column
with the &#39;SPX&#39; column:

In [122]: spx_corr = lambda x: x.corrwith(x[&#39;SPX&#39;])

Next, we compute percent change on close_px using pct_change:

In [123]: rets = close_px.pct_change().dropna()

Lastly, we group these percent changes by year, which can be extracted from each row
label with a one-line function that returns the year attribute of each datetime label:

In [124]: get_year = lambda x: x.year

In [125]: by_year = rets.groupby(get_year)

In [126]: by_year.apply(spx_corr)
Out[126]: 

10.3 Apply: General split-apply-combine 

| 

311

          AAPL      MSFT       XOM  SPX
2003  0.541124  0.745174  0.661265  1.0
2004  0.374283  0.588531  0.557742  1.0
2005  0.467540  0.562374  0.631010  1.0
2006  0.428267  0.406126  0.518514  1.0
2007  0.508118  0.658770  0.786264  1.0
2008  0.681434  0.804626  0.828303  1.0
2009  0.707103  0.654902  0.797921  1.0
2010  0.710105  0.730118  0.839057  1.0
2011  0.691931  0.800996  0.859975  1.0

You could also compute inter-column correlations. Here we compute the annual cor
relation between Apple and Microsoft:

In [127]: by_year.apply(lambda g: g[&#39;AAPL&#39;].corr(g[&#39;MSFT&#39;]))
Out[127]: 
2003    0.480868
2004    0.259024
2005    0.300093
2006    0.161735
2007    0.417738
2008    0.611901
2009    0.432738
2010    0.571946
2011    0.581987
dtype: float64

Example: Group-Wise Linear Regression
In  the  same  theme  as  the  previous  example,  you  can  use  groupby  to  perform  more
complex  group-wise  statistical  analysis,  as  long  as  the  function  returns  a  pandas
object  or  scalar  value.  For  example,  I  can  define  the  following  regress  function
(using  the  statsmodels  econometrics  library),  which  executes  an  ordinary  least
squares (OLS) regression on each chunk of data:

import statsmodels.api as sm
def regress(data, yvar, xvars):
    Y = data[yvar]
    X = data[xvars]
    X[&#39;intercept&#39;] = 1.
    result = sm.OLS(Y, X).fit()
    return result.params

Now, to run a yearly linear regression of AAPL on SPX returns, execute:

In [129]: by_year.apply(regress, &#39;AAPL&#39;, [&#39;SPX&#39;])
Out[129]: 
           SPX  intercept
2003  1.195406   0.000710
2004  1.363463   0.004201
2005  1.766415   0.003246
2006  1.645496   0.000080

312 

| 

Chapter 10: Data Aggregation and Group Operations

2007  1.198761   0.003438
2008  0.968016  -0.001110
2009  0.879103   0.002954
2010  1.052608   0.001261
2011  0.806605   0.001514

10.4 Pivot Tables and Cross-Tabulation
A pivot table is a data summarization tool frequently found in spreadsheet programs
and  other  data  analysis  software.  It  aggregates  a  table  of  data  by  one  or  more  keys,
arranging  the  data  in  a  rectangle  with  some  of  the  group  keys  along  the  rows  and
some  along  the  columns.  Pivot  tables  in  Python  with  pandas  are  made  possible
through the groupby facility described in this chapter combined with reshape opera
tions  utilizing  hierarchical  indexing.  DataFrame  has  a  pivot_table  method,  and
there  is  also  a  top-level  pandas.pivot_table  function.  In  addition  to  providing  a
convenience interface to groupby, pivot_table can add partial totals, also known as
margins.

Returning  to  the  tipping  dataset,  suppose  you  wanted  to  compute  a  table  of  group
means  (the  default  pivot_table  aggregation  type)  arranged  by  day  and  smoker  on
the rows:

In [130]: tips.pivot_table(index=[&#39;day&#39;, &#39;smoker&#39;])
Out[130]: 
                 size       tip   tip_pct  total_bill
day  smoker                                          
Fri  No      2.250000  2.812500  0.151650   18.420000
     Yes     2.066667  2.714000  0.174783   16.813333
Sat  No      2.555556  3.102889  0.158048   19.661778
     Yes     2.476190  2.875476  0.147906   21.276667
Sun  No      2.929825  3.167895  0.160113   20.506667
     Yes     2.578947  3.516842  0.187250   24.120000
Thur No      2.488889  2.673778  0.160298   17.113111
     Yes     2.352941  3.030000  0.163863   19.190588

This  could  have  been  produced  with  groupby  directly.  Now,  suppose  we  want  to
aggregate only tip_pct and size, and additionally group by time. Ill put smoker in
the table columns and day in the rows:

In [131]: tips.pivot_table([&#39;tip_pct&#39;, &#39;size&#39;], index=[&#39;time&#39;, &#39;day&#39;],
   .....:                  columns=&#39;smoker&#39;)
Out[131]: 
                 size             tip_pct          
smoker             No       Yes        No       Yes
time   day                                         
Dinner Fri   2.000000  2.222222  0.139622  0.165347
       Sat   2.555556  2.476190  0.158048  0.147906
       Sun   2.929825  2.578947  0.160113  0.187250
       Thur  2.000000       NaN  0.159744       NaN

10.4 Pivot Tables and Cross-Tabulation 

| 

313

Lunch  Fri   3.000000  1.833333  0.187735  0.188937
       Thur  2.500000  2.352941  0.160311  0.163863

We could augment this table to include partial totals by passing margins=True. This
has the effect of adding All row and column labels, with corresponding values being
the group statistics for all the data within a single tier:

In [132]: tips.pivot_table([&#39;tip_pct&#39;, &#39;size&#39;], index=[&#39;time&#39;, &#39;day&#39;],
   .....:                  columns=&#39;smoker&#39;, margins=True)
Out[132]: 
                 size                       tip_pct                    
smoker             No       Yes       All        No       Yes       All
time   day                                                             
Dinner Fri   2.000000  2.222222  2.166667  0.139622  0.165347  0.158916
       Sat   2.555556  2.476190  2.517241  0.158048  0.147906  0.153152
       Sun   2.929825  2.578947  2.842105  0.160113  0.187250  0.166897
       Thur  2.000000       NaN  2.000000  0.159744       NaN  0.159744
Lunch  Fri   3.000000  1.833333  2.000000  0.187735  0.188937  0.188765
       Thur  2.500000  2.352941  2.459016  0.160311  0.163863  0.161301
All          2.668874  2.408602  2.569672  0.159328  0.163196  0.160803

Here,  the  All  values  are  means  without  taking  into  account  smoker  versus  non-
smoker (the All columns) or any of the two levels of grouping on the rows (the All
row).

To use a different aggregation function, pass it to aggfunc. For example, &#39;count&#39; or
len will give you a cross-tabulation (count or frequency) of group sizes:

In [133]: tips.pivot_table(&#39;tip_pct&#39;, index=[&#39;time&#39;, &#39;smoker&#39;], columns=&#39;day&#39;,
   .....:                  aggfunc=len, margins=True)
Out[133]: 
day             Fri   Sat   Sun  Thur    All
time   smoker                               
Dinner No       3.0  45.0  57.0   1.0  106.0
       Yes      9.0  42.0  19.0   NaN   70.0
Lunch  No       1.0   NaN   NaN  44.0   45.0
       Yes      6.0   NaN   NaN  17.0   23.0
All            19.0  87.0  76.0  62.0  244.0

If  some  combinations  are  empty  (or  otherwise  NA),  you  may  wish  to  pass  a
fill_value:

In [134]: tips.pivot_table(&#39;tip_pct&#39;, index=[&#39;time&#39;, &#39;size&#39;, &#39;smoker&#39;],
   .....:                  columns=&#39;day&#39;, aggfunc=&#39;mean&#39;, fill_value=0)
Out[134]: 
day                      Fri       Sat       Sun      Thur
time   size smoker                                        
Dinner 1    No      0.000000  0.137931  0.000000  0.000000
            Yes     0.000000  0.325733  0.000000  0.000000
       2    No      0.139622  0.162705  0.168859  0.159744
            Yes     0.171297  0.148668  0.207893  0.000000
       3    No      0.000000  0.154661  0.152663  0.000000

314 

| 

Chapter 10: Data Aggregation and Group Operations

            Yes     0.000000  0.144995  0.152660  0.000000
       4    No      0.000000  0.150096  0.148143  0.000000
            Yes     0.117750  0.124515  0.193370  0.000000
       5    No      0.000000  0.000000  0.206928  0.000000
            Yes     0.000000  0.106572  0.065660  0.000000
...                      ...       ...       ...       ...
Lunch  1    No      0.000000  0.000000  0.000000  0.181728
            Yes     0.223776  0.000000  0.000000  0.000000
       2    No      0.000000  0.000000  0.000000  0.166005
            Yes     0.181969  0.000000  0.000000  0.158843
       3    No      0.187735  0.000000  0.000000  0.084246
            Yes     0.000000  0.000000  0.000000  0.204952
       4    No      0.000000  0.000000  0.000000  0.138919
            Yes     0.000000  0.000000  0.000000  0.155410
       5    No      0.000000  0.000000  0.000000  0.121389
       6    No      0.000000  0.000000  0.000000  0.173706
[21 rows x 4 columns]

See Table 10-2 for a summary of pivot_table methods.

Table 10-2. pivot_table options

Function name Description
values

index

columns

aggfunc

fill_value

dropna

margins

Column name or names to aggregate; by default aggregates all numeric columns
Column names or other group keys to group on the rows of the resulting pivot table
Column names or other group keys to group on the columns of the resulting pivot table
Aggregation function or list of functions (&#39;mean&#39; by default); can be any function valid in a groupby
context
Replace missing values in result table
If True, do not include columns whose entries are all NA
Add row/column subtotals and grand total (False by default)

Cross-Tabulations: Crosstab
A cross-tabulation (or crosstab for short) is a special case of a pivot table that com
putes group frequencies. Here is an example:

In [138]: data
Out[138]: 
   Sample Nationality    Handedness
0       1         USA  Right-handed
1       2       Japan   Left-handed
2       3         USA  Right-handed
3       4       Japan  Right-handed
4       5       Japan   Left-handed
5       6       Japan  Right-handed
6       7         USA  Right-handed
7       8         USA   Left-handed
8       9       Japan  Right-handed
9      10         USA  Right-handed

10.4 Pivot Tables and Cross-Tabulation 

| 

315

As part of some survey analysis, we might want to summarize this data by nationality
and  handedness.  You  could  use  pivot_table  to  do  this,  but  the  pandas.crosstab
function can be more convenient:

In [139]: pd.crosstab(data.Nationality, data.Handedness, margins=True)
Out[139]: 
Handedness   Left-handed  Right-handed  All
Nationality                                
Japan                  2             3    5
USA                    1             4    5
All                    3             7   10

The first two arguments to crosstab can each either be an array or Series or a list of
arrays. As in the tips data:

In [140]: pd.crosstab([tips.time, tips.day], tips.smoker, margins=True)
Out[140]: 
smoker        No  Yes  All
time   day                
Dinner Fri     3    9   12
       Sat    45   42   87
       Sun    57   19   76
       Thur    1    0    1
Lunch  Fri     1    6    7
       Thur   44   17   61
All          151   93  244

10.5 Conclusion
Mastering  pandass  data  grouping  tools  can  help  both  with  data  cleaning  as  well  as
modeling  or  statistical  analysis  work.  In  Chapter  14  we  will  look  at  several  more
example use cases for groupby on real data.

In the next chapter, we turn our attention to time series data.

316 

| 

Chapter 10: Data Aggregation and Group Operations

CHAPTER 11
Time Series

Time series data is an important form of structured data in many different fields, such
as finance, economics, ecology, neuroscience, and physics. Anything that is observed
or measured at many points in time forms a time series. Many time series are fixed
frequency, which is to say that data points occur at regular intervals according to some
rule, such as every 15 seconds, every 5 minutes, or once per month. Time series can
also be irregular without a fixed unit of time or offset between units. How you mark
and refer to time series data depends on the application, and you may have one of the
following:

 Timestamps, specific instants in time

 Fixed periods, such as the month January 2007 or the full year 2010

 Intervals of time, indicated by a start and end timestamp. Periods can be thought

of as special cases of intervals

 Experiment  or  elapsed  time;  each  timestamp  is  a  measure  of  time  relative  to  a
particular  start  time  (e.g.,  the  diameter  of  a  cookie  baking  each  second  since
being placed in the oven)

In this chapter, I am mainly concerned with time series in the first three categories,
though many of the techniques can be applied to experimental time series where the
index  may  be  an  integer  or  floating-point  number  indicating  elapsed  time  from  the
start  of  the  experiment.  The  simplest  and  most  widely  used  kind  of  time  series  are
those indexed by timestamp.

317

pandas also supports indexes based on timedeltas, which can be a
useful way of representing experiment or elapsed time. We do not
explore timedelta indexes in this book, but you can learn more in
the pandas documentation.

pandas  provides  many  built-in  time  series  tools  and  data  algorithms.  You  can  effi
ciently  work  with  very  large  time  series  and  easily  slice  and  dice,  aggregate,  and
resample irregular- and fixed-frequency time series. Some of these tools are especially
useful for financial and economics applications, but you could certainly use them to
analyze server log data, too.

11.1 Date and Time Data Types and Tools
The  Python  standard  library  includes  data  types  for  date  and  time  data,  as  well  as
calendar-related  functionality.  The  datetime,  time,  and  calendar  modules  are  the
main  places  to  start.  The  datetime.datetime  type,  or  simply  datetime,  is  widely
used:

In [10]: from datetime import datetime

In [11]: now = datetime.now()

In [12]: now
Out[12]: datetime.datetime(2017, 9, 25, 14, 5, 52, 72973)

In [13]: now.year, now.month, now.day
Out[13]: (2017, 9, 25)

datetime stores both the date and time down to the microsecond. timedelta repre
sents the temporal difference between two datetime objects:

In [14]: delta = datetime(2011, 1, 7) - datetime(2008, 6, 24, 8, 15)

In [15]: delta
Out[15]: datetime.timedelta(926, 56700)

In [16]: delta.days
Out[16]: 926

In [17]: delta.seconds
Out[17]: 56700

You  can  add  (or  subtract)  a  timedelta  or  multiple  thereof  to  a  datetime  object  to
yield a new shifted object:

In [18]: from datetime import timedelta

In [19]: start = datetime(2011, 1, 7)

318 

| 

Chapter 11: Time Series

In [20]: start + timedelta(12)
Out[20]: datetime.datetime(2011, 1, 19, 0, 0)

In [21]: start - 2 * timedelta(12)
Out[21]: datetime.datetime(2010, 12, 14, 0, 0)

Table 11-1 summarizes the data types in the datetime module. While this chapter is
mainly concerned with the data types in pandas and higher-level time series manipu
lation, you may encounter the datetime-based types in many other places in Python
in the wild.

Table 11-1. Types in datetime module

Type
date

time

Description
Store calendar date (year, month, day) using the Gregorian calendar
Store time of day as hours, minutes, seconds, and microseconds
Stores both date and time

datetime
timedelta Represents the difference between two datetime values (as days, seconds, and microseconds)
tzinfo

Base type for storing time zone information

Converting Between String and Datetime
You can format datetime objects and pandas Timestamp objects, which Ill introduce
later, as strings using str or the strftime method, passing a format specification:

In [22]: stamp = datetime(2011, 1, 3)

In [23]: str(stamp)
Out[23]: &#39;2011-01-03 00:00:00&#39;

In [24]: stamp.strftime(&#39;%Y-%m-%d&#39;)
Out[24]: &#39;2011-01-03&#39;

See Table 11-2 for a complete list of the format codes (reproduced from Chapter 2).

Table 11-2. Datetime format specification (ISO C89 compatible)

Type Description
%Y

Four-digit year
Two-digit year
Two-digit month [01, 12]
Two-digit day [01, 31]
Hour (24-hour clock) [00, 23]
Hour (12-hour clock) [01, 12]
Two-digit minute [00, 59]
Second [00, 61] (seconds 60, 61 account for leap seconds)
Weekday as integer [0 (Sunday), 6]

%y

%m

%d

%H

%I

%M

%S

%w

11.1 Date and Time Data Types and Tools 

| 

319

Type Description
%U

Week number of the year [00, 53]; Sunday is considered the first day of the week, and days before the first Sunday of
the year are week 0
Week number of the year [00, 53]; Monday is considered the first day of the week, and days before the first Monday of
the year are week 0
UTC time zone offset as +HHMM or -HHMM; empty if time zone naive
Shortcut for %Y-%m-%d (e.g., 2012-4-18)
Shortcut for %m/%d/%y (e.g., 04/18/12)

%W

%z

%F

%D

You  can  use  these  same  format  codes  to  convert  strings  to  dates  using  date
time.strptime:

In [25]: value = &#39;2011-01-03&#39;

In [26]: datetime.strptime(value, &#39;%Y-%m-%d&#39;)
Out[26]: datetime.datetime(2011, 1, 3, 0, 0)

In [27]: datestrs = [&#39;7/6/2011&#39;, &#39;8/6/2011&#39;]

In [28]: [datetime.strptime(x, &#39;%m/%d/%Y&#39;) for x in datestrs]
Out[28]: 
[datetime.datetime(2011, 7, 6, 0, 0),
 datetime.datetime(2011, 8, 6, 0, 0)]

datetime.strptime is a good way to parse a date with a known format. However, it
can be a bit annoying to have to write a format spec each time, especially for common
date formats. In this case, you can use the  parser.parse method in the third-party
dateutil package (this is installed automatically when you install pandas):

In [29]: from dateutil.parser import parse

In [30]: parse(&#39;2011-01-03&#39;)
Out[30]: datetime.datetime(2011, 1, 3, 0, 0)

dateutil is capable of parsing most human-intelligible date representations:

In [31]: parse(&#39;Jan 31, 1997 10:45 PM&#39;)
Out[31]: datetime.datetime(1997, 1, 31, 22, 45)

In international locales, day appearing before month is very common, so you can pass
dayfirst=True to indicate this:

In [32]: parse(&#39;6/12/2011&#39;, dayfirst=True)
Out[32]: datetime.datetime(2011, 12, 6, 0, 0)

pandas is generally oriented toward working with arrays of dates, whether used as an
axis index or a column in a DataFrame. The to_datetime method parses many dif
ferent  kinds  of  date  representations.  Standard  date  formats  like  ISO  8601  can  be
parsed very quickly:

320 

| 

Chapter 11: Time Series

In [33]: datestrs = [&#39;2011-07-06 12:00:00&#39;, &#39;2011-08-06 00:00:00&#39;]

In [34]: pd.to_datetime(datestrs)
Out[34]: DatetimeIndex([&#39;2011-07-06 12:00:00&#39;, &#39;2011-08-06 00:00:00&#39;], dtype=&#39;dat
etime64[ns]&#39;, freq=None)

It also handles values that should be considered missing (None, empty string, etc.):

In [35]: idx = pd.to_datetime(datestrs + [None])

In [36]: idx
Out[36]: DatetimeIndex([&#39;2011-07-06 12:00:00&#39;, &#39;2011-08-06 00:00:00&#39;, &#39;NaT&#39;], dty
pe=&#39;datetime64[ns]&#39;, freq=None)

In [37]: idx[2]
Out[37]: NaT

In [38]: pd.isnull(idx)
Out[38]: array([False, False,  True], dtype=bool)

NaT (Not a Time) is pandass null value for timestamp data.

dateutil.parser is a useful but imperfect tool. Notably, it will rec
ognize some strings as dates that you might prefer that it didnt
for example, &#39;42&#39; will be parsed as the year 2042 with todays cal
endar date.

datetime objects also have a number of locale-specific formatting options for systems
in  other  countries  or  languages.  For  example,  the  abbreviated  month  names  will  be
different  on  German  or  French  systems  compared  with  English  systems.  See
Table 11-3 for a listing.

Table 11-3. Locale-specific date formatting

Type Description
%a

Abbreviated weekday name
Full weekday name
Abbreviated month name
Full month name
Full date and time (e.g., Tue 01 May 2012 04:20:57 PM)
Locale equivalent of AM or PM
Locale-appropriate formatted date (e.g., in the United States, May 1, 2012 yields 05/01/2012)
Locale-appropriate time (e.g., 04:24:12 PM)

%A

%b

%B

%c

%p

%x

%X

11.1 Date and Time Data Types and Tools 

| 

321

11.2 Time Series Basics
A basic kind of time series object in pandas is a Series indexed by timestamps, which
is often represented external to pandas as Python strings or datetime objects:

In [39]: from datetime import datetime

In [40]: dates = [datetime(2011, 1, 2), datetime(2011, 1, 5),
   ....:          datetime(2011, 1, 7), datetime(2011, 1, 8),
   ....:          datetime(2011, 1, 10), datetime(2011, 1, 12)]

In [41]: ts = pd.Series(np.random.randn(6), index=dates)

In [42]: ts
Out[42]: 
2011-01-02   -0.204708
2011-01-05    0.478943
2011-01-07   -0.519439
2011-01-08   -0.555730
2011-01-10    1.965781
2011-01-12    1.393406
dtype: float64

Under the hood, these datetime objects have been put in a DatetimeIndex:

In [43]: ts.index
Out[43]: 
DatetimeIndex([&#39;2011-01-02&#39;, &#39;2011-01-05&#39;, &#39;2011-01-07&#39;, &#39;2011-01-08&#39;,
               &#39;2011-01-10&#39;, &#39;2011-01-12&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=None)

Like other Series, arithmetic operations between differently indexed time series auto
matically align on the dates:

In [44]: ts + ts[::2]
Out[44]: 
2011-01-02   -0.409415
2011-01-05         NaN
2011-01-07   -1.038877
2011-01-08         NaN
2011-01-10    3.931561
2011-01-12         NaN
dtype: float64

Recall that ts[::2] selects every second element in ts.

pandas  stores  timestamps  using  NumPys  datetime64  data  type  at  the  nanosecond
resolution:

In [45]: ts.index.dtype
Out[45]: dtype(&#39;&lt;M8[ns]&#39;)

Scalar values from a DatetimeIndex are pandas Timestamp objects:

322 

| 

Chapter 11: Time Series

In [46]: stamp = ts.index[0]

In [47]: stamp
Out[47]: Timestamp(&#39;2011-01-02 00:00:00&#39;)

A  Timestamp  can  be  substituted  anywhere  you  would  use  a  datetime  object.  Addi
tionally, it can store frequency information (if any) and understands how to do time
zone  conversions  and  other  kinds  of  manipulations.  More  on  both  of  these  things
later.

Indexing, Selection, Subsetting
Time series behaves like any other pandas.Series when you are indexing and select
ing data based on label:

In [48]: stamp = ts.index[2]

In [49]: ts[stamp]
Out[49]: -0.51943871505673811

As a convenience, you can also pass a string that is interpretable as a date:

In [50]: ts[&#39;1/10/2011&#39;]
Out[50]: 1.9657805725027142

In [51]: ts[&#39;20110110&#39;]
Out[51]: 1.9657805725027142

For longer time series, a year or only a year and month can be passed to easily select
slices of data:

In [52]: longer_ts = pd.Series(np.random.randn(1000),
   ....:                       index=pd.date_range(&#39;1/1/2000&#39;, periods=1000))

In [53]: longer_ts
Out[53]: 
2000-01-01    0.092908
2000-01-02    0.281746
2000-01-03    0.769023
2000-01-04    1.246435
2000-01-05    1.007189
2000-01-06   -1.296221
2000-01-07    0.274992
2000-01-08    0.228913
2000-01-09    1.352917
2000-01-10    0.886429
                ...   
2002-09-17   -0.139298
2002-09-18   -1.159926
2002-09-19    0.618965
2002-09-20    1.373890
2002-09-21   -0.983505

11.2 Time Series Basics 

| 

323

2002-09-22    0.930944
2002-09-23   -0.811676
2002-09-24   -1.830156
2002-09-25   -0.138730
2002-09-26    0.334088
Freq: D, Length: 1000, dtype: float64

In [54]: longer_ts[&#39;2001&#39;]
Out[54]: 
2001-01-01    1.599534
2001-01-02    0.474071
2001-01-03    0.151326
2001-01-04   -0.542173
2001-01-05   -0.475496
2001-01-06    0.106403
2001-01-07   -1.308228
2001-01-08    2.173185
2001-01-09    0.564561
2001-01-10   -0.190481
                ...   
2001-12-22    0.000369
2001-12-23    0.900885
2001-12-24   -0.454869
2001-12-25   -0.864547
2001-12-26    1.129120
2001-12-27    0.057874
2001-12-28   -0.433739
2001-12-29    0.092698
2001-12-30   -1.397820
2001-12-31    1.457823
Freq: D, Length: 365, dtype: float64

Here, the string &#39;2001&#39; is interpreted as a year and selects that time period. This also
works if you specify the month:

In [55]: longer_ts[&#39;2001-05&#39;]
Out[55]: 
2001-05-01   -0.622547
2001-05-02    0.936289
2001-05-03    0.750018
2001-05-04   -0.056715
2001-05-05    2.300675
2001-05-06    0.569497
2001-05-07    1.489410
2001-05-08    1.264250
2001-05-09   -0.761837
2001-05-10   -0.331617
                ...   
2001-05-22    0.503699
2001-05-23   -1.387874
2001-05-24    0.204851
2001-05-25    0.603705
2001-05-26    0.545680

324 

| 

Chapter 11: Time Series

2001-05-27    0.235477
2001-05-28    0.111835
2001-05-29   -1.251504
2001-05-30   -2.949343
2001-05-31    0.634634
Freq: D, Length: 31, dtype: float64

Slicing with datetime objects works as well:

In [56]: ts[datetime(2011, 1, 7):]
Out[56]: 
2011-01-07   -0.519439
2011-01-08   -0.555730
2011-01-10    1.965781
2011-01-12    1.393406
dtype: float64

Because  most  time  series  data  is  ordered  chronologically,  you  can  slice  with  time
stamps not contained in a time series to perform a range query:

In [57]: ts
Out[57]: 
2011-01-02   -0.204708
2011-01-05    0.478943
2011-01-07   -0.519439
2011-01-08   -0.555730
2011-01-10    1.965781
2011-01-12    1.393406
dtype: float64

In [58]: ts[&#39;1/6/2011&#39;:&#39;1/11/2011&#39;]
Out[58]: 
2011-01-07   -0.519439
2011-01-08   -0.555730
2011-01-10    1.965781
dtype: float64

As before, you can pass either a string date, datetime, or timestamp. Remember that
slicing  in  this  manner  produces  views  on  the  source  time  series  like  slicing  NumPy
arrays. This means that no data is copied and modifications on the slice will be reflec
ted in the original data.

There  is  an  equivalent  instance  method,  truncate,  that  slices  a  Series  between  two
dates:

In [59]: ts.truncate(after=&#39;1/9/2011&#39;)
Out[59]: 
2011-01-02   -0.204708
2011-01-05    0.478943
2011-01-07   -0.519439
2011-01-08   -0.555730
dtype: float64

11.2 Time Series Basics 

| 

325

All of this holds true for DataFrame as well, indexing on its rows:

In [60]: dates = pd.date_range(&#39;1/1/2000&#39;, periods=100, freq=&#39;W-WED&#39;)

In [61]: long_df = pd.DataFrame(np.random.randn(100, 4),
   ....:                        index=dates,
   ....:                        columns=[&#39;Colorado&#39;, &#39;Texas&#39;,
   ....:                                 &#39;New York&#39;, &#39;Ohio&#39;])

In [62]: long_df.loc[&#39;5-2001&#39;]
Out[62]: 
            Colorado     Texas  New York      Ohio
2001-05-02 -0.006045  0.490094 -0.277186 -0.707213
2001-05-09 -0.560107  2.735527  0.927335  1.513906
2001-05-16  0.538600  1.273768  0.667876 -0.969206
2001-05-23  1.676091 -0.817649  0.050188  1.951312
2001-05-30  3.260383  0.963301  1.201206 -1.852001

Time Series with Duplicate Indices
In some applications, there may be multiple data observations falling on a particular
timestamp. Here is an example:

In [63]: dates = pd.DatetimeIndex([&#39;1/1/2000&#39;, &#39;1/2/2000&#39;, &#39;1/2/2000&#39;,
   ....:                           &#39;1/2/2000&#39;, &#39;1/3/2000&#39;])

In [64]: dup_ts = pd.Series(np.arange(5), index=dates)

In [65]: dup_ts
Out[65]: 
2000-01-01    0
2000-01-02    1
2000-01-02    2
2000-01-02    3
2000-01-03    4
dtype: int64

We can tell that the index is not unique by checking its is_unique property:

In [66]: dup_ts.index.is_unique
Out[66]: False

Indexing into this time series will now either produce scalar values or slices depend
ing on whether a timestamp is duplicated:

In [67]: dup_ts[&#39;1/3/2000&#39;]  # not duplicated
Out[67]: 4

In [68]: dup_ts[&#39;1/2/2000&#39;]  # duplicated
Out[68]: 
2000-01-02    1
2000-01-02    2

326 

| 

Chapter 11: Time Series

2000-01-02    3
dtype: int64

Suppose you wanted to aggregate the data having non-unique timestamps. One way
to do this is to use groupby and pass level=0:

In [69]: grouped = dup_ts.groupby(level=0)

In [70]: grouped.mean()
Out[70]: 
2000-01-01    0
2000-01-02    2
2000-01-03    4
dtype: int64

In [71]: grouped.count()
Out[71]: 
2000-01-01    1
2000-01-02    3
2000-01-03    1
dtype: int64

11.3 Date Ranges, Frequencies, and Shifting
Generic time series in pandas are assumed to be irregular; that is, they have no fixed
frequency.  For  many  applications  this  is  sufficient.  However,  its  often  desirable  to
work relative to a fixed frequency, such as daily, monthly, or every 15 minutes, even if
that  means  introducing  missing  values  into  a  time  series.  Fortunately  pandas  has  a
full suite of standard time series frequencies and tools for resampling, inferring fre
quencies, and generating fixed-frequency date ranges. For example, you can convert
the sample time series to be fixed daily frequency by calling resample:

In [72]: ts
Out[72]: 
2011-01-02   -0.204708
2011-01-05    0.478943
2011-01-07   -0.519439
2011-01-08   -0.555730
2011-01-10    1.965781
2011-01-12    1.393406
dtype: float64

In [73]: resampler = ts.resample(&#39;D&#39;)

The string &#39;D&#39; is interpreted as daily frequency.

Conversion between frequencies or resampling is a big enough topic to have its own
section  later  (Section  11.6,  Resampling  and  Frequency  Conversion,  on  page  348).
Here Ill show you how to use the base frequencies and multiples thereof.

11.3 Date Ranges, Frequencies, and Shifting 

| 

327

Generating Date Ranges
While I used it previously without explanation, pandas.date_range is responsible for
generating  a  DatetimeIndex  with  an  indicated  length  according  to  a  particular
frequency:

In [74]: index = pd.date_range(&#39;2012-04-01&#39;, &#39;2012-06-01&#39;)

In [75]: index
Out[75]: 
DatetimeIndex([&#39;2012-04-01&#39;, &#39;2012-04-02&#39;, &#39;2012-04-03&#39;, &#39;2012-04-04&#39;,
               &#39;2012-04-05&#39;, &#39;2012-04-06&#39;, &#39;2012-04-07&#39;, &#39;2012-04-08&#39;,
               &#39;2012-04-09&#39;, &#39;2012-04-10&#39;, &#39;2012-04-11&#39;, &#39;2012-04-12&#39;,
               &#39;2012-04-13&#39;, &#39;2012-04-14&#39;, &#39;2012-04-15&#39;, &#39;2012-04-16&#39;,
               &#39;2012-04-17&#39;, &#39;2012-04-18&#39;, &#39;2012-04-19&#39;, &#39;2012-04-20&#39;,
               &#39;2012-04-21&#39;, &#39;2012-04-22&#39;, &#39;2012-04-23&#39;, &#39;2012-04-24&#39;,
               &#39;2012-04-25&#39;, &#39;2012-04-26&#39;, &#39;2012-04-27&#39;, &#39;2012-04-28&#39;,
               &#39;2012-04-29&#39;, &#39;2012-04-30&#39;, &#39;2012-05-01&#39;, &#39;2012-05-02&#39;,
               &#39;2012-05-03&#39;, &#39;2012-05-04&#39;, &#39;2012-05-05&#39;, &#39;2012-05-06&#39;,
               &#39;2012-05-07&#39;, &#39;2012-05-08&#39;, &#39;2012-05-09&#39;, &#39;2012-05-10&#39;,
               &#39;2012-05-11&#39;, &#39;2012-05-12&#39;, &#39;2012-05-13&#39;, &#39;2012-05-14&#39;,
               &#39;2012-05-15&#39;, &#39;2012-05-16&#39;, &#39;2012-05-17&#39;, &#39;2012-05-18&#39;,
               &#39;2012-05-19&#39;, &#39;2012-05-20&#39;, &#39;2012-05-21&#39;, &#39;2012-05-22&#39;,
               &#39;2012-05-23&#39;, &#39;2012-05-24&#39;, &#39;2012-05-25&#39;, &#39;2012-05-26&#39;,
               &#39;2012-05-27&#39;, &#39;2012-05-28&#39;, &#39;2012-05-29&#39;, &#39;2012-05-30&#39;,
               &#39;2012-05-31&#39;, &#39;2012-06-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

By  default,  date_range  generates  daily  timestamps.  If  you  pass  only  a  start  or  end
date, you must pass a number of periods to generate:

In [76]: pd.date_range(start=&#39;2012-04-01&#39;, periods=20)
Out[76]: 
DatetimeIndex([&#39;2012-04-01&#39;, &#39;2012-04-02&#39;, &#39;2012-04-03&#39;, &#39;2012-04-04&#39;,
               &#39;2012-04-05&#39;, &#39;2012-04-06&#39;, &#39;2012-04-07&#39;, &#39;2012-04-08&#39;,
               &#39;2012-04-09&#39;, &#39;2012-04-10&#39;, &#39;2012-04-11&#39;, &#39;2012-04-12&#39;,
               &#39;2012-04-13&#39;, &#39;2012-04-14&#39;, &#39;2012-04-15&#39;, &#39;2012-04-16&#39;,
               &#39;2012-04-17&#39;, &#39;2012-04-18&#39;, &#39;2012-04-19&#39;, &#39;2012-04-20&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

In [77]: pd.date_range(end=&#39;2012-06-01&#39;, periods=20)
Out[77]: 
DatetimeIndex([&#39;2012-05-13&#39;, &#39;2012-05-14&#39;, &#39;2012-05-15&#39;, &#39;2012-05-16&#39;,
               &#39;2012-05-17&#39;, &#39;2012-05-18&#39;, &#39;2012-05-19&#39;, &#39;2012-05-20&#39;,
               &#39;2012-05-21&#39;, &#39;2012-05-22&#39;, &#39;2012-05-23&#39;, &#39;2012-05-24&#39;,
               &#39;2012-05-25&#39;, &#39;2012-05-26&#39;, &#39;2012-05-27&#39;, &#39;2012-05-28&#39;,
               &#39;2012-05-29&#39;, &#39;2012-05-30&#39;, &#39;2012-05-31&#39;, &#39;2012-06-01&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

The  start  and  end  dates  define  strict  boundaries  for  the  generated  date  index.  For
example, if you wanted a date index containing the last business day of each month,
you would pass the &#39;BM&#39; frequency (business end of month; see more complete listing

328 

| 

Chapter 11: Time Series

of frequencies in Table 11-4) and only dates falling on or inside the date interval will
be included:

In [78]: pd.date_range(&#39;2000-01-01&#39;, &#39;2000-12-01&#39;, freq=&#39;BM&#39;)
Out[78]: 
DatetimeIndex([&#39;2000-01-31&#39;, &#39;2000-02-29&#39;, &#39;2000-03-31&#39;, &#39;2000-04-28&#39;,
               &#39;2000-05-31&#39;, &#39;2000-06-30&#39;, &#39;2000-07-31&#39;, &#39;2000-08-31&#39;,
               &#39;2000-09-29&#39;, &#39;2000-10-31&#39;, &#39;2000-11-30&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;BM&#39;)

Table 11-4. Base time series frequencies (not comprehensive)

Alias
D

B

H
T or min
S
L or ms
U

M

BM

MS

BMS

Offset type
Day

BusinessDay

Hour

Minute

Second

Milli

Micro

MonthEnd

BusinessMonthEnd

MonthBegin

BusinessMonthBegin

W-MON, W-TUE, ...

Week

WOM-1MON, WOM-2MON, ... WeekOfMonth

Q-JAN, Q-FEB, ...

QuarterEnd

BQ-JAN, BQ-FEB, ...

BusinessQuarterEnd

QS-JAN, QS-FEB, ...

QuarterBegin

Description
Calendar daily
Business daily
Hourly
Minutely
Secondly
Millisecond (1/1,000 of 1 second)
Microsecond (1/1,000,000 of 1 second)
Last calendar day of month
Last business day (weekday) of month
First calendar day of month
First weekday of month
Weekly on given day of week (MON, TUE, WED, THU,
FRI, SAT, or SUN)
Generate weekly dates in the first, second, third, or
fourth week of the month (e.g., WOM-3FRI for the
third Friday of each month)
Quarterly dates anchored on last calendar day of each
month, for year ending in indicated month (JAN, FEB,
MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV, or DEC)
Quarterly dates anchored on last weekday day of each
month, for year ending in indicated month
Quarterly dates anchored on first calendar day of each
month, for year ending in indicated month

BQS-JAN, BQS-FEB, ...

BusinessQuarterBegin Quarterly dates anchored on first weekday day of each

A-JAN, A-FEB, ...

YearEnd

BA-JAN, BA-FEB, ...

BusinessYearEnd

AS-JAN, AS-FEB, ...

YearBegin

BAS-JAN, BAS-FEB, ...

BusinessYearBegin

month, for year ending in indicated month
Annual dates anchored on last calendar day of given
month (JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP,
OCT, NOV, or DEC)
Annual dates anchored on last weekday of given
month
Annual dates anchored on first day of given month
Annual dates anchored on first weekday of given
month

11.3 Date Ranges, Frequencies, and Shifting 

| 

329

date_range by default preserves the time (if any) of the start or end timestamp:

In [79]: pd.date_range(&#39;2012-05-02 12:56:31&#39;, periods=5)
Out[79]: 
DatetimeIndex([&#39;2012-05-02 12:56:31&#39;, &#39;2012-05-03 12:56:31&#39;,
               &#39;2012-05-04 12:56:31&#39;, &#39;2012-05-05 12:56:31&#39;,
               &#39;2012-05-06 12:56:31&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

Sometimes you will have start or end dates with time information but want to gener
ate a set of timestamps normalized to midnight as a convention. To do this, there is a
normalize option:

In [80]: pd.date_range(&#39;2012-05-02 12:56:31&#39;, periods=5, normalize=True)
Out[80]: 
DatetimeIndex([&#39;2012-05-02&#39;, &#39;2012-05-03&#39;, &#39;2012-05-04&#39;, &#39;2012-05-05&#39;,
               &#39;2012-05-06&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;D&#39;)

Frequencies and Date Offsets
Frequencies  in  pandas  are  composed  of  a  base  frequency  and  a  multiplier.  Base  fre
quencies  are  typically  referred  to  by  a  string  alias,  like  &#39;M&#39;  for  monthly  or  &#39;H&#39;  for
hourly. For each base frequency, there is an object defined generally referred to as a
date offset. For example, hourly frequency can be represented with the Hour class:

In [81]: from pandas.tseries.offsets import Hour, Minute

In [82]: hour = Hour()

In [83]: hour
Out[83]: &lt;Hour&gt;

You can define a multiple of an offset by passing an integer:

In [84]: four_hours = Hour(4)

In [85]: four_hours
Out[85]: &lt;4 * Hours&gt;

In most applications, you would never need to explicitly create one of these objects,
instead  using  a  string  alias  like  &#39;H&#39;  or  &#39;4H&#39;.  Putting  an  integer  before  the  base  fre
quency creates a multiple:

In [86]: pd.date_range(&#39;2000-01-01&#39;, &#39;2000-01-03 23:59&#39;, freq=&#39;4h&#39;)
Out[86]: 
DatetimeIndex([&#39;2000-01-01 00:00:00&#39;, &#39;2000-01-01 04:00:00&#39;,
               &#39;2000-01-01 08:00:00&#39;, &#39;2000-01-01 12:00:00&#39;,
               &#39;2000-01-01 16:00:00&#39;, &#39;2000-01-01 20:00:00&#39;,
               &#39;2000-01-02 00:00:00&#39;, &#39;2000-01-02 04:00:00&#39;,
               &#39;2000-01-02 08:00:00&#39;, &#39;2000-01-02 12:00:00&#39;,
               &#39;2000-01-02 16:00:00&#39;, &#39;2000-01-02 20:00:00&#39;,

330 

| 

Chapter 11: Time Series

               &#39;2000-01-03 00:00:00&#39;, &#39;2000-01-03 04:00:00&#39;,
               &#39;2000-01-03 08:00:00&#39;, &#39;2000-01-03 12:00:00&#39;,
               &#39;2000-01-03 16:00:00&#39;, &#39;2000-01-03 20:00:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;4H&#39;)

Many offsets can be combined together by addition:

In [87]: Hour(2) + Minute(30)
Out[87]: &lt;150 * Minutes&gt;

Similarly,  you  can  pass  frequency  strings,  like  &#39;1h30min&#39;,  that  will  effectively  be
parsed to the same expression:

In [88]: pd.date_range(&#39;2000-01-01&#39;, periods=10, freq=&#39;1h30min&#39;)
Out[88]: 
DatetimeIndex([&#39;2000-01-01 00:00:00&#39;, &#39;2000-01-01 01:30:00&#39;,
               &#39;2000-01-01 03:00:00&#39;, &#39;2000-01-01 04:30:00&#39;,
               &#39;2000-01-01 06:00:00&#39;, &#39;2000-01-01 07:30:00&#39;,
               &#39;2000-01-01 09:00:00&#39;, &#39;2000-01-01 10:30:00&#39;,
               &#39;2000-01-01 12:00:00&#39;, &#39;2000-01-01 13:30:00&#39;],
              dtype=&#39;datetime64[ns]&#39;, freq=&#39;90T&#39;)

Some frequencies describe points in time that are not evenly spaced. For example, &#39;M&#39;
(calendar  month  end)  and  &#39;BM&#39;  (last  business/weekday  of  month)  depend  on  the
number  of  days  in  a  month  and,  in  the  latter  case,  whether  the  month  ends  on  a
weekend or not. We refer to these as anchored offsets.

Refer back to Table 11-4 for a listing of frequency codes and date offset classes avail
able in pandas.

Users  can  define  their  own  custom  frequency  classes  to  provide
date logic not available in pandas, though the full details of that are
outside the scope of this book.

Week of month dates

One useful frequency class is week of month, starting with WOM. This enables you to
get dates like the third Friday of each month:

In [89]: rng = pd.date_range(&#39;2012-01-01&#39;, &#39;2012-09-01&#39;, freq=&#39;WOM-3FRI&#39;)

In [90]: list(rng)
Out[90]: 
[Timestamp(&#39;2012-01-20 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-02-17 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-03-16 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-04-20 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-05-18 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-06-15 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),

11.3 Date Ranges, Frequencies, and Shifting 

| 

331

 Timestamp(&#39;2012-07-20 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;),
 Timestamp(&#39;2012-08-17 00:00:00&#39;, freq=&#39;WOM-3FRI&#39;)]

Shifting (Leading and Lagging) Data
Shifting refers to moving data backward and forward through time. Both Series and
DataFrame have a shift method for doing naive shifts forward or backward, leaving
the index unmodified:

In [91]: ts = pd.Series(np.random.randn(4),
   ....:                index=pd.date_range(&#39;1/1/2000&#39;, periods=4, freq=&#39;M&#39;))

In [92]: ts
Out[92]: 
2000-01-31   -0.066748
2000-02-29    0.838639
2000-03-31   -0.117388
2000-04-30   -0.517795
Freq: M, dtype: float64

In [93]: ts.shift(2)
Out[93]: 
2000-01-31         NaN
2000-02-29         NaN
2000-03-31   -0.066748
2000-04-30    0.838639
Freq: M, dtype: float64

In [94]: ts.shift(-2)
Out[94]: 
2000-01-31   -0.117388
2000-02-29   -0.517795
2000-03-31         NaN
2000-04-30         NaN
Freq: M, dtype: float64

When we shift like this, missing data is introduced either at the start or the end of the
time series.

A  common  use  of  shift  is  computing  percent  changes  in  a  time  series  or  multiple
time series as DataFrame columns. This is expressed as:

ts / ts.shift(1) - 1

Because naive shifts leave the index unmodified, some data is discarded. Thus if the
frequency is known, it can be passed to shift to advance the timestamps instead of
simply the data:

In [95]: ts.shift(2, freq=&#39;M&#39;)
Out[95]: 
2000-03-31   -0.066748
2000-04-30    0.838639

332 

| 

Chapter 11: Time Series

2000-05-31   -0.117388
2000-06-30   -0.517795
Freq: M, dtype: float64

Other frequencies can be passed, too, giving you some flexibility in how to lead and
lag the data:

In [96]: ts.shift(3, freq=&#39;D&#39;)
Out[96]: 
2000-02-03   -0.066748
2000-03-03    0.838639
2000-04-03   -0.117388
2000-05-03   -0.517795
dtype: float64

In [97]: ts.shift(1, freq=&#39;90T&#39;)
Out[97]: 
2000-01-31 01:30:00   -0.066748
2000-02-29 01:30:00    0.838639
2000-03-31 01:30:00   -0.117388
2000-04-30 01:30:00   -0.517795
Freq: M, dtype: float64

The T here stands for minutes.

Shifting dates with offsets

The pandas date offsets can also be used with datetime or Timestamp objects:

In [98]: from pandas.tseries.offsets import Day, MonthEnd

In [99]: now = datetime(2011, 11, 17)

In [100]: now + 3 * Day()
Out[100]: Timestamp(&#39;2011-11-20 00:00:00&#39;)

If you add an anchored offset like MonthEnd, the first increment will roll forward a
date to the next date according to the frequency rule:

In [101]: now + MonthEnd()
Out[101]: Timestamp(&#39;2011-11-30 00:00:00&#39;)

In [102]: now + MonthEnd(2)
Out[102]: Timestamp(&#39;2011-12-31 00:00:00&#39;)

Anchored offsets can explicitly roll dates forward or backward by simply using their
rollforward and rollback methods, respectively:

In [103]: offset = MonthEnd()

In [104]: offset.rollforward(now)
Out[104]: Timestamp(&#39;2011-11-30 00:00:00&#39;)

11.3 Date Ranges, Frequencies, and Shifting 

| 

333

In [105]: offset.rollback(now)
Out[105]: Timestamp(&#39;2011-10-31 00:00:00&#39;)

A creative use of date offsets is to use these methods with groupby:

In [106]: ts = pd.Series(np.random.randn(20),
   .....:                index=pd.date_range(&#39;1/15/2000&#39;, periods=20, freq=&#39;4d&#39;))

In [107]: ts
Out[107]: 
2000-01-15   -0.116696
2000-01-19    2.389645
2000-01-23   -0.932454
2000-01-27   -0.229331
2000-01-31   -1.140330
2000-02-04    0.439920
2000-02-08   -0.823758
2000-02-12   -0.520930
2000-02-16    0.350282
2000-02-20    0.204395
2000-02-24    0.133445
2000-02-28    0.327905
2000-03-03    0.072153
2000-03-07    0.131678
2000-03-11   -1.297459
2000-03-15    0.997747
2000-03-19    0.870955
2000-03-23   -0.991253
2000-03-27    0.151699
2000-03-31    1.266151
Freq: 4D, dtype: float64

In [108]: ts.groupby(offset.rollforward).mean()
Out[108]: 
2000-01-31   -0.005833
2000-02-29    0.015894
2000-03-31    0.150209
dtype: float64

Of course, an easier and faster way to do this is using resample (well discuss this in
much more depth in Section 11.6, Resampling and Frequency Conversion, on page
348):

In [109]: ts.resample(&#39;M&#39;).mean()
Out[109]: 
2000-01-31   -0.005833
2000-02-29    0.015894
2000-03-31    0.150209
Freq: M, dtype: float64

334 

| 

Chapter 11: Time Series

11.4 Time Zone Handling
Working with time zones is generally considered one of the most unpleasant parts of
time  series  manipulation.  As  a  result,  many  time  series  users  choose  to  work  with
time series in coordinated universal time or UTC, which is the successor to Greenwich
Mean  Time  and  is  the  current  international  standard.  Time  zones  are  expressed  as
offsets from UTC; for example, New York is four hours behind UTC during daylight
saving time and five hours behind the rest of the year.

In Python, time zone information comes from the third-party pytz library (installa
ble  with  pip  or  conda),  which  exposes  the  Olson  database,  a  compilation  of  world
time  zone  information.  This  is  especially  important  for  historical  data  because  the
daylight  saving  time  (DST)  transition  dates  (and  even  UTC  offsets)  have  been
changed numerous times depending on the whims of local governments. In the Uni
ted States, the DST transition times have been changed many times since 1900!

For  detailed  information  about  the  pytz  library,  youll  need  to  look  at  that  librarys
documentation. As far as this book is concerned, pandas wraps pytzs functionality so
you  can  ignore  its  API  outside  of  the  time  zone  names.  Time  zone  names  can  be
found interactively and in the docs:

In [110]: import pytz

In [111]: pytz.common_timezones[-5:]
Out[111]: [&#39;US/Eastern&#39;, &#39;US/Hawaii&#39;, &#39;US/Mountain&#39;, &#39;US/Pacific&#39;, &#39;UTC&#39;]

To get a time zone object from pytz, use pytz.timezone:

In [112]: tz = pytz.timezone(&#39;America/New_York&#39;)

In [113]: tz
Out[113]: &lt;DstTzInfo &#39;America/New_York&#39; LMT-1 day, 19:04:00 STD&gt;

Methods in pandas will accept either time zone names or these objects.

Time Zone Localization and Conversion
By default, time series in pandas are time zone naive. For example, consider the fol
lowing time series:

In [114]: rng = pd.date_range(&#39;3/9/2012 9:30&#39;, periods=6, freq=&#39;D&#39;)

In [115]: ts = pd.Series(np.random.randn(len(rng)), index=rng)

In [116]: ts
Out[116]: 
2012-03-09 09:30:00   -0.202469
2012-03-10 09:30:00    0.050718
2012-03-11 09:30:00    0.639869
2012-03-12 09:30:00    0.597594

11.4 Time Zone Handling 

| 

335

2012-03-13 09:30:00   -0.797246
2012-03-14 09:30:00    0.472879
Freq: D, dtype: float64

The indexs tz field is None:

In [117]: print(ts.index.tz)
None

Date ranges can be generated with a time zone set:

In [118]: pd.date_range(&#39;3/9/2012 9:30&#39;, periods=10, freq=&#39;D&#39;, tz=&#39;UTC&#39;)
Out[118]: 
DatetimeIndex([&#39;2012-03-09 09:30:00+00:00&#39;, &#39;2012-03-10 09:30:00+00:00&#39;,
               &#39;2012-03-11 09:30:00+00:00&#39;, &#39;2012-03-12 09:30:00+00:00&#39;,
               &#39;2012-03-13 09:30:00+00:00&#39;, &#39;2012-03-14 09:30:00+00:00&#39;,
               &#39;2012-03-15 09:30:00+00:00&#39;, &#39;2012-03-16 09:30:00+00:00&#39;,
               &#39;2012-03-17 09:30:00+00:00&#39;, &#39;2012-03-18 09:30:00+00:00&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;D&#39;)

Conversion from naive to localized is handled by the tz_localize method:

In [119]: ts
Out[119]: 
2012-03-09 09:30:00   -0.202469
2012-03-10 09:30:00    0.050718
2012-03-11 09:30:00    0.639869
2012-03-12 09:30:00    0.597594
2012-03-13 09:30:00   -0.797246
2012-03-14 09:30:00    0.472879
Freq: D, dtype: float64

In [120]: ts_utc = ts.tz_localize(&#39;UTC&#39;)

In [121]: ts_utc
Out[121]: 
2012-03-09 09:30:00+00:00   -0.202469
2012-03-10 09:30:00+00:00    0.050718
2012-03-11 09:30:00+00:00    0.639869
2012-03-12 09:30:00+00:00    0.597594
2012-03-13 09:30:00+00:00   -0.797246
2012-03-14 09:30:00+00:00    0.472879
Freq: D, dtype: float64

In [122]: ts_utc.index
Out[122]: 
DatetimeIndex([&#39;2012-03-09 09:30:00+00:00&#39;, &#39;2012-03-10 09:30:00+00:00&#39;,
               &#39;2012-03-11 09:30:00+00:00&#39;, &#39;2012-03-12 09:30:00+00:00&#39;,
               &#39;2012-03-13 09:30:00+00:00&#39;, &#39;2012-03-14 09:30:00+00:00&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;D&#39;)

Once a time series has been localized to a particular time zone, it can be converted to
another time zone with tz_convert:

336 

| 

Chapter 11: Time Series

In [123]: ts_utc.tz_convert(&#39;America/New_York&#39;)
Out[123]: 
2012-03-09 04:30:00-05:00   -0.202469
2012-03-10 04:30:00-05:00    0.050718
2012-03-11 05:30:00-04:00    0.639869
2012-03-12 05:30:00-04:00    0.597594
2012-03-13 05:30:00-04:00   -0.797246
2012-03-14 05:30:00-04:00    0.472879
Freq: D, dtype: float64

In the case of the preceding time series, which straddles a DST transition in the Amer
ica/New_York time zone, we could localize to EST and convert to, say, UTC or Berlin
time:

In [124]: ts_eastern = ts.tz_localize(&#39;America/New_York&#39;)

In [125]: ts_eastern.tz_convert(&#39;UTC&#39;)
Out[125]: 
2012-03-09 14:30:00+00:00   -0.202469
2012-03-10 14:30:00+00:00    0.050718
2012-03-11 13:30:00+00:00    0.639869
2012-03-12 13:30:00+00:00    0.597594
2012-03-13 13:30:00+00:00   -0.797246
2012-03-14 13:30:00+00:00    0.472879
Freq: D, dtype: float64

In [126]: ts_eastern.tz_convert(&#39;Europe/Berlin&#39;)
Out[126]: 
2012-03-09 15:30:00+01:00   -0.202469
2012-03-10 15:30:00+01:00    0.050718
2012-03-11 14:30:00+01:00    0.639869
2012-03-12 14:30:00+01:00    0.597594
2012-03-13 14:30:00+01:00   -0.797246
2012-03-14 14:30:00+01:00    0.472879
Freq: D, dtype: float64

tz_localize and tz_convert are also instance methods on DatetimeIndex:

In [127]: ts.index.tz_localize(&#39;Asia/Shanghai&#39;)
Out[127]: 
DatetimeIndex([&#39;2012-03-09 09:30:00+08:00&#39;, &#39;2012-03-10 09:30:00+08:00&#39;,
               &#39;2012-03-11 09:30:00+08:00&#39;, &#39;2012-03-12 09:30:00+08:00&#39;,
               &#39;2012-03-13 09:30:00+08:00&#39;, &#39;2012-03-14 09:30:00+08:00&#39;],
              dtype=&#39;datetime64[ns, Asia/Shanghai]&#39;, freq=&#39;D&#39;)

Localizing  naive  timestamps  also  checks  for  ambiguous  or  non-
existent times around daylight saving time transitions.

11.4 Time Zone Handling 

| 

337

Operations with Time ZoneAware Timestamp Objects
Similar to time series and date ranges, individual Timestamp objects similarly can be
localized  from  naive  to  time  zoneaware  and  converted  from  one  time  zone  to
another:

In [128]: stamp = pd.Timestamp(&#39;2011-03-12 04:00&#39;)

In [129]: stamp_utc = stamp.tz_localize(&#39;utc&#39;)

In [130]: stamp_utc.tz_convert(&#39;America/New_York&#39;)
Out[130]: Timestamp(&#39;2011-03-11 23:00:00-0500&#39;, tz=&#39;America/New_York&#39;)

You can also pass a time zone when creating the Timestamp:

In [131]: stamp_moscow = pd.Timestamp(&#39;2011-03-12 04:00&#39;, tz=&#39;Europe/Moscow&#39;)

In [132]: stamp_moscow
Out[132]: Timestamp(&#39;2011-03-12 04:00:00+0300&#39;, tz=&#39;Europe/Moscow&#39;)

Time zoneaware Timestamp objects internally store a UTC timestamp value as nano
seconds since the Unix epoch (January 1, 1970); this UTC value is invariant between
time zone conversions:

In [133]: stamp_utc.value
Out[133]: 1299902400000000000

In [134]: stamp_utc.tz_convert(&#39;America/New_York&#39;).value
Out[134]: 1299902400000000000

When  performing  time  arithmetic  using  pandass  DateOffset  objects,  pandas
respects  daylight  saving  time  transitions  where  possible.  Here  we  construct  time
stamps  that  occur  right  before  DST  transitions  (forward  and  backward).  First,  30
minutes before transitioning to DST:

In [135]: from pandas.tseries.offsets import Hour

In [136]: stamp = pd.Timestamp(&#39;2012-03-12 01:30&#39;, tz=&#39;US/Eastern&#39;)

In [137]: stamp
Out[137]: Timestamp(&#39;2012-03-12 01:30:00-0400&#39;, tz=&#39;US/Eastern&#39;)

In [138]: stamp + Hour()
Out[138]: Timestamp(&#39;2012-03-12 02:30:00-0400&#39;, tz=&#39;US/Eastern&#39;)

Then, 90 minutes before transitioning out of DST:

In [139]: stamp = pd.Timestamp(&#39;2012-11-04 00:30&#39;, tz=&#39;US/Eastern&#39;)

In [140]: stamp
Out[140]: Timestamp(&#39;2012-11-04 00:30:00-0400&#39;, tz=&#39;US/Eastern&#39;)

338 

| 

Chapter 11: Time Series

In [141]: stamp + 2 * Hour()
Out[141]: Timestamp(&#39;2012-11-04 01:30:00-0500&#39;, tz=&#39;US/Eastern&#39;)

Operations Between Different Time Zones
If  two  time  series  with  different  time  zones  are  combined,  the  result  will  be  UTC.
Since  the  timestamps  are  stored  under  the  hood  in  UTC,  this  is  a  straightforward
operation and requires no conversion to happen:

In [142]: rng = pd.date_range(&#39;3/7/2012 9:30&#39;, periods=10, freq=&#39;B&#39;)

In [143]: ts = pd.Series(np.random.randn(len(rng)), index=rng)

In [144]: ts
Out[144]: 
2012-03-07 09:30:00    0.522356
2012-03-08 09:30:00   -0.546348
2012-03-09 09:30:00   -0.733537
2012-03-12 09:30:00    1.302736
2012-03-13 09:30:00    0.022199
2012-03-14 09:30:00    0.364287
2012-03-15 09:30:00   -0.922839
2012-03-16 09:30:00    0.312656
2012-03-19 09:30:00   -1.128497
2012-03-20 09:30:00   -0.333488
Freq: B, dtype: float64

In [145]: ts1 = ts[:7].tz_localize(&#39;Europe/London&#39;)

In [146]: ts2 = ts1[2:].tz_convert(&#39;Europe/Moscow&#39;)

In [147]: result = ts1 + ts2

In [148]: result.index
Out[148]: 
DatetimeIndex([&#39;2012-03-07 09:30:00+00:00&#39;, &#39;2012-03-08 09:30:00+00:00&#39;,
               &#39;2012-03-09 09:30:00+00:00&#39;, &#39;2012-03-12 09:30:00+00:00&#39;,
               &#39;2012-03-13 09:30:00+00:00&#39;, &#39;2012-03-14 09:30:00+00:00&#39;,
               &#39;2012-03-15 09:30:00+00:00&#39;],
              dtype=&#39;datetime64[ns, UTC]&#39;, freq=&#39;B&#39;)

11.5 Periods and Period Arithmetic
Periods represent timespans, like days, months, quarters, or years. The Period class 
represents  this  data  type,  requiring  a  string  or  integer  and  a  frequency  from
Table 11-4:

In [149]: p = pd.Period(2007, freq=&#39;A-DEC&#39;)

In [150]: p
Out[150]: Period(&#39;2007&#39;, &#39;A-DEC&#39;)

11.5 Periods and Period Arithmetic 

| 

339

In this case, the Period object represents the full timespan from January 1, 2007, to
December  31,  2007,  inclusive.  Conveniently,  adding  and  subtracting  integers  from
periods has the effect of shifting by their frequency:

In [151]: p + 5
Out[151]: Period(&#39;2012&#39;, &#39;A-DEC&#39;)

In [152]: p - 2
Out[152]: Period(&#39;2005&#39;, &#39;A-DEC&#39;)

If  two  periods  have  the  same  frequency,  their  difference  is  the  number  of  units
between them:

In [153]: pd.Period(&#39;2014&#39;, freq=&#39;A-DEC&#39;) - p
Out[153]: 7

Regular ranges of periods can be constructed with the period_range function:

In [154]: rng = pd.period_range(&#39;2000-01-01&#39;, &#39;2000-06-30&#39;, freq=&#39;M&#39;)

In [155]: rng
Out[155]: PeriodIndex([&#39;2000-01&#39;, &#39;2000-02&#39;, &#39;2000-03&#39;, &#39;2000-04&#39;, &#39;2000-05&#39;, &#39;20
00-06&#39;], dtype=&#39;period[M]&#39;, freq=&#39;M&#39;)

The PeriodIndex class stores a sequence of periods and can serve as an axis index in
any pandas data structure:

In [156]: pd.Series(np.random.randn(6), index=rng)
Out[156]: 
2000-01   -0.514551
2000-02   -0.559782
2000-03   -0.783408
2000-04   -1.797685
2000-05   -0.172670
2000-06    0.680215
Freq: M, dtype: float64

If you have an array of strings, you can also use the PeriodIndex class:

In [157]: values = [&#39;2001Q3&#39;, &#39;2002Q2&#39;, &#39;2003Q1&#39;]

In [158]: index = pd.PeriodIndex(values, freq=&#39;Q-DEC&#39;)

In [159]: index
Out[159]: PeriodIndex([&#39;2001Q3&#39;, &#39;2002Q2&#39;, &#39;2003Q1&#39;], dtype=&#39;period[Q-DEC]&#39;, freq
=&#39;Q-DEC&#39;)

Period Frequency Conversion
Periods  and  PeriodIndex  objects  can  be  converted  to  another  frequency  with  their
asfreq  method.  As  an  example,  suppose  we  had  an  annual  period  and  wanted  to

340 

| 

Chapter 11: Time Series

convert  it  into  a  monthly  period  either  at  the  start  or  end  of  the  year.  This  is  fairly
straightforward:

In [160]: p = pd.Period(&#39;2007&#39;, freq=&#39;A-DEC&#39;)

In [161]: p
Out[161]: Period(&#39;2007&#39;, &#39;A-DEC&#39;)

In [162]: p.asfreq(&#39;M&#39;, how=&#39;start&#39;)
Out[162]: Period(&#39;2007-01&#39;, &#39;M&#39;)

In [163]: p.asfreq(&#39;M&#39;, how=&#39;end&#39;)
Out[163]: Period(&#39;2007-12&#39;, &#39;M&#39;)

You  can  think  of  Period(&#39;2007&#39;,  &#39;A-DEC&#39;)  as  being  a  sort  of  cursor  pointing  to  a
span  of  time,  subdivided  by  monthly  periods.  See  Figure  11-1  for  an  illustration  of
this.  For  a  fiscal  year  ending  on  a  month  other  than  December,  the  corresponding
monthly subperiods are different:

In [164]: p = pd.Period(&#39;2007&#39;, freq=&#39;A-JUN&#39;)

In [165]: p
Out[165]: Period(&#39;2007&#39;, &#39;A-JUN&#39;)

In [166]: p.asfreq(&#39;M&#39;, &#39;start&#39;)
Out[166]: Period(&#39;2006-07&#39;, &#39;M&#39;)

In [167]: p.asfreq(&#39;M&#39;, &#39;end&#39;)
Out[167]: Period(&#39;2007-06&#39;, &#39;M&#39;)

Figure 11-1. Period frequency conversion illustration

When you are converting from high to low frequency, pandas determines the super
period  depending  on  where  the  subperiod  belongs.  For  example,  in  A-JUN  fre
quency, the month Aug-2007 is actually part of the 2008 period:

In [168]: p = pd.Period(&#39;Aug-2007&#39;, &#39;M&#39;)

In [169]: p.asfreq(&#39;A-JUN&#39;)
Out[169]: Period(&#39;2008&#39;, &#39;A-JUN&#39;)

11.5 Periods and Period Arithmetic 

| 

341

Whole PeriodIndex objects or time series can be similarly converted with the same
semantics:

In [170]: rng = pd.period_range(&#39;2006&#39;, &#39;2009&#39;, freq=&#39;A-DEC&#39;)

In [171]: ts = pd.Series(np.random.randn(len(rng)), index=rng)

In [172]: ts
Out[172]: 
2006    1.607578
2007    0.200381
2008   -0.834068
2009   -0.302988
Freq: A-DEC, dtype: float64

In [173]: ts.asfreq(&#39;M&#39;, how=&#39;start&#39;)
Out[173]: 
2006-01    1.607578
2007-01    0.200381
2008-01   -0.834068
2009-01   -0.302988
Freq: M, dtype: float64

Here, the annual periods are replaced with monthly periods corresponding to the first
month falling within each annual period. If we instead wanted the last business day of
each  year,  we  can  use  the  &#39;B&#39;  frequency  and  indicate  that  we  want  the  end  of  the
period:

In [174]: ts.asfreq(&#39;B&#39;, how=&#39;end&#39;)
Out[174]: 
2006-12-29    1.607578
2007-12-31    0.200381
2008-12-31   -0.834068
2009-12-31   -0.302988
Freq: B, dtype: float64

Quarterly Period Frequencies
Quarterly  data  is  standard  in  accounting,  finance,  and  other  fields.  Much  quarterly
data is reported relative to a fiscal year end, typically the last calendar or business day
of one of the 12 months of the year. Thus, the period 2012Q4 has a different meaning
depending on fiscal year end. pandas supports all 12 possible quarterly frequencies as
Q-JAN through Q-DEC:

In [175]: p = pd.Period(&#39;2012Q4&#39;, freq=&#39;Q-JAN&#39;)

In [176]: p
Out[176]: Period(&#39;2012Q4&#39;, &#39;Q-JAN&#39;)

342 

| 

Chapter 11: Time Series

In the case of fiscal year ending in January, 2012Q4 runs from November through Jan
uary,  which  you  can  check  by  converting  to  daily  frequency.  See  Figure  11-2  for  an
illustration.

Figure 11-2. Different quarterly frequency conventions

In [177]: p.asfreq(&#39;D&#39;, &#39;start&#39;)
Out[177]: Period(&#39;2011-11-01&#39;, &#39;D&#39;)

In [178]: p.asfreq(&#39;D&#39;, &#39;end&#39;)
Out[178]: Period(&#39;2012-01-31&#39;, &#39;D&#39;)

Thus, its possible to do easy period arithmetic; for example, to get the timestamp at 4
PM on the second-to-last business day of the quarter, you could do:

In [179]: p4pm = (p.asfreq(&#39;B&#39;, &#39;e&#39;) - 1).asfreq(&#39;T&#39;, &#39;s&#39;) + 16 * 60

In [180]: p4pm
Out[180]: Period(&#39;2012-01-30 16:00&#39;, &#39;T&#39;)

In [181]: p4pm.to_timestamp()
Out[181]: Timestamp(&#39;2012-01-30 16:00:00&#39;)

You can generate quarterly ranges using period_range. Arithmetic is identical, too:

In [182]: rng = pd.period_range(&#39;2011Q3&#39;, &#39;2012Q4&#39;, freq=&#39;Q-JAN&#39;)

In [183]: ts = pd.Series(np.arange(len(rng)), index=rng)

In [184]: ts
Out[184]: 
2011Q3    0
2011Q4    1
2012Q1    2
2012Q2    3
2012Q3    4
2012Q4    5
Freq: Q-JAN, dtype: int64

In [185]: new_rng = (rng.asfreq(&#39;B&#39;, &#39;e&#39;) - 1).asfreq(&#39;T&#39;, &#39;s&#39;) + 16 * 60

In [186]: ts.index = new_rng.to_timestamp()

11.5 Periods and Period Arithmetic 

| 

343

In [187]: ts
Out[187]: 
2010-10-28 16:00:00    0
2011-01-28 16:00:00    1
2011-04-28 16:00:00    2
2011-07-28 16:00:00    3
2011-10-28 16:00:00    4
2012-01-30 16:00:00    5
dtype: int64

Converting Timestamps to Periods (and Back)
Series  and  DataFrame  objects  indexed  by  timestamps  can  be  converted  to  periods
with the to_period method:

In [188]: rng = pd.date_range(&#39;2000-01-01&#39;, periods=3, freq=&#39;M&#39;)

In [189]: ts = pd.Series(np.random.randn(3), index=rng)

In [190]: ts
Out[190]: 
2000-01-31    1.663261
2000-02-29   -0.996206
2000-03-31    1.521760
Freq: M, dtype: float64

In [191]: pts = ts.to_period()

In [192]: pts
Out[192]: 
2000-01    1.663261
2000-02   -0.996206
2000-03    1.521760
Freq: M, dtype: float64

Since periods refer to non-overlapping timespans, a timestamp can only belong to a
single period for a given frequency. While the frequency of the new PeriodIndex is
inferred  from  the  timestamps  by  default,  you  can  specify  any  frequency  you  want.
There is also no problem with having duplicate periods in the result:

In [193]: rng = pd.date_range(&#39;1/29/2000&#39;, periods=6, freq=&#39;D&#39;)

In [194]: ts2 = pd.Series(np.random.randn(6), index=rng)

In [195]: ts2
Out[195]: 
2000-01-29    0.244175
2000-01-30    0.423331
2000-01-31   -0.654040
2000-02-01    2.089154
2000-02-02   -0.060220

344 

| 

Chapter 11: Time Series

2000-02-03   -0.167933
Freq: D, dtype: float64

In [196]: ts2.to_period(&#39;M&#39;)
Out[196]: 
2000-01    0.244175
2000-01    0.423331
2000-01   -0.654040
2000-02    2.089154
2000-02   -0.060220
2000-02   -0.167933
Freq: M, dtype: float64

To convert back to timestamps, use to_timestamp:

In [197]: pts = ts2.to_period()

In [198]: pts
Out[198]: 
2000-01-29    0.244175
2000-01-30    0.423331
2000-01-31   -0.654040
2000-02-01    2.089154
2000-02-02   -0.060220
2000-02-03   -0.167933
Freq: D, dtype: float64

In [199]: pts.to_timestamp(how=&#39;end&#39;)
Out[199]: 
2000-01-29    0.244175
2000-01-30    0.423331
2000-01-31   -0.654040
2000-02-01    2.089154
2000-02-02   -0.060220
2000-02-03   -0.167933
Freq: D, dtype: float64

Creating a PeriodIndex from Arrays
Fixed  frequency  datasets  are  sometimes  stored  with  timespan  information  spread
across multiple columns. For example, in this macroeconomic dataset, the year and
quarter are in different columns:

In [200]: data = pd.read_csv(&#39;examples/macrodata.csv&#39;)

In [201]: data.head(5)
Out[201]: 
     year  quarter   realgdp  realcons  realinv  realgovt  realdpi    cpi  \
0  1959.0      1.0  2710.349    1707.4  286.898   470.045   1886.9  28.98   
1  1959.0      2.0  2778.801    1733.7  310.859   481.301   1919.7  29.15   
2  1959.0      3.0  2775.488    1751.8  289.226   491.260   1916.4  29.35   
3  1959.0      4.0  2785.204    1753.7  299.356   484.052   1931.3  29.37   

11.5 Periods and Period Arithmetic 

| 

345

4  1960.0      1.0  2847.699    1770.5  331.722   462.199   1955.5  29.54   
      m1  tbilrate  unemp      pop  infl  realint  
0  139.7      2.82    5.8  177.146  0.00     0.00  
1  141.7      3.08    5.1  177.830  2.34     0.74  
2  140.5      3.82    5.3  178.657  2.74     1.09  
3  140.0      4.33    5.6  179.386  0.27     4.06  
4  139.6      3.50    5.2  180.007  2.31     1.19  

In [202]: data.year
Out[202]: 
0      1959.0
1      1959.0
2      1959.0
3      1959.0
4      1960.0
5      1960.0
6      1960.0
7      1960.0
8      1961.0
9      1961.0
        ...  
193    2007.0
194    2007.0
195    2007.0
196    2008.0
197    2008.0
198    2008.0
199    2008.0
200    2009.0
201    2009.0
202    2009.0
Name: year, Length: 203, dtype: float64

In [203]: data.quarter
Out[203]: 
0      1.0
1      2.0
2      3.0
3      4.0
4      1.0
5      2.0
6      3.0
7      4.0
8      1.0
9      2.0
      ... 
193    2.0
194    3.0
195    4.0
196    1.0
197    2.0
198    3.0

346 

| 

Chapter 11: Time Series

199    4.0
200    1.0
201    2.0
202    3.0
Name: quarter, Length: 203, dtype: float64

By passing these arrays to PeriodIndex with a frequency, you can combine them to
form an index for the DataFrame:

In [204]: index = pd.PeriodIndex(year=data.year, quarter=data.quarter,
   .....:                        freq=&#39;Q-DEC&#39;)

In [205]: index
Out[205]: 
PeriodIndex([&#39;1959Q1&#39;, &#39;1959Q2&#39;, &#39;1959Q3&#39;, &#39;1959Q4&#39;, &#39;1960Q1&#39;, &#39;1960Q2&#39;,
             &#39;1960Q3&#39;, &#39;1960Q4&#39;, &#39;1961Q1&#39;, &#39;1961Q2&#39;,
             ...
             &#39;2007Q2&#39;, &#39;2007Q3&#39;, &#39;2007Q4&#39;, &#39;2008Q1&#39;, &#39;2008Q2&#39;, &#39;2008Q3&#39;,
             &#39;2008Q4&#39;, &#39;2009Q1&#39;, &#39;2009Q2&#39;, &#39;2009Q3&#39;],
            dtype=&#39;period[Q-DEC]&#39;, length=203, freq=&#39;Q-DEC&#39;)

In [206]: data.index = index

In [207]: data.infl
Out[207]: 
1959Q1    0.00
1959Q2    2.34
1959Q3    2.74
1959Q4    0.27
1960Q1    2.31
1960Q2    0.14
1960Q3    2.70
1960Q4    1.21
1961Q1   -0.40
1961Q2    1.47
          ... 
2007Q2    2.75
2007Q3    3.45
2007Q4    6.38
2008Q1    2.82
2008Q2    8.53
2008Q3   -3.16
2008Q4   -8.79
2009Q1    0.94
2009Q2    3.37
2009Q3    3.56
Freq: Q-DEC, Name: infl, Length: 203, dtype: float64

11.5 Periods and Period Arithmetic 

| 

347

11.6 Resampling and Frequency Conversion
Resampling  refers  to  the  process  of  converting  a  time  series  from  one  frequency  to
another.  Aggregating  higher  frequency  data  to  lower  frequency  is  called  downsam
pling, while converting lower frequency to higher frequency is called upsampling. Not
all  resampling  falls  into  either  of  these  categories;  for  example,  converting  W-WED
(weekly on Wednesday) to W-FRI is neither upsampling nor downsampling.

pandas objects are equipped with a resample method, which is the workhorse func
tion  for  all  frequency  conversion.  resample  has  a  similar  API  to  groupby;  you  call
resample to group the data, then call an aggregation function:

In [208]: rng = pd.date_range(&#39;2000-01-01&#39;, periods=100, freq=&#39;D&#39;)

In [209]: ts = pd.Series(np.random.randn(len(rng)), index=rng)

In [210]: ts
Out[210]: 
2000-01-01    0.631634
2000-01-02   -1.594313
2000-01-03   -1.519937
2000-01-04    1.108752
2000-01-05    1.255853
2000-01-06   -0.024330
2000-01-07   -2.047939
2000-01-08   -0.272657
2000-01-09   -1.692615
2000-01-10    1.423830
                ...   
2000-03-31   -0.007852
2000-04-01   -1.638806
2000-04-02    1.401227
2000-04-03    1.758539
2000-04-04    0.628932
2000-04-05   -0.423776
2000-04-06    0.789740
2000-04-07    0.937568
2000-04-08   -2.253294
2000-04-09   -1.772919
Freq: D, Length: 100, dtype: float64

In [211]: ts.resample(&#39;M&#39;).mean()
Out[211]: 
2000-01-31   -0.165893
2000-02-29    0.078606
2000-03-31    0.223811
2000-04-30   -0.063643
Freq: M, dtype: float64

In [212]: ts.resample(&#39;M&#39;, kind=&#39;period&#39;).mean()
Out[212]: 

348 

| 

Chapter 11: Time Series

2000-01   -0.165893
2000-02    0.078606
2000-03    0.223811
2000-04   -0.063643
Freq: M, dtype: float64

resample is a flexible and high-performance method that can be used to process very
large time series. The examples in the following sections illustrate its semantics and
use. Table 11-5 summarizes some of its options.

Table 11-5. Resample method arguments

Argument
freq

Description
String or DateOffset indicating desired resampled frequency (e.g., M&#39;, 5min&#39;, or Second(15))
Axis to resample on; default axis=0

axis
fill_method How to interpolate when upsampling, as in &#39;ffill&#39; or &#39;bfill&#39;; by default does no interpolation
closed

In downsampling, which end of each interval is closed (inclusive), &#39;right&#39; or &#39;left&#39;
In downsampling, how to label the aggregated result, with the &#39;right&#39; or &#39;left&#39; bin edge (e.g., the
9:30 to 9:35 five-minute interval could be labeled 9:30 or 9:35)
Time adjustment to the bin labels, such as &#39;-1s&#39; / Second(-1) to shift the aggregate labels one
second earlier
When forward or backward filling, the maximum number of periods to fill
Aggregate to periods (&#39;period&#39;) or timestamps (&#39;timestamp&#39;); defaults to the type of index the
time series has

label

loffset

limit

kind

convention When resampling periods, the convention (&#39;start&#39; or &#39;end&#39;) for converting the low-frequency period

to high frequency; defaults to &#39;end&#39;

Downsampling
Aggregating data to a regular, lower frequency is a pretty normal time series task. The
data  youre  aggregating  doesnt  need  to  be  fixed  frequently;  the  desired  frequency
defines  bin  edges  that  are  used  to  slice  the  time  series  into  pieces  to  aggregate.  For
example, to convert to monthly, &#39;M&#39; or &#39;BM&#39;, you need to chop up the data into one-
month intervals. Each interval is said to be half-open; a data point can only belong to
one  interval,  and  the  union  of  the  intervals  must  make  up  the  whole  time  frame.
There are a couple things to think about when using resample to downsample data:

 Which side of each interval is closed

 How to label each aggregated bin, either with the start of the interval or the end

To illustrate, lets look at some one-minute data:

In [213]: rng = pd.date_range(&#39;2000-01-01&#39;, periods=12, freq=&#39;T&#39;)

In [214]: ts = pd.Series(np.arange(12), index=rng)

11.6 Resampling and Frequency Conversion 

| 

349

In [215]: ts
Out[215]: 
2000-01-01 00:00:00     0
2000-01-01 00:01:00     1
2000-01-01 00:02:00     2
2000-01-01 00:03:00     3
2000-01-01 00:04:00     4
2000-01-01 00:05:00     5
2000-01-01 00:06:00     6
2000-01-01 00:07:00     7
2000-01-01 00:08:00     8
2000-01-01 00:09:00     9
2000-01-01 00:10:00    10
2000-01-01 00:11:00    11
Freq: T, dtype: int64

Suppose you wanted to aggregate this data into five-minute chunks or bars by taking
the sum of each group:

In [216]: ts.resample(&#39;5min&#39;, closed=&#39;right&#39;).sum()
Out[216]: 
1999-12-31 23:55:00     0
2000-01-01 00:00:00    15
2000-01-01 00:05:00    40
2000-01-01 00:10:00    11
Freq: 5T, dtype: int64

The  frequency  you  pass  defines  bin  edges  in  five-minute  increments.  By  default,
the  left  bin  edge  is  inclusive,  so  the  00:00  value  is  included  in  the  00:00  to  00:05
interval.1 Passing closed=&#39;right&#39; changes the interval to be closed on the right:

In [217]: ts.resample(&#39;5min&#39;, closed=&#39;right&#39;).sum()
Out[217]: 
1999-12-31 23:55:00     0
2000-01-01 00:00:00    15
2000-01-01 00:05:00    40
2000-01-01 00:10:00    11
Freq: 5T, dtype: int64

The resulting time series is labeled by the timestamps from the left side of each bin.
By passing label=&#39;right&#39; you can label them with the right bin edge:

In [218]: ts.resample(&#39;5min&#39;, closed=&#39;right&#39;, label=&#39;right&#39;).sum()
Out[218]: 
2000-01-01 00:00:00     0
2000-01-01 00:05:00    15

1 The choice of the default values for closed and label might seem a bit odd to some users. In practice the
choice is somewhat arbitrary; for some target frequencies, closed=&#39;left&#39; is preferable, while for others
closed=&#39;right&#39; makes more sense. The important thing is that you keep in mind exactly how you are seg
menting the data.

350 

| 

Chapter 11: Time Series

2000-01-01 00:10:00    40
2000-01-01 00:15:00    11
Freq: 5T, dtype: int64

See Figure 11-3 for an illustration of minute frequency data being resampled to five-
minute frequency.

Figure 11-3. Five-minute resampling illustration of closed, label conventions

Lastly, you might want to shift the result index by some amount, say subtracting one
second from the right edge to make it more clear which interval the timestamp refers
to. To do this, pass a string or date offset to loffset:

In [219]: ts.resample(&#39;5min&#39;, closed=&#39;right&#39;,
   .....:             label=&#39;right&#39;, loffset=&#39;-1s&#39;).sum()
Out[219]: 
1999-12-31 23:59:59     0
2000-01-01 00:04:59    15
2000-01-01 00:09:59    40
2000-01-01 00:14:59    11
Freq: 5T, dtype: int64

You also could have accomplished the effect of loffset by calling the shift method
on the result without the loffset.

Open-High-Low-Close (OHLC) resampling

In finance, a popular way to aggregate a time series is to compute four values for each
bucket: the first (open), last (close), maximum (high), and minimal (low) values. By
using the ohlc aggregate function you will obtain a DataFrame having columns con
taining these four aggregates, which are efficiently computed in a single sweep of the 
data:

In [220]: ts.resample(&#39;5min&#39;).ohlc()
Out[220]: 
                     open  high  low  close
2000-01-01 00:00:00     0     4    0      4
2000-01-01 00:05:00     5     9    5      9
2000-01-01 00:10:00    10    11   10     11

11.6 Resampling and Frequency Conversion 

| 

351

Upsampling and Interpolation
When  converting  from  a  low  frequency  to  a  higher  frequency,  no  aggregation  is
needed. Lets consider a DataFrame with some weekly data:

In [221]: frame = pd.DataFrame(np.random.randn(2, 4),
   .....:                      index=pd.date_range(&#39;1/1/2000&#39;, periods=2,
   .....:                                          freq=&#39;W-WED&#39;),
   .....:                      columns=[&#39;Colorado&#39;, &#39;Texas&#39;, &#39;New York&#39;, &#39;Ohio&#39;])

In [222]: frame
Out[222]: 
            Colorado     Texas  New York      Ohio
2000-01-05 -0.896431  0.677263  0.036503  0.087102
2000-01-12 -0.046662  0.927238  0.482284 -0.867130

When you are using an aggregation function with this data, there is only one value
per group, and missing values result in the gaps. We use the asfreq method to con
vert to the higher frequency without any aggregation:

In [223]: df_daily = frame.resample(&#39;D&#39;).asfreq()

In [224]: df_daily
Out[224]: 
            Colorado     Texas  New York      Ohio
2000-01-05 -0.896431  0.677263  0.036503  0.087102
2000-01-06       NaN       NaN       NaN       NaN
2000-01-07       NaN       NaN       NaN       NaN
2000-01-08       NaN       NaN       NaN       NaN
2000-01-09       NaN       NaN       NaN       NaN
2000-01-10       NaN       NaN       NaN       NaN
2000-01-11       NaN       NaN       NaN       NaN
2000-01-12 -0.046662  0.927238  0.482284 -0.867130

Suppose you wanted to fill forward each weekly value on the non-Wednesdays. The
same filling or interpolation methods available in the  fillna and  reindex methods
are available for resampling:

In [225]: frame.resample(&#39;D&#39;).ffill()
Out[225]: 
            Colorado     Texas  New York      Ohio
2000-01-05 -0.896431  0.677263  0.036503  0.087102
2000-01-06 -0.896431  0.677263  0.036503  0.087102
2000-01-07 -0.896431  0.677263  0.036503  0.087102
2000-01-08 -0.896431  0.677263  0.036503  0.087102
2000-01-09 -0.896431  0.677263  0.036503  0.087102
2000-01-10 -0.896431  0.677263  0.036503  0.087102
2000-01-11 -0.896431  0.677263  0.036503  0.087102
2000-01-12 -0.046662  0.927238  0.482284 -0.867130

You can similarly choose to only fill a certain number of periods forward to limit how
far to continue using an observed value:

352 

| 

Chapter 11: Time Series

In [226]: frame.resample(&#39;D&#39;).ffill(limit=2)
Out[226]: 
            Colorado     Texas  New York      Ohio
2000-01-05 -0.896431  0.677263  0.036503  0.087102
2000-01-06 -0.896431  0.677263  0.036503  0.087102
2000-01-07 -0.896431  0.677263  0.036503  0.087102
2000-01-08       NaN       NaN       NaN       NaN
2000-01-09       NaN       NaN       NaN       NaN
2000-01-10       NaN       NaN       NaN       NaN
2000-01-11       NaN       NaN       NaN       NaN
2000-01-12 -0.046662  0.927238  0.482284 -0.867130

Notably, the new date index need not overlap with the old one at all:

In [227]: frame.resample(&#39;W-THU&#39;).ffill()
Out[227]: 
            Colorado     Texas  New York      Ohio
2000-01-06 -0.896431  0.677263  0.036503  0.087102
2000-01-13 -0.046662  0.927238  0.482284 -0.867130

Resampling with Periods
Resampling data indexed by periods is similar to timestamps:

In [228]: frame = pd.DataFrame(np.random.randn(24, 4),
   .....:                      index=pd.period_range(&#39;1-2000&#39;, &#39;12-2001&#39;,
   .....:                                            freq=&#39;M&#39;),
   .....:                      columns=[&#39;Colorado&#39;, &#39;Texas&#39;, &#39;New York&#39;, &#39;Ohio&#39;])

In [229]: frame[:5]
Out[229]: 
         Colorado     Texas  New York      Ohio
2000-01  0.493841 -0.155434  1.397286  1.507055
2000-02 -1.179442  0.443171  1.395676 -0.529658
2000-03  0.787358  0.248845  0.743239  1.267746
2000-04  1.302395 -0.272154 -0.051532 -0.467740
2000-05 -1.040816  0.426419  0.312945 -1.115689

In [230]: annual_frame = frame.resample(&#39;A-DEC&#39;).mean()

In [231]: annual_frame
Out[231]: 
      Colorado     Texas  New York      Ohio
2000  0.556703  0.016631  0.111873 -0.027445
2001  0.046303  0.163344  0.251503 -0.157276

Upsampling is more nuanced, as you must make a decision about which end of the
timespan  in  the  new  frequency  to  place  the  values  before  resampling,  just  like  the
asfreq method. The convention argument defaults to &#39;start&#39; but can also be &#39;end&#39;:

# Q-DEC: Quarterly, year ending in December
In [232]: annual_frame.resample(&#39;Q-DEC&#39;).ffill()
Out[232]: 

11.6 Resampling and Frequency Conversion 

| 

353

        Colorado     Texas  New York      Ohio
2000Q1  0.556703  0.016631  0.111873 -0.027445
2000Q2  0.556703  0.016631  0.111873 -0.027445
2000Q3  0.556703  0.016631  0.111873 -0.027445
2000Q4  0.556703  0.016631  0.111873 -0.027445
2001Q1  0.046303  0.163344  0.251503 -0.157276
2001Q2  0.046303  0.163344  0.251503 -0.157276
2001Q3  0.046303  0.163344  0.251503 -0.157276
2001Q4  0.046303  0.163344  0.251503 -0.157276

In [233]: annual_frame.resample(&#39;Q-DEC&#39;, convention=&#39;end&#39;).ffill()
Out[233]: 
        Colorado     Texas  New York      Ohio
2000Q4  0.556703  0.016631  0.111873 -0.027445
2001Q1  0.556703  0.016631  0.111873 -0.027445
2001Q2  0.556703  0.016631  0.111873 -0.027445
2001Q3  0.556703  0.016631  0.111873 -0.027445
2001Q4  0.046303  0.163344  0.251503 -0.157276

Since periods refer to timespans, the rules about upsampling and downsampling are
more rigid:

 In  downsampling,  the  target  frequency  must  be  a  subperiod  of  the  source

frequency.

 In  upsampling,  the  target  frequency  must  be  a  superperiod  of  the  source

frequency.

If  these  rules  are  not  satisfied,  an  exception  will  be  raised.  This  mainly  affects  the
quarterly, annual, and weekly frequencies; for example, the timespans defined by Q-
MAR only line up with A-MAR, A-JUN, A-SEP, and A-DEC:

In [234]: annual_frame.resample(&#39;Q-MAR&#39;).ffill()
Out[234]: 
        Colorado     Texas  New York      Ohio
2000Q4  0.556703  0.016631  0.111873 -0.027445
2001Q1  0.556703  0.016631  0.111873 -0.027445
2001Q2  0.556703  0.016631  0.111873 -0.027445
2001Q3  0.556703  0.016631  0.111873 -0.027445
2001Q4  0.046303  0.163344  0.251503 -0.157276
2002Q1  0.046303  0.163344  0.251503 -0.157276
2002Q2  0.046303  0.163344  0.251503 -0.157276
2002Q3  0.046303  0.163344  0.251503 -0.157276

11.7 Moving Window Functions
An important class of array transformations used for time series operations are statis
tics and other functions evaluated over a sliding window or with exponentially decay
ing weights. This can be useful for smoothing noisy or gappy data. I call these moving
window functions, even though it includes functions without a fixed-length window

354 

| 

Chapter 11: Time Series

like  exponentially  weighted  moving  average.  Like  other  statistical  functions,  these
also automatically exclude missing data.

Before digging in, we can load up some time series data and resample it to business
day frequency:

In [235]: close_px_all = pd.read_csv(&#39;examples/stock_px_2.csv&#39;,
   .....:                            parse_dates=True, index_col=0)

In [236]: close_px = close_px_all[[&#39;AAPL&#39;, &#39;MSFT&#39;, &#39;XOM&#39;]]

In [237]: close_px = close_px.resample(&#39;B&#39;).ffill()

I  now  introduce  the  rolling  operator,  which  behaves  similarly  to  resample  and
groupby. It can be called on a Series or DataFrame along with a window (expressed as
a number of periods; see Figure 11-4 for the plot created):

In [238]: close_px.AAPL.plot()
Out[238]: &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2f2570cf98&gt;

In [239]: close_px.AAPL.rolling(250).mean().plot()

Figure 11-4. Apple Price with 250-day MA

The expression rolling(250) is similar in behavior to groupby, but instead of group
ing it creates an object that enables grouping over a 250-day sliding window. So here
we have the 250-day moving window average of Apples stock price.

11.7 Moving Window Functions 

| 

355

By  default  rolling  functions  require  all  of  the  values  in  the  window  to  be  non-NA.
This behavior can be changed to account for missing data and, in particular, the fact
that  you  will  have  fewer  than  window  periods  of  data  at  the  beginning  of  the  time
series (see Figure 11-5):

In [241]: appl_std250 = close_px.AAPL.rolling(250, min_periods=10).std()

In [242]: appl_std250[5:12]
Out[242]: 
2003-01-09         NaN
2003-01-10         NaN
2003-01-13         NaN
2003-01-14         NaN
2003-01-15    0.077496
2003-01-16    0.074760
2003-01-17    0.112368
Freq: B, Name: AAPL, dtype: float64

In [243]: appl_std250.plot()

Figure 11-5. Apple 250-day daily return standard deviation

In order to compute an expanding window mean, use the expanding operator instead
of rolling. The expanding mean starts the time window from the beginning of the
time series and increases the size of the window until it encompasses the whole series.
An expanding window mean on the apple_std250 time series looks like this:

In [244]: expanding_mean = appl_std250.expanding().mean()

356 

| 

Chapter 11: Time Series

Calling  a  moving  window  function  on  a  DataFrame  applies  the  transformation  to
each column (see Figure 11-6):

In [246]: close_px.rolling(60).mean().plot(logy=True)

Figure 11-6. Stocks prices 60-day MA (log Y-axis)

The  rolling  function  also  accepts  a  string  indicating  a  fixed-size  time  offset  rather
than a set number of periods. Using this notation can be useful for irregular time ser
ies. These are the same strings that you can pass to resample. For example, we could
compute a 20-day rolling mean like so:

In [247]: close_px.rolling(&#39;20D&#39;).mean()
Out[247]: 
                  AAPL       MSFT        XOM
2003-01-02    7.400000  21.110000  29.220000
2003-01-03    7.425000  21.125000  29.230000
2003-01-06    7.433333  21.256667  29.473333
2003-01-07    7.432500  21.425000  29.342500
2003-01-08    7.402000  21.402000  29.240000
2003-01-09    7.391667  21.490000  29.273333
2003-01-10    7.387143  21.558571  29.238571
2003-01-13    7.378750  21.633750  29.197500
2003-01-14    7.370000  21.717778  29.194444
2003-01-15    7.355000  21.757000  29.152000
...                ...        ...        ...
2011-10-03  398.002143  25.890714  72.413571
2011-10-04  396.802143  25.807857  72.427143
2011-10-05  395.751429  25.729286  72.422857

11.7 Moving Window Functions 

| 

357

2011-10-06  394.099286  25.673571  72.375714
2011-10-07  392.479333  25.712000  72.454667
2011-10-10  389.351429  25.602143  72.527857
2011-10-11  388.505000  25.674286  72.835000
2011-10-12  388.531429  25.810000  73.400714
2011-10-13  388.826429  25.961429  73.905000
2011-10-14  391.038000  26.048667  74.185333
[2292 rows x 3 columns]

Exponentially Weighted Functions
An alternative to using a static window size with equally weighted observations is to
specify  a  constant  decay  factor  to  give  more  weight  to  more  recent  observations.
There are a couple of ways to specify the decay factor. A popular one is using a span,
which makes the result comparable to a simple moving window function with win
dow size equal to the span.

Since an exponentially weighted statistic places more weight on more recent observa
tions, it adapts faster to changes compared with the equal-weighted version.

pandas  has  the  ewm  operator  to  go  along  with  rolling  and  expanding.  Heres  an
example comparing a 60-day moving average of Apples stock price with an EW mov
ing average with span=60 (see Figure 11-7):

In [249]: aapl_px = close_px.AAPL[&#39;2006&#39;:&#39;2007&#39;]

In [250]: ma60 = aapl_px.rolling(30, min_periods=20).mean()

In [251]: ewma60 = aapl_px.ewm(span=30).mean()

In [252]: ma60.plot(style=&#39;k--&#39;, label=&#39;Simple MA&#39;)
Out[252]: &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2f252161d0&gt;

In [253]: ewma60.plot(style=&#39;k-&#39;, label=&#39;EW MA&#39;)
Out[253]: &lt;matplotlib.axes._subplots.AxesSubplot at 0x7f2f252161d0&gt;

In [254]: plt.legend()

358 

| 

Chapter 11: Time Series

Figure 11-7. Simple moving average versus exponentially weighted

Binary Moving Window Functions
Some  statistical  operators,  like  correlation  and  covariance,  need  to  operate  on  two
time series. As an example, financial analysts are often interested in a stocks correla
tion to a benchmark index like the S&amp;P 500. To have a look at this, we first compute
the percent change for all of our time series of interest:

In [256]: spx_px = close_px_all[&#39;SPX&#39;]

In [257]: spx_rets = spx_px.pct_change()

In [258]: returns = close_px.pct_change()

The  corr  aggregation  function  after  we  call  rolling  can  then  compute  the  rolling
correlation with spx_rets (see Figure 11-8 for the resulting plot):

In [259]: corr = returns.AAPL.rolling(125, min_periods=100).corr(spx_rets)

In [260]: corr.plot()

11.7 Moving Window Functions 

| 

359

Figure 11-8. Six-month AAPL return correlation to S&amp;P 500

Suppose  you  wanted  to  compute  the  correlation  of  the  S&amp;P  500  index  with  many
stocks at once. Writing a loop and creating a new DataFrame would be easy but might
get repetitive, so if you pass a Series and a DataFrame, a function like rolling_corr
will compute the correlation of the Series (spx_rets, in this case) with each column
in the DataFrame (see Figure 11-9 for the plot of the result):

In [262]: corr = returns.rolling(125, min_periods=100).corr(spx_rets)

In [263]: corr.plot()

360 

| 

Chapter 11: Time Series

Figure 11-9. Six-month return correlations to S&amp;P 500

User-Defined Moving Window Functions
The  apply  method  on  rolling  and  related  methods  provides  a  means  to  apply  an
array function of your own devising over a moving window. The only requirement is
that  the  function  produce  a  single  value  (a  reduction)  from  each  piece  of  the  array.
For  example,  while  we  can  compute  sample  quantiles  using  rolling(...).quan
tile(q), we might be interested in the percentile rank of a particular value over the
sample.  The  scipy.stats.percentileofscore 
this  (see
Figure 11-10 for the resulting plot):

function  does 

just 

In [265]: from scipy.stats import percentileofscore

In [266]: score_at_2percent = lambda x: percentileofscore(x, 0.02)

In [267]: result = returns.AAPL.rolling(250).apply(score_at_2percent)

In [268]: result.plot()

11.7 Moving Window Functions 

| 

361

Figure 11-10. Percentile rank of 2% AAPL return over one-year window

If you dont have SciPy installed already, you can install it with conda or pip.

11.8 Conclusion
Time  series  data  calls  for  different  types  of  analysis  and  data  transformation  tools
than the other types of data we have explored in previous chapters.

In  the  following  chapters,  we  will  move  on  to  some  advanced  pandas  methods  and
show how to start using modeling libraries like statsmodels and scikit-learn.

362 

| 

Chapter 11: Time Series

CHAPTER 12
Advanced pandas

The preceding chapters have focused on introducing different types of data wrangling
workflows and features of NumPy, pandas, and other libraries. Over time, pandas has
developed  a  depth  of  features  for  power  users.  This  chapter  digs  into  a  few  more
advanced feature areas to help you deepen your expertise as a pandas user.

12.1 Categorical Data
This section introduces the pandas Categorical type. I will show how you can ach
ieve  better  performance  and  memory  use  in  some  pandas  operations  by  using  it.  I
also introduce some tools for using categorical data in statistics and machine learning
applications.

Background and Motivation
Frequently, a column in a table may contain repeated instances of a smaller set of dis
tinct  values.  We  have  already  seen  functions  like  unique  and  value_counts,  which
enable us to extract the distinct values from an array and compute their frequencies,
respectively:

In [10]: import numpy as np; import pandas as pd

In [11]: values = pd.Series([&#39;apple&#39;, &#39;orange&#39;, &#39;apple&#39;,
   ....:                     &#39;apple&#39;] * 2)

In [12]: values
Out[12]: 
0     apple
1    orange
2     apple
3     apple

363

4     apple
5    orange
6     apple
7     apple
dtype: object

In [13]: pd.unique(values)
Out[13]: array([&#39;apple&#39;, &#39;orange&#39;], dtype=object)

In [14]: pd.value_counts(values)
Out[14]: 
apple     6
orange    2
dtype: int64

Many data systems (for data warehousing, statistical computing, or other uses) have
developed specialized approaches for representing data with repeated values for more
efficient storage and computation. In data warehousing, a best practice is to use so-
called dimension tables containing the distinct values and storing the primary obser
vations as integer keys referencing the dimension table:

In [15]: values = pd.Series([0, 1, 0, 0] * 2)

In [16]: dim = pd.Series([&#39;apple&#39;, &#39;orange&#39;])

In [17]: values
Out[17]: 
0    0
1    1
2    0
3    0
4    0
5    1
6    0
7    0
dtype: int64

In [18]: dim
Out[18]: 
0     apple
1    orange
dtype: object

We can use the take method to restore the original Series of strings:

In [19]: dim.take(values)
Out[19]: 
0     apple
1    orange
0     apple
0     apple
0     apple
1    orange

364 

| 

Chapter 12: Advanced pandas

0     apple
0     apple
dtype: object

This  representation  as  integers  is  called  the  categorical  or  dictionary-encoded  repre
sentation. The array of distinct values can be called the categories, dictionary, or levels
of the data. In this book we will use the terms categorical and categories. The integer
values that reference the categories are called the category codes or simply codes.

The categorical representation can yield significant performance improvements when
you are doing analytics. You can also perform transformations on the categories while
leaving  the  codes  unmodified.  Some  example  transformations  that  can  be  made  at
relatively low cost are:

 Renaming categories

 Appending a new category without changing the order or position of the existing

categories

Categorical Type in pandas
pandas  has  a  special  Categorical  type  for  holding  data  that  uses  the  integer-based
categorical representation or encoding. Lets consider the example Series from before:

In [20]: fruits = [&#39;apple&#39;, &#39;orange&#39;, &#39;apple&#39;, &#39;apple&#39;] * 2

In [21]: N = len(fruits)

In [22]: df = pd.DataFrame({&#39;fruit&#39;: fruits,
   ....:                    &#39;basket_id&#39;: np.arange(N),
   ....:                    &#39;count&#39;: np.random.randint(3, 15, size=N),
   ....:                    &#39;weight&#39;: np.random.uniform(0, 4, size=N)},
   ....:                   columns=[&#39;basket_id&#39;, &#39;fruit&#39;, &#39;count&#39;, &#39;weight&#39;])

In [23]: df
Out[23]: 
   basket_id   fruit  count    weight
0          0   apple      5  3.858058
1          1  orange      8  2.612708
2          2   apple      4  2.995627
3          3   apple      7  2.614279
4          4   apple     12  2.990859
5          5  orange      8  3.845227
6          6   apple      5  0.033553
7          7   apple      4  0.425778

Here, df[&#39;fruit&#39;] is an array of Python string objects. We can convert it to categori
cal by calling:

12.1 Categorical Data 

| 

365

In [24]: fruit_cat = df[&#39;fruit&#39;].astype(&#39;category&#39;)

In [25]: fruit_cat
Out[25]: 
0     apple
1    orange
2     apple
3     apple
4     apple
5    orange
6     apple
7     apple
Name: fruit, dtype: category
Categories (2, object): [apple, orange]

The values for fruit_cat are not a NumPy array, but an instance of pandas.Catego
rical:

In [26]: c = fruit_cat.values

In [27]: type(c)
Out[27]: pandas.core.categorical.Categorical

The Categorical object has categories and codes attributes:

In [28]: c.categories
Out[28]: Index([&#39;apple&#39;, &#39;orange&#39;], dtype=&#39;object&#39;)

In [29]: c.codes
Out[29]: array([0, 1, 0, 0, 0, 1, 0, 0], dtype=int8)

You can convert a DataFrame column to categorical by assigning the converted result:

In [30]: df[&#39;fruit&#39;] = df[&#39;fruit&#39;].astype(&#39;category&#39;)

In [31]: df.fruit
Out[31]: 
0     apple
1    orange
2     apple
3     apple
4     apple
5    orange
6     apple
7     apple
Name: fruit, dtype: category
Categories (2, object): [apple, orange]

You  can  also  create  pandas.Categorical  directly  from  other  types  of  Python
sequences:

In [32]: my_categories = pd.Categorical([&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;foo&#39;, &#39;bar&#39;])

In [33]: my_categories

366 

| 

Chapter 12: Advanced pandas

Out[33]: 
[foo, bar, baz, foo, bar]
Categories (3, object): [bar, baz, foo]

If you have obtained categorical encoded data from another source, you can use the 
alternative from_codes constructor:

In [34]: categories = [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]

In [35]: codes = [0, 1, 2, 0, 0, 1]

In [36]: my_cats_2 = pd.Categorical.from_codes(codes, categories)

In [37]: my_cats_2
Out[37]: 
[foo, bar, baz, foo, foo, bar]
Categories (3, object): [foo, bar, baz]

Unless explicitly specified, categorical conversions assume no specific ordering of the
categories.  So  the  categories  array  may  be  in  a  different  order  depending  on  the
ordering of the input data. When using from_codes or any of the other constructors,
you can indicate that the categories have a meaningful ordering:

In [38]: ordered_cat = pd.Categorical.from_codes(codes, categories,
   ....:                                         ordered=True)

In [39]: ordered_cat
Out[39]: 
[foo, bar, baz, foo, foo, bar]
Categories (3, object): [foo &lt; bar &lt; baz]

The output [foo &lt; bar &lt; baz] indicates that &#39;foo&#39; precedes &#39;bar&#39; in the ordering,
and so on. An unordered categorical instance can be made ordered with as_ordered:

In [40]: my_cats_2.as_ordered()
Out[40]: 
[foo, bar, baz, foo, foo, bar]
Categories (3, object): [foo &lt; bar &lt; baz]

As a last note, categorical data need not be strings, even though I have only showed
string examples. A categorical array can consist of any immutable value types.

Computations with Categoricals
Using Categorical in pandas compared with the non-encoded version (like an array
of  strings)  generally  behaves  the  same  way.  Some  parts  of  pandas,  like  the  groupby
function, perform better when working with categoricals. There are also some func
tions that can utilize the ordered flag.

12.1 Categorical Data 

| 

367

Lets  consider  some  random  numeric  data,  and  use  the  pandas.qcut  binning  func
tion.  This  return  pandas.Categorical;  we  used  pandas.cut  earlier  in  the  book  but
glossed over the details of how categoricals work:

In [41]: np.random.seed(12345)

In [42]: draws = np.random.randn(1000)

In [43]: draws[:5]
Out[43]: array([-0.2047,  0.4789, -0.5194, -0.5557,  1.9658])

Lets compute a quartile binning of this data and extract some statistics:

In [44]: bins = pd.qcut(draws, 4)

In [45]: bins
Out[45]: 
[(-0.684, -0.0101], (-0.0101, 0.63], (-0.684, -0.0101], (-0.684, -0.0101], (0.63,
 3.928], ..., (-0.0101, 0.63], (-0.684, -0.0101], (-2.95, -0.684], (-0.0101, 0.63
], (0.63, 3.928]]
Length: 1000
Categories (4, interval[float64]): [(-2.95, -0.684] &lt; (-0.684, -0.0101] &lt; (-0.010
1, 0.63] &lt;
                                    (0.63, 3.928]]

While  useful,  the  exact  sample  quartiles  may  be  less  useful  for  producing  a  report
than quartile names. We can achieve this with the labels argument to qcut:

In [46]: bins = pd.qcut(draws, 4, labels=[&#39;Q1&#39;, &#39;Q2&#39;, &#39;Q3&#39;, &#39;Q4&#39;])

In [47]: bins
Out[47]: 
[Q2, Q3, Q2, Q2, Q4, ..., Q3, Q2, Q1, Q3, Q4]
Length: 1000
Categories (4, object): [Q1 &lt; Q2 &lt; Q3 &lt; Q4]

In [48]: bins.codes[:10]
Out[48]: array([1, 2, 1, 1, 3, 3, 2, 2, 3, 3], dtype=int8)

The labeled bins categorical does not contain information about the bin edges in the
data, so we can use groupby to extract some summary statistics:

In [49]: bins = pd.Series(bins, name=&#39;quartile&#39;)

In [50]: results = (pd.Series(draws)
   ....:            .groupby(bins)
   ....:            .agg([&#39;count&#39;, &#39;min&#39;, &#39;max&#39;])
   ....:            .reset_index())

In [51]: results
Out[51]: 
  quartile  count       min       max
0       Q1    250 -2.949343 -0.685484

368 

| 

Chapter 12: Advanced pandas

1       Q2    250 -0.683066 -0.010115
2       Q3    250 -0.010032  0.628894
3       Q4    250  0.634238  3.927528

The  &#39;quartile&#39;  column  in  the  result  retains  the  original  categorical  information,
including ordering, from bins:

In [52]: results[&#39;quartile&#39;]
Out[52]: 
0    Q1
1    Q2
2    Q3
3    Q4
Name: quartile, dtype: category
Categories (4, object): [Q1 &lt; Q2 &lt; Q3 &lt; Q4]

Better performance with categoricals

If you do a lot of analytics on a particular dataset, converting to categorical can yield
substantial overall performance gains. A categorical version of a DataFrame column
will often use significantly less memory, too. Lets consider some Series with 10 mil
lion elements and a small number of distinct categories:

In [53]: N = 10000000

In [54]: draws = pd.Series(np.random.randn(N))

In [55]: labels = pd.Series([&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;, &#39;qux&#39;] * (N // 4))

Now we convert labels to categorical:

In [56]: categories = labels.astype(&#39;category&#39;)

Now we note that labels uses significantly more memory than categories:

In [57]: labels.memory_usage()
Out[57]: 80000080

In [58]: categories.memory_usage()
Out[58]: 10000272

The conversion to category is not free, of course, but it is a one-time cost:

In [59]: %time _ = labels.astype(&#39;category&#39;)
CPU times: user 490 ms, sys: 240 ms, total: 730 ms
Wall time: 726 ms

GroupBy operations can be significantly faster with categoricals because the underly
ing algorithms use the integer-based codes array instead of an array of strings.

12.1 Categorical Data 

| 

369

Categorical Methods
Series  containing  categorical  data  have  several  special  methods  similar  to  the  Ser
ies.str specialized string methods. This also provides convenient access to the cate
gories and codes. Consider the Series:

In [60]: s = pd.Series([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;] * 2)

In [61]: cat_s = s.astype(&#39;category&#39;)

In [62]: cat_s
Out[62]: 
0    a
1    b
2    c
3    d
4    a
5    b
6    c
7    d
dtype: category
Categories (4, object): [a, b, c, d]

The special attribute cat provides access to categorical methods:

In [63]: cat_s.cat.codes
Out[63]: 
0    0
1    1
2    2
3    3
4    0
5    1
6    2
7    3
dtype: int8

In [64]: cat_s.cat.categories
Out[64]: Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], dtype=&#39;object&#39;)

Suppose  that  we  know  the  actual  set  of  categories  for  this  data  extends  beyond  the
four values observed in the data. We can use the set_categories method to change
them:

In [65]: actual_categories = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]

In [66]: cat_s2 = cat_s.cat.set_categories(actual_categories)

In [67]: cat_s2
Out[67]: 
0    a
1    b

370 

| 

Chapter 12: Advanced pandas

2    c
3    d
4    a
5    b
6    c
7    d
dtype: category
Categories (5, object): [a, b, c, d, e]

While  it  appears  that  the  data  is  unchanged,  the  new  categories  will  be  reflected  in
operations  that  use  them.  For  example,  value_counts  respects  the  categories,  if
present:

In [68]: cat_s.value_counts()
Out[68]: 
d    2
c    2
b    2
a    2
dtype: int64

In [69]: cat_s2.value_counts()
Out[69]: 
d    2
c    2
b    2
a    2
e    0
dtype: int64

In large datasets, categoricals are often used as a convenient tool for memory savings
and  better  performance.  After  you  filter  a  large  DataFrame  or  Series,  many  of  the
categories  may  not  appear  in  the  data.  To  help  with  this,  we  can  use  the
remove_unused_categories method to trim unobserved categories:

In [70]: cat_s3 = cat_s[cat_s.isin([&#39;a&#39;, &#39;b&#39;])]

In [71]: cat_s3
Out[71]: 
0    a
1    b
4    a
5    b
dtype: category
Categories (4, object): [a, b, c, d]

In [72]: cat_s3.cat.remove_unused_categories()
Out[72]: 
0    a
1    b
4    a
5    b

12.1 Categorical Data 

| 

371

dtype: category
Categories (2, object): [a, b]

See Table 12-1 for a listing of available categorical methods.

Table 12-1. Categorical methods for Series in pandas

Method
add_categories

as_ordered

as_unordered

remove_categories

Description
Append new (unused) categories at end of existing categories
Make categories ordered
Make categories unordered
Remove categories, setting any removed values to null

remove_unused_categories Remove any category values which do not appear in the data
rename_categories

reorder_categories

set_categories

Replace categories with indicated set of new category names; cannot change the
number of categories
Behaves like rename_categories, but can also change the result to have ordered
categories
Replace the categories with the indicated set of new categories; can add or remove 
categories

Creating dummy variables for modeling

When youre using statistics or machine learning tools, youll often transform catego
rical data into dummy variables, also known as one-hot encoding. This involves creat
ing a DataFrame with a column for each distinct category; these columns contain 1s
for occurrences of a given category and 0 otherwise.

Consider the previous example:

In [73]: cat_s = pd.Series([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;] * 2, dtype=&#39;category&#39;)

As  mentioned  previously  in  Chapter  7,  the  pandas.get_dummies  function  converts
this  one-dimensional  categorical  data  into  a  DataFrame  containing  the  dummy 
variable:

In [74]: pd.get_dummies(cat_s)
Out[74]: 
   a  b  c  d
0  1  0  0  0
1  0  1  0  0
2  0  0  1  0
3  0  0  0  1
4  1  0  0  0
5  0  1  0  0
6  0  0  1  0
7  0  0  0  1

372 

| 

Chapter 12: Advanced pandas

12.2 Advanced GroupBy Use
While weve already discussed using the groupby method for Series and DataFrame in
depth in Chapter 10, there are some additional techniques that you may find of use.

Group Transforms and Unwrapped GroupBys
In Chapter 10 we looked at the apply method in grouped operations for performing
transformations. There is another built-in method called transform, which is similar
to apply but imposes more constraints on the kind of function you can use:

 It can produce a scalar value to be broadcast to the shape of the group

 It can produce an object of the same shape as the input group

 It must not mutate its input

Lets consider a simple example for illustration:

In [75]: df = pd.DataFrame({&#39;key&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;] * 4,
   ....:                    &#39;value&#39;: np.arange(12.)})

In [76]: df
Out[76]: 
   key  value
0    a    0.0
1    b    1.0
2    c    2.0
3    a    3.0
4    b    4.0
5    c    5.0
6    a    6.0
7    b    7.0
8    c    8.0
9    a    9.0
10   b   10.0
11   c   11.0

Here are the group means by key:

In [77]: g = df.groupby(&#39;key&#39;).value

In [78]: g.mean()
Out[78]: 
key
a    4.5
b    5.5
c    6.5
Name: value, dtype: float64

12.2 Advanced GroupBy Use 

| 

373

Suppose instead we wanted to produce a Series of the same shape as df[&#39;value&#39;] but
with  values  replaced  by  the  average  grouped  by  &#39;key&#39;.  We  can  pass  the  function
lambda x: x.mean() to transform:

In [79]: g.transform(lambda x: x.mean())
Out[79]: 
0     4.5
1     5.5
2     6.5
3     4.5
4     5.5
5     6.5
6     4.5
7     5.5
8     6.5
9     4.5
10    5.5
11    6.5
Name: value, dtype: float64

For built-in aggregation functions, we can pass a string alias as with the GroupBy agg
method:

In [80]: g.transform(&#39;mean&#39;)
Out[80]: 
0     4.5
1     5.5
2     6.5
3     4.5
4     5.5
5     6.5
6     4.5
7     5.5
8     6.5
9     4.5
10    5.5
11    6.5
Name: value, dtype: float64

Like apply, transform works with functions that return Series, but the result must be
the  same  size  as  the  input.  For  example,  we  can  multiply  each  group  by  2  using  a
lambda function:

In [81]: g.transform(lambda x: x * 2)
Out[81]: 
0      0.0
1      2.0
2      4.0
3      6.0
4      8.0
5     10.0
6     12.0

374 

| 

Chapter 12: Advanced pandas

7     14.0
8     16.0
9     18.0
10    20.0
11    22.0
Name: value, dtype: float64

As a more complicated example, we can compute the ranks in descending order for
each group:

In [82]: g.transform(lambda x: x.rank(ascending=False))
Out[82]: 
0     4.0
1     4.0
2     4.0
3     3.0
4     3.0
5     3.0
6     2.0
7     2.0
8     2.0
9     1.0
10    1.0
11    1.0
Name: value, dtype: float64

Consider a group transformation function composed from simple aggregations:

def normalize(x):
    return (x - x.mean()) / x.std()

We can obtain equivalent results in this case either using transform or apply:

In [84]: g.transform(normalize)
Out[84]: 
0    -1.161895
1    -1.161895
2    -1.161895
3    -0.387298
4    -0.387298
5    -0.387298
6     0.387298
7     0.387298
8     0.387298
9     1.161895
10    1.161895
11    1.161895
Name: value, dtype: float64

In [85]: g.apply(normalize)
Out[85]: 
0    -1.161895
1    -1.161895
2    -1.161895

12.2 Advanced GroupBy Use 

| 

375

3    -0.387298
4    -0.387298
5    -0.387298
6     0.387298
7     0.387298
8     0.387298
9     1.161895
10    1.161895
11    1.161895
Name: value, dtype: float64

Built-in aggregate functions like &#39;mean&#39; or &#39;sum&#39; are often much faster than a general
apply function. These also have a fast past when used with transform. This allows
us to perform a so-called unwrapped group operation:

In [86]: g.transform(&#39;mean&#39;)
Out[86]: 
0     4.5
1     5.5
2     6.5
3     4.5
4     5.5
5     6.5
6     4.5
7     5.5
8     6.5
9     4.5
10    5.5
11    6.5
Name: value, dtype: float64

In [87]: normalized = (df[&#39;value&#39;] - g.transform(&#39;mean&#39;)) / g.transform(&#39;std&#39;)

In [88]: normalized
Out[88]: 
0    -1.161895
1    -1.161895
2    -1.161895
3    -0.387298
4    -0.387298
5    -0.387298
6     0.387298
7     0.387298
8     0.387298
9     1.161895
10    1.161895
11    1.161895
Name: value, dtype: float64

While an unwrapped group operation may involve multiple group aggregations, the
overall benefit of vectorized operations often outweighs this.

376 

| 

Chapter 12: Advanced pandas

Grouped Time Resampling
For time series data, the resample method is semantically a group operation based on
a time intervalization. Heres a small example table:

In [89]: N = 15

In [90]: times = pd.date_range(&#39;2017-05-20 00:00&#39;, freq=&#39;1min&#39;, periods=N)

In [91]: df = pd.DataFrame({&#39;time&#39;: times,
   ....:                    &#39;value&#39;: np.arange(N)})

In [92]: df
Out[92]: 
                  time  value
0  2017-05-20 00:00:00      0
1  2017-05-20 00:01:00      1
2  2017-05-20 00:02:00      2
3  2017-05-20 00:03:00      3
4  2017-05-20 00:04:00      4
5  2017-05-20 00:05:00      5
6  2017-05-20 00:06:00      6
7  2017-05-20 00:07:00      7
8  2017-05-20 00:08:00      8
9  2017-05-20 00:09:00      9
10 2017-05-20 00:10:00     10
11 2017-05-20 00:11:00     11
12 2017-05-20 00:12:00     12
13 2017-05-20 00:13:00     13
14 2017-05-20 00:14:00     14

Here, we can index by &#39;time&#39; and then resample:

In [93]: df.set_index(&#39;time&#39;).resample(&#39;5min&#39;).count()
Out[93]: 
                     value
time                      
2017-05-20 00:00:00      5
2017-05-20 00:05:00      5
2017-05-20 00:10:00      5

Suppose  that  a  DataFrame  contains  multiple  time  series,  marked  by  an  additional
group key column:

In [94]: df2 = pd.DataFrame({&#39;time&#39;: times.repeat(3),
   ....:                     &#39;key&#39;: np.tile([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], N),
   ....:                     &#39;value&#39;: np.arange(N * 3.)})

In [95]: df2[:7]
Out[95]: 
  key                time  value
0   a 2017-05-20 00:00:00    0.0
1   b 2017-05-20 00:00:00    1.0

12.2 Advanced GroupBy Use 

| 

377

2   c 2017-05-20 00:00:00    2.0
3   a 2017-05-20 00:01:00    3.0
4   b 2017-05-20 00:01:00    4.0
5   c 2017-05-20 00:01:00    5.0
6   a 2017-05-20 00:02:00    6.0

To  do  the  same  resampling  for  each  value  of  &#39;key&#39;,  we  introduce  the  pandas.Time
Grouper object:

In [96]: time_key = pd.TimeGrouper(&#39;5min&#39;)

We can then set the time index, group by &#39;key&#39; and time_key, and aggregate:

In [97]: resampled = (df2.set_index(&#39;time&#39;)
   ....:              .groupby([&#39;key&#39;, time_key])
   ....:              .sum())

In [98]: resampled
Out[98]: 
                         value
key time                      
a   2017-05-20 00:00:00   30.0
    2017-05-20 00:05:00  105.0
    2017-05-20 00:10:00  180.0
b   2017-05-20 00:00:00   35.0
    2017-05-20 00:05:00  110.0
    2017-05-20 00:10:00  185.0
c   2017-05-20 00:00:00   40.0
    2017-05-20 00:05:00  115.0
    2017-05-20 00:10:00  190.0

In [99]: resampled.reset_index()
Out[99]: 
  key                time  value
0   a 2017-05-20 00:00:00   30.0
1   a 2017-05-20 00:05:00  105.0
2   a 2017-05-20 00:10:00  180.0
3   b 2017-05-20 00:00:00   35.0
4   b 2017-05-20 00:05:00  110.0
5   b 2017-05-20 00:10:00  185.0
6   c 2017-05-20 00:00:00   40.0
7   c 2017-05-20 00:05:00  115.0
8   c 2017-05-20 00:10:00  190.0

One constraint with using TimeGrouper is that the time must be the index of the Ser
ies or DataFrame.

12.3 Techniques for Method Chaining
When applying a sequence of transformations to a dataset, you may find yourself cre
ating  numerous  temporary  variables  that  are  never  used  in  your  analysis.  Consider
this example, for instance:

378 

| 

Chapter 12: Advanced pandas

df = load_data()
df2 = df[df[&#39;col2&#39;] &lt; 0]
df2[&#39;col1_demeaned&#39;] = df2[&#39;col1&#39;] - df2[&#39;col1&#39;].mean()
result = df2.groupby(&#39;key&#39;).col1_demeaned.std()

While were not using any real data here, this example highlights some new methods.
First,  the  DataFrame.assign  method  is  a  functional  alternative  to  column  assign
ments of the form df[k] = v. Rather than modifying the object in-place, it returns a
new DataFrame with the indicated modifications. So these statements are equivalent:

# Usual non-functional way
df2 = df.copy()
df2[&#39;k&#39;] = v

# Functional assign way
df2 = df.assign(k=v)

Assigning  in-place  may  execute  faster  than  using  assign,  but  assign  enables  easier
method chaining:

result = (df2.assign(col1_demeaned=df2.col1 - df2.col2.mean())
          .groupby(&#39;key&#39;)
          .col1_demeaned.std())

I used the outer parentheses to make it more convenient to add line breaks.

One  thing  to  keep  in  mind  when  doing  method  chaining  is  that  you  may  need  to
refer to temporary objects. In the preceding example, we cannot refer to the result of
load_data until it has been assigned to the temporary variable df. To help with this,
assign and many other pandas functions accept function-like arguments, also known
as callables.

To show callables in action, consider a fragment of the example from before:

df = load_data()
df2 = df[df[&#39;col2&#39;] &lt; 0]

This can be rewritten as:

df = (load_data()
      [lambda x: x[&#39;col2&#39;] &lt; 0])

Here, the result of load_data is not assigned to a variable, so the function passed into
[] is then bound to the object at that stage of the method chain.

We can continue, then, and write the entire sequence as a single chained expression:

result = (load_data()
          [lambda x: x.col2 &lt; 0]
          .assign(col1_demeaned=lambda x: x.col1 - x.col1.mean())
          .groupby(&#39;key&#39;)
          .col1_demeaned.std())

12.3 Techniques for Method Chaining 

| 

379

Whether you prefer to write code in this style is a matter of taste, and splitting up the
expression into multiple steps may make your code more readable.

The pipe Method
You  can  accomplish  a  lot  with  built-in  pandas  functions  and  the  approaches  to
method chaining with callables that we just looked at. However, sometimes you need
to use your own functions or functions from third-party libraries. This is where the
pipe method comes in.

Consider a sequence of function calls:

a = f(df, arg1=v1)
b = g(a, v2, arg3=v3)
c = h(b, arg4=v4)

When  using  functions  that  accept  and  return  Series  or  DataFrame  objects,  you  can
rewrite this using calls to pipe:

result = (df.pipe(f, arg1=v1)
          .pipe(g, v2, arg3=v3)
          .pipe(h, arg4=v4))

The statement f(df) and df.pipe(f) are equivalent, but pipe makes chained invoca
tion easier.

A  potentially  useful  pattern  for  pipe  is  to  generalize  sequences  of  operations  into
reusable  functions.  As  an  example,  lets  consider  substracting  group  means  from  a
column:

g = df.groupby([&#39;key1&#39;, &#39;key2&#39;])
df[&#39;col1&#39;] = df[&#39;col1&#39;] - g.transform(&#39;mean&#39;)

Suppose  that  you  wanted  to  be  able  to  demean  more  than  one  column  and  easily
change the group keys. Additionally, you might want to perform this transformation
in a method chain. Here is an example implementation:

def group_demean(df, by, cols):
    result = df.copy()
    g = df.groupby(by)
    for c in cols:
        result[c] = df[c] - g[c].transform(&#39;mean&#39;)
    return result

Then it is possible to write:

result = (df[df.col1 &lt; 0]
          .pipe(group_demean, [&#39;key1&#39;, &#39;key2&#39;], [&#39;col1&#39;]))

380 

| 

Chapter 12: Advanced pandas

12.4 Conclusion
pandas, like many open source software projects, is still changing and acquiring new
and improved functionality. As elsewhere in this book, the focus here has been on the
most stable functionality that is less likely to change over the next several years.

To deepen your expertise as a pandas user, I encourage you to explore the documen
tation  and  read  the  release  notes  as  the  development  team  makes  new  open  source
releases. We also invite you to join in on pandas development: fixing bugs, building
new features, and improving the documentation.

12.4 Conclusion 

| 

381

CHAPTER 13
Introduction to Modeling Libraries
in Python

In this book, I have focused on providing a programming foundation for doing data
analysis in Python. Since data analysts and scientists often report spending a dispro
portionate amount of time with data wrangling and preparation, the books structure
reflects the importance of mastering these techniques.

Which library you use for developing models will depend on the application. Many
statistical  problems  can  be  solved  by  simpler  techniques  like  ordinary  least  squares
regression,  while  other  problems  may  call  for  more  advanced  machine  learning
methods. Fortunately, Python has become one of the languages of choice for imple
menting analytical methods, so there are many tools you can explore after completing
this book.

In this chapter, I will review some features of pandas that may be helpful when youre
crossing back and forth between data wrangling with pandas and model fitting and
scoring. I will then give short introductions to two popular modeling toolkits, stats
models  and  scikit-learn.  Since  each  of  these  projects  is  large  enough  to  warrant  its
own dedicated book, I make no effort to be comprehensive and instead direct you to
both projects online documentation along with some other Python-based books on
data science, statistics, and machine learning.

13.1 Interfacing Between pandas and Model Code
A common workflow for model development is to use pandas for data loading and
cleaning  before  switching  over  to  a  modeling  library  to  build  the  model  itself.  An
important  part  of  the  model  development  process  is  called  feature  engineering  in
machine learning. This can describe any data transformation or analytics that extract

383

information  from  a  raw  dataset  that  may  be  useful  in  a  modeling  context.  The  data
aggregation and GroupBy tools we have explored in this book are used often in a fea
ture engineering context.

While details of good feature engineering are out of scope for this book, I will show
some methods to make switching between data manipulation with pandas and mod
eling as painless as possible.

The  point  of  contact  between  pandas  and  other  analysis  libraries  is  usually  NumPy
arrays. To turn a DataFrame into a NumPy array, use the .values property:

In [10]: import pandas as pd

In [11]: import numpy as np

In [12]: data = pd.DataFrame({
   ....:     &#39;x0&#39;: [1, 2, 3, 4, 5],
   ....:     &#39;x1&#39;: [0.01, -0.01, 0.25, -4.1, 0.],
   ....:     &#39;y&#39;: [-1.5, 0., 3.6, 1.3, -2.]})

In [13]: data
Out[13]: 
   x0    x1    y
0   1  0.01 -1.5
1   2 -0.01  0.0
2   3  0.25  3.6
3   4 -4.10  1.3
4   5  0.00 -2.0

In [14]: data.columns
Out[14]: Index([&#39;x0&#39;, &#39;x1&#39;, &#39;y&#39;], dtype=&#39;object&#39;)

In [15]: data.values
Out[15]: 
array([[ 1.  ,  0.01, -1.5 ],
       [ 2.  , -0.01,  0.  ],
       [ 3.  ,  0.25,  3.6 ],
       [ 4.  , -4.1 ,  1.3 ],
       [ 5.  ,  0.  , -2.  ]])

To convert back to a DataFrame, as you may recall from earlier chapters, you can pass
a two-dimensional ndarray with optional column names:

In [16]: df2 = pd.DataFrame(data.values, columns=[&#39;one&#39;, &#39;two&#39;, &#39;three&#39;])

In [17]: df2
Out[17]: 
   one   two  three
0  1.0  0.01   -1.5
1  2.0 -0.01    0.0
2  3.0  0.25    3.6

384 

| 

Chapter 13: Introduction to Modeling Libraries in Python

3  4.0 -4.10    1.3
4  5.0  0.00   -2.0

The  .values  attribute  is  intended  to  be  used  when  your  data  is
homogeneousfor example, all numeric types. If you have hetero
geneous data, the result will be an ndarray of Python objects:

In [18]: df3 = data.copy()

In [19]: df3[&#39;strings&#39;] = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;]

In [20]: df3
Out[20]: 
   x0    x1    y strings
0   1  0.01 -1.5       a
1   2 -0.01  0.0       b
2   3  0.25  3.6       c
3   4 -4.10  1.3       d
4   5  0.00 -2.0       e

In [21]: df3.values
Out[21]: 
array([[1, 0.01, -1.5, &#39;a&#39;],
       [2, -0.01, 0.0, &#39;b&#39;],
       [3, 0.25, 3.6, &#39;c&#39;],
       [4, -4.1, 1.3, &#39;d&#39;],
       [5, 0.0, -2.0, &#39;e&#39;]], dtype=object)

For some models, you may only wish to use a subset of the columns. I recommend 
using loc indexing with values:

In [22]: model_cols = [&#39;x0&#39;, &#39;x1&#39;]

In [23]: data.loc[:, model_cols].values
Out[23]: 
array([[ 1.  ,  0.01],
       [ 2.  , -0.01],
       [ 3.  ,  0.25],
       [ 4.  , -4.1 ],
       [ 5.  ,  0.  ]])

Some libraries have native support for pandas and do some of this work for you auto
matically:  converting  to  NumPy  from  DataFrame  and  attaching  model  parameter
names to the columns of output tables or Series. In other cases, you will have to per
form this metadata management manually.

In Chapter 12 we looked at pandass Categorical type and the pandas.get_dummies
function. Suppose we had a non-numeric column in our example dataset:

13.1 Interfacing Between pandas and Model Code 

| 

385

In [24]: data[&#39;category&#39;] = pd.Categorical([&#39;a&#39;, &#39;b&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;],
   ....:                                   categories=[&#39;a&#39;, &#39;b&#39;])

In [25]: data
Out[25]: 
   x0    x1    y category
0   1  0.01 -1.5        a
1   2 -0.01  0.0        b
2   3  0.25  3.6        a
3   4 -4.10  1.3        a
4   5  0.00 -2.0        b

If  we  wanted  to  replace  the  &#39;category&#39;  column  with  dummy  variables,  we  create 
dummy variables, drop the &#39;category&#39; column, and then join the result:

In [26]: dummies = pd.get_dummies(data.category, prefix=&#39;category&#39;)

In [27]: data_with_dummies = data.drop(&#39;category&#39;, axis=1).join(dummies)

In [28]: data_with_dummies
Out[28]: 
   x0    x1    y  category_a  category_b
0   1  0.01 -1.5           1           0
1   2 -0.01  0.0           0           1
2   3  0.25  3.6           1           0
3   4 -4.10  1.3           1           0
4   5  0.00 -2.0           0           1

There are some nuances to fitting certain statistical models with dummy variables. It
may  be  simpler  and  less  error-prone  to  use  Patsy  (the  subject  of  the  next  section)
when you have more than simple numeric columns.

13.2 Creating Model Descriptions with Patsy
Patsy  is  a  Python  library  for  describing  statistical  models  (especially  linear  models)
with a small string-based formula syntax, which is inspired by (but not exactly the
same as) the formula syntax used by the R and S statistical programming languages.

Patsy is well supported for specifying linear models in statsmodels, so I will focus on
some of the main features to help you get up and running. Patsys formulas are a spe
cial string syntax that looks like:

y ~ x0 + x1

The syntax a + b does not mean to add a to b, but rather that these are terms in the
design matrix created for the model. The patsy.dmatrices function takes a formula
string along with a dataset (which can be a DataFrame or a dict of arrays) and pro
duces design matrices for a linear model:

In [29]: data = pd.DataFrame({
   ....:     &#39;x0&#39;: [1, 2, 3, 4, 5],

386 

| 

Chapter 13: Introduction to Modeling Libraries in Python

   ....:     &#39;x1&#39;: [0.01, -0.01, 0.25, -4.1, 0.],
   ....:     &#39;y&#39;: [-1.5, 0., 3.6, 1.3, -2.]})

In [30]: data
Out[30]: 
   x0    x1    y
0   1  0.01 -1.5
1   2 -0.01  0.0
2   3  0.25  3.6
3   4 -4.10  1.3
4   5  0.00 -2.0

In [31]: import patsy

In [32]: y, X = patsy.dmatrices(&#39;y ~ x0 + x1&#39;, data)

Now we have:

In [33]: y
Out[33]: 
DesignMatrix with shape (5, 1)
     y
  -1.5
   0.0
   3.6
   1.3
  -2.0
  Terms:
    &#39;y&#39; (column 0)

In [34]: X
Out[34]: 
DesignMatrix with shape (5, 3)
  Intercept  x0     x1
          1   1   0.01
          1   2  -0.01
          1   3   0.25
          1   4  -4.10
          1   5   0.00
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;x0&#39; (column 1)
    &#39;x1&#39; (column 2)

These Patsy DesignMatrix instances are NumPy ndarrays with additional metadata:

In [35]: np.asarray(y)
Out[35]: 
array([[-1.5],
       [ 0. ],
       [ 3.6],
       [ 1.3],
       [-2. ]])

13.2 Creating Model Descriptions with Patsy 

| 

387

In [36]: np.asarray(X)
Out[36]: 
array([[ 1.  ,  1.  ,  0.01],
       [ 1.  ,  2.  , -0.01],
       [ 1.  ,  3.  ,  0.25],
       [ 1.  ,  4.  , -4.1 ],
       [ 1.  ,  5.  ,  0.  ]])

You  might  wonder  where  the  Intercept  term  came  from.  This  is  a  convention  for
linear  models  like  ordinary  least  squares  (OLS)  regression.  You  can  suppress  the
intercept by adding the term + 0 to the model:

In [37]: patsy.dmatrices(&#39;y ~ x0 + x1 + 0&#39;, data)[1]
Out[37]: 
DesignMatrix with shape (5, 2)
  x0     x1
   1   0.01
   2  -0.01
   3   0.25
   4  -4.10
   5   0.00
  Terms:
    &#39;x0&#39; (column 0)
    &#39;x1&#39; (column 1)

The  Patsy  objects  can  be  passed  directly  into  algorithms  like  numpy.linalg.lstsq,
which performs an ordinary least squares regression:

In [38]: coef, resid, _, _ = np.linalg.lstsq(X, y)

The model metadata is retained in the design_info attribute, so you can reattach the
model column names to the fitted coefficients to obtain a Series, for example:

In [39]: coef
Out[39]: 
array([[ 0.3129],
       [-0.0791],
       [-0.2655]])

In [40]: coef = pd.Series(coef.squeeze(), index=X.design_info.column_names)

In [41]: coef
Out[41]: 
Intercept    0.312910
x0          -0.079106
x1          -0.265464
dtype: float64

388 

| 

Chapter 13: Introduction to Modeling Libraries in Python

Data Transformations in Patsy Formulas
You can mix Python code into your Patsy formulas; when evaluating the formula the
library will try to find the functions you use in the enclosing scope:

In [42]: y, X = patsy.dmatrices(&#39;y ~ x0 + np.log(np.abs(x1) + 1)&#39;, data)

In [43]: X
Out[43]: 
DesignMatrix with shape (5, 3)
  Intercept  x0  np.log(np.abs(x1) + 1)
          1   1                 0.00995
          1   2                 0.00995
          1   3                 0.22314
          1   4                 1.62924
          1   5                 0.00000
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;x0&#39; (column 1)
    &#39;np.log(np.abs(x1) + 1)&#39; (column 2)

Some commonly used variable transformations include standardizing (to mean 0 and
variance 1) and centering (subtracting the mean). Patsy has built-in functions for this
purpose:

In [44]: y, X = patsy.dmatrices(&#39;y ~ standardize(x0) + center(x1)&#39;, data)

In [45]: X
Out[45]: 
DesignMatrix with shape (5, 3)
  Intercept  standardize(x0)  center(x1)
          1         -1.41421        0.78
          1         -0.70711        0.76
          1          0.00000        1.02
          1          0.70711       -3.33
          1          1.41421        0.77
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;standardize(x0)&#39; (column 1)
    &#39;center(x1)&#39; (column 2)

As part of a modeling process, you may fit a model on one dataset, then evaluate the
model  based  on  another.  This  might  be  a  hold-out  portion  or  new  data  that  is
observed  later.  When  applying  transformations  like  center  and  standardize,  you
should  be  careful  when  using  the  model  to  form  predications  based  on  new  data.
These  are  called  stateful  transformations,  because  you  must  use  statistics  like  the
mean or standard deviation of the original dataset when transforming a new dataset.

The patsy.build_design_matrices function can apply transformations to new out-
of-sample data using the saved information from the original in-sample dataset:

13.2 Creating Model Descriptions with Patsy 

| 

389

In [46]: new_data = pd.DataFrame({
   ....:     &#39;x0&#39;: [6, 7, 8, 9],
   ....:     &#39;x1&#39;: [3.1, -0.5, 0, 2.3],
   ....:     &#39;y&#39;: [1, 2, 3, 4]})

In [47]: new_X = patsy.build_design_matrices([X.design_info], new_data)

In [48]: new_X
Out[48]: 
[DesignMatrix with shape (4, 3)
   Intercept  standardize(x0)  center(x1)
           1          2.12132        3.87
           1          2.82843        0.27
           1          3.53553        0.77
           1          4.24264        3.07
   Terms:
     &#39;Intercept&#39; (column 0)
     &#39;standardize(x0)&#39; (column 1)
     &#39;center(x1)&#39; (column 2)]

Because the plus symbol (+) in the context of Patsy formulas does not mean addition,
when you want to add columns from a dataset by name, you must wrap them in the
special I function:

In [49]: y, X = patsy.dmatrices(&#39;y ~ I(x0 + x1)&#39;, data)

In [50]: X
Out[50]: 
DesignMatrix with shape (5, 2)
  Intercept  I(x0 + x1)
          1        1.01
          1        1.99
          1        3.25
          1       -0.10
          1        5.00
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;I(x0 + x1)&#39; (column 1)

Patsy  has  several  other  built-in  transforms  in  the  patsy.builtins  module.  See  the
online documentation for more.

Categorical data has a special class of transformations, which I explain next.

Categorical Data and Patsy
Non-numeric data can be transformed for a model design matrix in many different
ways. A complete treatment of this topic is outside the scope of this book and would
be best studied along with a course in statistics.

390 

| 

Chapter 13: Introduction to Modeling Libraries in Python

When you use non-numeric terms in a Patsy formula, they are converted to dummy
variables by default. If there is an intercept, one of the levels will be left out to avoid
collinearity:

In [51]: data = pd.DataFrame({
   ....:     &#39;key1&#39;: [&#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;, &#39;a&#39;, &#39;b&#39;, &#39;a&#39;, &#39;b&#39;],
   ....:     &#39;key2&#39;: [0, 1, 0, 1, 0, 1, 0, 0],
   ....:     &#39;v1&#39;: [1, 2, 3, 4, 5, 6, 7, 8],
   ....:     &#39;v2&#39;: [-1, 0, 2.5, -0.5, 4.0, -1.2, 0.2, -1.7]
   ....: })

In [52]: y, X = patsy.dmatrices(&#39;v2 ~ key1&#39;, data)

In [53]: X
Out[53]: 
DesignMatrix with shape (8, 2)
  Intercept  key1[T.b]
          1          0
          1          0
          1          1
          1          1
          1          0
          1          1
          1          0
          1          1
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;key1&#39; (column 1)

If you omit the intercept from the model, then columns for each category value will
be included in the model design matrix:

In [54]: y, X = patsy.dmatrices(&#39;v2 ~ key1 + 0&#39;, data)

In [55]: X
Out[55]: 
DesignMatrix with shape (8, 2)
  key1[a]  key1[b]
        1        0
        1        0
        0        1
        0        1
        1        0
        0        1
        1        0
        0        1
  Terms:
    &#39;key1&#39; (columns 0:2)

Numeric columns can be interpreted as categorical with the C function:

In [56]: y, X = patsy.dmatrices(&#39;v2 ~ C(key2)&#39;, data)

13.2 Creating Model Descriptions with Patsy 

| 

391

In [57]: X
Out[57]: 
DesignMatrix with shape (8, 2)
  Intercept  C(key2)[T.1]
          1             0
          1             1
          1             0
          1             1
          1             0
          1             1
          1             0
          1             0
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;C(key2)&#39; (column 1)

When youre using multiple categorical terms in a model, things can be more compli
cated,  as  you  can  include  interaction  terms  of  the  form  key1:key2,  which  can  be
used, for example, in analysis of variance (ANOVA) models:

In [58]: data[&#39;key2&#39;] = data[&#39;key2&#39;].map({0: &#39;zero&#39;, 1: &#39;one&#39;})

In [59]: data
Out[59]: 
  key1  key2  v1   v2
0    a  zero   1 -1.0
1    a   one   2  0.0
2    b  zero   3  2.5
3    b   one   4 -0.5
4    a  zero   5  4.0
5    b   one   6 -1.2
6    a  zero   7  0.2
7    b  zero   8 -1.7

In [60]: y, X = patsy.dmatrices(&#39;v2 ~ key1 + key2&#39;, data)

In [61]: X
Out[61]: 
DesignMatrix with shape (8, 3)
  Intercept  key1[T.b]  key2[T.zero]
          1          0             1
          1          0             0
          1          1             1
          1          1             0
          1          0             1
          1          1             0
          1          0             1
          1          1             1
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;key1&#39; (column 1)
    &#39;key2&#39; (column 2)

392 

| 

Chapter 13: Introduction to Modeling Libraries in Python

In [62]: y, X = patsy.dmatrices(&#39;v2 ~ key1 + key2 + key1:key2&#39;, data)

In [63]: X
Out[63]: 
DesignMatrix with shape (8, 4)
  Intercept  key1[T.b]  key2[T.zero]  key1[T.b]:key2[T.zero]
          1          0             1                       0
          1          0             0                       0
          1          1             1                       1
          1          1             0                       0
          1          0             1                       0
          1          1             0                       0
          1          0             1                       0
          1          1             1                       1
  Terms:
    &#39;Intercept&#39; (column 0)
    &#39;key1&#39; (column 1)
    &#39;key2&#39; (column 2)
    &#39;key1:key2&#39; (column 3)

Patsy  provides  for  other  ways  to  transform  categorical  data,  including  transforma
tions for terms with a particular ordering. See the online documentation for more.

13.3 Introduction to statsmodels
statsmodels is a Python library for fitting many kinds of statistical models, perform
ing statistical tests, and data exploration and visualization. Statsmodels contains more
classical frequentist statistical methods, while Bayesian methods and machine learn
ing models are found in other libraries.

Some kinds of models found in statsmodels include:

 Linear models, generalized linear models, and robust linear models

 Linear mixed effects models

 Analysis of variance (ANOVA) methods

 Time series processes and state space models

 Generalized method of moments

In the next few pages, we will use a few basic tools in statsmodels and explore how to
use the modeling interfaces with Patsy formulas and pandas DataFrame objects.

Estimating Linear Models
There  are  several  kinds  of  linear  regression  models  in  statsmodels,  from  the  more
basic (e.g., ordinary least squares) to more complex (e.g., iteratively reweighted least
squares).

13.3 Introduction to statsmodels 

| 

393

Linear  models  in  statsmodels  have  two  different  main  interfaces:  array-based  and
formula-based. These are accessed through these API module imports:

import statsmodels.api as sm
import statsmodels.formula.api as smf

To show how to use these, we generate a linear model from some random data:

def dnorm(mean, variance, size=1):
    if isinstance(size, int):
        size = size,
    return mean + np.sqrt(variance) * np.random.randn(*size)

# For reproducibility
np.random.seed(12345)

N = 100
X = np.c_[dnorm(0, 0.4, size=N),
          dnorm(0, 0.6, size=N),
          dnorm(0, 0.2, size=N)]
eps = dnorm(0, 0.1, size=N)
beta = [0.1, 0.3, 0.5]

y = np.dot(X, beta) + eps

Here, I wrote down the true model with known parameters beta. In this case, dnorm
is a helper function for generating normally distributed data with a particular mean
and variance. So now we have:

In [66]: X[:5]
Out[66]: 
array([[-0.1295, -1.2128,  0.5042],
       [ 0.3029, -0.4357, -0.2542],
       [-0.3285, -0.0253,  0.1384],
       [-0.3515, -0.7196, -0.2582],
       [ 1.2433, -0.3738, -0.5226]])

In [67]: y[:5]
Out[67]: array([ 0.4279, -0.6735, -0.0909, -0.4895, -0.1289])

A linear model is generally fitted with an intercept term as we saw before with Patsy.
The sm.add_constant function can add an intercept column to an existing matrix:

In [68]: X_model = sm.add_constant(X)

In [69]: X_model[:5]
Out[69]: 
array([[ 1.    , -0.1295, -1.2128,  0.5042],
       [ 1.    ,  0.3029, -0.4357, -0.2542],
       [ 1.    , -0.3285, -0.0253,  0.1384],
       [ 1.    , -0.3515, -0.7196, -0.2582],
       [ 1.    ,  1.2433, -0.3738, -0.5226]])

394 

| 

Chapter 13: Introduction to Modeling Libraries in Python

The sm.OLS class can fit an ordinary least squares linear regression:

In [70]: model = sm.OLS(y, X)

The  models  fit  method  returns  a  regression  results  object  containing  estimated
model parameters and other diagnostics:

In [71]: results = model.fit()

In [72]: results.params
Out[72]: array([ 0.1783,  0.223 ,  0.501 ])

The summary method on results can print a model detailing diagnostic output of the
model:

In [73]: print(results.summary())
OLS Regression Results                            
==============================================================================
Dep. Variable:                      y   R-squared:                       0.430
Model:                            OLS   Adj. R-squared:                  0.413
Method:                 Least Squares   F-statistic:                     24.42
Date:                Mon, 25 Sep 2017   Prob (F-statistic):           7.44e-12
Time:                        14:06:15   Log-Likelihood:                -34.305
No. Observations:                 100   AIC:                             74.61
Df Residuals:                      97   BIC:                             82.42
Df Model:                           3                                         
Covariance Type:            nonrobust                                         
==============================================================================
                 coef    std err          t      P&gt;|t|      [0.025      0.975]
------------------------------------------------------------------------------
x1             0.1783      0.053      3.364      0.001       0.073       0.283
x2             0.2230      0.046      4.818      0.000       0.131       0.315
x3             0.5010      0.080      6.237      0.000       0.342       0.660
==============================================================================
Omnibus:                        4.662   Durbin-Watson:                   2.201
Prob(Omnibus):                  0.097   Jarque-Bera (JB):                4.098
Skew:                           0.481   Prob(JB):                        0.129
Kurtosis:                       3.243   Cond. No.                         1.74
==============================================================================
Warnings:
[1] Standard Errors assume that the covariance matrix of the errors is correctly 
specified.

The  parameter  names  here  have  been  given  the  generic  names  x1,  x2,  and  so  on.
Suppose instead that all of the model parameters are in a DataFrame:

In [74]: data = pd.DataFrame(X, columns=[&#39;col0&#39;, &#39;col1&#39;, &#39;col2&#39;])

In [75]: data[&#39;y&#39;] = y

In [76]: data[:5]
Out[76]: 
       col0      col1      col2         y

13.3 Introduction to statsmodels 

| 

395

0 -0.129468 -1.212753  0.504225  0.427863
1  0.302910 -0.435742 -0.254180 -0.673480
2 -0.328522 -0.025302  0.138351 -0.090878
3 -0.351475 -0.719605 -0.258215 -0.489494
4  1.243269 -0.373799 -0.522629 -0.128941

Now we can use the statsmodels formula API and Patsy formula strings:

In [77]: results = smf.ols(&#39;y ~ col0 + col1 + col2&#39;, data=data).fit()

In [78]: results.params
Out[78]: 
Intercept    0.033559
col0         0.176149
col1         0.224826
col2         0.514808
dtype: float64

In [79]: results.tvalues
Out[79]: 
Intercept    0.952188
col0         3.319754
col1         4.850730
col2         6.303971
dtype: float64

Observe how statsmodels has returned results as Series with the DataFrame column
names attached. We also do not need to use add_constant when using formulas and
pandas objects.

Given new out-of-sample data, you can compute predicted values given the estimated
model parameters:

In [80]: results.predict(data[:5])
Out[80]: 
0   -0.002327
1   -0.141904
2    0.041226
3   -0.323070
4   -0.100535
dtype: float64

There are many additional tools for analysis, diagnostics, and visualization of linear
model results in statsmodels that you can explore. There are also other kinds of linear
models beyond ordinary least squares.

Estimating Time Series Processes
Another class of models in statsmodels are for time series analysis. Among these are
autoregressive  processes,  Kalman  filtering  and  other  state  space  models,  and  multi
variate autoregressive models.

396 

| 

Chapter 13: Introduction to Modeling Libraries in Python

Lets simulate some time series data with an autoregressive structure and noise:

init_x = 4

import random
values = [init_x, init_x]
N = 1000

b0 = 0.8
b1 = -0.4
noise = dnorm(0, 0.1, N)
for i in range(N):
    new_x = values[-1] * b0 + values[-2] * b1 + noise[i]
    values.append(new_x)

This data has an AR(2) structure (two lags) with parameters 0.8 and 0.4. When you
fit an AR model, you may not know the number of lagged terms to include, so you
can fit the model with some larger number of lags:

In [82]: MAXLAGS = 5

In [83]: model = sm.tsa.AR(values)

In [84]: results = model.fit(MAXLAGS)

The estimated parameters in the results have the intercept first and the estimates for
the first two lags next:

In [85]: results.params
Out[85]: array([-0.0062,  0.7845, -0.4085, -0.0136,  0.015 ,  0.0143])

Deeper details of these models and how to interpret their results is beyond what I can
cover in this book, but theres plenty more to discover in the statsmodels documenta
tion.

13.4 Introduction to scikit-learn
scikit-learn  is  one  of  the  most  widely  used  and  trusted  general-purpose  Python
machine  learning  toolkits.  It  contains  a  broad  selection  of  standard  supervised  and
unsupervised machine learning methods with tools for model selection and evalua
tion, data transformation, data loading, and model persistence. These models can be
used for classification, clustering, prediction, and other common tasks.

There are excellent online and printed resources for learning about machine learning
and how to apply libraries like scikit-learn and TensorFlow to solve real-world prob
lems. In this section, I will give a brief flavor of the scikit-learn API style.

At the time of this writing, scikit-learn does not have deep pandas integration, though
there are some add-on third-party packages that are still in development. pandas can
be very useful for massaging datasets prior to model fitting, though.

13.4 Introduction to scikit-learn 

| 

397

As an example, I use a now-classic dataset from a Kaggle competition about passen
ger  survival  rates  on  the  Titanic,  which  sank  in  1912.  We  load  the  test  and  training
dataset using pandas:

In [86]: train = pd.read_csv(&#39;datasets/titanic/train.csv&#39;)

In [87]: test = pd.read_csv(&#39;datasets/titanic/test.csv&#39;)

In [88]: train[:4]
Out[88]: 
   PassengerId  Survived  Pclass  \
0            1         0       3   
1            2         1       1   
2            3         1       3   
3            4         1       1   
                                                Name     Sex   Age  SibSp  \
0                            Braund, Mr. Owen Harris    male  22.0      1   
1  Cumings, Mrs. John Bradley (Florence Briggs Th...  female  38.0      1   
2                             Heikkinen, Miss. Laina  female  26.0      0   
3       Futrelle, Mrs. Jacques Heath (Lily May Peel)  female  35.0      1   
   Parch            Ticket     Fare Cabin Embarked  
0      0         A/5 21171   7.2500   NaN        S  
1      0          PC 17599  71.2833   C85        C  
2      0  STON/O2. 3101282   7.9250   NaN        S  
3      0            113803  53.1000  C123        S  

Libraries like statsmodels and scikit-learn generally cannot be fed missing data, so we
look at the columns to see if there are any that contain missing data:

In [89]: train.isnull().sum()
Out[89]: 
PassengerId      0
Survived         0
Pclass           0
Name             0
Sex              0
Age            177
SibSp            0
Parch            0
Ticket           0
Fare             0
Cabin          687
Embarked         2
dtype: int64

In [90]: test.isnull().sum()
Out[90]: 
PassengerId      0
Pclass           0
Name             0
Sex              0
Age             86

398 

| 

Chapter 13: Introduction to Modeling Libraries in Python

SibSp            0
Parch            0
Ticket           0
Fare             1
Cabin          327
Embarked         0
dtype: int64

In statistics and machine learning examples like this one, a typical task is to predict
whether a passenger would survive based on features in the data. A model is fitted on
a training dataset and then evaluated on an out-of-sample testing dataset.

I would like to use Age as a predictor, but it has missing data. There are a number of
ways to do missing data imputation, but I will do a simple one and use the median of
the training dataset to fill the nulls in both tables:

In [91]: impute_value = train[&#39;Age&#39;].median()

In [92]: train[&#39;Age&#39;] = train[&#39;Age&#39;].fillna(impute_value)

In [93]: test[&#39;Age&#39;] = test[&#39;Age&#39;].fillna(impute_value)

Now we need to specify our models. I add a column IsFemale as an encoded version
of the &#39;Sex&#39; column:

In [94]: train[&#39;IsFemale&#39;] = (train[&#39;Sex&#39;] == &#39;female&#39;).astype(int)

In [95]: test[&#39;IsFemale&#39;] = (test[&#39;Sex&#39;] == &#39;female&#39;).astype(int)

Then we decide on some model variables and create NumPy arrays:

In [96]: predictors = [&#39;Pclass&#39;, &#39;IsFemale&#39;, &#39;Age&#39;]

In [97]: X_train = train[predictors].values

In [98]: X_test = test[predictors].values

In [99]: y_train = train[&#39;Survived&#39;].values

In [100]: X_train[:5]
Out[100]: 
array([[  3.,   0.,  22.],
       [  1.,   1.,  38.],
       [  3.,   1.,  26.],
       [  1.,   1.,  35.],
       [  3.,   0.,  35.]])

In [101]: y_train[:5]
Out[101]: array([0, 1, 1, 1, 0])

I  make  no  claims  that  this  is  a  good  model  nor  that  these  features  are  engineered
properly.  We  use  the  LogisticRegression  model  from  scikit-learn  and  create  a
model instance:

13.4 Introduction to scikit-learn 

| 

399

In [102]: from sklearn.linear_model import LogisticRegression

In [103]: model = LogisticRegression()

Similar to statsmodels, we can fit this model to the training data using the models fit
method:

In [104]: model.fit(X_train, y_train)
Out[104]: 
LogisticRegression(C=1.0, class_weight=None, dual=False, fit_intercept=True,
          intercept_scaling=1, max_iter=100, multi_class=&#39;ovr&#39;, n_jobs=1,
          penalty=&#39;l2&#39;, random_state=None, solver=&#39;liblinear&#39;, tol=0.0001,
          verbose=0, warm_start=False)

Now, we can form predictions for the test dataset using model.predict:

In [105]: y_predict = model.predict(X_test)

In [106]: y_predict[:10]
Out[106]: array([0, 0, 0, 0, 1, 0, 1, 0, 1, 0])

If  you  had  the  true  values  for  the  test  dataset,  you  could  compute  an  accuracy  per
centage or some other error metric:

(y_true == y_predict).mean()

In  practice,  there  are  often  many  additional  layers  of  complexity  in  model  training.
Many  models  have  parameters  that  can  be  tuned,  and  there  are  techniques  such  as
cross-validation  that  can  be  used  for  parameter  tuning  to  avoid  overfitting  to  the
training  data.  This  can  often  yield  better  predictive  performance  or  robustness  on
new data.

Cross-validation works by splitting the training data to simulate out-of-sample pre
diction. Based on a model accuracy score like mean squared error, one can perform a
grid search on model parameters. Some models, like logistic regression, have estima
tor  classes  with  built-in  cross-validation.  For  example,  the  LogisticRegressionCV
class can be used with a parameter indicating how fine-grained of a grid search to do
on the model regularization parameter C:

In [107]: from sklearn.linear_model import LogisticRegressionCV

In [108]: model_cv = LogisticRegressionCV(10)

In [109]: model_cv.fit(X_train, y_train)
Out[109]: 
LogisticRegressionCV(Cs=10, class_weight=None, cv=None, dual=False,
           fit_intercept=True, intercept_scaling=1.0, max_iter=100,
           multi_class=&#39;ovr&#39;, n_jobs=1, penalty=&#39;l2&#39;, random_state=None,
           refit=True, scoring=None, solver=&#39;lbfgs&#39;, tol=0.0001, verbose=0)

400 

| 

Chapter 13: Introduction to Modeling Libraries in Python

To  do  cross-validation  by  hand,  you  can  use  the  cross_val_score  helper  function,
which  handles  the  data  splitting  process.  For  example,  to  cross-validate  our  model
with four non-overlapping splits of the training data, we can do:

In [110]: from sklearn.model_selection import cross_val_score

In [111]: model = LogisticRegression(C=10)

In [112]: scores = cross_val_score(model, X_train, y_train, cv=4)

In [113]: scores
Out[113]: array([ 0.7723,  0.8027,  0.7703,  0.7883])

The default scoring metric is model-dependent, but it is possible to choose an explicit
scoring function. Cross-validated models take longer to train, but can often yield bet
ter model performance.

13.5 Continuing Your Education
While I have only skimmed the surface of some Python modeling libraries, there are
more  and  more  frameworks  for  various  kinds  of  statistics  and  machine  learning
either implemented in Python or with a Python user interface.

This book is focused especially on data wrangling, but there are many others dedica
ted to modeling and data science tools. Some excellent ones are:

 Introduction  to  Machine  Learning  with  Python  by  Andreas  Mueller  and  Sarah

Guido (OReilly)

 Python Data Science Handbook by Jake VanderPlas (OReilly)

 Data Science from Scratch: First Principles with Python by Joel Grus (OReilly)

 Python Machine Learning by Sebastian Raschka (Packt Publishing)

 Hands-On  Machine  Learning  with  Scikit-Learn  and  TensorFlow  by  Aurlien

Gron (OReilly)

While books can be valuable resources for learning, they can sometimes grow out of
date when the underlying open source software changes. Its a good idea to be familiar
with the documentation for the various statistics or machine learning frameworks to
stay up to date on the latest features and API.

13.5 Continuing Your Education 

| 

401

CHAPTER 14
Data Analysis Examples

Now  that  weve  reached  the  end  of  this  books  main  chapters,  were  going  to  take  a
look  at  a  number  of  real-world  datasets.  For  each  dataset,  well  use  the  techniques
presented in this book to extract meaning from the raw data. The demonstrated tech
niques can be applied to all manner of other datasets, including your own. This chap
ter  contains  a  collection  of  miscellaneous  example  datasets  that  you  can  use  for
practice with the tools in this book.

The example datasets are found in the books accompanying GitHub repository.

14.1 1.USA.gov Data from Bitly
In  2011,  URL  shortening  service  Bitly  partnered  with  the  US  government  website
USA.gov to provide a feed of anonymous data gathered from users who shorten links
ending with .gov or .mil. In 2011, a live feed as well as hourly snapshots were available
as downloadable text files. This service is shut down at the time of this writing (2017),
but we preserved one of the data files for the books examples.

In the case of the hourly snapshots, each line in each file contains a common form of
web data known as JSON, which stands for JavaScript Object Notation. For example,
if we read just the first line of a file we may see something like this:

In [5]: path = &#39;datasets/bitly_usagov/example.txt&#39;

In [6]: open(path).readline()
Out[6]: &#39;{ &#34;a&#34;: &#34;Mozilla\\/5.0 (Windows NT 6.1; WOW64) AppleWebKit\\/535.11
(KHTML, like Gecko) Chrome\\/17.0.963.78 Safari\\/535.11&#34;, &#34;c&#34;: &#34;US&#34;, &#34;nk&#34;: 1,
&#34;tz&#34;: &#34;America\\/New_York&#34;, &#34;gr&#34;: &#34;MA&#34;, &#34;g&#34;: &#34;A6qOVH&#34;, &#34;h&#34;: &#34;wfLQtf&#34;, &#34;l&#34;:
&#34;orofrog&#34;, &#34;al&#34;: &#34;en-US,en;q=0.8&#34;, &#34;hh&#34;: &#34;1.usa.gov&#34;, &#34;r&#34;:
&#34;http:\\/\\/www.facebook.com\\/l\\/7AQEFzjSi\\/1.usa.gov\\/wfLQtf&#34;, &#34;u&#34;:
&#34;http:\\/\\/www.ncbi.nlm.nih.gov\\/pubmed\\/22415991&#34;, &#34;t&#34;: 1331923247, &#34;hc&#34;:
1331822918, &#34;cy&#34;: &#34;Danvers&#34;, &#34;ll&#34;: [ 42.576698, -70.954903 ] }\n&#39;

403

Python has both built-in and third-party libraries for converting a JSON string into a
Python  dictionary  object.  Here  well  use  the  json  module  and  its  loads  function
invoked on each line in the sample file we downloaded:

import json
path = &#39;datasets/bitly_usagov/example.txt&#39;
records = [json.loads(line) for line in open(path)]

The resulting object records is now a list of Python dicts:

In [18]: records[0]
Out[18]:
{&#39;a&#39;: &#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko)
Chrome/17.0.963.78 Safari/535.11&#39;,
 &#39;al&#39;: &#39;en-US,en;q=0.8&#39;,
 &#39;c&#39;: &#39;US&#39;,
 &#39;cy&#39;: &#39;Danvers&#39;,
 &#39;g&#39;: &#39;A6qOVH&#39;,
 &#39;gr&#39;: &#39;MA&#39;,
 &#39;h&#39;: &#39;wfLQtf&#39;,
 &#39;hc&#39;: 1331822918,
 &#39;hh&#39;: &#39;1.usa.gov&#39;,
 &#39;l&#39;: &#39;orofrog&#39;,
 &#39;ll&#39;: [42.576698, -70.954903],
 &#39;nk&#39;: 1,
 &#39;r&#39;: &#39;http://www.facebook.com/l/7AQEFzjSi/1.usa.gov/wfLQtf&#39;,
 &#39;t&#39;: 1331923247,
 &#39;tz&#39;: &#39;America/New_York&#39;,
 &#39;u&#39;: &#39;http://www.ncbi.nlm.nih.gov/pubmed/22415991&#39;}

Counting Time Zones in Pure Python
Suppose  we  were  interested  in  finding  the  most  often-occurring  time  zones  in  the
dataset (the tz field). There are many ways we could do this. First, lets extract a list of
time zones again using a list comprehension:

In [12]: time_zones = [rec[&#39;tz&#39;] for rec in records]
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
&lt;ipython-input-12-db4fbd348da9&gt; in &lt;module&gt;()
----&gt; 1 time_zones = [rec[&#39;tz&#39;] for rec in records]
&lt;ipython-input-12-db4fbd348da9&gt; in &lt;listcomp&gt;(.0)
----&gt; 1 time_zones = [rec[&#39;tz&#39;] for rec in records]
KeyError: &#39;tz&#39;

Oops! Turns out that not all of the records have a time zone field. This is easy to han
dle, as we can add the check if &#39;tz&#39; in rec at the end of the list comprehension:

In [13]: time_zones = [rec[&#39;tz&#39;] for rec in records if &#39;tz&#39; in rec]

In [14]: time_zones[:10]
Out[14]: 

404 

| 

Chapter 14: Data Analysis Examples

[&#39;America/New_York&#39;,
 &#39;America/Denver&#39;,
 &#39;America/New_York&#39;,
 &#39;America/Sao_Paulo&#39;,
 &#39;America/New_York&#39;,
 &#39;America/New_York&#39;,
 &#39;Europe/Warsaw&#39;,
 &#39;&#39;,
 &#39;&#39;,
 &#39;&#39;]

Just looking at the first 10 time zones, we see that some of them are unknown (empty
string). You can filter these out also, but Ill leave them in for now. Now, to produce
counts by time zone Ill show two approaches: the harder way (using just the Python
standard library) and the easier way (using pandas). One way to do the counting is to
use a dict to store counts while we iterate through the time zones:

def get_counts(sequence):
    counts = {}
    for x in sequence:
        if x in counts:
            counts[x] += 1
        else:
            counts[x] = 1
    return counts

Using  more  advanced  tools  in  the  Python  standard  library,  you  can  write  the  same
thing more briefly:

from collections import defaultdict

def get_counts2(sequence):
    counts = defaultdict(int) # values will initialize to 0
    for x in sequence:
        counts[x] += 1
    return counts

I  put  this  logic  in  a  function  just  to  make  it  more  reusable.  To  use  it  on  the  time
zones, just pass the time_zones list:

In [17]: counts = get_counts(time_zones)

In [18]: counts[&#39;America/New_York&#39;]
Out[18]: 1251

In [19]: len(time_zones)
Out[19]: 3440

If  we  wanted  the  top  10  time  zones  and  their  counts,  we  can  do  a  bit  of  dictionary
acrobatics:

def top_counts(count_dict, n=10):
    value_key_pairs = [(count, tz) for tz, count in count_dict.items()]

14.1 1.USA.gov Data from Bitly 

| 

405

    value_key_pairs.sort()
    return value_key_pairs[-n:]

We have then:

In [21]: top_counts(counts)
Out[21]: 
[(33, &#39;America/Sao_Paulo&#39;),
 (35, &#39;Europe/Madrid&#39;),
 (36, &#39;Pacific/Honolulu&#39;),
 (37, &#39;Asia/Tokyo&#39;),
 (74, &#39;Europe/London&#39;),
 (191, &#39;America/Denver&#39;),
 (382, &#39;America/Los_Angeles&#39;),
 (400, &#39;America/Chicago&#39;),
 (521, &#39;&#39;),
 (1251, &#39;America/New_York&#39;)]

If  you  search  the  Python  standard  library,  you  may  find  the  collections.Counter
class, which makes this task a lot easier:

In [22]: from collections import Counter

In [23]: counts = Counter(time_zones)

In [24]: counts.most_common(10)
Out[24]: 
[(&#39;America/New_York&#39;, 1251),
 (&#39;&#39;, 521),
 (&#39;America/Chicago&#39;, 400),
 (&#39;America/Los_Angeles&#39;, 382),
 (&#39;America/Denver&#39;, 191),
 (&#39;Europe/London&#39;, 74),
 (&#39;Asia/Tokyo&#39;, 37),
 (&#39;Pacific/Honolulu&#39;, 36),
 (&#39;Europe/Madrid&#39;, 35),
 (&#39;America/Sao_Paulo&#39;, 33)]

Counting Time Zones with pandas
Creating a DataFrame from the original set of records is as easy as passing the list of
records to pandas.DataFrame:

In [25]: import pandas as pd

In [26]: frame = pd.DataFrame(records)

In [27]: frame.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 3560 entries, 0 to 3559
Data columns (total 18 columns):
_heartbeat_    120 non-null float64
a              3440 non-null object

406 

| 

Chapter 14: Data Analysis Examples

al             3094 non-null object
c              2919 non-null object
cy             2919 non-null object
g              3440 non-null object
gr             2919 non-null object
h              3440 non-null object
hc             3440 non-null float64
hh             3440 non-null object
kw             93 non-null object
l              3440 non-null object
ll             2919 non-null object
nk             3440 non-null float64
r              3440 non-null object
t              3440 non-null float64
tz             3440 non-null object
u              3440 non-null object
dtypes: float64(4), object(14)
memory usage: 500.7+ KB

In [28]: frame[&#39;tz&#39;][:10]
Out[28]: 
0     America/New_York
1       America/Denver
2     America/New_York
3    America/Sao_Paulo
4     America/New_York
5     America/New_York
6        Europe/Warsaw
7                     
8                     
9                     
Name: tz, dtype: object

The  output  shown  for  the  frame  is  the  summary  view,  shown  for  large  DataFrame
objects. We can then use the value_counts method for Series:

In [29]: tz_counts = frame[&#39;tz&#39;].value_counts()

In [30]: tz_counts[:10]
Out[30]: 
America/New_York       1251
                        521
America/Chicago         400
America/Los_Angeles     382
America/Denver          191
Europe/London            74
Asia/Tokyo               37
Pacific/Honolulu         36
Europe/Madrid            35
America/Sao_Paulo        33
Name: tz, dtype: int64

14.1 1.USA.gov Data from Bitly 

| 

407

We can visualize this data using matplotlib. You can do a bit of munging to fill in a
substitute value for unknown and missing time zone data in the records. We replace
the  missing  values  with  the  fillna  method  and  use  boolean  array  indexing  for  the
empty strings:

In [31]: clean_tz = frame[&#39;tz&#39;].fillna(&#39;Missing&#39;)

In [32]: clean_tz[clean_tz == &#39;&#39;] = &#39;Unknown&#39;

In [33]: tz_counts = clean_tz.value_counts()

In [34]: tz_counts[:10]
Out[34]: 
America/New_York       1251
Unknown                 521
America/Chicago         400
America/Los_Angeles     382
America/Denver          191
Missing                 120
Europe/London            74
Asia/Tokyo               37
Pacific/Honolulu         36
Europe/Madrid            35
Name: tz, dtype: int64

At  this  point,  we  can  use  the  seaborn  package  to  make  a  horizontal  bar  plot  (see
Figure 14-1 for the resulting visualization):

In [36]: import seaborn as sns

In [37]: subset = tz_counts[:10]

In [38]: sns.barplot(y=subset.index, x=subset.values)

Figure 14-1. Top time zones in the 1.usa.gov sample data

408 

| 

Chapter 14: Data Analysis Examples

The  a  field  contains  information  about  the  browser,  device,  or  application  used  to
perform the URL shortening:

In [39]: frame[&#39;a&#39;][1]
Out[39]: &#39;GoogleMaps/RochesterNY&#39;

In [40]: frame[&#39;a&#39;][50]
Out[40]: &#39;Mozilla/5.0 (Windows NT 5.1; rv:10.0.2) Gecko/20100101 Firefox/10.0.2&#39;

In [41]: frame[&#39;a&#39;][51][:50]  # long line
Out[41]: &#39;Mozilla/5.0 (Linux; U; Android 2.2.2; en-us; LG-P9&#39;

Parsing  all  of  the  interesting  information  in  these  agent  strings  may  seem  like  a
daunting task. One possible strategy is to split off the first token in the string (corre
sponding roughly to the browser capability) and make another summary of the user
behavior:

In [42]: results = pd.Series([x.split()[0] for x in frame.a.dropna()])

In [43]: results[:5]
Out[43]: 
0               Mozilla/5.0
1    GoogleMaps/RochesterNY
2               Mozilla/4.0
3               Mozilla/5.0
4               Mozilla/5.0
dtype: object

In [44]: results.value_counts()[:8]
Out[44]: 
Mozilla/5.0                 2594
Mozilla/4.0                  601
GoogleMaps/RochesterNY       121
Opera/9.80                    34
TEST_INTERNET_AGENT           24
GoogleProducer                21
Mozilla/6.0                    5
BlackBerry8520/5.0.0.681       4
dtype: int64

Now, suppose you wanted to decompose the top time zones into Windows and non-
Windows users. As a simplification, lets say that a user is on Windows if the string
&#39;Windows&#39; is in the agent string. Since some of the agents are missing, well exclude
these from the data:

In [45]: cframe = frame[frame.a.notnull()]

We want to then compute a value for whether each row is Windows or not:

In [47]: cframe[&#39;os&#39;] = np.where(cframe[&#39;a&#39;].str.contains(&#39;Windows&#39;),
   ....:                         &#39;Windows&#39;, &#39;Not Windows&#39;)

In [48]: cframe[&#39;os&#39;][:5]

14.1 1.USA.gov Data from Bitly 

| 

409

Out[48]: 
0        Windows
1    Not Windows
2        Windows
3    Not Windows
4        Windows
Name: os, dtype: object

Then, you can group the data by its time zone column and this new list of operating
systems:

In [49]: by_tz_os = cframe.groupby([&#39;tz&#39;, &#39;os&#39;])

The  group  counts,  analogous  to  the  value_counts  function,  can  be  computed  with
size. This result is then reshaped into a table with unstack:

In [50]: agg_counts = by_tz_os.size().unstack().fillna(0)

In [51]: agg_counts[:10]
Out[51]: 
os                              Not Windows  Windows
tz                                                  
                                      245.0    276.0
Africa/Cairo                            0.0      3.0
Africa/Casablanca                       0.0      1.0
Africa/Ceuta                            0.0      2.0
Africa/Johannesburg                     0.0      1.0
Africa/Lusaka                           0.0      1.0
America/Anchorage                       4.0      1.0
America/Argentina/Buenos_Aires          1.0      0.0
America/Argentina/Cordoba               0.0      1.0
America/Argentina/Mendoza               0.0      1.0

Finally, lets select the top overall time zones. To do so, I construct an indirect index
array from the row counts in agg_counts:

# Use to sort in ascending order
In [52]: indexer = agg_counts.sum(1).argsort()

In [53]: indexer[:10]
Out[53]: 
tz
                                  24
Africa/Cairo                      20
Africa/Casablanca                 21
Africa/Ceuta                      92
Africa/Johannesburg               87
Africa/Lusaka                     53
America/Anchorage                 54
America/Argentina/Buenos_Aires    57
America/Argentina/Cordoba         26
America/Argentina/Mendoza         55
dtype: int64

410 

| 

Chapter 14: Data Analysis Examples

I  use  take  to  select  the  rows  in  that  order,  then  slice  off  the  last  10  rows  (largest
values):

In [54]: count_subset = agg_counts.take(indexer[-10:])

In [55]: count_subset
Out[55]: 
os                   Not Windows  Windows
tz                                       
America/Sao_Paulo           13.0     20.0
Europe/Madrid               16.0     19.0
Pacific/Honolulu             0.0     36.0
Asia/Tokyo                   2.0     35.0
Europe/London               43.0     31.0
America/Denver             132.0     59.0
America/Los_Angeles        130.0    252.0
America/Chicago            115.0    285.0
                           245.0    276.0
America/New_York           339.0    912.0

pandas has a convenience method called nlargest that does the same thing:

In [56]: agg_counts.sum(1).nlargest(10)
Out[56]: 
tz
America/New_York       1251.0
                        521.0
America/Chicago         400.0
America/Los_Angeles     382.0
America/Denver          191.0
Europe/London            74.0
Asia/Tokyo               37.0
Pacific/Honolulu         36.0
Europe/Madrid            35.0
America/Sao_Paulo        33.0
dtype: float64

Then,  as  shown  in  the  preceding  code  block,  this  can  be  plotted  in  a  bar  plot;  Ill
make  it  a  stacked  bar  plot  by  passing  an  additional  argument  to  seaborns  barplot
function (see Figure 14-2):

# Rearrange the data for plotting
In [58]: count_subset = count_subset.stack()

In [59]: count_subset.name = &#39;total&#39;

In [60]: count_subset = count_subset.reset_index()

In [61]: count_subset[:10]
Out[61]: 
                  tz           os  total
0  America/Sao_Paulo  Not Windows   13.0
1  America/Sao_Paulo      Windows   20.0

14.1 1.USA.gov Data from Bitly 

| 

411

2      Europe/Madrid  Not Windows   16.0
3      Europe/Madrid      Windows   19.0
4   Pacific/Honolulu  Not Windows    0.0
5   Pacific/Honolulu      Windows   36.0
6         Asia/Tokyo  Not Windows    2.0
7         Asia/Tokyo      Windows   35.0
8      Europe/London  Not Windows   43.0
9      Europe/London      Windows   31.0

In [62]: sns.barplot(x=&#39;total&#39;, y=&#39;tz&#39;, hue=&#39;os&#39;,  data=count_subset)

Figure 14-2. Top time zones by Windows and non-Windows users

The plot doesnt make it easy to see the relative percentage of Windows users in the
smaller groups, so lets normalize the group percentages to sum to 1:

def norm_total(group):
    group[&#39;normed_total&#39;] = group.total / group.total.sum()
    return group

results = count_subset.groupby(&#39;tz&#39;).apply(norm_total)

Then plot this in Figure 14-3:

In [65]: sns.barplot(x=&#39;normed_total&#39;, y=&#39;tz&#39;, hue=&#39;os&#39;,  data=results)

412 

| 

Chapter 14: Data Analysis Examples

Figure 14-3. Percentage Windows and non-Windows users in top-occurring time zones

We  could  have  computed  the  normalized  sum  more  efficiently  by  using  the  trans
form method with groupby:

In [66]: g = count_subset.groupby(&#39;tz&#39;)

In [67]: results2 = count_subset.total / g.total.transform(&#39;sum&#39;)

14.2 MovieLens 1M Dataset
GroupLens Research provides a number of collections of movie ratings data collected
from users of MovieLens in the late 1990s and early 2000s. The data provide movie
ratings,  movie  metadata  (genres  and  year),  and  demographic  data  about  the  users
(age, zip code, gender identification, and occupation). Such data is often of interest in
the development of recommendation systems based on machine learning algorithms.
While  we  do  not  explore  machine  learning  techniques  in  detail  in  this  book,  I  will
show you how to slice and dice datasets like these into the exact form you need.

The MovieLens 1M dataset contains 1 million ratings collected from 6,000 users on
4,000  movies.  Its  spread  across  three  tables:  ratings,  user  information,  and  movie
information. After extracting the data from the ZIP file, we can load each table into a
pandas DataFrame object using pandas.read_table:

14.2 MovieLens 1M Dataset 

| 

413

import pandas as pd

# Make display smaller
pd.options.display.max_rows = 10

unames = [&#39;user_id&#39;, &#39;gender&#39;, &#39;age&#39;, &#39;occupation&#39;, &#39;zip&#39;]
users = pd.read_table(&#39;datasets/movielens/users.dat&#39;, sep=&#39;::&#39;,
                      header=None, names=unames)

rnames = [&#39;user_id&#39;, &#39;movie_id&#39;, &#39;rating&#39;, &#39;timestamp&#39;]
ratings = pd.read_table(&#39;datasets/movielens/ratings.dat&#39;, sep=&#39;::&#39;,
                        header=None, names=rnames)

mnames = [&#39;movie_id&#39;, &#39;title&#39;, &#39;genres&#39;]
movies = pd.read_table(&#39;datasets/movielens/movies.dat&#39;, sep=&#39;::&#39;,
                       header=None, names=mnames)

You  can  verify  that  everything  succeeded  by  looking  at  the  first  few  rows  of  each
DataFrame with Pythons slice syntax:

In [69]: users[:5]
Out[69]: 
   user_id gender  age  occupation    zip
0        1      F    1          10  48067
1        2      M   56          16  70072
2        3      M   25          15  55117
3        4      M   45           7  02460
4        5      M   25          20  55455

In [70]: ratings[:5]
Out[70]: 
   user_id  movie_id  rating  timestamp
0        1      1193       5  978300760
1        1       661       3  978302109
2        1       914       3  978301968
3        1      3408       4  978300275
4        1      2355       5  978824291

In [71]: movies[:5]
Out[71]: 
   movie_id                               title                        genres
0         1                    Toy Story (1995)   Animation|Children&#39;s|Comedy
1         2                      Jumanji (1995)  Adventure|Children&#39;s|Fantasy
2         3             Grumpier Old Men (1995)                Comedy|Romance
3         4            Waiting to Exhale (1995)                  Comedy|Drama
4         5  Father of the Bride Part II (1995)                        Comedy

In [72]: ratings
Out[72]: 
         user_id  movie_id  rating  timestamp
0              1      1193       5  978300760
1              1       661       3  978302109
2              1       914       3  978301968

414 

| 

Chapter 14: Data Analysis Examples

3              1      3408       4  978300275
4              1      2355       5  978824291
...          ...       ...     ...        ...
1000204     6040      1091       1  956716541
1000205     6040      1094       5  956704887
1000206     6040       562       5  956704746
1000207     6040      1096       4  956715648
1000208     6040      1097       4  956715569
[1000209 rows x 4 columns]

Note that ages and occupations are coded as integers indicating groups described in
the datasets README file. Analyzing the data spread across three tables is not a sim
ple task; for example, suppose you wanted to compute mean ratings for a particular
movie by sex and age. As you will see, this is much easier to do with all of the data
merged  together  into  a  single  table.  Using  pandass  merge  function,  we  first  merge
ratings with  users and then merge that result with the  movies data. pandas infers
which columns to use as the merge (or join) keys based on overlapping names:

In [73]: data = pd.merge(pd.merge(ratings, users), movies)

In [74]: data
Out[74]: 
         user_id  movie_id  rating  timestamp gender  age  occupation    zip  \
0              1      1193       5  978300760      F    1          10  48067   
1              2      1193       5  978298413      M   56          16  70072   
2             12      1193       4  978220179      M   25          12  32793   
3             15      1193       4  978199279      M   25           7  22903   
4             17      1193       5  978158471      M   50           1  95350   
...          ...       ...     ...        ...    ...  ...         ...    ...   
1000204     5949      2198       5  958846401      M   18          17  47901   
1000205     5675      2703       3  976029116      M   35          14  30030   
1000206     5780      2845       1  958153068      M   18          17  92886   
1000207     5851      3607       5  957756608      F   18          20  55410   
1000208     5938      2909       4  957273353      M   25           1  35401   
                                               title                genres  
0             One Flew Over the Cuckoo&#39;s Nest (1975)                 Drama  
1             One Flew Over the Cuckoo&#39;s Nest (1975)                 Drama  
2             One Flew Over the Cuckoo&#39;s Nest (1975)                 Drama  
3             One Flew Over the Cuckoo&#39;s Nest (1975)                 Drama  
4             One Flew Over the Cuckoo&#39;s Nest (1975)                 Drama  
...                                              ...                   ...  
1000204                           Modulations (1998)           Documentary  
1000205                        Broken Vessels (1998)                 Drama  
1000206                            White Boys (1999)                 Drama  
1000207                     One Little Indian (1973)  Comedy|Drama|Western  
1000208  Five Wives, Three Secretaries and Me (1998)           Documentary  
[1000209 rows x 10 columns]

In [75]: data.iloc[0]
Out[75]: 
user_id                                            1

14.2 MovieLens 1M Dataset 

| 

415

movie_id                                        1193
rating                                             5
timestamp                                  978300760
gender                                             F
age                                                1
occupation                                        10
zip                                            48067
title         One Flew Over the Cuckoo&#39;s Nest (1975)
genres                                         Drama
Name: 0, dtype: object

To  get  mean  movie  ratings  for  each  film  grouped  by  gender,  we  can  use  the
pivot_table method:

In [76]: mean_ratings = data.pivot_table(&#39;rating&#39;, index=&#39;title&#39;,
   ....:                                 columns=&#39;gender&#39;, aggfunc=&#39;mean&#39;)

In [77]: mean_ratings[:5]
Out[77]: 
gender                                F         M
title                                            
$1,000,000 Duck (1971)         3.375000  2.761905
&#39;Night Mother (1986)           3.388889  3.352941
&#39;Til There Was You (1997)      2.675676  2.733333
&#39;burbs, The (1989)             2.793478  2.962085
...And Justice for All (1979)  3.828571  3.689024

This produced another DataFrame containing mean ratings with movie titles as row
labels  (the  index)  and  gender  as  column  labels.  I  first  filter  down  to  movies  that
received at least 250 ratings (a completely arbitrary number); to do this, I then group
the data by title and use size() to get a Series of group sizes for each title:

In [78]: ratings_by_title = data.groupby(&#39;title&#39;).size()

In [79]: ratings_by_title[:10]
Out[79]: 
title
$1,000,000 Duck (1971)                37
&#39;Night Mother (1986)                  70
&#39;Til There Was You (1997)             52
&#39;burbs, The (1989)                   303
...And Justice for All (1979)        199
1-900 (1994)                           2
10 Things I Hate About You (1999)    700
101 Dalmatians (1961)                565
101 Dalmatians (1996)                364
12 Angry Men (1957)                  616
dtype: int64

In [80]: active_titles = ratings_by_title.index[ratings_by_title &gt;= 250]

In [81]: active_titles

416 

| 

Chapter 14: Data Analysis Examples

Out[81]: 
Index([&#39;&#39;burbs, The (1989)&#39;, &#39;10 Things I Hate About You (1999)&#39;,
       &#39;101 Dalmatians (1961)&#39;, &#39;101 Dalmatians (1996)&#39;, &#39;12 Angry Men (1957)&#39;,
       &#39;13th Warrior, The (1999)&#39;, &#39;2 Days in the Valley (1996)&#39;,
       &#39;20,000 Leagues Under the Sea (1954)&#39;, &#39;2001: A Space Odyssey (1968)&#39;,
       &#39;2010 (1984)&#39;,
       ...
       &#39;X-Men (2000)&#39;, &#39;Year of Living Dangerously (1982)&#39;,
       &#39;Yellow Submarine (1968)&#39;, &#39;You&#39;ve Got Mail (1998)&#39;,
       &#39;Young Frankenstein (1974)&#39;, &#39;Young Guns (1988)&#39;,
       &#39;Young Guns II (1990)&#39;, &#39;Young Sherlock Holmes (1985)&#39;,
       &#39;Zero Effect (1998)&#39;, &#39;eXistenZ (1999)&#39;],
      dtype=&#39;object&#39;, name=&#39;title&#39;, length=1216)

The index of titles receiving at least 250 ratings can then be used to select rows from
mean_ratings:

# Select rows on the index
In [82]: mean_ratings = mean_ratings.loc[active_titles]

In [83]: mean_ratings
Out[83]: 
gender                                    F         M
title                                                
&#39;burbs, The (1989)                 2.793478  2.962085
10 Things I Hate About You (1999)  3.646552  3.311966
101 Dalmatians (1961)              3.791444  3.500000
101 Dalmatians (1996)              3.240000  2.911215
12 Angry Men (1957)                4.184397  4.328421
...                                     ...       ...
Young Guns (1988)                  3.371795  3.425620
Young Guns II (1990)               2.934783  2.904025
Young Sherlock Holmes (1985)       3.514706  3.363344
Zero Effect (1998)                 3.864407  3.723140
eXistenZ (1999)                    3.098592  3.289086
[1216 rows x 2 columns]

To see the top films among female viewers, we can sort by the F column in descend
ing order:

In [85]: top_female_ratings = mean_ratings.sort_values(by=&#39;F&#39;, ascending=False)

In [86]: top_female_ratings[:10]
Out[86]: 
gender                                                     F         M
title                                                                 
Close Shave, A (1995)                               4.644444  4.473795
Wrong Trousers, The (1993)                          4.588235  4.478261
Sunset Blvd. (a.k.a. Sunset Boulevard) (1950)       4.572650  4.464589
Wallace &amp; Gromit: The Best of Aardman Animation...  4.563107  4.385075
Schindler&#39;s List (1993)                             4.562602  4.491415
Shawshank Redemption, The (1994)                    4.539075  4.560625
Grand Day Out, A (1992)                             4.537879  4.293255

14.2 MovieLens 1M Dataset 

| 

417

To Kill a Mockingbird (1962)                        4.536667  4.372611
Creature Comforts (1990)                            4.513889  4.272277
Usual Suspects, The (1995)                          4.513317  4.518248

Measuring Rating Disagreement
Suppose  you  wanted  to  find  the  movies  that  are  most  divisive  between  male  and
female viewers. One way is to add a column to mean_ratings containing the differ
ence in means, then sort by that:

In [87]: mean_ratings[&#39;diff&#39;] = mean_ratings[&#39;M&#39;] - mean_ratings[&#39;F&#39;]

Sorting by &#39;diff&#39; yields the movies with the greatest rating difference so that we can
see which ones were preferred by women:

In [88]: sorted_by_diff = mean_ratings.sort_values(by=&#39;diff&#39;)

In [89]: sorted_by_diff[:10]
Out[89]: 
gender                                        F         M      diff
title                                                              
Dirty Dancing (1987)                   3.790378  2.959596 -0.830782
Jumpin&#39; Jack Flash (1986)              3.254717  2.578358 -0.676359
Grease (1978)                          3.975265  3.367041 -0.608224
Little Women (1994)                    3.870588  3.321739 -0.548849
Steel Magnolias (1989)                 3.901734  3.365957 -0.535777
Anastasia (1997)                       3.800000  3.281609 -0.518391
Rocky Horror Picture Show, The (1975)  3.673016  3.160131 -0.512885
Color Purple, The (1985)               4.158192  3.659341 -0.498851
Age of Innocence, The (1993)           3.827068  3.339506 -0.487561
Free Willy (1993)                      2.921348  2.438776 -0.482573

Reversing the order of the rows and again slicing off the top 10 rows, we get the mov
ies preferred by men that women didnt rate as highly:

# Reverse order of rows, take first 10 rows
In [90]: sorted_by_diff[::-1][:10]
Out[90]: 
gender                                         F         M      diff
title                                                               
Good, The Bad and The Ugly, The (1966)  3.494949  4.221300  0.726351
Kentucky Fried Movie, The (1977)        2.878788  3.555147  0.676359
Dumb &amp; Dumber (1994)                    2.697987  3.336595  0.638608
Longest Day, The (1962)                 3.411765  4.031447  0.619682
Cable Guy, The (1996)                   2.250000  2.863787  0.613787
Evil Dead II (Dead By Dawn) (1987)      3.297297  3.909283  0.611985
Hidden, The (1987)                      3.137931  3.745098  0.607167
Rocky III (1982)                        2.361702  2.943503  0.581801
Caddyshack (1980)                       3.396135  3.969737  0.573602
For a Few Dollars More (1965)           3.409091  3.953795  0.544704

418 

| 

Chapter 14: Data Analysis Examples

Suppose  instead  you  wanted  the  movies  that  elicited  the  most  disagreement  among
viewers, independent of gender identification. Disagreement can be measured by the
variance or standard deviation of the ratings:

# Standard deviation of rating grouped by title
In [91]: rating_std_by_title = data.groupby(&#39;title&#39;)[&#39;rating&#39;].std()

# Filter down to active_titles
In [92]: rating_std_by_title = rating_std_by_title.loc[active_titles]

# Order Series by value in descending order
In [93]: rating_std_by_title.sort_values(ascending=False)[:10]
Out[93]: 
title
Dumb &amp; Dumber (1994)                     1.321333
Blair Witch Project, The (1999)          1.316368
Natural Born Killers (1994)              1.307198
Tank Girl (1995)                         1.277695
Rocky Horror Picture Show, The (1975)    1.260177
Eyes Wide Shut (1999)                    1.259624
Evita (1996)                             1.253631
Billy Madison (1995)                     1.249970
Fear and Loathing in Las Vegas (1998)    1.246408
Bicentennial Man (1999)                  1.245533
Name: rating, dtype: float64

You  may  have  noticed  that  movie  genres  are  given  as  a  pipe-separated  (|)  string.  If
you wanted to do some analysis by genre, more work would be required to transform
the genre information into a more usable form.

14.3 US Baby Names 18802010
The  United  States  Social  Security  Administration  (SSA)  has  made  available  data  on
the  frequency  of  baby  names  from  1880  through  the  present.  Hadley  Wickham,  an
author of several popular R packages, has often made use of this dataset in illustrating
data manipulation in R.

We need to do some data wrangling to load this dataset, but once we do that we will
have a DataFrame that looks like this:

In [4]: names.head(10)
Out[4]:
        name sex  births  year
0       Mary   F    7065  1880
1       Anna   F    2604  1880
2       Emma   F    2003  1880
3  Elizabeth   F    1939  1880
4     Minnie   F    1746  1880
5   Margaret   F    1578  1880
6        Ida   F    1472  1880

14.3 US Baby Names 18802010 

| 

419

7      Alice   F    1414  1880
8     Bertha   F    1320  1880
9      Sarah   F    1288  1880

There are many things you might want to do with the dataset:

 Visualize the proportion of babies given a particular name (your own, or another

name) over time

 Determine the relative rank of a name

 Determine the most popular names in each year or the names whose popularity

has advanced or declined the most

 Analyze trends in names: vowels, consonants, length, overall diversity, changes in

spelling, first and last letters

 Analyze  external  sources  of  trends:  biblical  names,  celebrities,  demographic

changes

With the tools in this book, many of these kinds of analyses are within reach, so I will
walk you through some of them.

As  of  this  writing,  the  US  Social  Security  Administration  makes  available  data  files,
one per year, containing the total number of births for each sex/name combination.
The  raw  archive  of  these  files  can  be  obtained  from  http://www.ssa.gov/oact/baby
names/limits.html.

In the event that this page has been moved by the time youre reading this, it can most
likely be located again by an internet search. After downloading the National data
file names.zip and unzipping it, you will have a directory containing a series of files
like yob1880.txt. I use the Unix head command to look at the first 10 lines of one of
the files (on Windows, you can use the more command or open it in a text editor):

In [94]: !head -n 10 datasets/babynames/yob1880.txt
Mary,F,7065
Anna,F,2604
Emma,F,2003
Elizabeth,F,1939
Minnie,F,1746
Margaret,F,1578
Ida,F,1472
Alice,F,1414
Bertha,F,1320
Sarah,F,1288

As  this  is  already  in  a  nicely  comma-separated  form,  it  can  be  loaded  into  a  Data
Frame with pandas.read_csv:

420 

| 

Chapter 14: Data Analysis Examples

In [95]: import pandas as pd

In [96]: names1880 = pd.read_csv(&#39;datasets/babynames/yob1880.txt&#39;,
   ....:                         names=[&#39;name&#39;, &#39;sex&#39;, &#39;births&#39;])

In [97]: names1880
Out[97]: 
           name sex  births
0          Mary   F    7065
1          Anna   F    2604
2          Emma   F    2003
3     Elizabeth   F    1939
4        Minnie   F    1746
...         ...  ..     ...
1995     Woodie   M       5
1996     Worthy   M       5
1997     Wright   M       5
1998       York   M       5
1999  Zachariah   M       5
[2000 rows x 3 columns]

These files only contain names with at least five occurrences in each year, so for sim
plicitys sake we can use the sum of the births column by sex as the total number of
births in that year:

In [98]: names1880.groupby(&#39;sex&#39;).births.sum()
Out[98]: 
sex
F     90993
M    110493
Name: births, dtype: int64

Since the dataset is split into files by year, one of the first things to do is to assemble
all of the data into a single DataFrame and further to add a year field. You can do this
using pandas.concat:

years = range(1880, 2011)

pieces = []
columns = [&#39;name&#39;, &#39;sex&#39;, &#39;births&#39;]

for year in years:
    path = &#39;datasets/babynames/yob%d.txt&#39; % year
    frame = pd.read_csv(path, names=columns)

    frame[&#39;year&#39;] = year
    pieces.append(frame)

# Concatenate everything into a single DataFrame
names = pd.concat(pieces, ignore_index=True)

14.3 US Baby Names 18802010 

| 

421

There are a couple things to note here. First, remember that concat glues the Data
Frame  objects  together  row-wise  by  default.  Secondly,  you  have  to  pass
ignore_index=True because were not interested in preserving the original row num
bers returned from read_csv. So we now have a very large DataFrame containing all
of the names data:

In [100]: names
Out[100]: 
              name sex  births  year
0             Mary   F    7065  1880
1             Anna   F    2604  1880
2             Emma   F    2003  1880
3        Elizabeth   F    1939  1880
4           Minnie   F    1746  1880
...            ...  ..     ...   ...
1690779    Zymaire   M       5  2010
1690780     Zyonne   M       5  2010
1690781  Zyquarius   M       5  2010
1690782      Zyran   M       5  2010
1690783      Zzyzx   M       5  2010
[1690784 rows x 4 columns]

With this data in hand, we can already start aggregating the data at the year and sex
level using groupby or pivot_table (see Figure 14-4):

In [101]: total_births = names.pivot_table(&#39;births&#39;, index=&#39;year&#39;,
   .....:                                  columns=&#39;sex&#39;, aggfunc=sum)

In [102]: total_births.tail()
Out[102]: 
sex         F        M
year                  
2006  1896468  2050234
2007  1916888  2069242
2008  1883645  2032310
2009  1827643  1973359
2010  1759010  1898382

In [103]: total_births.plot(title=&#39;Total births by sex and year&#39;)

422 

| 

Chapter 14: Data Analysis Examples

Figure 14-4. Total births by sex and year

Next, lets insert a column prop with the fraction of babies given each name relative to
the total number of births. A  prop value of  0.02 would indicate that 2 out of every
100  babies  were  given  a  particular  name.  Thus,  we  group  the  data  by  year  and  sex,
then add the new column to each group:

def add_prop(group):
    group[&#39;prop&#39;] = group.births / group.births.sum()
    return group
names = names.groupby([&#39;year&#39;, &#39;sex&#39;]).apply(add_prop)

The resulting complete dataset now has the following columns:

In [105]: names
Out[105]: 
              name sex  births  year      prop
0             Mary   F    7065  1880  0.077643
1             Anna   F    2604  1880  0.028618
2             Emma   F    2003  1880  0.022013
3        Elizabeth   F    1939  1880  0.021309
4           Minnie   F    1746  1880  0.019188
...            ...  ..     ...   ...       ...
1690779    Zymaire   M       5  2010  0.000003
1690780     Zyonne   M       5  2010  0.000003
1690781  Zyquarius   M       5  2010  0.000003

14.3 US Baby Names 18802010 

| 

423

1690782      Zyran   M       5  2010  0.000003
1690783      Zzyzx   M       5  2010  0.000003
[1690784 rows x 5 columns]

When performing a group operation like this, its often valuable to do a sanity check,
like verifying that the prop column sums to 1 within all the groups:

In [106]: names.groupby([&#39;year&#39;, &#39;sex&#39;]).prop.sum()
Out[106]: 
year  sex
1880  F      1.0
      M      1.0
1881  F      1.0
      M      1.0
1882  F      1.0
            ... 
2008  M      1.0
2009  F      1.0
      M      1.0
2010  F      1.0
      M      1.0
Name: prop, Length: 262, dtype: float64

Now  that  this  is  done,  Im  going  to  extract  a  subset  of  the  data  to  facilitate  further
analysis:  the  top  1,000  names  for  each  sex/year  combination.  This  is  yet  another
group operation:

def get_top1000(group):
    return group.sort_values(by=&#39;births&#39;, ascending=False)[:1000]
grouped = names.groupby([&#39;year&#39;, &#39;sex&#39;])
top1000 = grouped.apply(get_top1000)
# Drop the group index, not needed
top1000.reset_index(inplace=True, drop=True)

If you prefer a do-it-yourself approach, try this instead:

pieces = []
for year, group in names.groupby([&#39;year&#39;, &#39;sex&#39;]):
    pieces.append(group.sort_values(by=&#39;births&#39;, ascending=False)[:1000])
top1000 = pd.concat(pieces, ignore_index=True)

The resulting dataset is now quite a bit smaller:

In [108]: top1000
Out[108]: 
             name sex  births  year      prop
0            Mary   F    7065  1880  0.077643
1            Anna   F    2604  1880  0.028618
2            Emma   F    2003  1880  0.022013
3       Elizabeth   F    1939  1880  0.021309
4          Minnie   F    1746  1880  0.019188
...           ...  ..     ...   ...       ...
261872     Camilo   M     194  2010  0.000102
261873     Destin   M     194  2010  0.000102

424 

| 

Chapter 14: Data Analysis Examples

261874     Jaquan   M     194  2010  0.000102
261875     Jaydan   M     194  2010  0.000102
261876     Maxton   M     193  2010  0.000102
[261877 rows x 5 columns]

Well use this Top 1,000 dataset in the following investigations into the data.

Analyzing Naming Trends
With  the  full  dataset  and  Top  1,000  dataset  in  hand,  we  can  start  analyzing  various
naming  trends  of  interest.  Splitting  the  Top  1,000  names  into  the  boy  and  girl  por
tions is easy to do first:

In [109]: boys = top1000[top1000.sex == &#39;M&#39;]

In [110]: girls = top1000[top1000.sex == &#39;F&#39;]

Simple time series, like the number of Johns or Marys for each year, can be plotted
but require a bit of munging to be more useful. Lets form a pivot table of the total
number of births by year and name:

In [111]: total_births = top1000.pivot_table(&#39;births&#39;, index=&#39;year&#39;,
   .....:                                    columns=&#39;name&#39;,
   .....:                                    aggfunc=sum)

Now,  this  can  be  plotted  for  a  handful  of  names  with  DataFrames  plot  method
(Figure 14-5 shows the result):

In [112]: total_births.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 131 entries, 1880 to 2010
Columns: 6868 entries, Aaden to Zuri
dtypes: float64(6868)
memory usage: 6.9 MB

In [113]: subset = total_births[[&#39;John&#39;, &#39;Harry&#39;, &#39;Mary&#39;, &#39;Marilyn&#39;]]

In [114]: subset.plot(subplots=True, figsize=(12, 10), grid=False,
   .....:             title=&#34;Number of births per year&#34;)

14.3 US Baby Names 18802010 

| 

425

Figure 14-5. A few boy and girl names over time

On  looking  at  this,  you  might  conclude  that  these  names  have  grown  out  of  favor
with the American population. But the story is actually more complicated than that,
as will be explored in the next section.

Measuring the increase in naming diversity

One explanation for the decrease in plots is that fewer parents are choosing common
names for their children. This hypothesis can be explored and confirmed in the data.
One measure is the proportion of births represented by the top 1,000 most popular
names, which I aggregate and plot by year and sex (Figure 14-6 shows the resulting
plot):

426 

| 

Chapter 14: Data Analysis Examples

In [116]: table = top1000.pivot_table(&#39;prop&#39;, index=&#39;year&#39;,
   .....:                             columns=&#39;sex&#39;, aggfunc=sum)

In [117]: table.plot(title=&#39;Sum of table1000.prop by year and sex&#39;,
   .....:            yticks=np.linspace(0, 1.2, 13), xticks=range(1880, 2020, 10)
)

Figure 14-6. Proportion of births represented in top 1000 names by sex

You  can  see  that,  indeed,  there  appears  to  be  increasing  name  diversity  (decreasing
total proportion in the top 1,000). Another interesting metric is the number of dis
tinct  names,  taken  in  order  of  popularity  from  highest  to  lowest,  in  the  top  50%  of
births. This number is a bit more tricky to compute. Lets consider just the boy names
from 2010:

In [118]: df = boys[boys.year == 2010]

In [119]: df
Out[119]: 
           name sex  births  year      prop
260877    Jacob   M   21875  2010  0.011523
260878    Ethan   M   17866  2010  0.009411
260879  Michael   M   17133  2010  0.009025
260880   Jayden   M   17030  2010  0.008971
260881  William   M   16870  2010  0.008887

14.3 US Baby Names 18802010 

| 

427

...         ...  ..     ...   ...       ...
261872   Camilo   M     194  2010  0.000102
261873   Destin   M     194  2010  0.000102
261874   Jaquan   M     194  2010  0.000102
261875   Jaydan   M     194  2010  0.000102
261876   Maxton   M     193  2010  0.000102
[1000 rows x 5 columns]

After sorting prop in descending order, we want to know how many of the most pop
ular names it takes to reach 50%. You could write a for loop to do this, but a vector
ized NumPy way is a bit more clever. Taking the cumulative sum, cumsum, of prop and
then calling the method searchsorted returns the position in the cumulative sum at
which 0.5 would need to be inserted to keep it in sorted order:

In [120]: prop_cumsum = df.sort_values(by=&#39;prop&#39;, ascending=False).prop.cumsum()

In [121]: prop_cumsum[:10]
Out[121]: 
260877    0.011523
260878    0.020934
260879    0.029959
260880    0.038930
260881    0.047817
260882    0.056579
260883    0.065155
260884    0.073414
260885    0.081528
260886    0.089621
Name: prop, dtype: float64

In [122]: prop_cumsum.values.searchsorted(0.5)
Out[122]: 116

Since arrays are zero-indexed, adding 1 to this result gives you a result of 117. By con
trast, in 1900 this number was much smaller:

In [123]: df = boys[boys.year == 1900]

In [124]: in1900 = df.sort_values(by=&#39;prop&#39;, ascending=False).prop.cumsum()

In [125]: in1900.values.searchsorted(0.5) + 1
Out[125]: 25

You can now apply this operation to each year/sex combination, groupby those fields,
and apply a function returning the count for each group:

def get_quantile_count(group, q=0.5):
    group = group.sort_values(by=&#39;prop&#39;, ascending=False)
    return group.prop.cumsum().values.searchsorted(q) + 1

diversity = top1000.groupby([&#39;year&#39;, &#39;sex&#39;]).apply(get_quantile_count)
diversity = diversity.unstack(&#39;sex&#39;)

428 

| 

Chapter 14: Data Analysis Examples

This  resulting  DataFrame  diversity  now  has  two  time  series,  one  for  each  sex,
indexed  by  year.  This  can  be  inspected  in  IPython  and  plotted  as  before  (see
Figure 14-7):

In [128]: diversity.head()
Out[128]: 
sex    F   M
year        
1880  38  14
1881  38  14
1882  38  15
1883  39  15
1884  39  16

In [129]: diversity.plot(title=&#34;Number of popular names in top 50%&#34;)

Figure 14-7. Plot of diversity metric by year

As you can see, girl names have always been more diverse than boy names, and they
have only become more so over time. Further analysis of what exactly is driving the
diversity, like the increase of alternative spellings, is left to the reader.

14.3 US Baby Names 18802010 

| 

429

The last letter revolution

In 2007, baby name researcher Laura Wattenberg pointed out on her website that the
distribution  of  boy  names  by  final  letter  has  changed  significantly  over  the  last  100
years. To see this, we first aggregate all of the births in the full dataset by year, sex, and
final letter:

# extract last letter from name column
get_last_letter = lambda x: x[-1]
last_letters = names.name.map(get_last_letter)
last_letters.name = &#39;last_letter&#39;

table = names.pivot_table(&#39;births&#39;, index=last_letters,
                          columns=[&#39;sex&#39;, &#39;year&#39;], aggfunc=sum)

Then we select out three representative years spanning the history and print the first
few rows:

In [131]: subtable = table.reindex(columns=[1910, 1960, 2010], level=&#39;year&#39;)

In [132]: subtable.head()
Out[132]: 
sex                 F                            M                    
year             1910      1960      2010     1910      1960      2010
last_letter                                                           
a            108376.0  691247.0  670605.0    977.0    5204.0   28438.0
b                 NaN     694.0     450.0    411.0    3912.0   38859.0
c                 5.0      49.0     946.0    482.0   15476.0   23125.0
d              6750.0    3729.0    2607.0  22111.0  262112.0   44398.0
e            133569.0  435013.0  313833.0  28655.0  178823.0  129012.0

Next, normalize the table by total births to compute a new table containing propor
tion of total births for each sex ending in each letter:

In [133]: subtable.sum()
Out[133]: 
sex  year
F    1910     396416.0
     1960    2022062.0
     2010    1759010.0
M    1910     194198.0
     1960    2132588.0
     2010    1898382.0
dtype: float64

In [134]: letter_prop = subtable / subtable.sum()

In [135]: letter_prop
Out[135]: 
sex                 F                             M                    
year             1910      1960      2010      1910      1960      2010
last_letter                                                            
a            0.273390  0.341853  0.381240  0.005031  0.002440  0.014980

430 

| 

Chapter 14: Data Analysis Examples

b                 NaN  0.000343  0.000256  0.002116  0.001834  0.020470
c            0.000013  0.000024  0.000538  0.002482  0.007257  0.012181
d            0.017028  0.001844  0.001482  0.113858  0.122908  0.023387
e            0.336941  0.215133  0.178415  0.147556  0.083853  0.067959
...               ...       ...       ...       ...       ...       ...
v                 NaN  0.000060  0.000117  0.000113  0.000037  0.001434
w            0.000020  0.000031  0.001182  0.006329  0.007711  0.016148
x            0.000015  0.000037  0.000727  0.003965  0.001851  0.008614
y            0.110972  0.152569  0.116828  0.077349  0.160987  0.058168
z            0.002439  0.000659  0.000704  0.000170  0.000184  0.001831
[26 rows x 6 columns]

With the letter proportions now in hand, we can make bar plots for each sex broken
down by year (see Figure 14-8):

import matplotlib.pyplot as plt

fig, axes = plt.subplots(2, 1, figsize=(10, 8))
letter_prop[&#39;M&#39;].plot(kind=&#39;bar&#39;, rot=0, ax=axes[0], title=&#39;Male&#39;)
letter_prop[&#39;F&#39;].plot(kind=&#39;bar&#39;, rot=0, ax=axes[1], title=&#39;Female&#39;,
                      legend=False)

Figure 14-8. Proportion of boy and girl names ending in each letter

14.3 US Baby Names 18802010 

| 

431

As you can see, boy names ending in n have experienced significant growth since the
1960s. Going back to the full table created before, I again normalize by year and sex
and select a subset of letters for the boy names, finally transposing to make each col
umn a time series:

In [138]: letter_prop = table / table.sum()

In [139]: dny_ts = letter_prop.loc[[&#39;d&#39;, &#39;n&#39;, &#39;y&#39;], &#39;M&#39;].T

In [140]: dny_ts.head()
Out[140]: 
last_letter         d         n         y
year                                     
1880         0.083055  0.153213  0.075760
1881         0.083247  0.153214  0.077451
1882         0.085340  0.149560  0.077537
1883         0.084066  0.151646  0.079144
1884         0.086120  0.149915  0.080405

With this DataFrame of time series in hand, I can make a plot of the trends over time
again with its plot method (see Figure 14-9):

In [143]: dny_ts.plot()

Figure 14-9. Proportion of boys born with names ending in d/n/y over time

432 

| 

Chapter 14: Data Analysis Examples

Boy names that became girl names (and vice versa)

Another fun trend is looking at boy names that were more popular with one sex ear
lier in the sample but have changed sexes in the present. One example is the name
Lesley  or  Leslie.  Going  back  to  the  top1000  DataFrame,  I  compute  a  list  of  names
occurring in the dataset starting with lesl:

In [144]: all_names = pd.Series(top1000.name.unique())

In [145]: lesley_like = all_names[all_names.str.lower().str.contains(&#39;lesl&#39;)]

In [146]: lesley_like
Out[146]: 
632     Leslie
2294    Lesley
4262    Leslee
4728     Lesli
6103     Lesly
dtype: object

From there, we can filter down to just those names and sum births grouped by name
to see the relative frequencies:

In [147]: filtered = top1000[top1000.name.isin(lesley_like)]

In [148]: filtered.groupby(&#39;name&#39;).births.sum()
Out[148]: 
name
Leslee      1082
Lesley     35022
Lesli        929
Leslie    370429
Lesly      10067
Name: births, dtype: int64

Next, lets aggregate by sex and year and normalize within year:

In [149]: table = filtered.pivot_table(&#39;births&#39;, index=&#39;year&#39;,
   .....:                              columns=&#39;sex&#39;, aggfunc=&#39;sum&#39;)

In [150]: table = table.div(table.sum(1), axis=0)

In [151]: table.tail()
Out[151]: 
sex     F   M
year         
2006  1.0 NaN
2007  1.0 NaN
2008  1.0 NaN
2009  1.0 NaN
2010  1.0 NaN

14.3 US Baby Names 18802010 

| 

433

Lastly,  its  now  possible  to  make  a  plot  of  the  breakdown  by  sex  over  time
(Figure 14-10):

In [153]: table.plot(style={&#39;M&#39;: &#39;k-&#39;, &#39;F&#39;: &#39;k--&#39;})

Figure 14-10. Proportion of male/female Lesley-like names over time

14.4 USDA Food Database
The US Department of Agriculture makes available a database of food nutrient infor
mation.  Programmer  Ashley  Williams  made  available  a  version  of  this  database  in
JSON format. The records look like this:

{
  &#34;id&#34;: 21441,
  &#34;description&#34;: &#34;KENTUCKY FRIED CHICKEN, Fried Chicken, EXTRA CRISPY,
Wing, meat and skin with breading&#34;,
  &#34;tags&#34;: [&#34;KFC&#34;],
  &#34;manufacturer&#34;: &#34;Kentucky Fried Chicken&#34;,
  &#34;group&#34;: &#34;Fast Foods&#34;,
  &#34;portions&#34;: [
    {
      &#34;amount&#34;: 1,
      &#34;unit&#34;: &#34;wing, with skin&#34;,
      &#34;grams&#34;: 68.0

434 

| 

Chapter 14: Data Analysis Examples

    },

    ...
  ],
  &#34;nutrients&#34;: [
    {
      &#34;value&#34;: 20.8,
      &#34;units&#34;: &#34;g&#34;,
      &#34;description&#34;: &#34;Protein&#34;,
      &#34;group&#34;: &#34;Composition&#34;
    },

    ...
  ]
}

Each food has a number of identifying attributes along with two lists of nutrients and
portion sizes. Data in this form is not particularly amenable to analysis, so we need to
do some work to wrangle the data into a better form.

After downloading and extracting the data from the link, you can load it into Python
with any JSON library of your choosing. Ill use the built-in Python json module:

In [154]: import json

In [155]: db = json.load(open(&#39;datasets/usda_food/database.json&#39;))

In [156]: len(db)
Out[156]: 6636

Each entry in db is a dict containing all the data for a single food. The &#39;nutrients&#39;
field is a list of dicts, one for each nutrient:

In [157]: db[0].keys()
Out[157]: dict_keys([&#39;id&#39;, &#39;description&#39;, &#39;tags&#39;, &#39;manufacturer&#39;, &#39;group&#39;, &#39;porti
ons&#39;, &#39;nutrients&#39;])

In [158]: db[0][&#39;nutrients&#39;][0]
Out[158]: 
{&#39;description&#39;: &#39;Protein&#39;,
 &#39;group&#39;: &#39;Composition&#39;,
 &#39;units&#39;: &#39;g&#39;,
 &#39;value&#39;: 25.18}

In [159]: nutrients = pd.DataFrame(db[0][&#39;nutrients&#39;])

In [160]: nutrients[:7]
Out[160]: 
                   description        group units    value
0                      Protein  Composition     g    25.18
1            Total lipid (fat)  Composition     g    29.20
2  Carbohydrate, by difference  Composition     g     3.06
3                          Ash        Other     g     3.28

14.4 USDA Food Database 

| 

435

4                       Energy       Energy  kcal   376.00
5                        Water  Composition     g    39.28
6                       Energy       Energy    kJ  1573.00

When  converting  a  list  of  dicts  to  a  DataFrame,  we  can  specify  a  list  of  fields  to
extract. Well take the food names, group, ID, and manufacturer:

In [161]: info_keys = [&#39;description&#39;, &#39;group&#39;, &#39;id&#39;, &#39;manufacturer&#39;]

In [162]: info = pd.DataFrame(db, columns=info_keys)

In [163]: info[:5]
Out[163]: 
                          description                   group    id  \
0                     Cheese, caraway  Dairy and Egg Products  1008   
1                     Cheese, cheddar  Dairy and Egg Products  1009   
2                        Cheese, edam  Dairy and Egg Products  1018   
3                        Cheese, feta  Dairy and Egg Products  1019   
4  Cheese, mozzarella, part skim milk  Dairy and Egg Products  1028   
  manufacturer  
0               
1               
2               
3               
4               

In [164]: info.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6636 entries, 0 to 6635
Data columns (total 4 columns):
description     6636 non-null object
group           6636 non-null object
id              6636 non-null int64
manufacturer    5195 non-null object
dtypes: int64(1), object(3)
memory usage: 207.5+ KB

You can see the distribution of food groups with value_counts:

In [165]: pd.value_counts(info.group)[:10]
Out[165]: 
Vegetables and Vegetable Products    812
Beef Products                        618
Baked Products                       496
Breakfast Cereals                    403
Fast Foods                           365
Legumes and Legume Products          365
Lamb, Veal, and Game Products        345
Sweets                               341
Pork Products                        328
Fruits and Fruit Juices              328
Name: group, dtype: int64

436 

| 

Chapter 14: Data Analysis Examples

Now,  to  do  some  analysis  on  all  of  the  nutrient  data,  its  easiest  to  assemble  the
nutrients  for  each  food  into  a  single  large  table.  To  do  so,  we  need  to  take  several
steps. First, Ill convert each list of food nutrients to a DataFrame, add a column for
the  food  id,  and  append  the  DataFrame  to  a  list.  Then,  these  can  be  concatenated
together with concat:

If all goes well, nutrients should look like this:

In [167]: nutrients
Out[167]: 
                               description        group units    value     id
0                                  Protein  Composition     g   25.180   1008
1                        Total lipid (fat)  Composition     g   29.200   1008
2              Carbohydrate, by difference  Composition     g    3.060   1008
3                                      Ash        Other     g    3.280   1008
4                                   Energy       Energy  kcal  376.000   1008
...                                    ...          ...   ...      ...    ...
389350                 Vitamin B-12, added     Vitamins   mcg    0.000  43546
389351                         Cholesterol        Other    mg    0.000  43546
389352        Fatty acids, total saturated        Other     g    0.072  43546
389353  Fatty acids, total monounsaturated        Other     g    0.028  43546
389354  Fatty acids, total polyunsaturated        Other     g    0.041  43546
[389355 rows x 5 columns]

I noticed that there are duplicates in this DataFrame, so it makes things easier to drop
them:

In [168]: nutrients.duplicated().sum()  # number of duplicates
Out[168]: 14179

In [169]: nutrients = nutrients.drop_duplicates()

Since &#39;group&#39; and &#39;description&#39; are in both DataFrame objects, we can rename for
clarity:

In [170]: col_mapping = {&#39;description&#39; : &#39;food&#39;,
   .....:                &#39;group&#39;       : &#39;fgroup&#39;}

In [171]: info = info.rename(columns=col_mapping, copy=False)

In [172]: info.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6636 entries, 0 to 6635
Data columns (total 4 columns):
food            6636 non-null object
fgroup          6636 non-null object
id              6636 non-null int64
manufacturer    5195 non-null object
dtypes: int64(1), object(3)
memory usage: 207.5+ KB

In [173]: col_mapping = {&#39;description&#39; : &#39;nutrient&#39;,

14.4 USDA Food Database 

| 

437

   .....:                &#39;group&#39; : &#39;nutgroup&#39;}

In [174]: nutrients = nutrients.rename(columns=col_mapping, copy=False)

In [175]: nutrients
Out[175]: 
                                  nutrient     nutgroup units    value     id
0                                  Protein  Composition     g   25.180   1008
1                        Total lipid (fat)  Composition     g   29.200   1008
2              Carbohydrate, by difference  Composition     g    3.060   1008
3                                      Ash        Other     g    3.280   1008
4                                   Energy       Energy  kcal  376.000   1008
...                                    ...          ...   ...      ...    ...
389350                 Vitamin B-12, added     Vitamins   mcg    0.000  43546
389351                         Cholesterol        Other    mg    0.000  43546
389352        Fatty acids, total saturated        Other     g    0.072  43546
389353  Fatty acids, total monounsaturated        Other     g    0.028  43546
389354  Fatty acids, total polyunsaturated        Other     g    0.041  43546
[375176 rows x 5 columns]

With all of this done, were ready to merge info with nutrients:

In [176]: ndata = pd.merge(nutrients, info, on=&#39;id&#39;, how=&#39;outer&#39;)

In [177]: ndata.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 375176 entries, 0 to 375175
Data columns (total 8 columns):
nutrient        375176 non-null object
nutgroup        375176 non-null object
units           375176 non-null object
value           375176 non-null float64
id              375176 non-null int64
food            375176 non-null object
fgroup          375176 non-null object
manufacturer    293054 non-null object
dtypes: float64(1), int64(1), object(6)
memory usage: 25.8+ MB

In [178]: ndata.iloc[30000]
Out[178]: 
nutrient                                       Glycine
nutgroup                                   Amino Acids
units                                                g
value                                             0.04
id                                                6158
food            Soup, tomato bisque, canned, condensed
fgroup                      Soups, Sauces, and Gravies
manufacturer                                          
Name: 30000, dtype: object

We  could  now  make  a  plot  of  median  values  by  food  group  and  nutrient  type  (see
Figure 14-11):

438 

| 

Chapter 14: Data Analysis Examples

In [180]: result = ndata.groupby([&#39;nutrient&#39;, &#39;fgroup&#39;])[&#39;value&#39;].quantile(0.5)

In [181]: result[&#39;Zinc, Zn&#39;].sort_values().plot(kind=&#39;barh&#39;)

Figure 14-11. Median zinc values by nutrient group

With a little cleverness, you can find which food is most dense in each nutrient:

by_nutrient = ndata.groupby([&#39;nutgroup&#39;, &#39;nutrient&#39;])

get_maximum = lambda x: x.loc[x.value.idxmax()]
get_minimum = lambda x: x.loc[x.value.idxmin()]

max_foods = by_nutrient.apply(get_maximum)[[&#39;value&#39;, &#39;food&#39;]]

# make the food a little smaller
max_foods.food = max_foods.food.str[:50]

The  resulting  DataFrame  is  a  bit  too  large  to  display  in  the  book;  here  is  only  the
&#39;Amino Acids&#39; nutrient group:

In [183]: max_foods.loc[&#39;Amino Acids&#39;][&#39;food&#39;]
Out[183]: 
nutrient
Alanine                          Gelatins, dry powder, unsweetened
Arginine                              Seeds, sesame flour, low-fat
Aspartic acid                                  Soy protein isolate
Cystine               Seeds, cottonseed flour, low fat (glandless)
Glutamic acid                                  Soy protein isolate
                                       ...                        
Serine           Soy protein isolate, PROTEIN TECHNOLOGIES INTE...
Threonine        Soy protein isolate, PROTEIN TECHNOLOGIES INTE...
Tryptophan        Sea lion, Steller, meat with fat (Alaska Native)
Tyrosine         Soy protein isolate, PROTEIN TECHNOLOGIES INTE...

14.4 USDA Food Database 

| 

439

Valine           Soy protein isolate, PROTEIN TECHNOLOGIES INTE...
Name: food, Length: 19, dtype: object

14.5 2012 Federal Election Commission Database
The  US  Federal  Election  Commission  publishes  data  on  contributions  to  political
campaigns. This includes contributor names, occupation and employer, address, and
contribution  amount.  An  interesting  dataset  is  from  the  2012  US  presidential  elec
tion. A version of the dataset I downloaded in June 2012 is a 150 megabyte CSV file
P00000001-ALL.csv  (see  the  books  data  repository),  which  can  be  loaded  with  pan
das.read_csv:

In [184]: fec = pd.read_csv(&#39;datasets/fec/P00000001-ALL.csv&#39;)

In [185]: fec.info()
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 1001731 entries, 0 to 1001730
Data columns (total 16 columns):
cmte_id              1001731 non-null object
cand_id              1001731 non-null object
cand_nm              1001731 non-null object
contbr_nm            1001731 non-null object
contbr_city          1001712 non-null object
contbr_st            1001727 non-null object
contbr_zip           1001620 non-null object
contbr_employer      988002 non-null object
contbr_occupation    993301 non-null object
contb_receipt_amt    1001731 non-null float64
contb_receipt_dt     1001731 non-null object
receipt_desc         14166 non-null object
memo_cd              92482 non-null object
memo_text            97770 non-null object
form_tp              1001731 non-null object
file_num             1001731 non-null int64
dtypes: float64(1), int64(1), object(14)
memory usage: 122.3+ MB

A sample record in the DataFrame looks like this:

In [186]: fec.iloc[123456]
Out[186]: 
cmte_id             C00431445
cand_id             P80003338
cand_nm         Obama, Barack
contbr_nm         ELLMAN, IRA
contbr_city             TEMPE
                    ...      
receipt_desc              NaN
memo_cd                   NaN
memo_text                 NaN
form_tp                 SA17A

440 

| 

Chapter 14: Data Analysis Examples

file_num               772372
Name: 123456, Length: 16, dtype: object

You may think of some ways to start slicing and dicing this data to extract informa
tive statistics about donors and patterns in the campaign contributions. Ill show you
a number of different analyses that apply techniques in this book.

You can see that there are no political party affiliations in the data, so this would be
useful to add. You can get a list of all the unique political candidates using unique:

In [187]: unique_cands = fec.cand_nm.unique()

In [188]: unique_cands
Out[188]: 
array([&#39;Bachmann, Michelle&#39;, &#39;Romney, Mitt&#39;, &#39;Obama, Barack&#39;,
       &#34;Roemer, Charles E. &#39;Buddy&#39; III&#34;, &#39;Pawlenty, Timothy&#39;,
       &#39;Johnson, Gary Earl&#39;, &#39;Paul, Ron&#39;, &#39;Santorum, Rick&#39;, &#39;Cain, Herman&#39;,
       &#39;Gingrich, Newt&#39;, &#39;McCotter, Thaddeus G&#39;, &#39;Huntsman, Jon&#39;,
       &#39;Perry, Rick&#39;], dtype=object)

In [189]: unique_cands[2]
Out[189]: &#39;Obama, Barack&#39;

One way to indicate party affiliation is using a dict:1

parties = {&#39;Bachmann, Michelle&#39;: &#39;Republican&#39;,
           &#39;Cain, Herman&#39;: &#39;Republican&#39;,
           &#39;Gingrich, Newt&#39;: &#39;Republican&#39;,
           &#39;Huntsman, Jon&#39;: &#39;Republican&#39;,
           &#39;Johnson, Gary Earl&#39;: &#39;Republican&#39;,
           &#39;McCotter, Thaddeus G&#39;: &#39;Republican&#39;,
           &#39;Obama, Barack&#39;: &#39;Democrat&#39;,
           &#39;Paul, Ron&#39;: &#39;Republican&#39;,
           &#39;Pawlenty, Timothy&#39;: &#39;Republican&#39;,
           &#39;Perry, Rick&#39;: &#39;Republican&#39;,
           &#34;Roemer, Charles E. &#39;Buddy&#39; III&#34;: &#39;Republican&#39;,
           &#39;Romney, Mitt&#39;: &#39;Republican&#39;,
           &#39;Santorum, Rick&#39;: &#39;Republican&#39;}

Now, using this mapping and the map method on Series objects, you can compute an
array of political parties from the candidate names:

In [191]: fec.cand_nm[123456:123461]
Out[191]: 
123456    Obama, Barack
123457    Obama, Barack
123458    Obama, Barack
123459    Obama, Barack
123460    Obama, Barack

1 This makes the simplifying assumption that Gary Johnson is a Republican even though he later became the

Libertarian party candidate.

14.5 2012 Federal Election Commission Database 

| 

441

Name: cand_nm, dtype: object

In [192]: fec.cand_nm[123456:123461].map(parties)
Out[192]: 
123456    Democrat
123457    Democrat
123458    Democrat
123459    Democrat
123460    Democrat
Name: cand_nm, dtype: object

# Add it as a column
In [193]: fec[&#39;party&#39;] = fec.cand_nm.map(parties)

In [194]: fec[&#39;party&#39;].value_counts()
Out[194]: 
Democrat      593746
Republican    407985
Name: party, dtype: int64

A couple of data preparation points. First, this data includes both contributions and
refunds (negative contribution amount):

In [195]: (fec.contb_receipt_amt &gt; 0).value_counts()
Out[195]: 
True     991475
False     10256
Name: contb_receipt_amt, dtype: int64

To simplify the analysis, Ill restrict the dataset to positive contributions:

In [196]: fec = fec[fec.contb_receipt_amt &gt; 0]

Since Barack Obama and Mitt Romney were the main two candidates, Ill also pre
pare a subset that just has contributions to their campaigns:

In [197]: fec_mrbo = fec[fec.cand_nm.isin([&#39;Obama, Barack&#39;, &#39;Romney, Mitt&#39;])]

Donation Statistics by Occupation and Employer
Donations by occupation is another oft-studied statistic. For example, lawyers (attor
neys)  tend  to  donate  more  money  to  Democrats,  while  business  executives  tend  to
donate more to Republicans. You have no reason to believe me; you can see for your
self in the data. First, the total number of donations by occupation is easy:

In [198]: fec.contbr_occupation.value_counts()[:10]
Out[198]: 
RETIRED                                   233990
INFORMATION REQUESTED                      35107
ATTORNEY                                   34286
HOMEMAKER                                  29931
PHYSICIAN                                  23432
INFORMATION REQUESTED PER BEST EFFORTS     21138

442 

| 

Chapter 14: Data Analysis Examples

ENGINEER                                   14334
TEACHER                                    13990
CONSULTANT                                 13273
PROFESSOR                                  12555
Name: contbr_occupation, dtype: int64

You will notice by looking at the occupations that many refer to the same basic job
type, or there are several variants of the same thing. The following code snippet illus
trates a technique for cleaning up a few of them by mapping from one occupation to
another; note the trick of using dict.get to allow occupations with no mapping to
pass through:

occ_mapping = {
   &#39;INFORMATION REQUESTED PER BEST EFFORTS&#39; : &#39;NOT PROVIDED&#39;,
   &#39;INFORMATION REQUESTED&#39; : &#39;NOT PROVIDED&#39;,
   &#39;INFORMATION REQUESTED (BEST EFFORTS)&#39; : &#39;NOT PROVIDED&#39;,
   &#39;C.E.O.&#39;: &#39;CEO&#39;
}

# If no mapping provided, return x
f = lambda x: occ_mapping.get(x, x)
fec.contbr_occupation = fec.contbr_occupation.map(f)

Ill also do the same thing for employers:

emp_mapping = {
   &#39;INFORMATION REQUESTED PER BEST EFFORTS&#39; : &#39;NOT PROVIDED&#39;,
   &#39;INFORMATION REQUESTED&#39; : &#39;NOT PROVIDED&#39;,
   &#39;SELF&#39; : &#39;SELF-EMPLOYED&#39;,
   &#39;SELF EMPLOYED&#39; : &#39;SELF-EMPLOYED&#39;,
}

# If no mapping provided, return x
f = lambda x: emp_mapping.get(x, x)
fec.contbr_employer = fec.contbr_employer.map(f)

Now, you can use pivot_table to aggregate the data by party and occupation, then
filter down to the subset that donated at least $2 million overall:

In [201]: by_occupation = fec.pivot_table(&#39;contb_receipt_amt&#39;,
   .....:                                 index=&#39;contbr_occupation&#39;,
   .....:                                 columns=&#39;party&#39;, aggfunc=&#39;sum&#39;)

In [202]: over_2mm = by_occupation[by_occupation.sum(1) &gt; 2000000]

In [203]: over_2mm
Out[203]: 
party                 Democrat    Republican
contbr_occupation                           
ATTORNEY           11141982.97  7.477194e+06
CEO                 2074974.79  4.211041e+06
CONSULTANT          2459912.71  2.544725e+06
ENGINEER             951525.55  1.818374e+06

14.5 2012 Federal Election Commission Database 

| 

443

EXECUTIVE           1355161.05  4.138850e+06
...                        ...           ...
PRESIDENT           1878509.95  4.720924e+06
PROFESSOR           2165071.08  2.967027e+05
REAL ESTATE          528902.09  1.625902e+06
RETIRED            25305116.38  2.356124e+07
SELF-EMPLOYED        672393.40  1.640253e+06
[17 rows x 2 columns]

It can be easier to look at this data graphically as a bar plot (&#39;barh&#39; means horizontal
bar plot; see Figure 14-12):

In [205]: over_2mm.plot(kind=&#39;barh&#39;)

Figure 14-12. Total donations by party for top occupations

You might be interested in the top donor occupations or top companies that donated
to Obama and Romney. To do this, you can group by candidate name and use a var
iant of the top method from earlier in the chapter:

def get_top_amounts(group, key, n=5):
    totals = group.groupby(key)[&#39;contb_receipt_amt&#39;].sum()
    return totals.nlargest(n)

Then aggregate by occupation and employer:

In [207]: grouped = fec_mrbo.groupby(&#39;cand_nm&#39;)

In [208]: grouped.apply(get_top_amounts, &#39;contbr_occupation&#39;, n=7)
Out[208]: 

444 

| 

Chapter 14: Data Analysis Examples

cand_nm        contbr_occupation    
Obama, Barack  RETIRED                  25305116.38
               ATTORNEY                 11141982.97
               INFORMATION REQUESTED     4866973.96
               HOMEMAKER                 4248875.80
               PHYSICIAN                 3735124.94
                                           ...     
Romney, Mitt   HOMEMAKER                 8147446.22
               ATTORNEY                  5364718.82
               PRESIDENT                 2491244.89
               EXECUTIVE                 2300947.03
               C.E.O.                    1968386.11
Name: contb_receipt_amt, Length: 14, dtype: float64

In [209]: grouped.apply(get_top_amounts, &#39;contbr_employer&#39;, n=10)
Out[209]: 
cand_nm        contbr_employer      
Obama, Barack  RETIRED                  22694358.85
               SELF-EMPLOYED            17080985.96
               NOT EMPLOYED              8586308.70
               INFORMATION REQUESTED     5053480.37
               HOMEMAKER                 2605408.54
                                           ...     
Romney, Mitt   CREDIT SUISSE              281150.00
               MORGAN STANLEY             267266.00
               GOLDMAN SACH &amp; CO.         238250.00
               BARCLAYS CAPITAL           162750.00
               H.I.G. CAPITAL             139500.00
Name: contb_receipt_amt, Length: 20, dtype: float64

Bucketing Donation Amounts
A useful way to analyze this data is to use the cut function to discretize the contribu
tor amounts into buckets by contribution size:

In [210]: bins = np.array([0, 1, 10, 100, 1000, 10000,
   .....:                  100000, 1000000, 10000000])

In [211]: labels = pd.cut(fec_mrbo.contb_receipt_amt, bins)

In [212]: labels
Out[212]: 
411         (10, 100]
412       (100, 1000]
413       (100, 1000]
414         (10, 100]
415         (10, 100]
             ...     
701381      (10, 100]
701382    (100, 1000]
701383        (1, 10]
701384      (10, 100]

14.5 2012 Federal Election Commission Database 

| 

445

701385    (100, 1000]
Name: contb_receipt_amt, Length: 694282, dtype: category
Categories (8, interval[int64]): [(0, 1] &lt; (1, 10] &lt; (10, 100] &lt; (100, 1000] &lt; (1
000, 10000] &lt;
                                  (10000, 100000] &lt; (100000, 1000000] &lt; (1000000,
 10000000]]

We can then group the data for Obama and Romney by name and bin label to get a
histogram by donation size:

In [213]: grouped = fec_mrbo.groupby([&#39;cand_nm&#39;, labels])

In [214]: grouped.size().unstack(0)
Out[214]: 
cand_nm              Obama, Barack  Romney, Mitt
contb_receipt_amt                               
(0, 1]                       493.0          77.0
(1, 10]                    40070.0        3681.0
(10, 100]                 372280.0       31853.0
(100, 1000]               153991.0       43357.0
(1000, 10000]              22284.0       26186.0
(10000, 100000]                2.0           1.0
(100000, 1000000]              3.0           NaN
(1000000, 10000000]            4.0           NaN

This data shows that Obama received a significantly larger number of small donations
than  Romney.  You  can  also  sum  the  contribution  amounts  and  normalize  within
buckets  to  visualize  percentage  of  total  donations  of  each  size  by  candidate
(Figure 14-13 shows the resulting plot):

In [216]: bucket_sums = grouped.contb_receipt_amt.sum().unstack(0)

In [217]: normed_sums = bucket_sums.div(bucket_sums.sum(axis=1), axis=0)

In [218]: normed_sums
Out[218]: 
cand_nm              Obama, Barack  Romney, Mitt
contb_receipt_amt                               
(0, 1]                    0.805182      0.194818
(1, 10]                   0.918767      0.081233
(10, 100]                 0.910769      0.089231
(100, 1000]               0.710176      0.289824
(1000, 10000]             0.447326      0.552674
(10000, 100000]           0.823120      0.176880
(100000, 1000000]         1.000000           NaN
(1000000, 10000000]       1.000000           NaN

In [219]: normed_sums[:-2].plot(kind=&#39;barh&#39;)

446 

| 

Chapter 14: Data Analysis Examples

Figure 14-13. Percentage of total donations received by candidates for each donation size

I excluded the two largest bins as these are not donations by individuals.

This  analysis  can  be  refined  and  improved  in  many  ways.  For  example,  you  could
aggregate donations by donor name and zip code to adjust for donors who gave many
small amounts versus one or more large donations. I encourage you to download and
explore the dataset yourself.

Donation Statistics by State
Aggregating the data by candidate and state is a routine affair:

In [220]: grouped = fec_mrbo.groupby([&#39;cand_nm&#39;, &#39;contbr_st&#39;])

In [221]: totals = grouped.contb_receipt_amt.sum().unstack(0).fillna(0)

In [222]: totals = totals[totals.sum(1) &gt; 100000]

In [223]: totals[:10]
Out[223]: 
cand_nm    Obama, Barack  Romney, Mitt
contbr_st                             
AK             281840.15      86204.24
AL             543123.48     527303.51
AR             359247.28     105556.00
AZ            1506476.98    1888436.23
CA           23824984.24   11237636.60
CO            2132429.49    1506714.12
CT            2068291.26    3499475.45

14.5 2012 Federal Election Commission Database 

| 

447

DC            4373538.80    1025137.50
DE             336669.14      82712.00
FL            7318178.58    8338458.81

If you divide each row by the total contribution amount, you get the relative percent
age of total donations by state for each candidate:

In [224]: percent = totals.div(totals.sum(1), axis=0)

In [225]: percent[:10]
Out[225]: 
cand_nm    Obama, Barack  Romney, Mitt
contbr_st                             
AK              0.765778      0.234222
AL              0.507390      0.492610
AR              0.772902      0.227098
AZ              0.443745      0.556255
CA              0.679498      0.320502
CO              0.585970      0.414030
CT              0.371476      0.628524
DC              0.810113      0.189887
DE              0.802776      0.197224
FL              0.467417      0.532583

14.6 Conclusion
Weve reached the end of the books main chapters. I have included some additional
content you may find useful in the appendixes.

In the five years since the first edition of this book was published, Python has become
a  popular  and  widespread  language  for  data  analysis.  The  programming  skills  you
have developed here will stay relevant for a long time into the future. I hope the pro
gramming tools and libraries weve explored serve you well in your work.

448 

| 

Chapter 14: Data Analysis Examples

APPENDIX A
Advanced NumPy

In this appendix, I will go deeper into the NumPy library for array computing. This
will  include  more  internal  detail  about  the  ndarray  type  and  more  advanced  array
manipulations and algorithms.

This appendix contains miscellaneous topics and does not necessarily need to be read
linearly.

A.1 ndarray Object Internals
The  NumPy  ndarray  provides  a  means  to  interpret  a  block  of  homogeneous  data
(either  contiguous  or  strided)  as  a  multidimensional  array  object.  The  data  type,  or
dtype, determines how the data is interpreted as being floating point, integer, boolean,
or any of the other types weve been looking at.

Part  of  what  makes  ndarray  flexible  is  that  every  array  object  is  a  strided  view  on  a
block of data. You might wonder, for example, how the array view arr[::2, ::-1]
does not copy any data. The reason is that the ndarray is more than just a chunk of
memory and a dtype; it also has striding information that enables the array to move
through memory with varying step sizes. More precisely, the ndarray internally con
sists of the following:

 A pointer to datathat is, a block of data in RAM or in a memory-mapped file

 The data type or dtype, describing fixed-size value cells in the array

 A tuple indicating the arrays shape

 A  tuple  of  strides,  integers  indicating  the  number  of  bytes  to  step  in  order  to

advance one element along a dimension

See Figure A-1 for a simple mockup of the ndarray innards.

449

For example, a 10  5 array would have shape (10, 5):

In [10]: np.ones((10, 5)).shape
Out[10]: (10, 5)

A typical (C order) 3  4  5 array of float64 (8-byte) values has strides (160, 40,
8) (knowing about the strides can be useful because, in general, the larger the strides
on a particular axis, the more costly it is to perform computation along that axis):

In [11]: np.ones((3, 4, 5), dtype=np.float64).strides
Out[11]: (160, 40, 8)

While  it  is  rare  that  a  typical  NumPy  user  would  be  interested  in  the  array  strides,
they  are  the  critical  ingredient  in  constructing  zero-copy  array  views.  Strides  can
even be negative, which enables an array to move backward through memory (this
would be the case, for example, in a slice like obj[::-1] or obj[:, ::-1]).

Figure A-1. The NumPy ndarray object

NumPy dtype Hierarchy
You may occasionally have code that needs to check whether an array contains inte
gers,  floating-point  numbers,  strings,  or  Python  objects.  Because  there  are  multiple
types of floating-point numbers (float16 through float128), checking that the dtype
is  among  a  list  of  types  would  be  very  verbose.  Fortunately,  the  dtypes  have  super
classes such as np.integer and np.floating, which can be used in conjunction with 
the np.issubdtype function:

In [12]: ints = np.ones(10, dtype=np.uint16)

In [13]: floats = np.ones(10, dtype=np.float32)

In [14]: np.issubdtype(ints.dtype, np.integer)
Out[14]: True

In [15]: np.issubdtype(floats.dtype, np.floating)
Out[15]: True

You  can  see  all  of  the  parent  classes  of  a  specific  dtype  by  calling  the  types  mro
method:

450 

|  Appendix A: Advanced NumPy

In [16]: np.float64.mro()
Out[16]: 
[numpy.float64,
 numpy.floating,
 numpy.inexact,
 numpy.number,
 numpy.generic,
 float,
 object]

Therefore, we also have:

In [17]: np.issubdtype(ints.dtype, np.number)
Out[17]: True

Most NumPy users will never have to know about this, but it occasionally comes in
handy.  See  Figure  A-2  for  a  graph  of  the  dtype  hierarchy  and  parentsubclass
relationships.1

Figure A-2. The NumPy dtype class hierarchy

A.2 Advanced Array Manipulation
There are many ways to work with arrays beyond fancy indexing, slicing, and boolean
subsetting. While much of the heavy lifting for data analysis applications is handled
by higher-level functions in pandas, you may at some point need to write a data algo
rithm that is not found in one of the existing libraries.

1 Some of the dtypes have trailing underscores in their names. These are there to avoid variable name conflicts

between the NumPy-specific types and the Python built-in ones.

Advanced NumPy 

| 

451

Reshaping Arrays
In many cases, you can convert an array from one shape to another without copying
any  data.  To  do  this,  pass  a  tuple  indicating  the  new  shape  to  the  reshape  array
instance  method.  For  example,  suppose  we  had  a  one-dimensional  array  of  values
that we wished to rearrange into a matrix (the result is shown in Figure A-3):

In [18]: arr = np.arange(8)

In [19]: arr
Out[19]: array([0, 1, 2, 3, 4, 5, 6, 7])

In [20]: arr.reshape((4, 2))
Out[20]: 
array([[0, 1],
       [2, 3],
       [4, 5],
       [6, 7]])

Figure A-3. Reshaping in C (row major) or Fortran (column major) order

A multidimensional array can also be reshaped:

In [21]: arr.reshape((4, 2)).reshape((2, 4))
Out[21]: 
array([[0, 1, 2, 3],
       [4, 5, 6, 7]])

One of the passed shape dimensions can be 1, in which case the value used for that
dimension will be inferred from the data:

452 

|  Appendix A: Advanced NumPy

In [22]: arr = np.arange(15)

In [23]: arr.reshape((5, -1))
Out[23]: 
array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14]])

Since an arrays shape attribute is a tuple, it can be passed to reshape, too:

In [24]: other_arr = np.ones((3, 5))

In [25]: other_arr.shape
Out[25]: (3, 5)

In [26]: arr.reshape(other_arr.shape)
Out[26]: 
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])

The  opposite  operation  of  reshape  from  one-dimensional  to  a  higher  dimension  is
typically known as flattening or raveling:

In [27]: arr = np.arange(15).reshape((5, 3))

In [28]: arr
Out[28]: 
array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14]])

In [29]: arr.ravel()
Out[29]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])

ravel  does  not  produce  a  copy  of  the  underlying  values  if  the  values  in  the  result
were contiguous in the original array. The flatten method behaves like ravel except
it always returns a copy of the data:

In [30]: arr.flatten()
Out[30]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14])

The  data  can  be  reshaped  or  raveled  in  different  orders.  This  is  a  slightly  nuanced
topic for new NumPy users and is therefore the next subtopic.

Advanced NumPy 

| 

453

C Versus Fortran Order
NumPy gives you control and flexibility over the layout of your data in memory. By
default, NumPy arrays are created in row major order. Spatially this means that if you
have a two-dimensional array of data, the items in each row of the array are stored in
adjacent  memory  locations.  The  alternative  to  row  major  ordering  is  column  major
order,  which  means  that  values  within  each  column  of  data  are  stored  in  adjacent
memory locations.

For historical reasons, row and column major order are also know as C and Fortran
order, respectively. In the FORTRAN 77 language, matrices are all column major.

Functions like reshape and ravel accept an order argument indicating the order to
use the data in the array. This is usually set to &#39;C&#39; or &#39;F&#39; in most cases (there are also
less commonly used options &#39;A&#39; and &#39;K&#39;; see the NumPy documentation, and refer
back to Figure A-3 for an illustration of these options):

In [31]: arr = np.arange(12).reshape((3, 4))

In [32]: arr
Out[32]: 
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])

In [33]: arr.ravel()
Out[33]: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])

In [34]: arr.ravel(&#39;F&#39;)
Out[34]: array([ 0,  4,  8,  1,  5,  9,  2,  6, 10,  3,  7, 11])

Reshaping  arrays  with  more  than  two  dimensions  can  be  a  bit  mind-bending  (see
Figure A-3). The key difference between C and Fortran order is the way in which the
dimensions are walked:

C/row major order

Traverse higher dimensions first (e.g., axis 1 before advancing on axis 0).

Fortran/column major order

Traverse higher dimensions last (e.g., axis 0 before advancing on axis 1).

Concatenating and Splitting Arrays
numpy.concatenate  takes  a  sequence  (tuple,  list,  etc.)  of  arrays  and  joins  them
together in order along the input axis:

In [35]: arr1 = np.array([[1, 2, 3], [4, 5, 6]])

In [36]: arr2 = np.array([[7, 8, 9], [10, 11, 12]])

454 

|  Appendix A: Advanced NumPy

In [37]: np.concatenate([arr1, arr2], axis=0)
Out[37]: 
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])

In [38]: np.concatenate([arr1, arr2], axis=1)
Out[38]: 
array([[ 1,  2,  3,  7,  8,  9],
       [ 4,  5,  6, 10, 11, 12]])

There are some convenience functions, like vstack and hstack, for common kinds of
concatenation. The preceding operations could have been expressed as:

In [39]: np.vstack((arr1, arr2))
Out[39]: 
array([[ 1,  2,  3],
       [ 4,  5,  6],
       [ 7,  8,  9],
       [10, 11, 12]])

In [40]: np.hstack((arr1, arr2))
Out[40]: 
array([[ 1,  2,  3,  7,  8,  9],
       [ 4,  5,  6, 10, 11, 12]])

split, on the other hand, slices apart an array into multiple arrays along an axis:

In [41]: arr = np.random.randn(5, 2)

In [42]: arr
Out[42]: 
array([[-0.2047,  0.4789],
       [-0.5194, -0.5557],
       [ 1.9658,  1.3934],
       [ 0.0929,  0.2817],
       [ 0.769 ,  1.2464]])

In [43]: first, second, third = np.split(arr, [1, 3])

In [44]: first
Out[44]: array([[-0.2047,  0.4789]])

In [45]: second
Out[45]: 
array([[-0.5194, -0.5557],
       [ 1.9658,  1.3934]])

In [46]: third
Out[46]: 
array([[ 0.0929,  0.2817],
       [ 0.769 ,  1.2464]])

Advanced NumPy 

| 

455

The value [1, 3] passed to np.split indicate the indices at which to split the array
into pieces.

See Table A-1 for a list of all relevant concatenation and splitting functions, some of
which are provided only as a convenience of the very general-purpose concatenate.

Table A-1. Array concatenation functions

Function
concatenate

Description
Most general function, concatenates collection of arrays along one axis

vstack, row_stack Stack arrays row-wise (along axis 0)
hstack

column_stack

dstack

split
hsplit/vsplit

Stack arrays column-wise (along axis 1)
Like hstack, but converts 1D arrays to 2D column vectors first
Stack arrays depth-wise (along axis 2)
Split array at passed locations along a particular axis
Convenience functions for splitting on axis 0 and 1, respectively

Stacking helpers: r_ and c_

There are two special objects in the NumPy namespace, r_ and c_, that make stacking
arrays more concise:

In [47]: arr = np.arange(6)

In [48]: arr1 = arr.reshape((3, 2))

In [49]: arr2 = np.random.randn(3, 2)

In [50]: np.r_[arr1, arr2]
Out[50]: 
array([[ 0.    ,  1.    ],
       [ 2.    ,  3.    ],
       [ 4.    ,  5.    ],
       [ 1.0072, -1.2962],
       [ 0.275 ,  0.2289],
       [ 1.3529,  0.8864]])

In [51]: np.c_[np.r_[arr1, arr2], arr]
Out[51]: 
array([[ 0.    ,  1.    ,  0.    ],
       [ 2.    ,  3.    ,  1.    ],
       [ 4.    ,  5.    ,  2.    ],
       [ 1.0072, -1.2962,  3.    ],
       [ 0.275 ,  0.2289,  4.    ],
       [ 1.3529,  0.8864,  5.    ]])

These additionally can translate slices to arrays:

In [52]: np.c_[1:6, -10:-5]
Out[52]: 

456 

|  Appendix A: Advanced NumPy

array([[  1, -10],
       [  2,  -9],
       [  3,  -8],
       [  4,  -7],
       [  5,  -6]])

See the docstring for more on what you can do with c_ and r_.

Repeating Elements: tile and repeat
Two  useful  tools  for  repeating  or  replicating  arrays  to  produce  larger  arrays  are  the
repeat and tile functions. repeat replicates each element in an array some number
of times, producing a larger array:

In [53]: arr = np.arange(3)

In [54]: arr
Out[54]: array([0, 1, 2])

In [55]: arr.repeat(3)
Out[55]: array([0, 0, 0, 1, 1, 1, 2, 2, 2])

The  need  to  replicate  or  repeat  arrays  can  be  less  common  with
NumPy  than  it  is  with  other  array  programming  frameworks  like
MATLAB.  One  reason  for  this  is  that  broadcasting  often  fills  this
need better, which is the subject of the next section.

By default, if you pass an integer, each element will be repeated that number of times.
If you pass an array of integers, each element can be repeated a different number of
times:

In [56]: arr.repeat([2, 3, 4])
Out[56]: array([0, 0, 1, 1, 1, 2, 2, 2, 2])

Multidimensional arrays can have their elements repeated along a particular axis.

In [57]: arr = np.random.randn(2, 2)

In [58]: arr
Out[58]: 
array([[-2.0016, -0.3718],
       [ 1.669 , -0.4386]])

In [59]: arr.repeat(2, axis=0)
Out[59]: 
array([[-2.0016, -0.3718],
       [-2.0016, -0.3718],
       [ 1.669 , -0.4386],
       [ 1.669 , -0.4386]])

Advanced NumPy 

| 

457

Note that if no axis is passed, the array will be flattened first, which is likely not what
you want. Similarly, you can pass an array of integers when repeating a multidimen
sional array to repeat a given slice a different number of times:

In [60]: arr.repeat([2, 3], axis=0)
Out[60]: 
array([[-2.0016, -0.3718],
       [-2.0016, -0.3718],
       [ 1.669 , -0.4386],
       [ 1.669 , -0.4386],
       [ 1.669 , -0.4386]])

In [61]: arr.repeat([2, 3], axis=1)
Out[61]: 
array([[-2.0016, -2.0016, -0.3718, -0.3718, -0.3718],
       [ 1.669 ,  1.669 , -0.4386, -0.4386, -0.4386]])

tile, on the other hand, is a shortcut for stacking copies of an array along an axis.
Visually you can think of it as being akin to laying down tiles:

In [62]: arr
Out[62]: 
array([[-2.0016, -0.3718],
       [ 1.669 , -0.4386]])

In [63]: np.tile(arr, 2)
Out[63]: 
array([[-2.0016, -0.3718, -2.0016, -0.3718],
       [ 1.669 , -0.4386,  1.669 , -0.4386]])

The second argument is the number of tiles; with a scalar, the tiling is made row by
row,  rather  than  column  by  column.  The  second  argument  to  tile  can  be  a  tuple
indicating the layout of the tiling:

In [64]: arr
Out[64]: 
array([[-2.0016, -0.3718],
       [ 1.669 , -0.4386]])

In [65]: np.tile(arr, (2, 1))
Out[65]: 
array([[-2.0016, -0.3718],
       [ 1.669 , -0.4386],
       [-2.0016, -0.3718],
       [ 1.669 , -0.4386]])

In [66]: np.tile(arr, (3, 2))
Out[66]: 
array([[-2.0016, -0.3718, -2.0016, -0.3718],
       [ 1.669 , -0.4386,  1.669 , -0.4386],
       [-2.0016, -0.3718, -2.0016, -0.3718],
       [ 1.669 , -0.4386,  1.669 , -0.4386],

458 

|  Appendix A: Advanced NumPy

       [-2.0016, -0.3718, -2.0016, -0.3718],
       [ 1.669 , -0.4386,  1.669 , -0.4386]])

Fancy Indexing Equivalents: take and put
As you may recall from Chapter 4, one way to get and set subsets of arrays is by fancy
indexing using integer arrays:

In [67]: arr = np.arange(10) * 100

In [68]: inds = [7, 1, 2, 6]

In [69]: arr[inds]
Out[69]: array([700, 100, 200, 600])

There are alternative ndarray methods that are useful in the special case of only mak
ing a selection on a single axis:

In [70]: arr.take(inds)
Out[70]: array([700, 100, 200, 600])

In [71]: arr.put(inds, 42)

In [72]: arr
Out[72]: array([  0,  42,  42, 300, 400, 500,  42,  42, 800, 900])

In [73]: arr.put(inds, [40, 41, 42, 43])

In [74]: arr
Out[74]: array([  0,  41,  42, 300, 400, 500,  43,  40, 800, 900])

To use take along other axes, you can pass the axis keyword:

In [75]: inds = [2, 0, 2, 1]

In [76]: arr = np.random.randn(2, 4)

In [77]: arr
Out[77]: 
array([[-0.5397,  0.477 ,  3.2489, -1.0212],
       [-0.5771,  0.1241,  0.3026,  0.5238]])

In [78]: arr.take(inds, axis=1)
Out[78]: 
array([[ 3.2489, -0.5397,  3.2489,  0.477 ],
       [ 0.3026, -0.5771,  0.3026,  0.1241]])

put  does  not  accept  an  axis  argument  but  rather  indexes  into  the  flattened  (one-
dimensional,  C  order)  version  of  the  array.  Thus,  when  you  need  to  set  elements
using an index array on other axes, it is often easiest to use fancy indexing.

Advanced NumPy 

| 

459

A.3 Broadcasting
Broadcasting  describes  how  arithmetic  works  between  arrays  of  different  shapes.  It
can  be  a  powerful  feature,  but  one  that  can  cause  confusion,  even  for  experienced
users.  The  simplest  example  of  broadcasting  occurs  when  combining  a  scalar  value
with an array:

In [79]: arr = np.arange(5)

In [80]: arr
Out[80]: array([0, 1, 2, 3, 4])

In [81]: arr * 4
Out[81]: array([ 0,  4,  8, 12, 16])

Here we say that the scalar value 4 has been broadcast to all of the other elements in
the multiplication operation.

For  example,  we  can  demean  each  column  of  an  array  by  subtracting  the  column
means. In this case, it is very simple:

In [82]: arr = np.random.randn(4, 3)

In [83]: arr.mean(0)
Out[83]: array([-0.3928, -0.3824, -0.8768])

In [84]: demeaned = arr - arr.mean(0)

In [85]: demeaned
Out[85]: 
array([[ 0.3937,  1.7263,  0.1633],
       [-0.4384, -1.9878, -0.9839],
       [-0.468 ,  0.9426, -0.3891],
       [ 0.5126, -0.6811,  1.2097]])

In [86]: demeaned.mean(0)
Out[86]: array([-0.,  0., -0.])

See Figure A-4 for an illustration of this operation. Demeaning the rows as a broad
cast  operation  requires  a  bit  more  care.  Fortunately,  broadcasting  potentially  lower
dimensional values across any dimension of an array (like subtracting the row means
from each column of a two-dimensional array) is possible as long as you follow the
rules.

This brings us to:

460 

|  Appendix A: Advanced NumPy

The Broadcasting Rule
Two arrays are compatible for broadcasting if for each trailing dimension (i.e., starting
from the end) the axis lengths match or if either of the lengths is 1. Broadcasting is
then performed over the missing or length 1 dimensions.

Figure A-4. Broadcasting over axis 0 with a 1D array

Even as an experienced NumPy user, I often find myself having to pause and draw a
diagram as I think about the broadcasting rule. Consider the last example and sup
pose we wished instead to subtract the mean value from each row. Since arr.mean(0)
has  length  3,  it  is  compatible  for  broadcasting  across  axis  0  because  the  trailing
dimension in arr is 3 and therefore matches. According to the rules, to subtract over
axis 1 (i.e., subtract the row mean from each row), the smaller array must have shape
(4, 1):

In [87]: arr
Out[87]: 
array([[ 0.0009,  1.3438, -0.7135],
       [-0.8312, -2.3702, -1.8608],
       [-0.8608,  0.5601, -1.2659],
       [ 0.1198, -1.0635,  0.3329]])

In [88]: row_means = arr.mean(1)

In [89]: row_means.shape
Out[89]: (4,)

In [90]: row_means.reshape((4, 1))
Out[90]: 
array([[ 0.2104],
       [-1.6874],
       [-0.5222],
       [-0.2036]])

Advanced NumPy 

| 

461

In [91]: demeaned = arr - row_means.reshape((4, 1))

In [92]: demeaned.mean(1)
Out[92]: array([ 0., -0.,  0.,  0.])

See Figure A-5 for an illustration of this operation.

Figure A-5. Broadcasting over axis 1 of a 2D array

See Figure A-6 for another illustration, this time adding a two-dimensional array to a
three-dimensional one across axis 0.

Figure A-6. Broadcasting over axis 0 of a 3D array

Broadcasting Over Other Axes
Broadcasting with higher dimensional arrays can seem even more mind-bending, but
it is really a matter of following the rules. If you dont, youll get an error like this:

462 

|  Appendix A: Advanced NumPy

In [93]: arr - arr.mean(1)
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-93-7b87b85a20b2&gt; in &lt;module&gt;()
----&gt; 1 arr - arr.mean(1)
ValueError: operands could not be broadcast together with shapes (4,3) (4,) 

Its quite common to want to perform an arithmetic operation with a lower dimen
sional  array  across  axes  other  than  axis  0.  According  to  the  broadcasting  rule,  the
broadcast  dimensions  must  be  1  in  the  smaller  array.  In  the  example  of  row
demeaning  shown  here,  this  meant  reshaping  the  row  means  to  be  shape  (4,  1)
instead of (4,):

In [94]: arr - arr.mean(1).reshape((4, 1))
Out[94]: 
array([[-0.2095,  1.1334, -0.9239],
       [ 0.8562, -0.6828, -0.1734],
       [-0.3386,  1.0823, -0.7438],
       [ 0.3234, -0.8599,  0.5365]])

In the three-dimensional case, broadcasting over any of the three dimensions is only
a matter of reshaping the data to be shape-compatible. Figure A-7 nicely visualizes the
shapes required to broadcast over each axis of a three-dimensional array.

A common problem, therefore, is needing to add a new axis with length 1 specifically
for  broadcasting  purposes.  Using  reshape  is  one  option,  but  inserting  an  axis
requires  constructing  a  tuple  indicating  the  new  shape.  This  can  often  be  a  tedious
exercise. Thus, NumPy arrays offer a special syntax for inserting new axes by index
ing. We use the special np.newaxis attribute along with full slices to insert the new
axis:

In [95]: arr = np.zeros((4, 4))

In [96]: arr_3d = arr[:, np.newaxis, :]

In [97]: arr_3d.shape
Out[97]: (4, 1, 4)

In [98]: arr_1d = np.random.normal(size=3)

In [99]: arr_1d[:, np.newaxis]
Out[99]: 
array([[-2.3594],
       [-0.1995],
       [-1.542 ]])

In [100]: arr_1d[np.newaxis, :]
Out[100]: array([[-2.3594, -0.1995, -1.542 ]])

Advanced NumPy 

| 

463

Figure A-7. Compatible 2D array shapes for broadcasting over a 3D array

Thus,  if  we  had  a  three-dimensional  array  and  wanted  to  demean  axis  2,  say,  we
would need to write:

In [101]: arr = np.random.randn(3, 4, 5)

In [102]: depth_means = arr.mean(2)

In [103]: depth_means
Out[103]: 
array([[-0.4735,  0.3971, -0.0228,  0.2001],
       [-0.3521, -0.281 , -0.071 , -0.1586],
       [ 0.6245,  0.6047,  0.4396, -0.2846]])

In [104]: depth_means.shape
Out[104]: (3, 4)

In [105]: demeaned = arr - depth_means[:, :, np.newaxis]

In [106]: demeaned.mean(2)
Out[106]: 
array([[ 0.,  0., -0., -0.],
       [ 0.,  0., -0.,  0.],
       [ 0.,  0., -0., -0.]])

You might be wondering if theres a way to generalize demeaning over an axis without
sacrificing performance. There is, but it requires some indexing gymnastics:

464 

|  Appendix A: Advanced NumPy

def demean_axis(arr, axis=0):
    means = arr.mean(axis)

    # This generalizes things like [:, :, np.newaxis] to N dimensions
    indexer = [slice(None)] * arr.ndim
    indexer[axis] = np.newaxis
    return arr - means[indexer]

Setting Array Values by Broadcasting
The  same  broadcasting  rule  governing  arithmetic  operations  also  applies  to  setting
values via array indexing. In a simple case, we can do things like:

In [107]: arr = np.zeros((4, 3))

In [108]: arr[:] = 5

In [109]: arr
Out[109]: 
array([[ 5.,  5.,  5.],
       [ 5.,  5.,  5.],
       [ 5.,  5.,  5.],
       [ 5.,  5.,  5.]])

However, if we had a one-dimensional array of values we wanted to set into the col
umns of the array, we can do that as long as the shape is compatible:

In [110]: col = np.array([1.28, -0.42, 0.44, 1.6])

In [111]: arr[:] = col[:, np.newaxis]

In [112]: arr
Out[112]: 
array([[ 1.28,  1.28,  1.28],
       [-0.42, -0.42, -0.42],
       [ 0.44,  0.44,  0.44],
       [ 1.6 ,  1.6 ,  1.6 ]])

In [113]: arr[:2] = [[-1.37], [0.509]]

In [114]: arr
Out[114]: 
array([[-1.37 , -1.37 , -1.37 ],
       [ 0.509,  0.509,  0.509],
       [ 0.44 ,  0.44 ,  0.44 ],
       [ 1.6  ,  1.6  ,  1.6  ]])

Advanced NumPy 

| 

465

A.4 Advanced ufunc Usage
While many NumPy users will only make use of the fast element-wise operations pro
vided by the universal functions, there are a number of additional features that occa
sionally can help you write more concise code without loops.

ufunc Instance Methods
Each of NumPys binary ufuncs has special methods for performing certain kinds of
special vectorized operations. These are summarized in Table A-2, but Ill give a few
concrete examples to illustrate how they work.

reduce takes a single array and aggregates its values, optionally along an axis, by per
forming a sequence of binary operations. For example, an alternative way to sum ele
ments in an array is to use np.add.reduce:

In [115]: arr = np.arange(10)

In [116]: np.add.reduce(arr)
Out[116]: 45

In [117]: arr.sum()
Out[117]: 45

The starting value (0 for add) depends on the ufunc. If an axis is passed, the reduction
is performed along that axis. This allows you to answer certain kinds of questions in a
concise way. As a less trivial example, we can use np.logical_and to check whether
the values in each row of an array are sorted:

In [118]: np.random.seed(12346)  # for reproducibility

In [119]: arr = np.random.randn(5, 5)

In [120]: arr[::2].sort(1) # sort a few rows

In [121]: arr[:, :-1] &lt; arr[:, 1:]
Out[121]: 
array([[ True,  True,  True,  True],
       [False,  True, False, False],
       [ True,  True,  True,  True],
       [ True, False,  True,  True],
       [ True,  True,  True,  True]], dtype=bool)

In [122]: np.logical_and.reduce(arr[:, :-1] &lt; arr[:, 1:], axis=1)
Out[122]: array([ True, False,  True, False,  True], dtype=bool)

Note that logical_and.reduce is equivalent to the all method.

accumulate is related to reduce like cumsum is related to sum. It produces an array of
the same size with the intermediate accumulated values:

466 

|  Appendix A: Advanced NumPy

In [123]: arr = np.arange(15).reshape((3, 5))

In [124]: np.add.accumulate(arr, axis=1)
Out[124]: 
array([[ 0,  1,  3,  6, 10],
       [ 5, 11, 18, 26, 35],
       [10, 21, 33, 46, 60]])

outer performs a pairwise cross-product between two arrays:

In [125]: arr = np.arange(3).repeat([1, 2, 2])

In [126]: arr
Out[126]: array([0, 1, 1, 2, 2])

In [127]: np.multiply.outer(arr, np.arange(5))
Out[127]: 
array([[0, 0, 0, 0, 0],
       [0, 1, 2, 3, 4],
       [0, 1, 2, 3, 4],
       [0, 2, 4, 6, 8],
       [0, 2, 4, 6, 8]])

The output of outer will have a dimension that is the sum of the dimensions of the
inputs:

In [128]: x, y = np.random.randn(3, 4), np.random.randn(5)

In [129]: result = np.subtract.outer(x, y)

In [130]: result.shape
Out[130]: (3, 4, 5)

The  last  method,  reduceat,  performs  a  local  reduce,  in  essence  an  array  groupby
operation in which slices of the array are aggregated together. It accepts a sequence of
bin edges that indicate how to split and aggregate the values:

In [131]: arr = np.arange(10)

In [132]: np.add.reduceat(arr, [0, 5, 8])
Out[132]: array([10, 18, 17])

The results are the reductions (here, sums) performed over arr[0:5], arr[5:8], and
arr[8:]. As with the other methods, you can pass an axis argument:

In [133]: arr = np.multiply.outer(np.arange(4), np.arange(5))

In [134]: arr
Out[134]: 
array([[ 0,  0,  0,  0,  0],
       [ 0,  1,  2,  3,  4],
       [ 0,  2,  4,  6,  8],
       [ 0,  3,  6,  9, 12]])

Advanced NumPy 

| 

467

In [135]: np.add.reduceat(arr, [0, 2, 4], axis=1)
Out[135]: 
array([[ 0,  0,  0],
       [ 1,  5,  4],
       [ 2, 10,  8],
       [ 3, 15, 12]])

See Table A-2 for a partial listing of ufunc methods.

Table A-2. ufunc methods

Method
reduce(x)

accumulate(x)

Description
Aggregate values by successive applications of the operation
Aggregate values, preserving all partial aggregates

reduceat(x, bins) Local reduce or group by; reduce contiguous slices of data to produce aggregated array
outer(x, y)

Apply operation to all pairs of elements in x and y; the resulting array has shape x.shape + 
y.shape

Writing New ufuncs in Python
There are a number of facilities for creating your own NumPy ufuncs. The most gen
eral  is  to  use  the  NumPy  C  API,  but  that  is  beyond  the  scope  of  this  book.  In  this
section, we will look at pure Python ufuncs.

numpy.frompyfunc accepts a Python function along with a specification for the num
ber  of  inputs  and  outputs.  For  example,  a  simple  function  that  adds  element-wise
would be specified as:

In [136]: def add_elements(x, y):
   .....:     return x + y

In [137]: add_them = np.frompyfunc(add_elements, 2, 1)

In [138]: add_them(np.arange(8), np.arange(8))
Out[138]: array([0, 2, 4, 6, 8, 10, 12, 14], dtype=object)

Functions  created  using  frompyfunc  always  return  arrays  of  Python  objects,  which
can  be  inconvenient.  Fortunately,  there  is  an  alternative  (but  slightly  less  featureful)
function, numpy.vectorize, that allows you to specify the output type:

In [139]: add_them = np.vectorize(add_elements, otypes=[np.float64])

In [140]: add_them(np.arange(8), np.arange(8))
Out[140]: array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.])

These functions provide a way to create ufunc-like functions, but they are very slow
because they require a Python function call to compute each element, which is a lot
slower than NumPys C-based ufunc loops:

468 

|  Appendix A: Advanced NumPy

In [141]: arr = np.random.randn(10000)

In [142]: %timeit add_them(arr, arr)
4.12 ms +- 182 us per loop (mean +- std. dev. of 7 runs, 100 loops each)

In [143]: %timeit np.add(arr, arr)
6.89 us +- 504 ns per loop (mean +- std. dev. of 7 runs, 100000 loops each)

Later in this chapter well show how to create fast ufuncs in Python using the Numba
project.

A.5 Structured and Record Arrays
You  may  have  noticed  up  until  now  that  ndarray  is  a  homogeneous  data  container;
that  is,  it  represents  a  block  of  memory  in  which  each  element  takes  up  the  same
number of bytes, determined by the dtype. On the surface, this would appear to not
allow  you  to  represent  heterogeneous  or  tabular-like  data.  A  structured  array  is  an
ndarray in which each element can be thought of as representing a struct in C (hence
the structured name) or a row in a SQL table with multiple named fields:

In [144]: dtype = [(&#39;x&#39;, np.float64), (&#39;y&#39;, np.int32)]

In [145]: sarr = np.array([(1.5, 6), (np.pi, -2)], dtype=dtype)

In [146]: sarr
Out[146]: 
array([( 1.5   ,  6), ( 3.1416, -2)],
      dtype=[(&#39;x&#39;, &#39;&lt;f8&#39;), (&#39;y&#39;, &#39;&lt;i4&#39;)])

There are several ways to specify a structured dtype (see the online NumPy documen
tation). One typical way is as a list of tuples with (field_name, field_data_type).
Now, the elements of the array are tuple-like objects whose elements can be accessed
like a dictionary:

In [147]: sarr[0]
Out[147]: ( 1.5, 6)

In [148]: sarr[0][&#39;y&#39;]
Out[148]: 6

The field names are stored in the dtype.names attribute. When you access a field on
the structured array, a strided view on the data is returned, thus copying nothing:

In [149]: sarr[&#39;x&#39;]
Out[149]: array([ 1.5   ,  3.1416])

Nested dtypes and Multidimensional Fields
When specifying a structured dtype, you can additionally pass a shape (as an int or
tuple):

Advanced NumPy 

| 

469

In [150]: dtype = [(&#39;x&#39;, np.int64, 3), (&#39;y&#39;, np.int32)]

In [151]: arr = np.zeros(4, dtype=dtype)

In [152]: arr
Out[152]: 
array([([0, 0, 0], 0), ([0, 0, 0], 0), ([0, 0, 0], 0), ([0, 0, 0], 0)],
      dtype=[(&#39;x&#39;, &#39;&lt;i8&#39;, (3,)), (&#39;y&#39;, &#39;&lt;i4&#39;)])

In this case, the x field now refers to an array of length 3 for each record:

In [153]: arr[0][&#39;x&#39;]
Out[153]: array([0, 0, 0])

Conveniently, accessing arr[&#39;x&#39;] then returns a two-dimensional array instead of a
one-dimensional array as in prior examples:

In [154]: arr[&#39;x&#39;]
Out[154]: 
array([[0, 0, 0],
       [0, 0, 0],
       [0, 0, 0],
       [0, 0, 0]])

This enables you to express more complicated, nested structures as a single block of
memory in an array. You can also nest dtypes to make more complex structures. Here
is an example:

In [155]: dtype = [(&#39;x&#39;, [(&#39;a&#39;, &#39;f8&#39;), (&#39;b&#39;, &#39;f4&#39;)]), (&#39;y&#39;, np.int32)]

In [156]: data = np.array([((1, 2), 5), ((3, 4), 6)], dtype=dtype)

In [157]: data[&#39;x&#39;]
Out[157]: 
array([( 1.,  2.), ( 3.,  4.)],
      dtype=[(&#39;a&#39;, &#39;&lt;f8&#39;), (&#39;b&#39;, &#39;&lt;f4&#39;)])

In [158]: data[&#39;y&#39;]
Out[158]: array([5, 6], dtype=int32)

In [159]: data[&#39;x&#39;][&#39;a&#39;]
Out[159]: array([ 1.,  3.])

pandas DataFrame does not support this feature directly, though it is similar to hier
archical indexing.

Why Use Structured Arrays?
Compared with, say, a pandas DataFrame, NumPy structured arrays are a compara
tively  low-level  tool.  They  provide  a  means  to  interpreting  a  block  of  memory  as  a
tabular structure with arbitrarily complex nested columns. Since each element in the
array is represented in memory as a fixed number of bytes, structured arrays provide

470 

|  Appendix A: Advanced NumPy

a  very  fast  and  efficient  way  of  writing  data  to  and  from  disk  (including  memory
maps), transporting it over the network, and other such uses.

As  another  common  use  for  structured  arrays,  writing  data  files  as  fixed-length
record byte streams is a common way to serialize data in C and C++ code, which is
commonly  found  in  legacy  systems  in  industry.  As  long  as  the  format  of  the  file  is
known  (the  size  of  each  record  and  the  order,  byte  size,  and  data  type  of  each  ele
ment), the data can be read into memory with np.fromfile. Specialized uses like this
are  beyond  the  scope  of  this  book,  but  its  worth  knowing  that  such  things  are 
possible.

A.6 More About Sorting
Like  Pythons  built-in  list,  the  ndarray  sort  instance  method  is  an  in-place  sort,
meaning that the array contents are rearranged without producing a new array:

In [160]: arr = np.random.randn(6)

In [161]: arr.sort()

In [162]: arr
Out[162]: array([-1.082 ,  0.3759,  0.8014,  1.1397,  1.2888,  1.8413])

When  sorting  arrays  in-place,  remember  that  if  the  array  is  a  view  on  a  different
ndarray, the original array will be modified:

In [163]: arr = np.random.randn(3, 5)

In [164]: arr
Out[164]: 
array([[-0.3318, -1.4711,  0.8705, -0.0847, -1.1329],
       [-1.0111, -0.3436,  2.1714,  0.1234, -0.0189],
       [ 0.1773,  0.7424,  0.8548,  1.038 , -0.329 ]])

In [165]: arr[:, 0].sort()  # Sort first column values in-place

In [166]: arr
Out[166]: 
array([[-1.0111, -1.4711,  0.8705, -0.0847, -1.1329],
       [-0.3318, -0.3436,  2.1714,  0.1234, -0.0189],
       [ 0.1773,  0.7424,  0.8548,  1.038 , -0.329 ]])

On the other hand, numpy.sort creates a new, sorted copy of an array. Otherwise, it
accepts the same arguments (such as kind) as ndarray.sort:

In [167]: arr = np.random.randn(5)

In [168]: arr
Out[168]: array([-1.1181, -0.2415, -2.0051,  0.7379, -1.0614])

Advanced NumPy 

| 

471

In [169]: np.sort(arr)
Out[169]: array([-2.0051, -1.1181, -1.0614, -0.2415,  0.7379])

In [170]: arr
Out[170]: array([-1.1181, -0.2415, -2.0051,  0.7379, -1.0614])

All of these sort methods take an axis argument for sorting the sections of data along
the passed axis independently:

In [171]: arr = np.random.randn(3, 5)

In [172]: arr
Out[172]: 
array([[ 0.5955, -0.2682,  1.3389, -0.1872,  0.9111],
       [-0.3215,  1.0054, -0.5168,  1.1925, -0.1989],
       [ 0.3969, -1.7638,  0.6071, -0.2222, -0.2171]])

In [173]: arr.sort(axis=1)

In [174]: arr
Out[174]: 
array([[-0.2682, -0.1872,  0.5955,  0.9111,  1.3389],
       [-0.5168, -0.3215, -0.1989,  1.0054,  1.1925],
       [-1.7638, -0.2222, -0.2171,  0.3969,  0.6071]])

You may notice that none of the sort methods have an option to sort in descending
order.  This  is  a  problem  in  practice  because  array  slicing  produces  views,  thus  not
producing  a  copy  or  requiring  any  computational  work.  Many  Python  users  are
familiar with the trick that for a list values, values[::-1] returns a list in reverse
order. The same is true for ndarrays:

In [175]: arr[:, ::-1]
Out[175]: 
array([[ 1.3389,  0.9111,  0.5955, -0.1872, -0.2682],
       [ 1.1925,  1.0054, -0.1989, -0.3215, -0.5168],
       [ 0.6071,  0.3969, -0.2171, -0.2222, -1.7638]])

Indirect Sorts: argsort and lexsort
In data analysis you may need to reorder datasets by one or more keys. For example, a
table of data about some students might need to be sorted by last name, then by first
name.  This  is  an  example  of  an  indirect  sort,  and  if  youve  read  the  pandas-related
chapters you have already seen many higher-level examples. Given a key or keys (an
array  of  values  or  multiple  arrays  of  values),  you  wish  to  obtain  an  array  of  integer
indices (I refer to them colloquially as indexers) that tells you how to reorder the data
to be in sorted order. Two methods for this are argsort and numpy.lexsort. As an
example:

In [176]: values = np.array([5, 0, 1, 3, 2])

In [177]: indexer = values.argsort()

472 

|  Appendix A: Advanced NumPy

In [178]: indexer
Out[178]: array([1, 2, 4, 3, 0])

In [179]: values[indexer]
Out[179]: array([0, 1, 2, 3, 5])

As  a  more  complicated  example,  this  code  reorders  a  two-dimensional  array  by  its
first row:

In [180]: arr = np.random.randn(3, 5)

In [181]: arr[0] = values

In [182]: arr
Out[182]: 
array([[ 5.    ,  0.    ,  1.    ,  3.    ,  2.    ],
       [-0.3636, -0.1378,  2.1777, -0.4728,  0.8356],
       [-0.2089,  0.2316,  0.728 , -1.3918,  1.9956]])

In [183]: arr[:, arr[0].argsort()]
Out[183]: 
array([[ 0.    ,  1.    ,  2.    ,  3.    ,  5.    ],
       [-0.1378,  2.1777,  0.8356, -0.4728, -0.3636],
       [ 0.2316,  0.728 ,  1.9956, -1.3918, -0.2089]])

lexsort is similar to argsort, but it performs an indirect lexicographical sort on multi
ple  key  arrays.  Suppose  we  wanted  to  sort  some  data  identified  by  first  and  last
names:

In [184]: first_name = np.array([&#39;Bob&#39;, &#39;Jane&#39;, &#39;Steve&#39;, &#39;Bill&#39;, &#39;Barbara&#39;])

In [185]: last_name = np.array([&#39;Jones&#39;, &#39;Arnold&#39;, &#39;Arnold&#39;, &#39;Jones&#39;, &#39;Walters&#39;])

In [186]: sorter = np.lexsort((first_name, last_name))

In [187]: sorter
Out[187]: array([1, 2, 3, 0, 4])

In [188]: zip(last_name[sorter], first_name[sorter])
Out[188]: &lt;zip at 0x7fa203eda1c8&gt;

lexsort can be a bit confusing the first time you use it because the order in which the
keys are used to order the data starts with the last array passed. Here, last_name was
used before first_name.

pandas methods like Seriess and DataFrames sort_values method
are implemented with variants of these functions (which also must
take into account missing values).

Advanced NumPy 

| 

473

Alternative Sort Algorithms
A stable sorting algorithm preserves the relative position of equal elements. This can
be especially important in indirect sorts where the relative ordering is meaningful:

In [189]: values = np.array([&#39;2:first&#39;, &#39;2:second&#39;, &#39;1:first&#39;, &#39;1:second&#39;,
   .....:                    &#39;1:third&#39;])

In [190]: key = np.array([2, 2, 1, 1, 1])

In [191]: indexer = key.argsort(kind=&#39;mergesort&#39;)

In [192]: indexer
Out[192]: array([2, 3, 4, 0, 1])

In [193]: values.take(indexer)
Out[193]: 
array([&#39;1:first&#39;, &#39;1:second&#39;, &#39;1:third&#39;, &#39;2:first&#39;, &#39;2:second&#39;],
      dtype=&#39;&lt;U8&#39;)

The only stable sort available is mergesort, which has guaranteed O(n log n) perfor
mance  (for  complexity  buffs),  but  its  performance  is  on  average  worse  than  the
default  quicksort  method.  See  Table  A-3  for  a  summary  of  available  methods  and
their relative performance (and performance guarantees). This is not something that
most users will ever have to think about, but its useful to know that its there.

Table A-3. Array sorting methods

Kind
&#39;quicksort&#39; 1
&#39;mergesort&#39; 2
&#39;heapsort&#39;
3

Speed Stable Work space Worst case

No
Yes
No

0
n / 2

0

O(n^2)

O(n log n)

O(n log n)

Partially Sorting Arrays
One of the goals of sorting can be to determine the largest or smallest elements in an
array. NumPy has optimized methods, numpy.partition and np.argpartition, for 
partitioning an array around the k-th smallest element:

In [194]: np.random.seed(12345)

In [195]: arr = np.random.randn(20)

In [196]: arr
Out[196]: 
array([-0.2047,  0.4789, -0.5194, -0.5557,  1.9658,  1.3934,  0.0929,
        0.2817,  0.769 ,  1.2464,  1.0072, -1.2962,  0.275 ,  0.2289,
        1.3529,  0.8864, -2.0016, -0.3718,  1.669 , -0.4386])

In [197]: np.partition(arr, 3)

474 

|  Appendix A: Advanced NumPy

Out[197]: 
array([-2.0016, -1.2962, -0.5557, -0.5194, -0.3718, -0.4386, -0.2047,
        0.2817,  0.769 ,  0.4789,  1.0072,  0.0929,  0.275 ,  0.2289,
        1.3529,  0.8864,  1.3934,  1.9658,  1.669 ,  1.2464])

After you call partition(arr, 3), the first three elements in the result are the small
est  three  values  in  no  particular  order.  numpy.argpartition,  similar  to  numpy.arg
sort, returns the indices that rearrange the data into the equivalent order:

In [198]: indices = np.argpartition(arr, 3)

In [199]: indices
Out[199]: 
array([16, 11,  3,  2, 17, 19,  0,  7,  8,  1, 10,  6, 12, 13, 14, 15,  5,
        4, 18,  9])

In [200]: arr.take(indices)
Out[200]: 
array([-2.0016, -1.2962, -0.5557, -0.5194, -0.3718, -0.4386, -0.2047,
        0.2817,  0.769 ,  0.4789,  1.0072,  0.0929,  0.275 ,  0.2289,
        1.3529,  0.8864,  1.3934,  1.9658,  1.669 ,  1.2464])

numpy.searchsorted: Finding Elements in a Sorted Array
searchsorted  is  an  array  method  that  performs  a  binary  search  on  a  sorted  array,
returning  the  location  in  the  array  where  the  value  would  need  to  be  inserted  to
maintain sortedness:

In [201]: arr = np.array([0, 1, 7, 12, 15])

In [202]: arr.searchsorted(9)
Out[202]: 3

You can also pass an array of values to get an array of indices back:

In [203]: arr.searchsorted([0, 8, 11, 16])
Out[203]: array([0, 3, 3, 5])

You  might  have  noticed  that  searchsorted  returned  0  for  the  0  element.  This  is
because the default behavior is to return the index at the left side of a group of equal
values:

In [204]: arr = np.array([0, 0, 0, 1, 1, 1, 1])

In [205]: arr.searchsorted([0, 1])
Out[205]: array([0, 3])

In [206]: arr.searchsorted([0, 1], side=&#39;right&#39;)
Out[206]: array([3, 7])

Advanced NumPy 

| 

475

As another application of searchsorted, suppose we had an array of values between
0 and 10,000, and a separate array of bucket edges that we wanted to use to bin the
data:

In [207]: data = np.floor(np.random.uniform(0, 10000, size=50))

In [208]: bins = np.array([0, 100, 1000, 5000, 10000])

In [209]: data
Out[209]: 
array([ 9940.,  6768.,  7908.,  1709.,   268.,  8003.,  9037.,   246.,
        4917.,  5262.,  5963.,   519.,  8950.,  7282.,  8183.,  5002.,
        8101.,   959.,  2189.,  2587.,  4681.,  4593.,  7095.,  1780.,
        5314.,  1677.,  7688.,  9281.,  6094.,  1501.,  4896.,  3773.,
        8486.,  9110.,  3838.,  3154.,  5683.,  1878.,  1258.,  6875.,
        7996.,  5735.,  9732.,  6340.,  8884.,  4954.,  3516.,  7142.,
        5039.,  2256.])

To  then  get  a  labeling  of  which  interval  each  data  point  belongs  to  (where  1  would
mean the bucket [0, 100)), we can simply use searchsorted:

In [210]: labels = bins.searchsorted(data)

In [211]: labels
Out[211]: 
array([4, 4, 4, 3, 2, 4, 4, 2, 3, 4, 4, 2, 4, 4, 4, 4, 4, 2, 3, 3, 3, 3, 4,
       3, 4, 3, 4, 4, 4, 3, 3, 3, 4, 4, 3, 3, 4, 3, 3, 4, 4, 4, 4, 4, 4, 3,
       3, 4, 4, 3])

This, combined with pandass groupby, can be used to bin data:

In [212]: pd.Series(data).groupby(labels).mean()
Out[212]: 
2     498.000000
3    3064.277778
4    7389.035714
dtype: float64

A.7 Writing Fast NumPy Functions with Numba
Numba  is  an  open  source  project  that  creates  fast  functions  for  NumPy-like  data
using CPUs, GPUs, or other hardware. It uses the LLVM Project to translate Python
code into compiled machine code.

To introduce Numba, lets consider a pure Python function that computes the expres
sion (x - y).mean() using a for loop:

import numpy as np

def mean_distance(x, y):
    nx = len(x)
    result = 0.0

476 

|  Appendix A: Advanced NumPy

    count = 0
    for i in range(nx):
        result += x[i] - y[i]
        count += 1
    return result / count

This function is very slow:

In [209]: x = np.random.randn(10000000)

In [210]: y = np.random.randn(10000000)

In [211]: %timeit mean_distance(x, y)
1 loop, best of 3: 2 s per loop

In [212]: %timeit (x - y).mean()
100 loops, best of 3: 14.7 ms per loop

The NumPy version is over 100 times faster. We can turn this function into a com
piled Numba function using the numba.jit function:

In [213]: import numba as nb

In [214]: numba_mean_distance = nb.jit(mean_distance)

We could also have written this as a decorator:

@nb.jit
def mean_distance(x, y):
    nx = len(x)
    result = 0.0
    count = 0
    for i in range(nx):
        result += x[i] - y[i]
        count += 1
    return result / count

The resulting function is actually faster than the vectorized NumPy version:

In [215]: %timeit numba_mean_distance(x, y)
100 loops, best of 3: 10.3 ms per loop

Numba cannot compile arbitrary Python code, but it supports a significant subset of
pure Python that is most useful for writing numerical algorithms.

Numba is a deep library, supporting different kinds of hardware, modes of compila
tion, and user extensions. It is also able to compile a substantial subset of the NumPy
Python  API  without  explicit  for  loops.  Numba  is  able  to  recognize  constructs  that
can  be  compiled  to  machine  code,  while  substituting  calls  to  the  CPython  API  for
functions that it does not know how to compile. Numbas jit function has an option,
nopython=True, which restricts allowed code to Python code that can be compiled to
LLVM  without  any  Python  C  API  calls.  jit(nopython=True)  has  a  shorter  alias
numba.njit.

Advanced NumPy 

| 

477

In the previous example, we could have written:

from numba import float64, njit

@njit(float64(float64[:], float64[:]))
def mean_distance(x, y):
    return (x - y).mean()

I encourage you to learn more by reading the online documentation for Numba. The
next section shows an example of creating custom NumPy ufunc objects.

Creating Custom numpy.ufunc Objects with Numba
The  numba.vectorize  function  creates  compiled  NumPy  ufuncs,  which  behave  like
built-in ufuncs. Lets consider a Python implementation of numpy.add:

from numba import vectorize

@vectorize
def nb_add(x, y):
    return x + y

Now we have:

In [13]: x = np.arange(10)

In [14]: nb_add(x, x)
Out[14]: array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.])

In [15]: nb_add.accumulate(x, 0)
Out[15]: array([  0.,   1.,   3.,   6.,  10.,  15.,  21.,  28.,  36.,  45.])

A.8 Advanced Array Input and Output
In Chapter 4, we became acquainted with np.save and np.load for storing arrays in
binary format on disk. There are a number of additional options to consider for more
sophisticated use. In particular, memory maps have the additional benefit of enabling
you to work with datasets that do not fit into RAM.

Memory-Mapped Files
A memory-mapped file is a method for interacting with binary data on disk as though
it  is  stored  in  an  in-memory  array.  NumPy  implements  a  memmap  object  that  is
ndarray-like,  enabling  small  segments  of  a  large  file  to  be  read  and  written  without
reading the whole array into memory. Additionally, a memmap has the same methods
as an in-memory array and thus can be substituted into many algorithms where an
ndarray would be expected.

478 

|  Appendix A: Advanced NumPy

To create a new memory map, use the function np.memmap and pass a file path, dtype,
shape, and file mode:

In [214]: mmap = np.memmap(&#39;mymmap&#39;, dtype=&#39;float64&#39;, mode=&#39;w+&#39;,
   .....:                  shape=(10000, 10000))

In [215]: mmap
Out[215]: 
memmap([[ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        ..., 
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.],
        [ 0.,  0.,  0., ...,  0.,  0.,  0.]])

Slicing a memmap returns views on the data on disk:

In [216]: section = mmap[:5]

If you assign data to these, it will be buffered in memory (like a Python file object),
but you can write it to disk by calling flush:

In [217]: section[:] = np.random.randn(5, 10000)

In [218]: mmap.flush()

In [219]: mmap
Out[219]: 
memmap([[ 0.7584, -0.6605,  0.8626, ...,  0.6046, -0.6212,  2.0542],
        [-1.2113, -1.0375,  0.7093, ..., -1.4117, -0.1719, -0.8957],
        [-0.1419, -0.3375,  0.4329, ...,  1.2914, -0.752 , -0.44  ],
        ..., 
        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ],
        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ],
        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ]])

In [220]: del mmap

Whenever a memory map falls out of scope and is garbage-collected, any changes will
be flushed to disk also. When opening an existing memory map, you still have to spec
ify the dtype and shape, as the file is only a block of binary data with no metadata on
disk:

In [221]: mmap = np.memmap(&#39;mymmap&#39;, dtype=&#39;float64&#39;, shape=(10000, 10000))

In [222]: mmap
Out[222]: 
memmap([[ 0.7584, -0.6605,  0.8626, ...,  0.6046, -0.6212,  2.0542],
        [-1.2113, -1.0375,  0.7093, ..., -1.4117, -0.1719, -0.8957],
        [-0.1419, -0.3375,  0.4329, ...,  1.2914, -0.752 , -0.44  ],
        ..., 
        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ],

Advanced NumPy 

| 

479

        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ],
        [ 0.    ,  0.    ,  0.    , ...,  0.    ,  0.    ,  0.    ]])

Memory maps also work with structured or nested dtypes as described in a previous
section.

HDF5 and Other Array Storage Options
PyTables and h5py are two Python projects providing NumPy-friendly interfaces for
storing  array  data  in  the  efficient  and  compressible  HDF5  format  (HDF  stands  for
hierarchical data format). You can safely store hundreds of gigabytes or even terabytes
of data in HDF5 format. To learn more about using HDF5 with Python, I recommend 
reading the pandas online documentation.

A.9 Performance Tips
Getting  good  performance  out  of  code  utilizing  NumPy  is  often  straightforward,  as
array  operations  typically  replace  otherwise  comparatively  extremely  slow  pure
Python loops. The following list briefly summarizes some things to keep in mind:

 Convert  Python  loops  and  conditional  logic  to  array  operations  and  boolean

array operations

 Use broadcasting whenever possible

 Use arrays views (slicing) to avoid copying data

 Utilize ufuncs and ufunc methods

If you cant get the performance you require after exhausting the capabilities provided
by NumPy alone, consider writing code in C, Fortran, or Cython. I use Cython fre
quently  in  my  own  work  as  an  easy  way  to  get  C-like  performance  with  minimal
development.

The Importance of Contiguous Memory
While  the  full  extent  of  this  topic  is  a  bit  outside  the  scope  of  this  book,  in  some
applications the memory layout of an array can significantly affect the speed of com
putations.  This  is  based  partly  on  performance  differences  having  to  do  with  the
cache hierarchy of the CPU; operations accessing contiguous blocks of memory (e.g.,
summing the rows of a C order array) will generally be the fastest because the mem
ory subsystem will buffer the appropriate blocks of memory into the ultrafast L1 or
L2 CPU cache. Also, certain code paths inside NumPys C codebase have been opti
mized  for  the  contiguous  case  in  which  generic  strided  memory  access  can  be
avoided.

480 

|  Appendix A: Advanced NumPy

To say that an arrays memory layout is contiguous means that the elements are stored
in memory in the order that they appear in the array with respect to Fortran (column
major)  or  C  (row  major)  ordering.  By  default,  NumPy  arrays  are  created  as  C-
contiguous or just simply contiguous. A column major array, such as the transpose of
a C-contiguous array, is thus said to be Fortran-contiguous. These properties can be
explicitly checked via the flags attribute on the ndarray:

In [225]: arr_c = np.ones((1000, 1000), order=&#39;C&#39;)

In [226]: arr_f = np.ones((1000, 1000), order=&#39;F&#39;)

In [227]: arr_c.flags
Out[227]: 
  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : True
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False

In [228]: arr_f.flags
Out[228]: 
  C_CONTIGUOUS : False
  F_CONTIGUOUS : True
  OWNDATA : True
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False

In [229]: arr_f.flags.f_contiguous
Out[229]: True

In  this  example,  summing  the  rows  of  these  arrays  should,  in  theory,  be  faster  for
arr_c  than  arr_f  since  the  rows  are  contiguous  in  memory.  Here  I  check  for  sure 
using %timeit in IPython:

In [230]: %timeit arr_c.sum(1)
784 us +- 10.4 us per loop (mean +- std. dev. of 7 runs, 1000 loops each)

In [231]: %timeit arr_f.sum(1)
934 us +- 29 us per loop (mean +- std. dev. of 7 runs, 1000 loops each)

When  youre  looking  to  squeeze  more  performance  out  of  NumPy,  this  is  often  a
place to invest some effort. If you have an array that does not have the desired mem
ory order, you can use copy and pass either &#39;C&#39; or &#39;F&#39;:

In [232]: arr_f.copy(&#39;C&#39;).flags
Out[232]: 
  C_CONTIGUOUS : True
  F_CONTIGUOUS : False
  OWNDATA : True

Advanced NumPy 

| 

481

  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False

When constructing a view on an array, keep in mind that the result is not guaranteed
to be contiguous:

In [233]: arr_c[:50].flags.contiguous
Out[233]: True

In [234]: arr_c[:, :50].flags
Out[234]: 
  C_CONTIGUOUS : False
  F_CONTIGUOUS : False
  OWNDATA : False
  WRITEABLE : True
  ALIGNED : True
  UPDATEIFCOPY : False

482 

|  Appendix A: Advanced NumPy

APPENDIX B
More on the IPython System

In Chapter 2 we looked at the basics of using the IPython shell and Jupyter notebook.
In this chapter, we explore some deeper functionality in the IPython system that can
either be used from the console or within Jupyter.

B.1 Using the Command History
IPython  maintains  a  small  on-disk  database  containing  the  text  of  each  command
that you execute. This serves various purposes:

 Searching, completing, and executing previously executed commands with mini

mal typing

 Persisting the command history between sessions

 Logging the input/output history to a file

These features are more useful in the shell than in the notebook, since the notebook
by design keeps a log of the input and output in each code cell.

Searching and Reusing the Command History
The  IPython  shell  lets  you  search  and  execute  previous  code  or  other  commands.
This is useful, as you may often find yourself repeating the same commands, such as a
%run command or some other code snippet. Suppose you had run:

In[7]: %run first/second/third/data_script.py

and then explored the results of the script (assuming it ran successfully) only to find
that you made an incorrect calculation. After figuring out the problem and modifying
data_script.py, you can start typing a few letters of the %run command and then press
either the Ctrl-P key combination or the up arrow key. This will search the command

483

history  for  the  first  prior  command  matching  the  letters  you  typed.  Pressing  either
Ctrl-P or the up arrow key multiple times will continue to search through the history.
If you pass over the command you wish to execute, fear not. You can move forward
through the command history by pressing either Ctrl-N or the down arrow key. After
doing this a few times, you may start pressing these keys without thinking!

Using Ctrl-R gives you the same partial incremental searching capability provided by
the readline used in Unix-style shells, such as the bash shell. On Windows, readline
functionality  is  emulated  by  IPython.  To  use  this,  press  Ctrl-R  and  then  type  a  few
characters contained in the input line you want to search for:

In [1]: a_command = foo(x, y, z)

(reverse-i-search)`com&#39;: a_command = foo(x, y, z)

Pressing Ctrl-R will cycle through the history for each line matching the characters
youve typed.

Input and Output Variables
Forgetting to assign the result of a function call to a variable can be very annoying.
An IPython session stores references to both the input commands and output Python
objects in special variables. The previous two outputs are stored in the _ (one under
score) and __ (two underscores) variables, respectively:

In [24]: 2 ** 27
Out[24]: 134217728

In [25]: _
Out[25]: 134217728

Input variables are stored in variables named like _iX, where X is the input line num
ber. For each input variable there is a corresponding output variable _X. So after input
line  27,  say,  there  will  be  two  new  variables  _27  (for  the  output)  and  _i27  for  the
input:

In [26]: foo = &#39;bar&#39;

In [27]: foo
Out[27]: &#39;bar&#39;

In [28]: _i27
Out[28]: u&#39;foo&#39;

In [29]: _27
Out[29]: &#39;bar&#39;

484 

|  Appendix B: More on the IPython System

Since the input variables are strings they can be executed again with the Python exec
keyword:

In [30]: exec(_i27)

Here _i27 refers to the code input in In [27].

Several magic functions allow you to work with the input and output history. %hist is
capable  of  printing  all  or  part  of  the  input  history,  with  or  without  line  numbers.
%reset is for clearing the interactive namespace and optionally the input and output
caches. The %xdel magic function is intended for removing all references to a particu
lar object from the IPython machinery. See the documentation for both of these mag
ics for more details.

When  working  with  very  large  datasets,  keep  in  mind  that  IPy
thons input and output history causes any object referenced there
to  not  be  garbage-collected  (freeing  up  the  memory),  even  if  you
delete  the  variables  from  the  interactive  namespace  using  the  del
keyword. In such cases, careful usage of %xdel and %reset can help
you avoid running into memory problems.

B.2 Interacting with the Operating System
Another  feature  of  IPython  is  that  it  allows  you  to  seamlessly  access  the  filesystem
and  operating  system  shell.  This  means,  among  other  things,  that  you  can  perform
most standard command-line actions as you would in the Windows or Unix (Linux,
macOS) shell without having to exit IPython. This includes shell commands, chang
ing  directories,  and  storing  the  results  of  a  command  in  a  Python  object  (list  or
string). There are also simple command aliasing and directory bookmarking features.

See  Table  B-1  for  a  summary  of  magic  functions  and  syntax  for  calling  shell  com
mands. Ill briefly visit these features in the next few sections.

Table B-1. IPython system-related commands

Command
!cmd

output = !cmd args

Description
Execute cmd in the system shell
Run cmd and store the stdout in output

%alias alias_name cmd Define an alias for a system (shell) command
%bookmark
%cd directory
%pwd
%pushd directory
%popd

Utilize IPythons directory bookmarking system
Change system working directory to passed directory
Return the current system working directory
Place current directory on stack and change to target directory
Change to directory popped off the top of the stack
Return a list containing the current directory stack

%dirs

More on the IPython System 

| 

485

Command
%dhist

%env

%matplotlib

Description
Print the history of visited directories
Return the system environment variables as a dict
Configure matplotlib integration options

Shell Commands and Aliases
Starting a line in IPython with an exclamation point !, or bang, tells IPython to exe
cute everything after the bang in the system shell. This means that you can delete files
(using  rm  or  del,  depending  on  your  OS),  change  directories,  or  execute  any  other
process.

You can store the console output of a shell command in a variable by assigning the
expression  escaped  with  !  to  a  variable.  For  example,  on  my  Linux-based  machine
connected to the internet via ethernet, I can get my IP address as a Python variable:

In [1]: ip_info = !ifconfig wlan0 | grep &#34;inet &#34;

In [2]: ip_info[0].strip()
Out[2]: &#39;inet addr:10.0.0.11  Bcast:10.0.0.255  Mask:255.255.255.0&#39;

The returned Python object ip_info is actually a custom list type containing various
versions of the console output.

IPython  can  also  substitute  in  Python  values  defined  in  the  current  environment
when using !. To do this, preface the variable name by the dollar sign $:

In [3]: foo = &#39;test*&#39;

In [4]: !ls $foo
test4.py  test.py  test.xml

The  %alias  magic  function  can  define  custom  shortcuts  for  shell  commands.  As  a
simple example:

In [1]: %alias ll ls -l

In [2]: ll /usr
total 332
drwxr-xr-x   2 root root  69632 2012-01-29 20:36 bin/
drwxr-xr-x   2 root root   4096 2010-08-23 12:05 games/
drwxr-xr-x 123 root root  20480 2011-12-26 18:08 include/
drwxr-xr-x 265 root root 126976 2012-01-29 20:36 lib/
drwxr-xr-x  44 root root  69632 2011-12-26 18:08 lib32/
lrwxrwxrwx   1 root root      3 2010-08-23 16:02 lib64 -&gt; lib/
drwxr-xr-x  15 root root   4096 2011-10-13 19:03 local/
drwxr-xr-x   2 root root  12288 2012-01-12 09:32 sbin/
drwxr-xr-x 387 root root  12288 2011-11-04 22:53 share/
drwxrwsr-x  24 root src    4096 2011-07-17 18:38 src/

486 

|  Appendix B: More on the IPython System

You can execute multiple commands just as on the command line by separating them
with semicolons:

In [558]: %alias test_alias (cd examples; ls; cd ..)

In [559]: test_alias
macrodata.csv  spx.csv  tips.csv

Youll notice that IPython forgets any aliases you define interactively as soon as the
session is closed. To create permanent aliases, you will need to use the configuration
system.

Directory Bookmark System
IPython has a simple directory bookmarking system to enable you to save aliases for
common directories so that you can jump around very easily. For example, suppose
you wanted to create a bookmark that points to the supplementary materials for this
book:

In [6]: %bookmark py4da /home/wesm/code/pydata-book

Once youve done this, when we use the %cd magic, we can use any bookmarks weve
defined:

In [7]: cd py4da
(bookmark:py4da) -&gt; /home/wesm/code/pydata-book
/home/wesm/code/pydata-book

If a bookmark name conflicts with a directory name in your current working direc
tory, you can use the -b flag to override and use the bookmark location. Using the -l
option with %bookmark lists all of your bookmarks:

In [8]: %bookmark -l
Current bookmarks:
py4da -&gt; /home/wesm/code/pydata-book-source

Bookmarks, unlike aliases, are automatically persisted between IPython sessions.

B.3 Software Development Tools
In addition to being a comfortable environment for interactive computing and data
exploration,  IPython  can  also  be  a  useful  companion  for  general  Python  software
development.  In  data  analysis  applications,  its  important  first  to  have  correct  code.
Fortunately,  IPython  has  closely  integrated  and  enhanced  the  built-in  Python  pdb
debugger. Secondly you want your code to be fast. For this IPython has easy-to-use
code timing and profiling tools. I will give an overview of these tools in detail here.

More on the IPython System 

| 

487

Interactive Debugger
IPythons debugger enhances pdb with tab completion, syntax highlighting, and con
text for each line in exception tracebacks. One of the best times to debug code is right
after an error has occurred. The %debug command, when entered immediately after
an  exception,  invokes  the  post-mortem  debugger  and  drops  you  into  the  stack
frame where the exception was raised:

In [2]: run examples/ipython_bug.py
---------------------------------------------------------------------------
AssertionError                            Traceback (most recent call last)
/home/wesm/code/pydata-book/examples/ipython_bug.py in &lt;module&gt;()
     13     throws_an_exception()
     14
---&gt; 15 calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py in calling_things()
     11 def calling_things():
     12     works_fine()
---&gt; 13     throws_an_exception()
     14
     15 calling_things()

/home/wesm/code/pydata-book/examples/ipython_bug.py in throws_an_exception()
      7     a = 5
      8     b = 6
----&gt; 9     assert(a + b == 10)
     10
     11 def calling_things():

AssertionError:

In [3]: %debug
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(9)throws_an_exception()
      8     b = 6
----&gt; 9     assert(a + b == 10)
     10

ipdb&gt;

Once inside the debugger, you can execute arbitrary Python code and explore all of
the  objects  and  data  (which  have  been  kept  alive  by  the  interpreter)  inside  each
stack  frame.  By  default  you  start  in  the  lowest  level,  where  the  error  occurred.  By
pressing u (up) and d (down), you can switch between the levels of the stack trace:

ipdb&gt; u
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(13)calling_things()
     12     works_fine()
---&gt; 13     throws_an_exception()
     14

488 

|  Appendix B: More on the IPython System

Executing  the  %pdb  command  makes  it  so  that  IPython  automatically  invokes  the
debugger after any exception, a mode that many users will find especially useful.

Its also easy to use the debugger to help develop code, especially when you wish to set
breakpoints or step through the execution of a function or script to examine the state
at  each  stage.  There  are  several  ways  to  accomplish  this.  The  first  is  by  using  %run
with the -d flag, which invokes the debugger before executing any code in the passed
script. You must immediately press s (step) to enter the script:

In [5]: run -d examples/ipython_bug.py
Breakpoint 1 at /home/wesm/code/pydata-book/examples/ipython_bug.py:1
NOTE: Enter &#39;c&#39; at the ipdb&gt;  prompt to start your script.
&gt; &lt;string&gt;(1)&lt;module&gt;()

ipdb&gt; s
--Call--
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(1)&lt;module&gt;()
1---&gt; 1 def works_fine():
      2     a = 5
      3     b = 6

After this point, its up to you how you want to work your way through the file. For
example,  in  the  preceding  exception,  we  could  set  a  breakpoint  right  before  calling
the works_fine method and run the script until we reach the breakpoint by pressing
c (continue):

ipdb&gt; b 12
ipdb&gt; c
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(12)calling_things()
     11 def calling_things():
2--&gt; 12     works_fine()
     13     throws_an_exception()

At this point, you can step into works_fine() or execute works_fine() by pressing n
(next) to advance to the next line:

ipdb&gt; n
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(13)calling_things()
2    12     works_fine()
---&gt; 13     throws_an_exception()
     14

Then,  we  could  step  into  throws_an_exception  and  advance  to  the  line  where  the
error  occurs  and  look  at  the  variables  in  the  scope.  Note  that  debugger  commands
take  precedence  over  variable  names;  in  such  cases,  preface  the  variables  with  !  to
examine their contents:

ipdb&gt; s
--Call--
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(6)throws_an_exception()
      5

More on the IPython System 

| 

489

----&gt; 6 def throws_an_exception():
      7     a = 5

ipdb&gt; n
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(7)throws_an_exception()
      6 def throws_an_exception():
----&gt; 7     a = 5
      8     b = 6

ipdb&gt; n
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(8)throws_an_exception()
      7     a = 5
----&gt; 8     b = 6
      9     assert(a + b == 10)

ipdb&gt; n
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(9)throws_an_exception()
      8     b = 6
----&gt; 9     assert(a + b == 10)
     10

ipdb&gt; !a
5
ipdb&gt; !b
6

Developing  proficiency  with  the  interactive  debugger  is  largely  a  matter  of  practice
and experience. See Table B-2 for a full catalog of the debugger commands. If you are
accustomed to using an IDE, you might find the terminal-driven debugger to be a bit
unforgiving  at  first,  but  that  will  improve  in  time.  Some  of  the  Python  IDEs  have
excellent GUI debuggers, so most users can find something that works for them.

Table B-2. (I)Python debugger commands

Command
h(elp)
help command
c(ontinue)

Action
Display command list
Show documentation for command
Resume program execution
Exit debugger without executing any more code
Set breakpoint at number in current file

q(uit)
b(reak) number
b path/to/file.py:number Set breakpoint at line number in specified file
s(tep)

n(ext)
u(p)/d(own)
a(rgs)
debug statement
l(ist) statement
w(here)

Step into function call
Execute current line and advance to next line at current level
Move up/down in function call stack
Show arguments for current function
Invoke statement statement in new (recursive) debugger
Show current position and context at current level of stack
Print full stack trace with context at current position

490 

|  Appendix B: More on the IPython System

Other ways to make use of the debugger

There are a couple of other useful ways to invoke the debugger. The first is by using a
special set_trace function (named after pdb.set_trace), which is basically a poor
mans breakpoint. Here are two small recipes you might want to put somewhere for
your general use (potentially adding them to your IPython profile as I do):

from IPython.core.debugger import Pdb

def set_trace():
    Pdb(color_scheme=&#39;Linux&#39;).set_trace(sys._getframe().f_back)

def debug(f, *args, **kwargs):
    pdb = Pdb(color_scheme=&#39;Linux&#39;)
    return pdb.runcall(f, *args, **kwargs)

The first function, set_trace, is very simple. You can use a set_trace in any part of
your code that you want to temporarily stop in order to more closely examine it (e.g.,
right before an exception occurs):

In [7]: run examples/ipython_bug.py
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(16)calling_things()
     15     set_trace()
---&gt; 16     throws_an_exception()
     17

Pressing c (continue) will cause the code to resume normally with no harm done.

The debug function we just looked at enables you to invoke the interactive debugger
easily  on  an  arbitrary  function  call.  Suppose  we  had  written  a  function  like  the  fol
lowing and we wished to step through its logic:

def f(x, y, z=1):
    tmp = x + y
    return tmp / z

Ordinarily using f would look like f(1, 2, z=3). To instead step into f, pass f as the
first  argument  to  debug  followed  by  the  positional  and  keyword  arguments  to  be
passed to f:

In [6]: debug(f, 1, 2, z=3)
&gt; &lt;ipython-input&gt;(2)f()
      1 def f(x, y, z):
----&gt; 2     tmp = x + y
      3     return tmp / z

ipdb&gt;

I find that these two simple recipes save me a lot of time on a day-to-day basis.

More on the IPython System 

| 

491

Lastly, the debugger can be used in conjunction with %run. By running a script with
%run -d, you will be dropped directly into the debugger, ready to set any breakpoints
and start the script:

In [1]: %run -d examples/ipython_bug.py
Breakpoint 1 at /home/wesm/code/pydata-book/examples/ipython_bug.py:1
NOTE: Enter &#39;c&#39; at the ipdb&gt;  prompt to start your script.
&gt; &lt;string&gt;(1)&lt;module&gt;()

ipdb&gt;

Adding -b with a line number starts the debugger with a breakpoint set already:

In [2]: %run -d -b2 examples/ipython_bug.py
Breakpoint 1 at /home/wesm/code/pydata-book/examples/ipython_bug.py:2
NOTE: Enter &#39;c&#39; at the ipdb&gt;  prompt to start your script.
&gt; &lt;string&gt;(1)&lt;module&gt;()

ipdb&gt; c
&gt; /home/wesm/code/pydata-book/examples/ipython_bug.py(2)works_fine()
      1 def works_fine():
1---&gt; 2     a = 5
      3     b = 6

ipdb&gt;

Timing Code: %time and %timeit
For larger-scale or longer-running data analysis applications, you may wish to meas
ure the execution time of various components or of individual statements or function
calls. You may want a report of which functions are taking up the most time in a com
plex  process.  Fortunately,  IPython  enables  you  to  get  this  information  very  easily
while you are developing and testing your code.

Timing  code  by  hand  using  the  built-in  time  module  and  its  functions  time.clock
and time.time is often tedious and repetitive, as you must write the same uninterest
ing boilerplate code:

import time
start = time.time()
for i in range(iterations):
    # some code to run here
elapsed_per = (time.time() - start) / iterations

Since this is such a common operation, IPython has two magic functions, %time and
%timeit, to automate this process for you.

%time  runs  a  statement  once,  reporting  the  total  execution  time.  Suppose  we  had  a
large  list  of  strings  and  we  wanted  to  compare  different  methods  of  selecting  all

492 

|  Appendix B: More on the IPython System

strings  starting  with  a  particular  prefix.  Here  is  a  simple  list  of  600,000  strings  and
two identical methods of selecting only the ones that start with &#39;foo&#39;:

# a very large list of strings
strings = [&#39;foo&#39;, &#39;foobar&#39;, &#39;baz&#39;, &#39;qux&#39;,
           &#39;python&#39;, &#39;Guido Van Rossum&#39;] * 100000

method1 = [x for x in strings if x.startswith(&#39;foo&#39;)]

method2 = [x for x in strings if x[:3] == &#39;foo&#39;]

It  looks  like  they  should  be  about  the  same  performance-wise,  right?  We  can  check
for sure using %time:

In [561]: %time method1 = [x for x in strings if x.startswith(&#39;foo&#39;)]
CPU times: user 0.19 s, sys: 0.00 s, total: 0.19 s
Wall time: 0.19 s

In [562]: %time method2 = [x for x in strings if x[:3] == &#39;foo&#39;]
CPU times: user 0.09 s, sys: 0.00 s, total: 0.09 s
Wall time: 0.09 s

The  Wall  time  (short  for  wall-clock  time)  is  the  main  number  of  interest.  So,  it
looks like the first method takes more than twice as long, but its not a very precise
measurement.  If  you  try  %time-ing  those  statements  multiple  times  yourself,  youll
find that the results are somewhat variable. To get a more precise measurement, use
the %timeit magic function. Given an arbitrary statement, it has a heuristic to run a
statement multiple times to produce a more accurate average runtime:

In [563]: %timeit [x for x in strings if x.startswith(&#39;foo&#39;)]
10 loops, best of 3: 159 ms per loop

In [564]: %timeit [x for x in strings if x[:3] == &#39;foo&#39;]
10 loops, best of 3: 59.3 ms per loop

This seemingly innocuous example illustrates that it is worth understanding the per
formance  characteristics  of  the  Python  standard  library,  NumPy,  pandas,  and  other
libraries  used  in  this  book.  In  larger-scale  data  analysis  applications,  those  milli
seconds will start to add up!

%timeit  is  especially  useful  for  analyzing  statements  and  functions  with  very  short
execution times, even at the level of microseconds (millionths of a second) or nano
seconds (billionths of a second). These may seem like insignificant amounts of time,
but  of  course  a  20  microsecond  function  invoked  1  million  times  takes  15  seconds
longer  than  a  5  microsecond  function.  In  the  preceding  example,  we  could  very
directly  compare  the  two  string  operations  to  understand  their  performance 
characteristics:

In [565]: x = &#39;foobar&#39;

More on the IPython System 

| 

493

In [566]: y = &#39;foo&#39;

In [567]: %timeit x.startswith(y)
1000000 loops, best of 3: 267 ns per loop

In [568]: %timeit x[:3] == y
10000000 loops, best of 3: 147 ns per loop

Basic Profiling: %prun and %run -p
Profiling code is closely related to timing code, except it is concerned with determin
ing  where  time  is  spent.  The  main  Python  profiling  tool  is  the  cProfile  module,
which is not specific to IPython at all. cProfile executes a program or any arbitrary
block of code while keeping track of how much time is spent in each function.

A common way to use cProfile is on the command line, running an entire program
and outputting the aggregated time per function. Suppose we had a simple script that
does some linear algebra in a loop (computing the maximum absolute eigenvalues of
a series of 100  100 matrices):

import numpy as np
from numpy.linalg import eigvals

def run_experiment(niter=100):
    K = 100
    results = []
    for _ in xrange(niter):
        mat = np.random.randn(K, K)
        max_eigenvalue = np.abs(eigvals(mat)).max()
        results.append(max_eigenvalue)
    return results
some_results = run_experiment()
print &#39;Largest one we saw: %s&#39; % np.max(some_results)

You can run this script through cProfile using the following in the command line:

python -m cProfile cprof_example.py

If you try that, youll find that the output is sorted by function name. This makes it a
bit hard to get an idea of where the most time is spent, so its very common to specify
a sort order using the -s flag:

$ python -m cProfile -s cumulative cprof_example.py
Largest one we saw: 11.923204422
    15116 function calls (14927 primitive calls) in 0.720 seconds

Ordered by: cumulative time

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.001    0.001    0.721    0.721 cprof_example.py:1(&lt;module&gt;)
   100    0.003    0.000    0.586    0.006 linalg.py:702(eigvals)

494 

|  Appendix B: More on the IPython System

   200    0.572    0.003    0.572    0.003 {numpy.linalg.lapack_lite.dgeev}
     1    0.002    0.002    0.075    0.075 __init__.py:106(&lt;module&gt;)
   100    0.059    0.001    0.059    0.001 {method &#39;randn&#39;)
     1    0.000    0.000    0.044    0.044 add_newdocs.py:9(&lt;module&gt;)
     2    0.001    0.001    0.037    0.019 __init__.py:1(&lt;module&gt;)
     2    0.003    0.002    0.030    0.015 __init__.py:2(&lt;module&gt;)
     1    0.000    0.000    0.030    0.030 type_check.py:3(&lt;module&gt;)
     1    0.001    0.001    0.021    0.021 __init__.py:15(&lt;module&gt;)
     1    0.013    0.013    0.013    0.013 numeric.py:1(&lt;module&gt;)
     1    0.000    0.000    0.009    0.009 __init__.py:6(&lt;module&gt;)
     1    0.001    0.001    0.008    0.008 __init__.py:45(&lt;module&gt;)
   262    0.005    0.000    0.007    0.000 function_base.py:3178(add_newdoc)
   100    0.003    0.000    0.005    0.000 linalg.py:162(_assertFinite)
   ...

Only the first 15 rows of the output are shown. Its easiest to read by scanning down
the cumtime column to see how much total time was spent inside each function. Note
that if a function calls some other function, the clock does not stop running. cProfile
records  the  start  and  end  time  of  each  function  call  and  uses  that  to  produce  the
timing.

In addition to the command-line usage, cProfile can also be used programmatically
to profile arbitrary blocks of code without having to run a new process. IPython has a
convenient interface to this capability using the %prun command and the -p option to
%run. %prun takes the same command-line options as cProfile but will profile an
arbitrary Python statement instead of a whole .py file:

In [4]: %prun -l 7 -s cumulative run_experiment()
         4203 function calls in 0.643 seconds

Ordered by: cumulative time
List reduced from 32 to 7 due to restriction &lt;7&gt;

ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    0.000    0.000    0.643    0.643 &lt;string&gt;:1(&lt;module&gt;)
     1    0.001    0.001    0.643    0.643 cprof_example.py:4(run_experiment)
   100    0.003    0.000    0.583    0.006 linalg.py:702(eigvals)
   200    0.569    0.003    0.569    0.003 {numpy.linalg.lapack_lite.dgeev}
   100    0.058    0.001    0.058    0.001 {method &#39;randn&#39;}
   100    0.003    0.000    0.005    0.000 linalg.py:162(_assertFinite)
   200    0.002    0.000    0.002    0.000 {method &#39;all&#39; of &#39;numpy.ndarray&#39;}

Similarly, calling %run -p -s cumulative cprof_example.py has the same effect as
the command-line approach, except you never have to leave IPython.

In  the  Jupyter  notebook,  you  can  use  the  %%prun  magic  (two  %  signs)  to  profile  an
entire code block. This pops up a separate window with the profile output. This can
be  useful  in  getting  possibly  quick  answers  to  questions  like,  Why  did  that  code
block take so long to run?

More on the IPython System 

| 

495

There are other tools available that help make profiles easier to understand when you
are using IPython or Jupyter. One of these is SnakeViz, which produces an interactive
visualization of the profile results using d3.js.

Profiling a Function Line by Line
In  some  cases  the  information  you  obtain  from  %prun  (or  another  cProfile-based
profile method) may not tell the whole story about a functions execution time, or it
may be so complex that the results, aggregated by function name, are hard to inter
pret. For this case, there is a small library called line_profiler (obtainable via PyPI
or one of the package management tools). It contains an IPython extension enabling
a new magic function %lprun that computes a line-by-line-profiling of one or more
functions.  You  can  enable  this  extension  by  modifying  your  IPython  configuration
(see the IPython documentation or the section on configuration later in this chapter)
to include the following line:

# A list of dotted module names of IPython extensions to load.
c.TerminalIPythonApp.extensions = [&#39;line_profiler&#39;]

You can also run the command:

%load_ext line_profiler

line_profiler can be used programmatically (see the full documentation), but it is
perhaps most powerful when used interactively in IPython. Suppose you had a mod
ule prof_mod with the following code doing some NumPy array operations:

from numpy.random import randn

def add_and_sum(x, y):
    added = x + y
    summed = added.sum(axis=1)
    return summed

def call_function():
    x = randn(1000, 1000)
    y = randn(1000, 1000)
    return add_and_sum(x, y)

If  we  wanted  to  understand  the  performance  of  the  add_and_sum  function,  %prun
gives us the following:

In [569]: %run prof_mod

In [570]: x = randn(3000, 3000)

In [571]: y = randn(3000, 3000)

In [572]: %prun add_and_sum(x, y)
         4 function calls in 0.049 seconds

496 

|  Appendix B: More on the IPython System

   Ordered by: internal time
   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.036    0.036    0.046    0.046 prof_mod.py:3(add_and_sum)
        1    0.009    0.009    0.009    0.009 {method &#39;sum&#39; of &#39;numpy.ndarray&#39;}
        1    0.003    0.003    0.049    0.049 &lt;string&gt;:1(&lt;module&gt;)

This is not especially enlightening. With the line_profiler IPython extension acti
vated,  a  new  command  %lprun  is  available.  The  only  difference  in  usage  is  that  we
must  instruct  %lprun  which  function  or  functions  we  wish  to  profile.  The  general
syntax is:

%lprun -f func1 -f func2 statement_to_profile

In this case, we want to profile add_and_sum, so we run:

In [573]: %lprun -f add_and_sum add_and_sum(x, y)
Timer unit: 1e-06 s
File: prof_mod.py
Function: add_and_sum at line 3
Total time: 0.045936 s
Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     3                                           def add_and_sum(x, y):
     4         1        36510  36510.0     79.5      added = x + y
     5         1         9425   9425.0     20.5      summed = added.sum(axis=1)
     6         1            1      1.0      0.0      return summed

This can be much easier to interpret. In this case we profiled the same function we
used  in  the  statement.  Looking  at  the  preceding  module  code,  we  could  call
call_function and profile that as well as add_and_sum, thus getting a full picture of
the performance of the code:

In [574]: %lprun -f add_and_sum -f call_function call_function()
Timer unit: 1e-06 s
File: prof_mod.py
Function: add_and_sum at line 3
Total time: 0.005526 s
Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     3                                           def add_and_sum(x, y):
     4         1         4375   4375.0     79.2      added = x + y
     5         1         1149   1149.0     20.8      summed = added.sum(axis=1)
     6         1            2      2.0      0.0      return summed
File: prof_mod.py
Function: call_function at line 8
Total time: 0.121016 s
Line #      Hits         Time  Per Hit   % Time  Line Contents
==============================================================
     8                                           def call_function():
     9         1        57169  57169.0     47.2      x = randn(1000, 1000)
    10         1        58304  58304.0     48.2      y = randn(1000, 1000)
    11         1         5543   5543.0      4.6      return add_and_sum(x, y)

More on the IPython System 

| 

497

As a general rule of thumb, I tend to prefer %prun (cProfile) for macro profiling
and  %lprun  (line_profiler)  for  micro  profiling.  Its  worthwhile  to  have  a  good
understanding of both tools.

The reason that you must explicitly specify the names of the func
tions you want to profile with %lprun is that the overhead of trac
ing  the  execution  time  of  each  line  is  substantial.  Tracing
functions  that  are  not  of  interest  has  the  potential  to  significantly
alter the profile results.

B.4 Tips for Productive Code Development Using IPython
Writing code in a way that makes it easy to develop, debug, and ultimately use inter
actively  may  be  a  paradigm  shift  for  many  users.  There  are  procedural  details  like
code reloading that may require some adjustment as well as coding style concerns.

Therefore, implementing most of the strategies described in this section is more of an
art than a science and will require some experimentation on your part to determine a
way to write your Python code that is effective for you. Ultimately you want to struc
ture your code in a way that makes it easy to use iteratively and to be able to explore
the results of running a program or function as effortlessly as possible. I have found
software designed with IPython in mind to be easier to work with than code intended
only  to  be  run  as  as  standalone  command-line  application.  This  becomes  especially
important  when  something  goes  wrong  and  you  have  to  diagnose  an  error  in  code
that you or someone else might have written months or years beforehand.

Reloading Module Dependencies
In Python, when you type import some_lib, the code in some_lib is executed and all
the variables, functions, and imports defined within are stored in the newly created
some_lib module namespace. The next time you type import some_lib, you will get
a reference to the existing module namespace. The potential difficulty in interactive
IPython code development comes when you, say, %run a script that depends on some
other module where you may have made changes. Suppose I had the following code
in test_script.py:

import some_lib

x = 5
y = [1, 2, 3, 4]
result = some_lib.get_answer(x, y)

If you were to execute %run test_script.py then modify some_lib.py, the next time
you  execute  %run  test_script.py  you  will  still  get  the  old  version  of  some_lib.py
because  of  Pythons  load-once  module  system.  This  behavior  differs  from  some

498 

|  Appendix B: More on the IPython System

other data analysis environments, like MATLAB, which automatically propagate code
changes.1 To cope with this, you have a couple of options. The first way is to use the
reload function in the importlib module in the standard library:

import some_lib
import importlib

importlib.reload(some_lib)

This  guarantees  that  you  will  get  a  fresh  copy  of  some_lib.py  every  time  you  run
test_script.py. Obviously, if the dependencies go deeper, it might be a bit tricky to be
inserting usages of reload all over the place. For this problem, IPython has a special
dreload function (not a magic function) for deep (recursive) reloading of modules.
If  I  were  to  run  some_lib.py  then  type  dreload(some_lib),  it  will  attempt  to  reload
some_lib as well as all of its dependencies. This will not work in all cases, unfortu
nately, but when it does it beats having to restart IPython.

Code Design Tips
Theres no simple recipe for this, but here are some high-level principles I have found
effective in my own work.

Keep relevant objects and data alive

Its not unusual to see a program written for the command line with a structure some
what like the following trivial example:

from my_functions import g

def f(x, y):
    return g(x + y)

def main():
    x = 6
    y = 7.5
    result = x + y

if __name__ == &#39;__main__&#39;:
    main()

Do you see what might go wrong if we were to run this program in IPython? After its
done, none of the results or objects defined in the main function will be accessible in
the IPython shell. A better way is to have whatever code is in main execute directly in
the modules global namespace (or in the if __name__ == &#39;__main__&#39;: block, if you

1 Since a module or package may be imported in many different places in a particular program, Python caches a
modules code the first time it is imported rather than executing the code in the module every time. Other
wise, modularity and good code organization could potentially cause inefficiency in an application.

More on the IPython System 

| 

499

want the module to also be importable). That way, when you %run the code, youll be
able to look at all of the variables defined in main. This is equivalent to defining top-
level variables in cells in the Jupyter notebook.

Flat is better than nested

Deeply nested code makes me think about the many layers of an onion. When testing
or debugging a function, how many layers of the onion must you peel back in order
to reach the code of interest? The idea that flat is better than nested is a part of the
Zen of Python, and it applies generally to developing code for interactive use as well.
Making functions and classes as decoupled and modular as possible makes them eas
ier to test (if you are writing unit tests), debug, and use interactively.

Overcome a fear of longer files

If you come from a Java (or another such language) background, you may have been
told to keep files short. In many languages, this is sound advice; long length is usually
a bad code smell, indicating refactoring or reorganization may be necessary. How
ever, while developing code using IPython, working with 10 small but interconnected
files (under, say, 100 lines each) is likely to cause you more headaches in general than
two or three longer files. Fewer files means fewer modules to reload and less jumping
between files while editing, too. I have found maintaining larger modules, each with
high internal cohesion, to be much more useful and Pythonic. After iterating toward
a solution, it sometimes will make sense to refactor larger files into smaller ones.

Obviously, I dont support taking this argument to the extreme, which would to be to
put all of your code in a single monstrous file. Finding a sensible and intuitive mod
ule and package structure for a large codebase often takes a bit of work, but it is espe
cially important to get right in teams. Each module should be internally cohesive, and
it should be as obvious as possible where to find functions and classes responsible for
each area of functionality.

B.5 Advanced IPython Features
Making full use of the IPython system may lead you to write your code in a slightly
different way, or to dig into the configuration.

Making Your Own Classes IPython-Friendly
IPython makes every effort to display a console-friendly string representation of any
object  that  you  inspect.  For  many  objects,  like  dicts,  lists,  and  tuples,  the  built-in
pprint  module  is  used  to  do  the  nice  formatting.  In  user-defined  classes,  however,
you have to generate the desired string output yourself. Suppose we had the following
simple class:

500 

|  Appendix B: More on the IPython System

class Message:
    def __init__(self, msg):
        self.msg = msg

If you wrote this, you would be disappointed to discover that the default output for
your class isnt very nice:

In [576]: x = Message(&#39;I have a secret&#39;)

In [577]: x
Out[577]: &lt;__main__.Message instance at 0x60ebbd8&gt;

IPython takes the string returned by the __repr__ magic method (by doing output =
repr(obj))  and  prints  that  to  the  console.  Thus,  we  can  add  a  simple  __repr__
method to the preceding class to get a more helpful output:

class Message:
    def __init__(self, msg):
        self.msg = msg

    def __repr__(self):
        return &#39;Message: %s&#39; % self.msg

In [579]: x = Message(&#39;I have a secret&#39;)

In [580]: x
Out[580]: Message: I have a secret

Profiles and Configuration
Most  aspects  of  the  appearance  (colors,  prompt,  spacing  between  lines,  etc.)  and
behavior  of  the  IPython  and  Jupyter  environments  are  configurable  through  an
extensive configuration system. Here are some things you can do via configuration:

 Change the color scheme

 Change how the input and output prompts look, or remove the blank line after

Out and before the next In prompt

 Execute an arbitrary list of Python statements (e.g., imports that you use all the

time or anything else you want to happen each time you launch IPython)

 Enable always-on IPython extensions, like the %lprun magic in line_profiler

 Enabling Jupyter extensions

 Define your own magics or system aliases

Configurations  for  the  IPython  shell  are  specified  in  special  ipython_config.py  files,
which are usually found in the .ipython/ directory in your user home directory. Con
figuration  is  performed  based  on  a  particular  profile.  When  you  start  IPython  nor
mally,  you  load  up,  by  default,  the  default  profile,  stored  in  the  profile_default

More on the IPython System 

| 

501

directory.  Thus,  on  my  Linux  OS  the  full  path  to  my  default  IPython  configuration
file is:

/home/wesm/.ipython/profile_default/ipython_config.py

To initialize this file on your system, run in the terminal:

ipython profile create

Ill  spare  you  the  gory  details  of  whats  in  this  file.  Fortunately  it  has  comments
describing  what  each  configuration  option  is  for,  so  I  will  leave  it  to  the  reader  to
tinker and customize. One additional useful feature is that its possible to have multi
ple profiles. Suppose you wanted to have an alternative IPython configuration tailored
for  a  particular  application  or  project.  Creating  a  new  profile  is  as  simple  as  typing
something like the following:

ipython profile create secret_project

Once youve done this, edit the config files in the newly created profile_secret_project
directory and then launch IPython like so:

$ ipython --profile=secret_project
Python 3.5.1 | packaged by conda-forge | (default, May 20 2016, 05:22:56)
Type &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.

IPython 5.1.0 -- An enhanced Interactive Python.
?         -&gt; Introduction and overview of IPython&#39;s features.
%quickref -&gt; Quick reference.
help      -&gt; Python&#39;s own help system.
object?   -&gt; Details about &#39;object&#39;, use &#39;object??&#39; for extra details.

IPython profile: secret_project

As  always,  the  online  IPython  documentation  is  an  excellent  resource  for  more  on
profiles and configuration.

Configuration for Jupyter works a little differently because you can use its notebooks
with languages other than Python. To create an analogous Jupyter config file, run:

jupyter notebook --generate-config

This writes a default config file to the .jupyter/jupyter_notebook_config.py directory in
your  home  directory.  After  editing  this  to  suit  your  needs,  you  may  rename  it  to  a
different file, like:

$ mv ~/.jupyter/jupyter_notebook_config.py ~/.jupyter/my_custom_config.py

When launching Jupyter, you can then add the --config argument:

jupyter notebook --config=~/.jupyter/my_custom_config.py

502 

|  Appendix B: More on the IPython System

B.6 Conclusion
As you work through the code examples in this book and grow your skills as a Python
programmer, I encourage you to keep learning about the IPython and Jupyter ecosys
tems. Since these projects have been designed to assist user productivity, you may dis
cover  tools  that  enable  you  to  do  your  work  more  easily  than  using  the  Python
language and its computational libraries by themselves.

You can also find a wealth of interesting Jupyter notebooks on the nbviewer website.

More on the IPython System 

| 

503

Index

| operator, 37, 65-66, 101
|= operator, 66
~ operator, 101

A
%a datetime format, 321
%A datetime format, 321
a(rgs) debugger command, 490
abs function, 107, 121
accumulate method, 466
accumulations, 159
add binary function, 107
add method, 66, 149
add_categories method, 372
add_constant function, 394
add_patch method, 266
add_subplot method, 255
aggfunc method, 315
aggregate (agg) method, 297, 374
aggregations (reductions), 111
%alias magic function, 485-486
all method, 113, 466
and keyword, 21, 43, 101
annotate function, 265
annotating in matplotlib, 265-267
anonymous (lambda) functions, 73
any built-in function, 21
any method, 113, 122, 206
Apache Parquet format, 186
APIs, pandas interacting with, 187
append method, 55, 136
append mode for files, 82
apply method, 152, 164, 302-312, 373-376
applymap method, 153

505

Symbols
! (exclamation point), 486
!= operator, 38, 100, 108
# (hash mark), 31
% (percent sign), 28, 495
%matplotlib magic function, 254
&amp; operator, 37, 65, 66, 101
&amp;= operator, 66
() (parentheses), 32, 51
* (asterisk), 24
* operator, 37
** operator, 37
+ operator, 37, 52, 56
- operator, 37, 66
-= operator, 66
. (period), 21
/ operator, 37
// operator, 37, 39
: (colon), 31
; (semicolon), 31
&lt; operator, 38, 108
&lt;= operator, 38, 108
== operator, 38, 108
&gt; operator, 38, 108
&gt;= operator, 38, 108
&gt;&gt;&gt; prompt, 16
? (question mark), 23-24
@ symbol, 116
[] (square brackets), 52, 54
\ (backslash), 41, 216
^ operator, 37, 66
^= operator, 66
_ (underscore), 22, 54, 451, 484
{} (curly braces), 61, 65

arange function, 14, 90
arccos function, 107
arccosh function, 107
arcsin function, 107
arcsinh function, 107
arctan function, 107
arctanh function, 107
argmax method, 112, 121, 160
argmin method, 112, 160
argpartition method, 474
argsort method, 472, 475
arithmetic operations

between DataFrame and Series, 149
between objects with different indexes, 146
on date and time periods, 339-347
with fill values, 148
with NumPy arrays, 93

array function, 88, 90
arrays (see ndarray object)
arrow function, 265
as keyword, 36
asarray function, 90
asfreq method, 340, 352
assign method, 379
associative arrays (see dicts)
asterisk (*), 24
astype method, 92
as_ordered methdo, 372
as_ordered method, 367
as_unordered method, 372
attributes

for data types, 469
for ndarrays, 89, 453, 463, 481
hidden, 22
in DataFrame data structure, 130
in Python, 35, 161
in Series data structure, 127

automagic feature, 29
%automagic magic function, 29
average method, 156
axes

broadcasting over, 462
concatenating along, 227, 236-241
renaming indexes for, 201
selecting indexes with duplicate labels, 157
swapping in arrays, 103
AxesSubplot object, 256, 262
axis method, 159

506 

| 

Index

B
%b datetime format, 321
%B datetime format, 321
b(reak) debugger command, 490
backslash (\), 41, 216
bang (!), 486
bar method, 272
bar plots, 272-277
barh method, 272
barplot function, 277
base frequency, 330
bcolz binary format, 184
beta function, 119
binary data formats
about, 183
binary mode for files, 82-83
HDF5 format, 184-186
Microsoft Excel files, 186-187
binary moving window functions, 359
binary operators and comparisons in Python,

36, 65

binary searches of lists, 57
binary universal functions, 106, 107
binding, defined, 33, 236
binning continuous data, 203
binomial function, 119
bisect module, 57
Bitly dataset example, 403-413
Blosc compression library, 184
Bokeh tool, 285
%bookmark magic function, 485, 487
bookmarking directories in IPython, 487
bool data type, 39, 43, 91
bool function, 43
boolean arrays, 113
boolean indexing, 99-102
braces {}, 61, 65
break keyword, 47
broadcasting, ndarrays and, 94, 457, 460-465
bucket analysis, 305
build_design_matrices function, 389
builtins module, 390
bytes data type, 39, 43

C
%C datetime format, 321
C order (row major order), 454, 481
c(ontinue) debugger command, 490
calendar module, 318

Cartesian product, 77, 230
casefold method, 213
cat method, 218
categorical data

basic overview, 363-372
facet grids and, 283
Patsy library and, 390-393

Categorical object, 203, 305, 363-372
%cd magic function, 485, 487
ceil function, 107
center method, 219
chaining methods, 378-380
chisquare function, 119
clear method, 66
clipboard, executing code from, 26
close method, 80, 83
closed attribute, 83
!cmd command, 485
collections module, 64
colon (:), 31
color selection in matplotlib, 259
column major order (Fortran order), 454, 481
columns method, 315
column_stack function, 456
combinations function, 77
combine_first method, 227, 242
combining data (see merging data)
command history

input and output variables, 484
reusing, 483
searching, 483
using in IPython, 483-485

commands

debugger, 490
magic functions, 28-29
updating packages, 10
comments in Python, 31
compile method, 214
complex128 data type, 91
complex256 data type, 91
complex64 data type, 91
concat function, 227, 235, 237-241, 300
concatenate function, 236, 454
concatenating

along an axis, 227, 236-241
lists, 56
strings, 41

conda update command, 10
conditional logic as array operations, 109

configuration for IPython, 501-502
configuring matplotlib, 268
contains method, 218
contiguous memory, 480-482
continue keyword, 47
continuing education, 401
control flow in Python, 46-50
coordinated universal time (UTC), 335
copy method, 95, 132
copysign function, 107
corr aggregation function, 359
corr method, 161
correlation, 160-162, 310
corrwith method, 162
cos function, 107
cosh function, 107
count method, 40, 54, 160, 212-213, 218, 296
cov method, 161
covariance, 160-162
%cpaste magic function, 26, 29
cProfile module, 494-496
cross-tabulation, 315
crosstab function, 316
cross_val_score function, 401
CSV files, 168, 175-178
csv module, 176
Ctrl-A keyboard shortcut, 27
Ctrl-B keyboard shortcut, 27
Ctrl-C keyboard shortcut, 26, 27
Ctrl-D keyboard shortcut, 16
Ctrl-E keyboard shortcut, 27
Ctrl-F keyboard shortcut, 27
Ctrl-K keyboard shortcut, 27
Ctrl-L keyboard shortcut, 27
Ctrl-N keyboard shortcut, 27, 484
Ctrl-P keyboard shortcut, 27, 483
Ctrl-R keyboard shortcut, 27, 484
Ctrl-Shift-V keyboard shortcut, 27
Ctrl-U keyboard shortcut, 27
cummax method, 160
cummin method, 160
cumprod method, 112, 160
cumsum method, 112, 160, 466
curly braces {}, 61, 65
currying, 74
cut function, 203, 305
c_ object, 456

Index 

| 

507

D
%d datetime format, 46, 319
%D datetime format, 46, 320
d(own) debugger command, 490
data aggregation
about, 296
column-wise, 298-301
multiple function application, 298-301
returning data without row indexes, 301
data alignment, pandas library and, 146-151
data analysis with Python

about, 2, 15-16
glue code, 2
MovieLens 1M dataset example, 413-419
restrictions to consider, 3
US baby names dataset example, 419-434
US Federal Election Commission database

example, 440-448

USA.gov data from Bitly example, 403-413
USDA food database example, 434-439
two-language problem, 3

data cleaning and preparation (see data wran

gling)

data loading (see reading data)
data manipulation (see data wrangling)
data munging (see data wrangling)
data selection

for axis indexes with duplicate labels, 157
in pandas library, 140-145
time series data, 323

data structures
about, 51
dict comprehensions, 67
dicts, 61-65
for pandas library, 124-136
list comprehensions, 67-69
lists, 54-59
set comprehensions, 68
sets, 65-67
tuples, 51-54

data transformation (see transforming data)
data types

attributes for, 469
defined, 90, 449
for date and time data, 318
for ndarrays, 90-93
in Python, 38-46
nested, 469
NumPy hierarchy, 450

508 

| 

Index

parent classes of, 450

data wrangling

combining and merging datasets, 227-242
defined, 14
handling missing data, 191-197
hierarchical indexing, 221-226, 243
pivoting data, 246-250
reshaping data, 243
string manipulation, 211-219
transforming data, 197-211
working with delimited formats, 176-178

databases

DataFrame joins, 227-232
pandas interacting with, 188
storing data in, 247
DataFrame data structure
about, 4, 128-134, 470
database-stye joins, 227-232
indexing with columns, 225
JSON data and, 180
operations between Series and, 149
optional function arguments, 168
plot method arguments, 271
possible data inputs to, 134
ranking data in, 155
sorting considerations, 153, 473
summary statistics methods for, 161

DataOffset object, 338
datasets

combining and merging, 227-242
MovieLens 1M example, 413-419
US baby names example, 419-434
US Federal Election Commission database

example, 440-448

USA.gov data from Bitly example, 403-413
USDA food database example, 434-439

date data type, 44, 319
date offsets, 330, 333-334
date ranges, generating, 328-330
dates and times
about, 44
converting between strings and datetime,

319-321

data types and tools, 318
formatting specifications, 319, 321
generating date ranges, 328-330
period arithmetic and, 339-347

datetime data type

about, 44, 318-319

converting between strings and, 319-321
format specification for, 319

datetime module, 44, 318
datetime64 data type, 322
DatetimeIndex class, 322, 328, 337
dateutil package, 320
date_range function, 328-330
daylight saving time (DST), 335
debug function, 491
%debug magic function, 80, 488
debugger, IPython, 488-492
decode method, 42
def keyword, 69, 74
default values for dicts, 63
defaultdict class, 64
del keyword, 62, 132
del method, 132
delete method, 136
delimited formats, working with, 176-178
dense method, 156
density plots, 277-279
deque (double-ended queue), 55
describe method, 160, 297
design matrix, 386
det function, 117
development tools for IPython (see software

development tools for IPython)

%dhist magic function, 486
diag function, 117
Dialect class, 177
dict comprehensions, 67
dict function, 63
dictionary-encoded representation, 365
dicts (data structures)

about, 61
creating from sequences, 63
DataFrame data structure as, 129
default values, 63
grouping with, 294
Series data structure as, 125
valid key types, 64

diff method, 160
difference method, 66, 136
difference_update method, 66
dimension tables, 364
directories, bookmarking in IPython, 487
%dirs magic function, 485
discretization, 203
distplot method, 279

div method, 149
divide function, 107
divmod function, 106
dmatrices function, 386
dnorm function, 394
dot function, 104, 116-117
downsampling, 348, 349-351
dreload function, 499
drop method, 136, 138
dropna method, 192-193, 306, 315
drop_duplicates method, 197
DST (daylight saving time), 335
dstack function, 456
dtype (see data types)
dtype attribute, 88, 92
duck typing, 35
dummy variables, 208-211, 372, 386, 391
dumps function, 179
duplicate data

axis indexes with duplicate labels, 157
removing, 197
time series with duplicate indexes, 326

duplicated method, 197
dynamic references in Python, 33

E
edit-compile-run workflow, 6
education, continuing, 401
eig function, 118
elif statement, 46
else statement, 46
empty function, 89-90
empty namespace, 25
empty_like function, 90
encode method, 42
end-of-line (EOL) markers, 80
endswith method, 213, 218
enumerate function, 59
%env magic function, 486
EOL (end-of-line) markers, 80
equal function, 108
error handling in Python, 77-80
escape characters, 41
ewm function, 358
Excel files (Microsoft), 186-187
ExcelFile class, 186
exception handling in Python, 77-80
exclamation point (!), 486
execute-explore workflow, 6

Index 

| 

509

exit command, 16
exp function, 107
expanding function, 356
exponentially-weighted functions, 358
extend method, 56
extract method, 218
eye function, 90

F
%F datetime format, 46, 320
fabs function, 107
facet grids, 283
FacetGrid class, 285
factorplot built-in function, 283
fancy indexing, 102, 459
FDIC bank failures list, 180
Feather binary file format, 168, 184
feature engineering, 383
Federal Election Commission database exam

ple, 440-448
Figure object, 255
file management

binary data formats, 183-187
commonly used file methods, 82
design tips, 500
file input and output with arrays, 115
JSON data, 178-180
memory-mapped files, 478
opening files, 80
Python file modes, 82
reading and writing data in text format,

167-176

saving plots to files, 267
Web scraping, 180-183
working with delimited formats, 176-178

filling in data

arithmetic methods with fill values, 148
filling in missing data, 195-197, 200
with group-specific values, 306

fillna method, 192, 195-197, 200, 306, 352
fill_value method, 315
filtering

in pandas library, 140-145
missing data, 193
outliers, 205

find method, 212-213
findall method, 214, 216, 218
finditer method, 216
first method, 156, 296

510 

| 

Index

fit method, 395, 400
fixed frequency, 317
flags attribute, 481
flatten method, 453
float data type, 39, 43
float function, 43
float128 data type, 91
float16 data type, 91
float32 data type, 91
float64 data type, 91
floor function, 107
floordiv method, 149
floor_divide function, 107
flow control in Python, 46-50
flush method, 83, 479
fmax function, 107
fmin function, 107
for loops, 47, 68
format method, 41
formatting

dates and times, 319, 321
strings, 41

Fortran order (column major order), 454, 481
frequencies
base, 330
basic for time series, 329
converting between, 327, 348-354
date offsets and, 330
fixed, 317
period conversion, 340
quarterly period frequencies, 342

fromfile function, 471
frompyfunc function, 468
from_codes method, 367
full function, 90
full_like function, 90
functions, 69

(see also universal functions)
about, 69
accessing variables, 70
anonymous, 73
as objects, 72-73
currying, 74
errors and exception handling, 77
exponentially-weighted, 358
generators and, 75-80
grouping with, 295
in Python, 32
lambda, 73

magic, 28-29
namespaces and, 70
object introspection, 23
partial argument application, 74
profiling line by line, 496-498
returning multiple values, 71
sequence, 59-61
transforming data using, 198
type inference in, 168
writing fast NumPy functions with Numba,

476-478
functools module, 74

G
gamma function, 119
generators

about, 75
generator expressions for, 76
itertools module and, 76

get method, 63, 218
GET request (HTTP), 187
getattr function, 35
getroot method, 182
get_chunk method, 175
get_dummies function, 208, 372, 385
get_indexer method, 164
get_value method, 145
GIL (global interpreter lock), 3
global keyword, 71
glue for code, Python as, 2
greater function, 108
greater_equal function, 108
Greenwich Mean Time, 335
group keys, suppressing, 304
group operations

about, 287, 373
cross-tabulation, 315
data aggregation, 296-302
GroupBy mechanics, 288-296
pivot tables, 287, 313-316
split-apply-combine, 288, 302-312
unwrapped, 376

group weighted average, 310
groupby function, 77
groupby method, 368, 476
GroupBy object

about, 288-291
grouping by index level, 295
grouping with dicts, 294

grouping with functions, 295
grouping with Series, 294
iterating over groups, 291
optimized methods, 296
selecting columns, 293
selecting subset of columns, 293

groups method, 215

H
%H datetime format, 46, 319
h(elp) debugger command, 490
hasattr function, 35
hash function, 64
hash maps (see dicts)
hash mark (#), 31
hashability, 64
HDF5 (hierarchical data format 5), 184-186,

480

HDFStore class, 184
head method, 129
heapsort method, 474
hierarchical data format (HDF5), 480
hierarchical indexing
about, 221-224
in pandas, 170
reordering and sorting levels, 224
reshaping data with, 243
summary statistics by level, 225
with DataFrame columns, 225

%hist magic function, 29
hist method, 277
histograms, 277-279
hsplit function, 456
hstack function, 455
HTML files, 180-183
HTTP requests, 187
Hugunin, Jim, 86
Hunter, John D., 5, 253

I
%I datetime format, 46, 319
identity function, 90
IDEs (Integrated Development Environments),

11

idxmax method, 160
idxmin method, 160
if statement, 46
iloc operator, 143, 207
immutable objects, 38, 367

Index 

| 

511

import conventions

for matplotlib, 253
for modules, 14, 36
for Python, 14, 36, 88

importlib module, 499
imshow function, 109
in keyword, 56, 212
in-place sorts, 57, 471
in1d method, 114, 115
indentation in Python, 30
index method, 212-213, 315
Index objects, 134-136
indexes and indexing

axis indexes with duplicate labels, 157
boolean indexing, 99-102
fancy indexing, 102, 459
for ndarrays, 94-98
for pandas library, 140-145, 157
grouping by index level, 295
hierarchical indexing, 170, 221-226, 243
Index objects, 134-136
integer indexing, 145
merging on index, 232-235
renaming axis indexes, 201
time series data, 323
time series with duplicate indexes, 326
timedeltas and, 318

indexing operator, 58
indicator variables, 208-211
indirect sorts, 472
inner join type, 229
input variables, 484
insert method, 55, 136
insort function, 57
int data type, 39, 43
int function, 43
int16 data type, 91
int32 data type, 91
int64 data type, 91
int8 data type, 91
integer arrays, indexing, 102, 459
integer indexing, 145
Integrated Development Environments (IDEs),

11

interactive debugger, 488-492
interpreted languages, 2, 16
interrupting running code, 26
intersect1d method, 115
intersection method, 65-66, 136

512 

| 

Index

intersection_update method, 66
intervals of time, 317
inv function, 118
.ipynb file extension, 20
IPython

%run command and, 17
%run command in, 25-26
about, 6
advanced features, 500-502
bookmarking directories, 487
code development tips, 498-500
command history in, 483-485
exception handling in, 79
executing code from clipboard, 26
figures and subplots, 255
interacting with operating system, 485-487
keyboard shortcuts for, 27
magic commands in, 28-29
matplotlib integration, 29
object introspection, 23-24
running Jupyter notebook, 18-20
running shell, 17-18
shell commands in, 486
software development tools, 487-498
tab completion in, 21-23

ipython command, 17-18
is keyword, 38
is not keyword, 38
isalnum method, 218
isalpha method, 218
isdecimal method, 218
isdigit method, 218
isdisjoint method, 66
isfinite function, 107
isin method, 136, 163
isinf function, 107
isinstance function, 34
islower method, 218
isnan function, 107
isnull method, 126, 192
isnumeric method, 218
issubdtype function, 450
issubset method, 66
issuperset method, 66
isupper method, 218
is_monotonic property, 136
is_unique property, 136, 157, 326
iter function, 35
__iter__ magic method, 35

iterator protocol, 35, 75-77
itertools module, 76

J
jit function, 477
join method, 212-213, 218, 235
join operations, 227-232
JSON (JavaScript Object Notation), 178-180,

403

json method, 187
Jupyter notebook

%load magic function, 25
about, 6
plotting nuances, 256
running, 18-20

jupyter notebook command, 19

K
KDE (kernel density estimate) plots, 278
kernels, defined, 6, 18
key-value pairs, 61
keyboard shortcuts for IPython, 27
KeyboardInterrupt exception, 26
KeyError exception, 66
keys method, 62
keyword arguments, 32, 70
kurt method, 160

L
l(ist) debugger command, 490
labels

axis indexes with duplicate labels, 157
selecting in matplotlib, 261-263

lagging data, 332
lambda (anonymous) functions, 73
language semantics for Python

about, 30
attributes, 35
binary operators and comparisons, 36, 65
comments, 31
duck typing, 35
function and object method calls, 32
import conventions, 36
indentation not braces, 30
methods, 35
mutable and immutable objects, 38
object model, 31
references, 32-34

strongly typed language, 33
variables and argument passing, 32

last method, 296
leading data, 332
left join type, 229
legend method, 264
legend selection in matplotlib, 261-265
len function, 295
len method, 218
less function, 108
less_equal function, 108
level keyword, 296
level method, 159
levels

grouping by index levels, 295
sorting, 224
summary statistics by, 225

lexsort method, 473
libraries (see specific libraries)
line plots, 269-271
line style selection in matplotlib, 260
linear algebra, 116-118
linear regression, 312, 393-396
Linux, setting up Python on, 9
list comprehensions, 67-69
list function, 37, 54
lists (data structures)

about, 54
adding and removing elements, 55
combining, 56
concatenating, 56
maintaining sorted lists, 57
slicing, 58
sorting, 57

lists (data structures)binary searches, 57
ljust method, 213
load function, 115, 478
%load magic function, 25
loads function, 179
loc operator, 130, 143, 265, 385
local namespace, 70, 123
localizing data to time zones, 335
log function, 107
log10 function, 107
log1p function, 107
log2 function, 107
logical_and function, 108, 466
logical_not function, 107
logical_or function, 108

Index 

| 

513

logical_xor function, 108
LogisticRegression class, 399
LogisticRegressionCV class, 400
long format, 246
lower method, 199, 213, 218
%lprun magic function, 496
lstrip method, 213, 219
lstsq function, 118
lxml library, 180-183

M
%m datetime format, 46, 319
%M datetime format, 46, 319
mad method, 160
magic functions, 28-29

(see also specific magic functions)

%debug magic function, 29
%magic magic function, 29
many-to-many merge, 229
many-to-one join, 228
map built-in function, 68, 73
map method, 153, 199, 202
mapping

transforming data using, 198
universal functions, 151-156

margins method, 315
margins, defined, 313
marker selection in matplotlib, 260
match method, 164, 214, 216, 219
Math Kernel Library (MKL), 117
matplotlib library
about, 5, 253
annotations in, 265-267
color selection in, 259
configuring, 268
creating image plots, 109
figures in, 255-259
import convention, 253
integration with IPython, 29
label selection in, 261-263
legend selection in, 261-265
line style selection in, 260
marker selection in, 260
saving plots to files, 267
subplots in, 255-259, 265-267
tick mark selection in, 261-263
%matplotlib magic function, 30, 486
matrix operations in NumPy, 104, 116
max method, 112, 156, 160, 296

514 

| 

Index

maximum function, 107
mean method, 112, 160, 289, 296
median method, 160, 296
melt method, 249
memmap object, 478
memory management

C versus Fortran order, 454
continguous memory, 480-482
NumPy-based algorithms and, 87

memory-mapped files, 478
merge function, 227-232
mergesort method, 474
merging data

combining data with overlap, 241
concatenating along an axis, 236-241
database-stye DataFrame joins, 227-232
merging on index, 232-235

meshgrid function, 108
methods

categorical, 370-372
chaining, 378-380
defined, 32
for boolean arrays, 113
for strings, 211-213
for summary statistics, 162-165
for tuples, 54
hidden, 22
in Python, 32, 35
object introspection, 23
optimized for GroupBy, 296
statistical, 111-112
ufunc instance methods, 466-468
vectorized string methods in pandas,

216-219

Microsoft Excel files, 186-187
min method, 112, 156, 160, 296
minimum function, 107
missing data

about, 191
filling in, 195-197, 200
filling with group-specific values, 306
filtering out, 193
marked by sentinel values, 171, 191
sorting considerations, 154
mixture-of-normals estimate, 278
MKL (Math Kernel Library), 117
mod function, 107
modf function, 106-107
modules

import conventions for, 14, 36
reloading dependencies, 498

MovieLens 1M dataset example, 413-419
moving window functions

about, 354-357
binary, 359
exponentially-weighted functions, 358
user-defined, 361

mro method, 450
MSFT attribute, 161
mul method, 149
multiply function, 107
munging (see data wrangling)
mutable objects, 38

N
n(ext) debugger command, 490
NA data type, 192
name attribute, 127, 130
names attribute, 100, 469
namespaces

empty, 25
functions and, 70
in Python, 34
NumPy, 88

NaN (Not a Number), 107, 126, 191
NaT (Not a Time), 321
ndarray object

about, 85, 87-88
advanced input and output, 478-480
arithmetic with, 93
array-oriented programming, 108-115
as structured arrays, 469-471
attributes for, 89, 453, 463, 481
boolean indexing, 99-102
broadcasting and, 94, 457, 460-465
C versus Fortan order, 454
C versus Fortran order, 481
concatenating arrays, 454
creating, 88-90
creating PeriodIndex from arrays, 345
data types for, 90-93
fancy indexing, 102, 459
file input and output, 115
finding elements in sorted arrays, 475
indexes for, 94-98
internals overview, 449-451
linear algebra and, 116-118
partially sorting arrays, 474

pseudorandom number generation, 118-119
random walks example, 119-122
repeating elements in, 457
reshaping arrays, 103, 452
slicing arrays, 94-98
sorting considerations, 113, 471
splitting arrays, 455
storage options, 480
swapping axes in, 103
transposing arrays, 103

ndim attribute, 89
nested code, 500
nested data types, 469
nested list comprehensions, 68-69
nested tuples, 53
New York MTA (Metropolitan Transportation

Authority), 181
newaxis attribute, 463
no-op statement, 48
None data type, 39, 44, 192
normal function, 119
not keyword, 56
notfull method, 192
notnull method, 126
not_equal function, 108
.npy file extension, 115
.npz file extension, 115
null value, 39, 44, 178
Numba

creating custom ufunc objects with, 478
writing fast NumPy functions with, 476-478

numeric data types, 39
NumPy library

about, 4, 85-87
advanced array input and output, 478-480
advanced array manipulation, 451-459
advanced ufunc usage, 466-469
array-oriented programming, 108-115
arrays and broadcasting, 460-465
file input and output with arrays, 115
linear algebra and, 116-118
ndarray object internals, 449-451
ndarray object overview, 87-105
performance tips, 480-482
pseudorandom number generation, 118-119
random walks example, 119-122
sorting considerations, 113, 471-476
structured and record arrays, 469-471
ufunc overview, 105-108

Index 

| 

515

writing fast functions with Numba, 476-478

O
object data type, 91
object introspection, 23-24
object model, 31
objectify function, 181-183
objects (see Python objects)
OHLC (Open-High-Low-Close) resampling,

351

ohlc aggregate function, 351
Oliphant, Travis, 86
OLS (ordinary least squares) regression, 312,

388

OLS class, 395
Olson database, 335
ones function, 89-90
ones_like function, 90
open built-in function, 80, 83
openpyxl package, 186
operating system, IPython interacting with,

485-487

or keyword, 43, 101
OS X, setting up Python on, 9
outer method, 467
outliers, detecting and filtering, 205
output join type, 229
output variables, 484

P
%p datetime format, 321
packages, installing or updating, 10
pad method, 219
%page magic function, 29
pairplot function, 281
pairs plot, 281
pandas library, 4

(see also data wrangling)
about, 4, 123
arithmetic and data alignment, 146-151
as time zone naive, 335
binary data formats, 183-187
categorical data and, 363-372
data structures for, 124-136
drop method, 138
filtering in, 140-145
function application and mapping, 151
group operations and, 373-378
indexes in, 140-145, 157

516 

| 

Index

integer indexing, 145
interacting with databases, 188
interacting with Web APIs, 187
interfacing with model code, 383
JSON data, 178-180
method chaining, 378-380
nested data types and, 470
plotting with, 268-285
ranking data in, 153-156
reading and writing data in text format,

167-176

reductions in, 158-165
reindex method, 136-138
selecting data in, 140-145
sorting considerations, 153-156, 473, 476
summary statistics in, 158-165
vectorized string methods in, 216-219
Web scraping, 180-183
working with delimited formats, 176-178

pandas-datareader package, 160
parentheses (), 32, 51
parse method, 186, 320
partial argument application, 74
partial function, 74
partition method, 474
pass statement, 48
%paste magic function, 26, 29
patches, defined, 266
Patsy library

about, 386
categorical data and, 390-393
creating model descriptions with, 386-388
data transformations in Patsy formulas, 389

pct_change method, 160, 311
%pdb magic function, 29, 80, 489
percent sign (%), 28, 495
percentileofscore function, 361
Prez, Fernando, 6
period (.), 21
Period class, 339
PeriodIndex class, 340, 345
periods of dates and times

about, 339
converting frequencies, 340
converting timestamps to/from, 344
creating PeriodIndex from arrays, 345
fixed periods, 317
quarterly period frequencies, 342
resampling with, 353

period_range function, 340, 343
Perktold, Josef, 8
permutation function, 119, 206
permutations function, 77
pickle module, 183
pinv function, 118
pip tool, 10, 180
pipe method, 380
pivot method, 247
pivot tables, 287, 313-316
pivoting data, 246-250
pivot_table method, 313
plot function, 259
plot method, 269-271
Plotly tool, 285
plotting

with matplotlib, 253-268
with pandas and seaborn, 268-285

point plots, 280
pop method, 55, 62-63, 66
%popd magic function, 485
positional arguments, 32, 70
pound sign (#), 31
pow method, 149
power function, 107
pprint module, 500
predict method, 400
preparation, data (see data wrangling)
private attributes, 22
private methods, 22
prod method, 160, 296
product function, 77
profiles for IPython, 501-502
profiling code in IPython, 494-496
profiling functions line by line, 496-498
%prun magic function, 29, 495-496
pseudocode, 14, 30
pseudorandom number generation, 118-119
%pushd magic function, 485
put method, 459
%pwd magic function, 485
.py file extension, 16, 36
pyplot module, 261
Python

community and conferences, 12
control flow, 46-50
data analysis with, 2-3, 15-16
essential libraries, 4-8
historical background, 11

import conventions, 14, 36, 88
installation and setup, 8-12
interpreter for, 16
language semantics, 30-38
scalar types, 38-46
python command, 16
Python objects

attributes and methods, 35
converting to strings, 40
defined, 31
formatting, 18
functions as, 72-73
key-value pairs, 61

pytz library, 335

Q
q(uit) debugger command, 490
qcut function, 204, 305, 368
qr function, 118
quantile analysis, 305
quantile method, 160, 296
quarterly period frequencies, 342
question mark (?), 23-24
%quickref magic function, 29
quicksort method, 474
quotation marks in strings, 39

R
r character prefacing quotes, 41
R language, 5, 8, 192
radd method, 149
rand function, 119
randint function, 119
randn function, 99, 119
random module, 118-122
random number generation, 118-119
random sampling and permutation, 308
random walks example, 119-122
RandomState class, 119
range function, 48, 90
rank method, 155
ranking data in pandas library, 153-156
ravel method, 453
rc method, 268
rdiv method, 149
re module, 72, 213
read method, 81-82
read-and-write mode for files, 82
read-only mode for files, 82

Index 

| 

517

reading data

in Microsoft Excel files, 186-187
in text format, 167-175
readline functionality, 484
readlines method, 82
read_clipboard function, 167
read_csv function, 80, 167, 172, 274, 298
read_excel function, 167, 186
read_feather function, 168
read_fwf function, 167
read_hdf function, 167, 185
read_html function, 167, 180-183
read_json function, 167, 179
read_msgpack function, 167
read_pickle function, 167, 183
read_sas function, 168
read_sql function, 168, 190
read_stata function, 168
read_table function, 167, 172, 176
reduce method, 466
reduceat method, 467
reductions (aggregations), 111
references in Python, 32-34
regplot method, 281
regress function, 312
regular expressions

passes as delimiters, 171
string manipulation and, 213-216
reindex method, 136-138, 145, 157, 352
reload function, 499
remove method, 56, 66
remove_categories method, 372
remove_unused_categories method, 372
rename method, 202
rename_categories method, 372
reorder_categories method, 372
repeat function, 457
repeat method, 219
replace method, 200, 212-213, 219
requests package, 187
resample method, 327, 348-351, 377
resampling

defined, 348
downsampling and, 348-351
OHLC, 351
upsampling and, 348, 352
with periods, 353

%reset magic function, 29, 485
reset_index method, 250, 302

518 

| 

Index

reshape method, 103, 452
*rest syntax, 54
return statement, 69
reusing command history, 483
reversed function, 61
rfind method, 213
rfloordiv method, 149
right join type, 229
rint function, 107
rjust method, 213
rmul method, 149
rollback method, 333
rollforward method, 333
rolling function, 355, 357
rolling_corr function, 360
row major order (C order), 454, 481
row_stack function, 456
rpow method, 149
rstrip method, 213, 219
rsub method, 149
%run magic function

about, 29
exceptions and, 79
interactive debugger and, 489, 492
IPython and, 17, 25-26
reusing command history with, 483

r_ object, 456

S
%S datetime format, 46, 319
s(tep) debugger command, 490
sample method, 207, 308
save function, 115, 478
savefig method, 267
savez function, 115
savez_compressed function, 116
scalar types in Python, 38-46, 93
scatter plot matrix, 281
scatter plots, 280
scikit-learn library, 7, 397-401
SciPy library, 6
scope of functions, 70
scripting languages, 2
Seabold, Skipper, 8
seaborn library, 269
search method, 214, 216
searching

binary searches of lists, 57
command history, 483

searchsorted method, 475
seed function, 119
seek method, 81, 83-84
semantics, language (see language semantics for

skipna method, 159
slice method, 219
slice notation, 58
slicing

Python)
semicolon (;), 31
sentinel value, 171, 191
sequence functions, 59-61
serialization (see storing data)
Series data structure
about, 4, 124-128
duplicate indexes example, 157
grouping with, 294
JSON data and, 180
operations between DataFrame and, 149
plot method arguments, 271
ranking data in, 155
sorting considerations, 154, 473
summary statistics methods for, 161

set comprehensions, 68
set function, 65, 277
set literals, 65
set operations, 65-67, 114
setattr function, 35
setdefault method, 64
setdiff1d method, 115
sets (data structures), 65-67
setxor1d method, 115
set_categories method, 372
set_index method, 248
set_title method, 263, 266
set_trace function, 491
set_value method, 145
set_xlabel method, 263
set_xlim method, 266
set_xticklabels method, 262
set_xticks method, 262
set_ylim method, 266
shape attribute, 88-89, 453
shell commands in IPython, 486
shift method, 332, 351
shifting time series data, 332-334
shuffle function, 119
side effects, 38
sign function, 107, 206
sin function, 107
sinh function, 107
size method, 291
skew method, 160

lists, 58
ndarrays, 94-98
strings, 41
Smith, Nathaniel, 8
Social Security Administration (SSA), 419
software development tools for IPython

about, 487
basic profiling, 494-496
interactive debugger, 488-492
profiling functions line by line, 496-498
timing code, 492-493

solve function, 118
sort method, 57, 60, 74, 113
sorted function, 57, 60
sorting considerations

finding elements in sorted arrays, 475
hierarchical indexing, 224
in-place sorts, 57, 471
indirect sorts, 472
missing data, 154
NumPy library, 113, 471-476
pandas library, 153-156, 473, 476
partially sorting arrays, 474
stable sorting, 474
sort_index method, 153
sort_values method, 154, 473
spaces, structuring code with, 30
split concatenation function, 456
split function, 455
split method, 178, 211, 213-214, 216, 219
split-apply-combine

about, 288
applying, 302-312
filling missing values with group-specific

values, 306

group weighted average and correlation, 310
group-wise linear regression, 312
quantile and bucket analysis, 305
random sampling and permutation, 308
suppressing group keys, 304

SQL (structured query language), 287
SQLAlchemy project, 190
sqlite3 module, 188
sqrt function, 107
square brackets [], 52, 54

Index 

| 

519

square function, 107
SSA (Social Security Administration), 419
stable sorting, 474
stack method, 243
stacked format, 246
stacking operation, 227, 236
start index, 58
startswith method, 213, 218
Stata file format, 168
statistical methods, 111-112
statsmodels library
about, 8, 393
estimating linear models, 393-396
estimating time series processes, 396
OLS regression and, 312

std method, 112, 160, 296
step index, 59
stop index, 58
storing data

in binary format, 183-187
in databases, 247
ndarray object, 480

str data type, 39, 43
str function, 40, 43, 319
strftime method, 45, 319
strides/strided view, 449
strings

concatenating, 41
converting between datetime and, 319-321
converting Python objects to, 40
data types for, 39-42
formatting, 41
manipulating, 211-219
methods for, 211-213
regular expressions and, 213-216
slicing, 41
vectorized methods in pandas, 216-219

string_ data type, 91
strip method, 211, 213, 219
strongly typed language, 33
strptime function, 45, 320
structured arrays, 469-471
structured data, 1
sub method, 149, 215, 216
subn method, 216
subplots

about, 255-259
drawing on, 265-267

subplots method, 257

520 

| 

Index

subplots_adjust method, 258
subsetting time series data, 323
subtract function, 107
sum method, 112, 158, 160, 296, 466
summary method, 395
summary statistics
about, 158-160
by level, 225
correlation and covariance, 160-162
methods for, 162-165

svd function, 118
swapaxes method, 105
swapping axes in arrays, 103
symmetric_difference method, 66
symmetric_difference_update method, 66
syntactic sugar, 14
sys module, 81, 175

T
T attribute, 103
tab completion in IPython, 21-23
tabs, structuring code with, 30
take method, 207, 364, 459
tan function, 107
tanh function, 107
Taylor, Jonathan, 8
tell method, 81, 83
ternary expressions, 49
text editors, 11
text files

reading, 167-175
text mode for files, 82-83
writing to, 167-176

text function, 265
TextParser class, 174
tick mark selection in matplotlib, 261-263
tile function, 457
time data type, 44, 319
%time magic function, 29, 492
time module, 318
time series data
about, 317
basics overview, 322-323
date offsets and, 330, 333-334
estimating time series processes, 396
frequences and, 329
frequencies and, 330, 348-354
indexing and, 323
moving window functions, 354-362

periods in, 339-347
resampling, 348-354
selecting, 323
shifting, 332-334
subsetting, 323
time zone handling, 335-339
with duplicate indexes, 326

time zones

transposing arrays, 103
truncate method, 325
try/except blocks, 77-79
tuples (data structures)

about, 51
methods for, 54
nested, 53
unpacking, 53

about, 335
converting data to, 336
localizing data to, 335
operations between different, 339
operations with timestamp objects, 338
USA.gov dataset example, 404-413

two-language problem, 3
type casting, 43
type inference in functions, 168
TypeError exception, 78
tzinfo data type, 319
tz_convert method, 336

time, programmer versus CPU, 3
timedelta data type, 318-319
TimeGrouper object, 378
%timeit magic function, 29, 481, 492
Timestamp object, 322, 333, 338
timestamps

converting periods to/from, 344
defined, 317
operations with time-zoneaware objects,

338

timezone method, 335
timing code, 492-493
top function, 303
to_csv method, 175
to_datetime method, 320
to_excel method, 187
to_json method, 180
to_period method, 344
to_pickle method, 183
to_timestamp method, 345
trace function, 117
transform method, 373-376
transforming data
about, 197
computing indicator/dummy variables,

208-211

detecting and filtering outliers, 205
discretization and binning, 203
in Patsy formulas, 389
permutation and random sampling, 206
removing duplicates, 197
renaming axis indexes, 201
replacing values, 200
using functions or mapping, 198

transpose method, 103

U
%U datetime format, 46, 320
u(p) debugger command, 490
ufuncs (see universal functions)
uint16 data type, 91
uint32 data type, 91
uint64 data type, 91
uint8 data type, 91
unary universal functions, 106, 107
underscore (_), 22, 54, 451
undescore (_), 484
Unicode standard, 40, 42, 83
unicode_ data type, 91
uniform function, 119
union method, 65-66, 136
union1d method, 115
unique method, 114-115, 136, 162, 164, 363
universal functions

applying and mapping, 151
comprehensive overview, 105-108
creating custom objects with Numba, 478
instance methods, 466-468
writing in Python, 468

unpacking tuples, 53
unstack method, 243
unwrapped group operation, 376
update method, 63, 66
updating packages, 10
upper method, 213, 218
upsampling, 348, 352
US baby names dataset example, 419-434
US Federal Election Commission database

example, 440-448

USA.gov dataset example, 403-413

Index 

| 

521

USDA food database example, 434-439
UTC (coordinated universal time), 335
UTF-8 encoding, 83

V
ValueError exception, 77, 92
values attribute, 133
values method, 62, 315
values property, 384
value_count method, 203
value_counts method, 162, 274, 363
var method, 112, 160, 296
variables

dummy, 208-211, 372, 386, 391
function scope and, 70
in Python, 32-34
indicator, 208-211
input, 484
output, 484
shell commands and, 486

vectorization, 93
vectorize function, 468, 478
vectorized string methods in pandas, 216-219
visualization tools, 285
vsplit function, 456
vstack function, 455

W
%w datetime format, 46, 319
%W datetime format, 46, 320
w(here) debugger command, 490
Waskom, Michael, 269
Wattenberg, Laura, 430
Web APIs, pandas interacting with, 187
Web scraping, 180-183
where function, 109, 241
while loops, 48
whitespace

regular expression describing, 214

structuring code with, 30
trimming around figures, 267

%who magic function, 29
%whos magic function, 29
%who_ls magic function, 29
Wickham, Hadley, 184, 288, 419
wildcard expressions, 24
Williams, Ashley, 434
Windows, setting up Python on, 9
with statement, 81
wrangling (see data wrangling)
write method, 82
write-only mode for files, 82
writelines method, 82-83
writing data in text format, 167-176

X
%x datetime format, 321
%X datetime format, 321
%xdel magic function, 29, 485
xlim method, 262
xlrd package, 186
XLS files, 186
XLSX files, 186
XML files, 180-183
%xmode magic function, 79

Y
%Y datetime format, 45, 319
%y datetime format, 45, 319
yield keyword, 75

Z
%z datetime format, 46, 320
&#34;zero-copy&#34; array views, 450
zeros function, 89-90
zeros_like function, 90
zip function, 60

522 

| 

Index


</pre>
</div>
</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[56]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># create an instance of tokenizer using NLTK ResexpTokenizer </span>
<span class="n">tokenizer</span> <span class="o">=</span> <span class="n">RegexpTokenizer</span><span class="p">(</span><span class="s1">'\w+'</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[57]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#tokenize the text read from PDF</span>
<span class="n">tokens</span> <span class="o">=</span> <span class="n">tokenizer</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[58]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Find the Frequency Distribution</span>
<span class="n">freqdist</span> <span class="o">=</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[59]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Find words whose length is greater than 5 and frequency greate than 20</span>
<span class="n">long_frequent_words</span> <span class="o">=</span> <span class="p">[</span><span class="n">words</span> <span class="k">for</span> <span class="n">words</span> <span class="ow">in</span> <span class="n">tokens</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">freqdist</span><span class="p">[</span><span class="n">words</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">6</span> <span class="p">]</span>
</pre></div>

     </div>
</div>
</div>
</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[60]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">long_frequent_words</span>
</pre></div>

     </div>
</div>
</div>
</div>

<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[60]:</div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>[&#39;Wrangling&#39;,
 &#39;Preliminaries&#39;,
 &#39;Essential&#39;,
 &#39;Libraries&#39;,
 &#39;matplotlib&#39;,
 &#39;statsmodels&#39;,
 &#39;Development&#39;,
 &#39;Notebooks&#39;,
 &#39;Structures&#39;,
 &#39;Functions&#39;,
 &#39;Structures&#39;,
 &#39;Sequences&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Returning&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Conclusion&#39;,
 &#39;Vectorized&#39;,
 &#39;Computation&#39;,
 &#39;Multidimensional&#39;,
 &#39;Arithmetic&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Operations&#39;,
 &#39;Conclusion&#39;,
 &#39;Introduction&#39;,
 &#39;Structures&#39;,
 &#39;DataFrame&#39;,
 &#39;Essential&#39;,
 &#39;Functionality&#39;,
 &#39;Filtering&#39;,
 &#39;Arithmetic&#39;,
 &#39;Computing&#39;,
 &#39;Statistics&#39;,
 &#39;Conclusion&#39;,
 &#39;Microsoft&#39;,
 &#39;Interacting&#39;,
 &#39;Interacting&#39;,
 &#39;Conclusion&#39;,
 &#39;Preparation&#39;,
 &#39;Filtering&#39;,
 &#39;Transformation&#39;,
 &#39;Filtering&#39;,
 &#39;Computing&#39;,
 &#39;Manipulation&#39;,
 &#39;Vectorized&#39;,
 &#39;Functions&#39;,
 &#39;Conclusion&#39;,
 &#39;Wrangling&#39;,
 &#39;Hierarchical&#39;,
 &#39;Statistics&#39;,
 &#39;DataFrame&#39;,
 &#39;Combining&#39;,
 &#39;DataFrame&#39;,
 &#39;Combining&#39;,
 &#39;Reshaping&#39;,
 &#39;Reshaping&#39;,
 &#39;Hierarchical&#39;,
 &#39;Conclusion&#39;,
 &#39;Visualization&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;Categorical&#39;,
 &#39;Visualization&#39;,
 &#39;Conclusion&#39;,
 &#39;Aggregation&#39;,
 &#39;Operations&#39;,
 &#39;Functions&#39;,
 &#39;Aggregation&#39;,
 &#39;Returning&#39;,
 &#39;Conclusion&#39;,
 &#39;Frequencies&#39;,
 &#39;Frequencies&#39;,
 &#39;Conversion&#39;,
 &#39;Operations&#39;,
 &#39;Timestamp&#39;,
 &#39;Operations&#39;,
 &#39;Arithmetic&#39;,
 &#39;Frequency&#39;,
 &#39;Conversion&#39;,
 &#39;Quarterly&#39;,
 &#39;Frequencies&#39;,
 &#39;PeriodIndex&#39;,
 &#39;Resampling&#39;,
 &#39;Frequency&#39;,
 &#39;Conversion&#39;,
 &#39;Resampling&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Functions&#39;,
 &#39;Conclusion&#39;,
 &#39;Categorical&#39;,
 &#39;Categorical&#39;,
 &#39;Categorical&#39;,
 &#39;Resampling&#39;,
 &#39;Conclusion&#39;,
 &#39;Introduction&#39;,
 &#39;Libraries&#39;,
 &#39;Categorical&#39;,
 &#39;Introduction&#39;,
 &#39;statsmodels&#39;,
 &#39;Introduction&#39;,
 &#39;MovieLens&#39;,
 &#39;Commission&#39;,
 &#39;Statistics&#39;,
 &#39;Statistics&#39;,
 &#39;Conclusion&#39;,
 &#39;Manipulation&#39;,
 &#39;Reshaping&#39;,
 &#39;Broadcasting&#39;,
 &#39;Broadcasting&#39;,
 &#39;Broadcasting&#39;,
 &#39;Multidimensional&#39;,
 &#39;searchsorted&#39;,
 &#39;Functions&#39;,
 &#39;Interacting&#39;,
 &#39;Development&#39;,
 &#39;Development&#39;,
 &#39;Conclusion&#39;,
 &#39;libraries&#39;,
 &#39;introduce&#39;,
 &#39;including&#39;,
 &#39;statsmodels&#39;,
 &#39;significant&#39;,
 &#39;following&#39;,
 &#39;conventions&#39;,
 &#39;extensions&#39;,
 &#39;databases&#39;,
 &#39;environment&#39;,
 &#39;variables&#39;,
 &#39;statements&#39;,
 &#39;available&#39;,
 &#39;documentation&#39;,
 &#39;significant&#39;,
 &#39;documentation&#39;,
 &#39;Preliminaries&#39;,
 &#39;concerned&#39;,
 &#39;processing&#39;,
 &#39;programming&#39;,
 &#39;programming&#39;,
 &#39;libraries&#39;,
 &#39;programming&#39;,
 &#39;structured&#39;,
 &#39;different&#39;,
 &#39;different&#39;,
 &#39;otherwise&#39;,
 &#39;relational&#39;,
 &#39;databases&#39;,
 &#39;delimited&#39;,
 &#39;Multidimensional&#39;,
 &#39;percentage&#39;,
 &#39;structured&#39;,
 &#39;structured&#39;,
 &#39;collection&#39;,
 &#39;frequency&#39;,
 &#39;Microsoft&#39;,
 &#39;programming&#39;,
 &#39;interpreted&#39;,
 &#39;languages&#39;,
 &#39;especially&#39;,
 &#39;languages&#39;,
 &#39;languages&#39;,
 &#39;interpreted&#39;,
 &#39;languages&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;community&#39;,
 &#39;scientific&#39;,
 &#39;important&#39;,
 &#39;languages&#39;,
 &#39;development&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;visualization&#39;,
 &#39;programming&#39;,
 &#39;libraries&#39;,
 &#39;excellent&#39;,
 &#39;applications&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;computing&#39;,
 &#39;libraries&#39;,
 &#39;integration&#39;,
 &#39;algorithms&#39;,
 &#39;execution&#39;,
 &#39;Preliminaries&#39;,
 &#39;computational&#39;,
 &#39;sometimes&#39;,
 &#39;computing&#39;,
 &#39;development&#39;,
 &#39;significant&#39;,
 &#39;excellent&#39;,
 &#39;environment&#39;,
 &#39;analytical&#39;,
 &#39;applications&#39;,
 &#39;interpreted&#39;,
 &#39;programming&#39;,
 &#39;application&#39;,
 &#39;frequency&#39;,
 &#39;programming&#39;,
 &#39;performance&#39;,
 &#39;applications&#39;,
 &#39;applications&#39;,
 &#39;interpreter&#39;,
 &#39;interpreter&#39;,
 &#39;executing&#39;,
 &#39;processing&#39;,
 &#39;applications&#39;,
 &#39;extensions&#39;,
 &#39;Essential&#39;,
 &#39;Libraries&#39;,
 &#39;libraries&#39;,
 &#39;throughout&#39;,
 &#39;numerical&#39;,
 &#39;structures&#39;,
 &#39;algorithms&#39;,
 &#39;scientific&#39;,
 &#39;applications&#39;,
 &#39;numerical&#39;,
 &#39;efficient&#39;,
 &#39;multidimensional&#39;,
 &#39;Functions&#39;,
 &#39;computations&#39;,
 &#39;operations&#39;,
 &#39;operations&#39;,
 &#39;transform&#39;,
 &#39;generation&#39;,
 &#39;extensions&#39;,
 &#39;structures&#39;,
 &#39;computational&#39;,
 &#39;processing&#39;,
 &#39;capabilities&#39;,
 &#39;libraries&#39;,
 &#39;numerical&#39;,
 &#39;efficient&#39;,
 &#39;structures&#39;,
 &#39;libraries&#39;,
 &#39;representation&#39;,
 &#39;numerical&#39;,
 &#39;computing&#39;,
 &#39;structure&#39;,
 &#39;structures&#39;,
 &#39;functions&#39;,
 &#39;structured&#39;,
 &#39;DataFrame&#39;,
 &#39;structure&#39;,
 &#39;dimensional&#39;,
 &#39;performance&#39;,
 &#39;computing&#39;,
 &#39;manipulation&#39;,
 &#39;capabilities&#39;,
 &#39;relational&#39;,
 &#39;databases&#39;,
 &#39;functionality&#39;,
 &#39;aggregations&#39;,
 &#39;manipulation&#39;,
 &#39;Preliminaries&#39;,
 &#39;preparation&#39;,
 &#39;important&#39;,
 &#39;structures&#39;,
 &#39;alignment&#39;,
 &#39;resulting&#39;,
 &#39;differently&#39;,
 &#39;different&#39;,
 &#39;functionality&#39;,
 &#39;structures&#39;,
 &#39;Arithmetic&#39;,
 &#39;operations&#39;,
 &#39;reductions&#39;,
 &#39;relational&#39;,
 &#39;operations&#39;,
 &#39;databases&#39;,
 &#39;development&#39;,
 &#39;candidate&#39;,
 &#39;structures&#39;,
 &#39;providing&#39;,
 &#39;functionality&#39;,
 &#39;analytics&#39;,
 &#39;especially&#39;,
 &#39;functionality&#39;,
 &#39;generated&#39;,
 &#39;statistical&#39;,
 &#39;computing&#39;,
 &#39;DataFrame&#39;,
 &#39;programming&#39;,
 &#39;typically&#39;,
 &#39;structured&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;producing&#39;,
 &#39;dimensional&#39;,
 &#39;visualizations&#39;,
 &#39;visualization&#39;,
 &#39;libraries&#39;,
 &#39;available&#39;,
 &#39;programmers&#39;,
 &#39;matplotlib&#39;,
 &#39;generally&#39;,
 &#39;Essential&#39;,
 &#39;Libraries&#39;,
 &#39;interactive&#39;,
 &#39;interpreter&#39;,
 &#39;important&#39;,
 &#39;computational&#39;,
 &#39;analytical&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;programming&#39;,
 &#39;languages&#39;,
 &#39;operating&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;programming&#39;,
 &#39;languages&#39;,
 &#39;programming&#39;,
 &#39;environment&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;interactive&#39;,
 &#39;programming&#39;,
 &#39;languages&#39;,
 &#39;notebooks&#39;,
 &#39;especially&#39;,
 &#39;visualization&#39;,
 &#39;providing&#39;,
 &#39;programming&#39;,
 &#39;languages&#39;,
 &#39;implemented&#39;,
 &#39;languages&#39;,
 &#39;including&#39;,
 &#39;notebooks&#39;,
 &#39;containing&#39;,
 &#39;collection&#39;,
 &#39;different&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;Preliminaries&#39;,
 &#39;integration&#39;,
 &#39;algorithms&#39;,
 &#39;processing&#39;,
 &#39;mathematical&#39;,
 &#39;functions&#39;,
 &#39;distributions&#39;,
 &#39;functions&#39;,
 &#39;distribution&#39;,
 &#39;functions&#39;,
 &#39;statistical&#39;,
 &#39;statistics&#39;,
 &#39;computational&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;applications&#39;,
 &#39;programmers&#39;,
 &#39;regression&#39;,
 &#39;regression&#39;,
 &#39;selection&#39;,
 &#39;selection&#39;,
 &#39;statsmodels&#39;,
 &#39;programming&#39;,
 &#39;Essential&#39;,
 &#39;Libraries&#39;,
 &#39;statsmodels&#39;,
 &#39;statsmodels&#39;,
 &#39;statistical&#39;,
 &#39;statistics&#39;,
 &#39;implemented&#39;,
 &#39;programming&#39;,
 &#39;statsmodels&#39;,
 &#39;specification&#39;,
 &#39;statsmodels&#39;,
 &#39;statsmodels&#39;,
 &#39;algorithms&#39;,
 &#39;statistics&#39;,
 &#39;regression&#39;,
 &#39;regression&#39;,
 &#39;Visualization&#39;,
 &#39;statistical&#39;,
 &#39;statsmodels&#39;,
 &#39;statistical&#39;,
 &#39;providing&#39;,
 &#39;parameters&#39;,
 &#39;statsmodels&#39;,
 &#39;different&#39;,
 &#39;applications&#39;,
 &#39;development&#39;,
 &#39;environment&#39;,
 &#39;following&#39;,
 &#39;operating&#39;,
 &#39;distribution&#39;,
 &#39;encourage&#39;,
 &#39;Preliminaries&#39;,
 &#39;installer&#39;,
 &#39;recommend&#39;,
 &#39;available&#39;,
 &#39;application&#39;,
 &#39;interpreter&#39;,
 &#39;installed&#39;,
 &#39;installer&#39;,
 &#39;something&#39;,
 &#39;installer&#39;,
 &#39;installer&#39;,
 &#39;automatically&#39;,
 &#39;everything&#39;,
 &#39;application&#39;,
 &#39;depending&#39;,
 &#39;distributions&#39;,
 &#39;exception&#39;,
 &#39;installed&#39;,
 &#39;installer&#39;,
 &#39;installer&#39;,
 &#39;something&#39;,
 &#39;distributions&#39;,
 &#39;installed&#39;,
 &#39;distributions&#39;,
 &#39;recommend&#39;,
 &#39;directory&#39;,
 &#39;installer&#39;,
 &#39;directory&#39;,
 &#39;modifying&#39;,
 &#39;something&#39;,
 &#39;additional&#39;,
 &#39;distribution&#39;,
 &#39;installed&#39;,
 &#39;following&#39;,
 &#39;throughout&#39;,
 &#39;environment&#39;,
 &#39;Preliminaries&#39;,
 &#39;scientific&#39;,
 &#39;community&#39;,
 &#39;compatible&#39;,
 &#39;development&#39;,
 &#39;including&#39;,
 &#39;encourage&#39;,
 &#39;compatible&#39;,
 &#39;differently&#39;,
 &#39;Development&#39;,
 &#39;development&#39;,
 &#39;environment&#39;,
 &#39;typically&#39;,
 &#39;notebooks&#39;,
 &#39;interactively&#39;,
 &#39;particular&#39;,
 &#39;manipulations&#39;,
 &#39;Libraries&#39;,
 &#39;excellent&#39;,
 &#39;scientific&#39;,
 &#39;generally&#39;,
 &#39;questions&#39;,
 &#39;questions&#39;,
 &#39;statsmodels&#39;,
 &#39;questions&#39;,
 &#39;generally&#39;,
 &#39;questions&#39;,
 &#39;scientific&#39;,
 &#39;questions&#39;,
 &#39;conferences&#39;,
 &#39;programmers&#39;,
 &#39;programmers&#39;,
 &#39;encourage&#39;,
 &#39;conferences&#39;,
 &#39;available&#39;,
 &#39;conferences&#39;,
 &#39;respectively&#39;,
 &#39;computing&#39;,
 &#39;conferences&#39;,
 &#39;respectively&#39;,
 &#39;conferences&#39;,
 &#39;conferences&#39;,
 &#39;notebooks&#39;,
 &#39;Preliminaries&#39;,
 &#39;remainder&#39;,
 &#39;introduce&#39;,
 &#39;matplotlib&#39;,
 &#39;structured&#39;,
 &#39;different&#39;,
 &#39;generally&#39;,
 &#39;different&#39;,
 &#39;Interacting&#39;,
 &#39;Preparation&#39;,
 &#39;combining&#39;,
 &#39;reshaping&#39;,
 &#39;transforming&#39;,
 &#39;Transformation&#39;,
 &#39;mathematical&#39;,
 &#39;statistical&#39;,
 &#39;operations&#39;,
 &#39;aggregating&#39;,
 &#39;variables&#39;,
 &#39;statistical&#39;,
 &#39;algorithms&#39;,
 &#39;computational&#39;,
 &#39;interactive&#39;,
 &#39;visualizations&#39;,
 &#39;notebooks&#39;,
 &#39;environment&#39;,
 &#39;everything&#39;,
 &#39;necessary&#39;,
 &#39;community&#39;,
 &#39;conventions&#39;,
 &#39;matplotlib&#39;,
 &#39;statsmodels&#39;,
 &#39;reference&#39;,
 &#39;considered&#39;,
 &#39;everything&#39;,
 &#39;programming&#39;,
 &#39;wrangling&#39;,
 &#39;structured&#39;,
 &#39;description&#39;,
 &#39;something&#39;,
 &#39;convenient&#39;,
 &#39;Preliminaries&#39;,
 &#39;Notebooks&#39;,
 &#39;available&#39;,
 &#39;libraries&#39;,
 &#39;statsmodels&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;computational&#39;,
 &#39;excellent&#39;,
 &#39;programming&#39;,
 &#39;contained&#39;,
 &#39;important&#39;,
 &#39;structures&#39;,
 &#39;libraries&#39;,
 &#39;manipulation&#39;,
 &#39;information&#39;,
 &#39;necessary&#39;,
 &#39;encourage&#39;,
 &#39;notebooks&#39;,
 &#39;documentation&#39;,
 &#39;functions&#39;,
 &#39;analytics&#39;,
 &#39;preparation&#39;,
 &#39;structured&#39;,
 &#39;recommend&#39;,
 &#39;different&#39;,
 &#39;environment&#39;,
 &#39;programming&#39;,
 &#39;recommend&#39;,
 &#39;potentially&#39;,
 &#39;excellent&#39;,
 &#39;programming&#39;,
 &#39;interpreted&#39;,
 &#39;interpreter&#39;,
 &#39;statement&#39;,
 &#39;interactive&#39;,
 &#39;interpreter&#39;,
 &#39;information&#39;,
 &#39;expressions&#39;,
 &#39;interpreter&#39;,
 &#39;Notebooks&#39;,
 &#39;executing&#39;,
 &#39;following&#39;,
 &#39;directory&#39;,
 &#39;programmers&#39;,
 &#39;scientific&#39;,
 &#39;computing&#39;,
 &#39;interpreter&#39;,
 &#39;notebooks&#39;,
 &#39;notebooks&#39;,
 &#39;functionality&#39;,
 &#39;specified&#39;,
 &#39;interactively&#39;,
 &#39;information&#39;,
 &#39;Introduction&#39;,
 &#39;reference&#39;,
 &#39;introduce&#39;,
 &#39;interpreter&#39;,
 &#39;information&#39;,
 &#39;Introduction&#39;,
 &#39;reference&#39;,
 &#39;arbitrary&#39;,
 &#39;statements&#39;,
 &#39;statements&#39;,
 &#39;statement&#39;,
 &#39;dictionary&#39;,
 &#39;interpreter&#39;,
 &#39;arbitrary&#39;,
 &#39;visualizations&#39;,
 &#39;Notebooks&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;programming&#39;,
 &#39;underlying&#39;,
 &#39;notebooks&#39;,
 &#39;directory&#39;,
 &#39;automatically&#39;,
 &#39;computing&#39;,
 &#39;environment&#39;,
 &#39;encourage&#39;,
 &#39;something&#39;,
 &#39;extension&#39;,
 &#39;contained&#39;,
 &#39;including&#39;,
 &#39;evaluated&#39;,
 &#39;directory&#39;,
 &#39;notebooks&#39;,
 &#39;Notebooks&#39;,
 &#39;different&#39;,
 &#39;interpreter&#39;,
 &#39;completion&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;expressions&#39;,
 &#39;namespace&#39;,
 &#39;variables&#39;,
 &#39;functions&#39;,
 &#39;characters&#39;,
 &#39;variables&#39;,
 &#39;attributes&#39;,
 &#39;timedelta&#39;,
 &#39;attributes&#39;,
 &#39;attributes&#39;,
 &#39;completion&#39;,
 &#39;configuration&#39;,
 &#39;completion&#39;,
 &#39;interactive&#39;,
 &#39;attributes&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;movielens&#39;,
 &#39;functionality&#39;,
 &#39;completion&#39;,
 &#39;completion&#39;,
 &#39;arguments&#39;,
 &#39;including&#39;,
 &#39;Notebooks&#39;,
 &#39;functions&#39;,
 &#39;arguments&#39;,
 &#39;docstring&#39;,
 &#39;add_numbers&#39;,
 &#39;arguments&#39;,
 &#39;docstring&#39;,
 &#39;add_numbers&#39;,
 &#39;add_numbers&#39;,
 &#39;arguments&#39;,
 &#39;add_numbers&#39;,
 &#39;add_numbers&#39;,
 &#39;add_numbers&#39;,
 &#39;arguments&#39;,
 &#39;namespace&#39;,
 &#39;characters&#39;,
 &#39;expression&#39;,
 &#39;functions&#39;,
 &#39;namespace&#39;,
 &#39;Notebooks&#39;,
 &#39;environment&#39;,
 &#39;following&#39;,
 &#39;namespace&#39;,
 &#39;variables&#39;,
 &#39;variables&#39;,
 &#39;functions&#39;,
 &#39;exception&#39;,
 &#39;arguments&#39;,
 &#39;variables&#39;,
 &#39;interactive&#39;,
 &#39;namespace&#39;,
 &#39;execution&#39;,
 &#39;interpreter&#39;,
 &#39;clipboard&#39;,
 &#39;following&#39;,
 &#39;application&#39;,
 &#39;functions&#39;,
 &#39;clipboard&#39;,
 &#39;Notebooks&#39;,
 &#39;executing&#39;,
 &#39;executing&#39;,
 &#39;shortcuts&#39;,
 &#39;interacting&#39;,
 &#39;shortcuts&#39;,
 &#39;illustration&#39;,
 &#39;shortcuts&#39;,
 &#39;shortcuts&#39;,
 &#39;Description&#39;,
 &#39;clipboard&#39;,
 &#39;executing&#39;,
 &#39;beginning&#39;,
 &#39;character&#39;,
 &#39;character&#39;,
 &#39;notebooks&#39;,
 &#39;shortcuts&#39;,
 &#39;shortcuts&#39;,
 &#39;encourage&#39;,
 &#39;execution&#39;,
 &#39;statement&#39;,
 &#39;multiplication&#39;,
 &#39;additional&#39;,
 &#39;breakpoint&#39;,
 &#39;statement&#39;,
 &#39;statement&#39;,
 &#39;interactive&#39;,
 &#39;executing&#39;,
 &#39;statements&#39;,
 &#39;optionally&#39;,
 &#39;breakpoint&#39;,
 &#39;exception&#39;,
 &#39;interactively&#39;,
 &#39;exception&#39;,
 &#39;automatically&#39;,
 &#39;exception&#39;,
 &#39;positional&#39;,
 &#39;arguments&#39;,
 &#39;statement&#39;,
 &#39;arguments&#39;,
 &#39;breakpoint&#39;,
 &#39;Notebooks&#39;,
 &#39;functions&#39;,
 &#39;functions&#39;,
 &#39;functions&#39;,
 &#39;documentation&#39;,
 &#39;encourage&#39;,
 &#39;available&#39;,
 &#39;interactive&#39;,
 &#39;computing&#39;,
 &#39;development&#39;,
 &#39;frequently&#39;,
 &#39;statement&#39;,
 &#39;statement&#39;,
 &#39;statement&#39;,
 &#39;Description&#39;,
 &#39;documentation&#39;,
 &#39;available&#39;,
 &#39;interactive&#39;,
 &#39;exception&#39;,
 &#39;optionally&#39;,
 &#39;exception&#39;,
 &#39;clipboard&#39;,
 &#39;variables&#39;,
 &#39;interactive&#39;,
 &#39;namespace&#39;,
 &#39;statement&#39;,
 &#39;execution&#39;,
 &#39;statement&#39;,
 &#39;statement&#39;,
 &#39;execution&#39;,
 &#39;execution&#39;,
 &#39;variables&#39;,
 &#39;interactive&#39;,
 &#39;namespace&#39;,
 &#39;information&#39;,
 &#39;references&#39;,
 &#39;analytical&#39;,
 &#39;computing&#39;,
 &#39;visualization&#39;,
 &#39;interface&#39;,
 &#39;libraries&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;integration&#39;,
 &#39;important&#39;,
 &#39;otherwise&#39;,
 &#39;matplotlib&#39;,
 &#39;integration&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;different&#39;,
 &#39;matplotlib&#39;,
 &#39;matplotlib&#39;,
 &#39;programming&#39;,
 &#39;mechanics&#39;,
 &#39;structures&#39;,
 &#39;functions&#39;,
 &#39;whitespace&#39;,
 &#39;structure&#39;,
 &#39;languages&#39;,
 &#39;Notebooks&#39;,
 &#39;significant&#39;,
 &#39;whitespace&#39;,
 &#39;programmers&#39;,
 &#39;languages&#39;,
 &#39;recommend&#39;,
 &#39;automatically&#39;,
 &#39;different&#39;,
 &#39;programmers&#39;,
 &#39;recommend&#39;,
 &#39;otherwise&#39;,
 &#39;statements&#39;,
 &#39;statements&#39;,
 &#39;statements&#39;,
 &#39;generally&#39;,
 &#39;important&#39;,
 &#39;structure&#39;,
 &#39;interpreter&#39;,
 &#39;functions&#39;,
 &#39;programmers&#39;,
 &#39;preceding&#39;,
 &#39;particular&#39;,
 &#39;functions&#39;,
 &#39;parentheses&#39;,
 &#39;arguments&#39;,
 &#39;optionally&#39;,
 &#39;assigning&#39;,
 &#39;functions&#39;,
 &#39;following&#39;,
 &#39;Functions&#39;,
 &#39;positional&#39;,
 &#39;arguments&#39;,
 &#39;assigning&#39;,
 &#39;reference&#39;,
 &#39;languages&#39;,
 &#39;Notebooks&#39;,
 &#39;references&#39;,
 &#39;semantics&#39;,
 &#39;references&#39;,
 &#39;especially&#39;,
 &#39;variables&#39;,
 &#39;arguments&#39;,
 &#39;variables&#39;,
 &#39;therefore&#39;,
 &#39;following&#39;,
 &#39;references&#39;,
 &#39;languages&#39;,
 &#39;references&#39;,
 &#39;following&#39;,
 &#39;particular&#39;,
 &#39;namespace&#39;,
 &#39;information&#39;,
 &#39;TypeError&#39;,
 &#39;Traceback&#39;,
 &#39;TypeError&#39;,
 &#39;languages&#39;,
 &#39;converted&#39;,
 &#39;languages&#39;,
 &#39;concatenated&#39;,
 &#39;considered&#39;,
 &#39;following&#39;,
 &#39;formatting&#39;,
 &#39;important&#39;,
 &#39;different&#39;,
 &#39;particular&#39;,
 &#39;isinstance&#39;,
 &#39;isinstance&#39;,
 &#39;isinstance&#39;,
 &#39;isinstance&#39;,
 &#39;isinstance&#39;,
 &#39;Notebooks&#39;,
 &#39;typically&#39;,
 &#39;attributes&#39;,
 &#39;functions&#39;,
 &#39;startswith&#39;,
 &#39;languages&#39;,
 &#39;functions&#39;,
 &#39;functions&#39;,
 &#39;sometimes&#39;,
 &#39;implemented&#39;,
 &#39;alternative&#39;,
 &#39;TypeError&#39;,
 &#39;collection&#39;,
 &#39;functionality&#39;,
 &#39;functions&#39;,
 &#39;isinstance&#39;,
 &#39;extension&#39;,
 &#39;containing&#39;,
 &#39;following&#39;,
 &#39;some_module&#39;,
 &#39;variables&#39;,
 &#39;functions&#39;,
 &#39;some_module&#39;,
 &#39;directory&#39;,
 &#39;some_module&#39;,
 &#39;some_module&#39;,
 &#39;some_module&#39;,
 &#39;some_module&#39;,
 &#39;different&#39;,
 &#39;some_module&#39;,
 &#39;some_module&#39;,
 &#39;operators&#39;,
 &#39;operations&#39;,
 &#39;Notebooks&#39;,
 &#39;available&#39;,
 &#39;operators&#39;,
 &#39;references&#39;,
 &#39;operators&#39;,
 &#39;Description&#39;,
 &#39;remainder&#39;,
 &#39;Description&#39;,
 &#39;reference&#39;,
 &#39;reference&#39;,
 &#39;different&#39;,
 &#39;immutable&#39;,
 &#39;immutable&#39;,
 &#39;TypeError&#39;,
 &#39;Traceback&#39;,
 &#39;TypeError&#39;,
 &#39;explicitly&#39;,
 &#39;recommend&#39;,
 &#39;numerical&#39;,
 &#39;sometimes&#39;,
 &#39;Notebooks&#39;,
 &#39;Description&#39;,
 &#39;precision&#39;,
 &#39;precision&#39;,
 &#39;represented&#39;,
 &#39;precision&#39;,
 &#39;expressed&#39;,
 &#39;resulting&#39;,
 &#39;processing&#39;,
 &#39;characters&#39;,
 &#39;immutable&#39;,
 &#39;TypeError&#39;,
 &#39;Traceback&#39;,
 &#39;TypeError&#39;,
 &#39;operation&#39;,
 &#39;converted&#39;,
 &#39;characters&#39;,
 &#39;therefore&#39;,
 &#39;sequences&#39;,
 &#39;Notebooks&#39;,
 &#39;implemented&#39;,
 &#39;sequences&#39;,
 &#39;character&#39;,
 &#39;character&#39;,
 &#39;characters&#39;,
 &#39;characters&#39;,
 &#39;characters&#39;,
 &#39;Fortunately&#39;,
 &#39;characters&#39;,
 &#39;interpreted&#39;,
 &#39;characters&#39;,
 &#39;characters&#39;,
 &#39;formatting&#39;,
 &#39;important&#39;,
 &#39;mechanics&#39;,
 &#39;arguments&#39;,
 &#39;producing&#39;,
 &#39;arguments&#39;,
 &#39;parameters&#39;,
 &#39;formatting&#39;,
 &#39;available&#39;,
 &#39;resulting&#39;,
 &#39;recommend&#39;,
 &#39;documentation&#39;,
 &#39;processing&#39;,
 &#39;character&#39;,
 &#39;representation&#39;,
 &#39;different&#39;,
 &#39;Notebooks&#39;,
 &#39;expressions&#39;,
 &#39;functions&#39;,
 &#39;explicitly&#39;,
 &#39;arguments&#39;,
 &#39;information&#39;,
 &#39;equivalent&#39;,
 &#39;Notebooks&#39;,
 &#39;converted&#39;,
 &#39;aggregating&#39;,
 &#39;otherwise&#39;,
 &#39;immutable&#39;,
 &#39;difference&#39;,
 &#39;timedelta&#39;,
 &#39;timedelta&#39;,
 &#39;timedelta&#39;,
 &#39;timedelta&#39;,
 &#39;timedelta&#39;,
 &#39;timedelta&#39;,
 &#39;specification&#39;,
 &#39;compatible&#39;,
 &#39;Description&#39;,
 &#39;Description&#39;,
 &#39;considered&#39;,
 &#39;considered&#39;,
 &#39;programming&#39;,
 &#39;languages&#39;,
 &#39;statement&#39;,
 &#39;statement&#39;,
 &#39;condition&#39;,
 &#39;statement&#39;,
 &#39;optionally&#39;,
 &#39;condition&#39;,
 &#39;evaluated&#39;,
 &#39;Notebooks&#39;,
 &#39;evaluated&#39;,
 &#39;iterating&#39;,
 &#39;collection&#39;,
 &#39;collection&#39;,
 &#39;something&#39;,
 &#39;remainder&#39;,
 &#39;collection&#39;,
 &#39;variables&#39;,
 &#39;statement&#39;,
 &#39;something&#39;,
 &#39;condition&#39;,
 &#39;condition&#39;,
 &#39;explicitly&#39;,
 &#39;statement&#39;,
 &#39;implemented&#39;,
 &#39;whitespace&#39;,
 &#39;something&#39;,
 &#39;Notebooks&#39;,
 ...]</pre>
</div>

</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell   ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[61]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">FreqDist</span><span class="p">(</span><span class="n">long_frequent_words</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>

     </div>
</div>
</div>
</div>

<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>


<div class="jp-OutputArea jp-Cell-outputArea">

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt"></div>




<div class="jp-RenderedImage jp-OutputArea-output ">
<img src="data:image/png;base64,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"
class="
"
>
</div>

</div>

<div class="jp-OutputArea-child">

    
    <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[61]:</div>




<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>&lt;Axes: xlabel=&#39;Samples&#39;, ylabel=&#39;Counts&#39;&gt;</pre>
</div>

</div>

</div>

</div>

</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs  ">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">In&nbsp;[&nbsp;]:</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
     <div class="CodeMirror cm-s-jupyter">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

     </div>
</div>
</div>
</div>

</div>
</body>







</html>
